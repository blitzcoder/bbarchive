<!DOCTYPE html><html lang="en" ><head ><title >Stencil Mirror demo</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Stencil Mirror demo</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Stencil Mirror demo</a><br><br>
<a name="458491"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tom</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>Here's a Stencil Mirror demo for v1.88:<br><a href="http://www.tomspeed.com/stencil_mirror" target="_blank">http://www.tomspeed.com/stencil_mirror</a><br><br>Get all the files, copy the userlib contents to your blitz3d\userlibs folder. NOTE! these have changed since the shadow volume demo and are specific to this demo. (back up old dx7test files if you wish)<br><br>This is based off a DX7 SDK demo, some things to note:<br><br>ATI cards: It works on some, doesn't on others. Beakers new x800 with latest drivers works, bot_builders Radeon 9600 works. Lucids Radeon 9700 doesn't. (drivers??)<br><br>Works fine on NVidia cards. Works fine on Zeniths built in Intel chipset! :)<br><br>There's more than 1 way to do do stencil mirrors, dependant on the order you do render color/mirror/reversed mirror, this demo actualy uses 1 more render pass than I 'think' is needed, but I can't seem to get objects to render in front of the mirror without the last pass.<br><br>There's also a glitch when the mirror is at certain angles, dunno what's causing that yet, though I suspect it's something to do with me using User Defined Clipping Planes.<br><br>Stencil mirrors can be any shape, so long as it's flat on Z axis.<br><br>Speaking of which, you can do mirrors using no stencil and just clipping planes, but you'd be forced to use a 4 sided mirror, I'm trying that method next.<br><br>Go ahead and experiment with the renderstates!...and see some weird results :)<br><br>Cya!<br>Tom<br>p.s Thanks Mark for negative scaling!!! That saved me from doing a bunch of matrix maths to reverse the camera :) <br><br></td></tr></table><br>
<a name="458594"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >fredborg</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Very funky! <br><br></td></tr></table><br>
<a name="458599"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >mongia2</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> good work<br><br>mongia <br><br></td></tr></table><br>
<a name="458653"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ziltch</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Looks Great!! <br><br></td></tr></table><br>
<a name="458676"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >IPete2</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> OMG!  <br><br>Brilliant man!  Absolutely brilliant!  :)  <br><br>I am glad I looked at this now, you have achieved something very special here I think.  Tom you are beginning to show us what the hidden possibilities are for us using your dll...<br><br>Congrats!  I think it is a wondferful demo!<br><br>IPete2. <br><br></td></tr></table><br>
<a name="458685"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tom</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> The DLL just wraps a few extra DX7 calls :)<br><br>The tough part is figuring out the stencil stuff. As Skid suggested upon the release of 1.88, it's well worth getting the DX7 SDK for the included demos source, and reading up a little on how stencils work.<br><br>At the moment I have user defined clipping planes working, I use them in that mirror demo. Querying my card, it says I have 6 of them available to use.<br><br>I wonder if they'd be useful for use in portal rendering?<br><br>If you're not sure what they are, clipping planes prevent any geometry behind them from being rendered. For example, in the mirror demo, when rendering the mirrored view I didn't want to render any geometry behind the mirror, so I set a clipping plane to match the mirror plane exactly, and just render.<br><br>The whole multipass rendering deal is quite something to wrap your head around, especialy when we've been used to Renderworld:Flip :)<br><br><br>Tom <br><br></td></tr></table><br>
<a name="458692"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dock</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Looks fantastic. <br><br>I'm curious - what would happen if you applied a normal-map to this mirror surface? <br><br></td></tr></table><br>
<a name="458695"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzSupport</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well done -- runs fine here on Radeon 9800! <br><br></td></tr></table><br>
<a name="458699"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Dock - there isn't a mirror surface.  Its not a mesh or a texture. <br><br></td></tr></table><br>
<a name="458740"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Braincell</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Awesome. <br><br></td></tr></table><br>
<a name="458743"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Genexi2</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nice demo....how much faster would it be to use stencil buffers to create a mirror then using a cube-map?<br>(problem I find with cube-map is you need a 512x512 texture render at minimum for it to look nice...) <br><br></td></tr></table><br>
<a name="458833"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Beaker</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Stencils are a much better solution than cubemaps.  They give you an unpixelated reflection, they don't require a copy to texture, and stencils should run on much lesser cards than cubemaps require.<br><br>They should be significantly faster. <br><br></td></tr></table><br>
<a name="1173451"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hello,<br><br>Sorry to dig this old post.<br><br>Does anyone has the Stencil Mirror demo by Tom ?<br><br>If yes, can you please upload it on file hosting website or send it to my email address (see my profile)<br><br>Thanks ! :) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
