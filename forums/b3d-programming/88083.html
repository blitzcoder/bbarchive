<!DOCTYPE html><html lang="en" ><head ><title >Weapon Select</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Weapon Select</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Weapon Select</a><br><br>
<a name="999809"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Oiduts Studios</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> So i am trying to make a prop system for my game so i can pick up and store values which result in the character holding them. But there seems to be problems with it... it seems to work fine at first and the objects start to disappear and such. when i pick up an object it shows the type and what slot. I can change the slot by pressing the number keys. Right now there are only 2 objects and 2 slots. Can anyone spot any problems. I know the code is sloppy and i used weird collision stuff and no types but this is my first "game" and i am trying to do stuff that i can comprehend. I would love help from anyone.<br><br><pre class=code>
Function UpdateProps( p.Player )
	
	If KeyDown(2) Then WeaponSelect=1
	If KeyDown(3) Then WeaponSelect=2
	
	Select WeaponSelect
			
		Case 1
			If weaponslot1$&lt;&gt;"" Then objweild$=weaponslot1$
			
		Case 2
			If weaponslot2$&lt;&gt;"" Then objweild$=weaponslot2$
			
	End Select
	
playercollis=CountCollisions(p\entity)
If EntityCollided(p\entity,TYPE_AXE)&gt;0
	sendtext$="Pick up weapon?"
	AddWeapon(CollisionEntity(p\entity,playercollis),"axe")
Else
	sendtext$=axe+"-"+orange+"-"+WeaponSelect+"-"+objweild$
EndIf


If EntityCollided(p\entity,TYPE_ORANGE)&gt;0
	sendtext$="Pick up orange?"
	AddWeapon(CollisionEntity(p\entity,playercollis),"orange")
Else
	sendtext$=axe+"-"+orange+"-"+WeaponSelect+"-"+objweild$
EndIf

If  khj=1 Then DropWeapon()

End Function

Function AddWeapon(entityid,objtype$)
	
	If entityid&lt;&gt;land
		
		If WeaponSelect=1 And weaponslot1$="" Or WeaponSelect=2 And weaponslot2$=""
			
	Select objtype$
			
		Case "axe"
			
			Select WeaponSelect
					
				Case 1
					axe=1
					objweild$="axe"
					HideEntity entityid
					weaponslot1$="axe"
				Case 2
					axe=1
					objweild$="axe"
					HideEntity entityid
					weaponslot2$="axe"
					
			End Select
			
		Case "orange"
			orange=1
			objweild$="orange"
			HideEntity entityid
			Select WeaponSelect
					
				Case 1
					orange=1
					objweild$="orange"
					HideEntity entityid
					weaponslot1$="orange"
				Case 2
					orange=1
					objweild$="orange"
					HideEntity entityid
					weaponslot2$="orange"
					
			End Select
			
	End Select
	
EndIf
	
EndIf
	
End Function

Function DropWeapon()
	
	
		Select objweild$
				
			Case "axe"
				ShowEntity axe1
				PositionEntity axe1,playerx,playery,playerz
				axe=0
				
				Select WeaponSelect
						
					Case 1
						weaponslot1$=""
					Case 2
						weaponslot2$=""
				End Select
				
				objweild$=""
				
			Case "orange"
				ShowEntity orange1
				PositionEntity orange1,playerx,playery,playerz
				orange=0
				
				Select WeaponSelect
						
					Case 1
						weaponslot1$=""
					Case 2
						weaponslot2$=""
				End Select
				
				objweild$=""
				
		End Select
		
End Function
</pre> <br><br></td></tr></table><br>
<a name="999863"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >neoshaman</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Comment your code :) <br>Should be a reflex, especially if it's your first game :) <br><br></td></tr></table><br>
<a name="999879"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Oiduts Studios</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Edit : Never mind again i do need help :) <br><br></td></tr></table><br>
<a name="1000307"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Oiduts Studios</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is this good?<br><br><pre class=code>
;update weapons/objects(player type)
Function UpdateProps( p.Player )
	
	;choose between weapon slots
	If KeyDown(2) Then WeaponSelect=1
	If KeyDown(3) Then WeaponSelect=2
	
	Select WeaponSelect
			
		Case 1
			If weaponslot1$&lt;&gt;"" Then objweild$=weaponslot1$
			
		Case 2
			If weaponslot2$&lt;&gt;"" Then objweild$=weaponslot2$
			
	End Select
	
	;p\entity is player mesh
	playercollis=CountCollisions(p\entity)
	If EntityCollided(p\entity,TYPE_AXE)&gt;0
		;a function that displays text
		sendtext$="Pick up weapon?"
		AddWeapon(CollisionEntity(p\entity,playercollis),"axe")
	Else
	;a function that displays text
		sendtext$=axe+"-"+orange+"-"+WeaponSelect+"-"+objweild$
	EndIf
	
	
	If EntityCollided(p\entity,TYPE_ORANGE)&gt;0
				;a function that displays text
		sendtext$="Pick up orange?"
		AddWeapon(CollisionEntity(p\entity,playercollis),"orange")
	Else
	;a function that displays text
		sendtext$=axe+"-"+orange+"-"+WeaponSelect+"-"+objweild$
	EndIf
	
	;If key j hit Then...
	If  khj=1 Then DropWeapon()
	
End Function

Function AddWeapon(entityid,objtype$)
	
	;defines the weild variable and tells the program that you just picked
	;up a weapon and what slot it is in
	If entityid&lt;&gt;land
		
		If WeaponSelect=1 And weaponslot1$="" Or WeaponSelect=2 And weaponslot2$=""
			
			Select objtype$
					
				Case "axe"
					
					Select WeaponSelect
							
						Case 1
							axe=1
							objweild$="axe"
							HideEntity entityid
							weaponslot1$="axe"
						Case 2
							axe=1
							objweild$="axe"
							HideEntity entityid
							weaponslot2$="axe"
							
					End Select
					
				Case "orange"
					orange=1
					objweild$="orange"
					HideEntity entityid
					Select WeaponSelect
							
						Case 1
							orange=1
							objweild$="orange"
							HideEntity entityid
							weaponslot1$="orange"
						Case 2
							orange=1
							objweild$="orange"
							HideEntity entityid
							weaponslot2$="orange"
							
					End Select
					
			End Select
			
		EndIf
		
	EndIf
	
End Function

Function DropWeapon()
	
	;checks what the weilded object is and places objects on ground under player
	
	Select objweild$
			
		Case "axe"
			ShowEntity axe1
			PositionEntity axe1,playerx,playery,playerz
			axe=0
			
			Select WeaponSelect
					
				Case 1
					weaponslot1$=""
				Case 2
					weaponslot2$=""
			End Select
			
			objweild$=""
			
		Case "orange"
			ShowEntity orange1
			PositionEntity orange1,playerx,playery,playerz
			orange=0
			
			Select WeaponSelect
					
				Case 1
					weaponslot1$=""
				Case 2
					weaponslot2$=""
			End Select
			
			objweild$=""
			
	End Select
	
End Function
</pre> <br><br></td></tr></table><br>
<a name="1000535"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >neoshaman</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> i didn't understand your problem actually? what is it?<br>you cant select an objects? <br><br></td></tr></table><br>
<a name="1000585"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Oiduts Studios</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well i can pickup the items but when i keep dropping them and switching them to different slots sometimes a weapon disappears or randomly move to the players location... <br><br></td></tr></table><br>
<a name="1002343"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't now exactly what type of game this is going to be, but in a FPS or TPS I would suggest not to use Collision to pick a weapon up, it's just a waste of performence. Instead use EntityDistance. A pivot at your players feet location is handy for a number of things, including Dictance checks for things that should be picked up automaticly. Simply parse an array that holds the handles of the items and check the distances.<br><br>No idea about slots, dropping things etc. Maybe use a stack for these things. So when you drop something, all higher items on the stack will move down one slot. Every new item is put on top of the stack by default. Moving things from one slot to an other slot may be realized the same way: first by removing the item from the stack, then shrink the stack, then insert a new slot at the wanted position, then put the removed item into the new slot.<br><br>Not sure if I really do understand what you're talking about, anyway :)<br><br>Make sure to get rid of the "sometimes..randomly" problems. I think not to use Collisions + Types in situations where it's not neccessary anyway might help to do so. And don't use too much String Comparation. Instead use varaibles with names that are making sense. Eg. instead of If A$="Orange" try: Orange=123:If A=Orange etc. It's much faster. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
