<!DOCTYPE html><html lang="en" ><head ><title >Force Windows focus to Blitz?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Force Windows focus to Blitz?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Force Windows focus to Blitz?</a><br><br>
<a name="967322"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shifty Geezer</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is there any way I can force Window's input focus to Blitz? I'm using the old Accode Flash plugin (http://www.blitzbasic.com/Community/posts.php?topic=51053) which works nicely, but clicking in the Flash window steals focus and I can no longer input via keyboard or mouse in the Blitz portion of the screen! this makes interacting with the Flash aspect very limited. :( <br><br></td></tr></table><br>
<a name="967345"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warner</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Instead of using the standard keyboard commands, you could try GetASyncKeyState. It will tell you which keys are down, regardless if the window has focus or not. <br><br></td></tr></table><br>
<a name="968353"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Using WindowSetPos (I guess that's the one), an API command that can be declared in a Blitz userlib, will not only focus the keyboard input, but the entire window onscreen. Not sure if this is what you want. <br><br></td></tr></table><br>
<a name="968484"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shifty Geezer</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks jfk. That could do it, if I just move the window to its current position. Can you offer any pointers to linking Windows APIs, something i am utterly clueless about, and where I can look up these APIs?! Then I could dig around for other useful thingums. Cheers. <br><br></td></tr></table><br>
<a name="968548"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >chi</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="http://msdn.microsoft.com/en-us/library/aa383749%28VS.85%29.aspx" target="_blank">http://msdn.microsoft.com/en-us/library/aa383749%28VS.85%29.aspx</a><br>or<br><a href="http://allapi.mentalis.org/agnet/apiguide.shtml" target="_blank">http://allapi.mentalis.org/agnet/apiguide.shtml</a> <br><br></td></tr></table><br>
<a name="968551"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warner</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Still, GetASyncKeyState would be better, since it can be a bit disturbing for users if a window forces itself into focus. <br><br></td></tr></table><br>
<a name="968952"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Warner may be right in this case. It's always good to have the Windows API help file onboard, you may dl it eg. from here:<br><br><a href="http://www.carabez.com/downloads.html" target="_blank">http://www.carabez.com/downloads.html</a><br><br>At the bottom, win32api.zip. as well as the winapi constants that you'llneed too. The seven seals sotosay. <br><br></td></tr></table><br>
<a name="969163"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shifty Geezer</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm. I'll have a look at GetAsyncKeyState. At the moment mouse doesn't work in Blitz when it's lost focus, and clicking in the window doesn't restore it. But then if I'm stealing focus constantly, that'll mess up multitasking. Then again, you shouldn't be multitasking with my app anyhow ;)<br><br>Thanks for all suggestions. <br><br></td></tr></table><br>
<a name="969343"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warner</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> There is also an api command to read mouse coords: getCursorPos<br><a href="http://www.blitzbasic.com/Community/posts.php?topic=50372" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=50372</a> <br><br></td></tr></table><br>
<a name="980475"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shifty Geezer</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the info. I can read keys perfectly now. However, this throws up the problem of ASCII interpretation! If I determine through GetAsyncKeyState() that certain kesy are pressed, that'll correspond to different characters on different keyboards. eg. I think 'shift+2' is " on the UK keyboard but @ on the US keyboard.<br><br>Windows handles these conversions through it's keyboard structures, but I can't see how to access them. TranslateMessage etc. seem the right functions in principle but they talk of posting to a message queue. I cannot see any way to properly map individual key presses from GetAsnycKeyState() to the right, localised ASCII value.<br><br>Is there perhaps a layout structure that holds a map of keystates and characters that I could reference? I can't find such a think in the help file jfk EO-11110 so helpfully linked above, but it can get a bit spaghetti digging through there! <br><br></td></tr></table><br>
<a name="980518"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warner</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Maybe you could create a message structure, then use TranslateMessage, followed by GetKey() to read the ascii value?<br>Maybe this archive entry can help:<br><a href="http://www.blitzmax.com/codearcs/codearcs.php?code=2093" target="_blank">http://www.blitzmax.com/codearcs/codearcs.php?code=2093</a> <br><br></td></tr></table><br>
<a name="980545"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Shifty Geezer</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> That looks very promising, but I'm not getting anything from it. :( I've copied out the structures and eventHandler() function. I call the function and test for message responses with prints and stops at mouse clicks, key presses etc., but get nowt. Every frame I print the contents of w_message and it's blank. I've set the app hWnd in the w_message. <br><br>Even just trying this:<br><br>   i = api_PeekMessage(w_message, SystemProperty("appHWND"),0,256,0)<br><br>i never returns a non-zero value. Surely it should be recording key presses and mouse clicks? <br><br></td></tr></table><br>
<a name="980586"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warner</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> I was thinking along the lines of this:<br>1. Create a fake event, using the Type structure in the above archive entry.<br>2. Fill the event with the keycode you want to convert<br>3. Call TranslateMessage with this event<br>4. See if GetKey() returns anything <br><br></td></tr></table><br>
<a name="980597"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2009)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Warner, check ur mail <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
