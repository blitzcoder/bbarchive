<!DOCTYPE html><html lang="en" ><head ><title >loadanimseq and b3dpipeline</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >loadanimseq and b3dpipeline</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >loadanimseq and b3dpipeline</a><br><br>
<a name="1055329"></a>

<a name="1055343"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >vivaigiochi</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> look this code please (don't consider the parameters)<br><br>Function CreateEnemy.Enemy(filetex$,mesh$,x,y,speed)<br>	this.enemy=New Enemy<br>	;Stop<br>	this\model=LoadAnimMesh("media/topocammina.b3d")<br>	topo=this\model<br>	ScaleEntity topo,0.2,0.2,0.2<br>	boxtopo=FindChild(topo,"Box01")<br>	bracciodx=FindChild(topo,"bracciodx")<br>	bracciosx=FindChild(topo,"bracciosx")<br>	gambadx=FindChild(topo,"gambadx")<br>	gambasx=FindChild(topo,"gambasx")<br>	coda=FindChild(topo,"coda")<br>	<br>	k=LoadAnimSeq(topo,"media/topocammina.b3d")<br>	<br>	<br>	boxtopo=FindChild(topo,"Box01")<br>	Animate topo,1,0.2,1<br>	Animate boxtopo,1,0.2,1<br>	Animate bracciodx,1,0.2,1<br>	Animate bracciosx,1,0.2,1<br>	Animate gambadx,1,0.2,1<br>	Animate gambasx,1,0.2,1<br>	Animate coda,1,0.2,1<br>	this\dir=1<br>	this\state=0<br>	<br>	;PositionEntity topo,x1,y1,z1<br>	<br>	<br>	EntityType this\model,TYPE_ENEMY<br>	EntityRadius this\model,10,10<br>	ResetEntity this\model<br>	FreeImage(temp)<br>	Return this<br>End Function<br><br>b3d models used in this example works fine if used it in single.<br>obviously are the same model (bones and mesh) but why second animation don't work after loadanimseq.<br> hovewer what are the correct exportation mode into b3d pipeline because i have just tried several combination like only bones without mesh adn so on...<br><br><font class="tiny">Last edited 2010</font> <br><br></td></tr></table><br>
<a name="1055350"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Try changing your 'Animate' command.<br><br>I'm just guessing here, and I have limited experience with Animated Meshes, but on first Loading the Mesh, it would get an animation sequence by default (presumably as sequence 1 (or maybe sequence 0 unless 0 is used for errors only)<br>So when you LoadAnimSeq, you are adding a sequence, not overwriting the original.<br>Use the value 'k' that was returned for your Animate commands:<br><pre class=code>
Animate topo,1,0.2,k
Animate boxtopo,1,0.2,k
Animate bracciodx,1,0.2,k
Animate bracciosx,1,0.2,k
Animate gambadx,1,0.2,k
Animate gambasx,1,0.2,k
Animate coda,1,0.2,k</pre><br><br>Lastly, I'm pretty sure you wont need to use FindChild() again for the second series of animations, since the handles are defined already :) <br><br></td></tr></table><br>
<a name="1055357"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SLotman</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Also, you don't need to load the same B3D twice - just use ExtractAnimSeq to get the animation from the already loaded B3D file. <br><br></td></tr></table><br>
<a name="1055537"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >vivaigiochi</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok i know all of this, second load and findchild calls are not needed.<br>i have use the value returned from extractanimseq but nothing. <br><br></td></tr></table><br>
<a name="1055546"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't know how animations are storerd on meshes, but are you certain that it exists?<br><br>What does 'k' return? (If it'#s a handle, maybe it's not possible to tell if it's valid or not...? :S)<br><br>I'm just trying to think of ways in which to test 'where' the program may be going "wrong..." <br><br></td></tr></table><br>
<a name="1055691"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sake906</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ahhh... this problem.<br><br>I have had to deal a lot with how things work with b3d files and their animation sequences.<br><br>The key is to have your main mesh, with the "skin" modifier storing the bones and such, exported -without- having the bones selected (object wise) before exporting (to make sure, hide everything else in your scene so the exporter just exports that); the pipeline will automatically keep the bone nodes within the b3d file if you enable "Export Bones". Also, do not export animations for this main mesh.<br><br>Then you export each animation sequence individually by selecting the mesh with the "skin" modifier alone and exporting it, enable both "Export Bones" and "Export Animations". You may want to disable "Export Mesh" since that's not really needed for the sequences and will reduce file size.<br><br>"Scene Root" should be disabled on both the main mesh and the animation sequences.<br><br>In blitz3D, load the main mesh first and then load the different sequences, it should work. <br><br></td></tr></table><br>
<a name="1055755"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >SLotman</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I never had to do it that way. I just export the mesh, with bones and all, and then use extractanimseq to generate the animations I want.<br><br>Of course, I need to do a mesh=GetChild(animated_mesh,1) to get the actual mesh instead of the "Scene Root". Other than that - it all works perfectly. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
