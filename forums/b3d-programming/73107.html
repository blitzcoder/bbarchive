<!DOCTYPE html><html lang="en" ><head ><title >Draggable object</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Draggable object</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Draggable object</a><br><br>
<a name="817154"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Mr. Slat</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is going to be a re-post...but I could find exactly what I needed, so...<br><br>I wanted to drag an object, but how can I relate 2D to 3D coordinates?<br><br>I mean, How can I make the object move along with the mouse?<br><br>I was looking for a function(retrieving the new 3D coordinates from the 2D mouse coordinates) only, so that I could fit it in my game....<br><br>Sorry for any mistake.... English isn't my native language... :P <br><br></td></tr></table><br>
<a name="818098"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Obviously  you can move a 3d object witht he mouse only in 2 dimensions at a time. So I'd suggest to do a camerapick at the  mouseposition when the user starts dragging. Get the entity he wants to drag and the (3D) Y position the Pick occurred/hit the entity. Now position an invisible (alpha =0) plane on this Y height. set the world and entities unpickable, the plane pickable. Now repeatly camerapick the plane at the new mouse position and calculate the distance to the original picked position, then reposition the entity at the original Y position, and at the X and Z position plus the mentioned distances.<br><br>You need a flipflop variable that will tell you if you're already dragging something, kind of:<br><br><pre class=code>
(pseudocode only)
if mousedown=1
 if dragging=0
  initialize dragging stuff
  dragging=1
 endif
else
 if dragging=1
  end of dragging stuff
  dragging=0
 endif
endif

if dragging=1
 drag stuff
endif
</pre><br><br><br>Additionally you could use the mousewheel to alter the Y position.<br><br>PS I wouldn't be surprised if there is already some sourcecode in the code archives. <br><br></td></tr></table><br>
<a name="818101"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, I'm pretty sure there's something for this in the code archives. I *think* it's by BlitzSupport.<br><br>[edit] Wow, my memory actually worked! :)<br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=379" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=379</a> <br><br></td></tr></table><br>
<a name="818126"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Moraldi</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Setting all entities unpickable and vice versa is it a slow or not operation? (when there are hundreds of them)<br>Is there any way to calculate which coordinates are picked up on the plane you mentioned given the screen mouse position? <br><br></td></tr></table><br>
<a name="818127"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not sure I understand. PickedX/Y/Z return the coords of a pick, if that's what you mean? <br><br></td></tr></table><br>
<a name="818130"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Moraldi</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Given MouseX, MouseY and a plane in a 3D world is it possible to calculate which point is picked on the plane without use any pick command? <br><br></td></tr></table><br>
<a name="818132"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Moraldi</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am using the jfk-11110's method in my <a href="http://www.moraldigames.com/Products/UDrop/UDrop.exe" target="_blank">Unlimited Drop</a> program but I want to avoid picking and unpicking objects when drag the cursor <br><br></td></tr></table><br>
<a name="818138"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Given MouseX, MouseY and a plane in a 3D world is it possible to calculate which point is picked on the plane without use any pick command? <br></div>Not that I know of. This is the type of thing picking was invented for. ;) <br><br></td></tr></table><br>
<a name="818140"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Moraldi</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have to search a C forum for a picking algorithm<br>Thanks big10p <br><br></td></tr></table><br>
<a name="818143"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK, but I doubt you'll find anything faster/better than the inbuilt pick commands, TBH. They're coded in C++, afterall. I could be wrong, though. :) <br><br></td></tr></table><br>
<a name="818255"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> there are some linepick replacements, but actually it's a lot of work for almost nothing, the builtin Camerapick works well. If you have the scenes entities stored in an array or type, then it's easy to hide/show them. (Re-)Setting the pickmode is not a speed issue since you do it only at a mousedown and mouseup event. <br><br></td></tr></table><br>
<a name="818274"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Moraldi</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Having in mind a discussion from another forum I thought something alternative:<br>I can create a second hidden camera too far from the main camera having no objects front of it.<br>In this case I can make camera picks from the hidden camera without changing the pick mode of objects <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
