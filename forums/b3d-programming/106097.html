<!DOCTYPE html><html lang="en" ><head ><title >Bounding Box not working on LoadAnimMesh ( ) ?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Bounding Box not working on LoadAnimMesh ( ) ?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Bounding Box not working on LoadAnimMesh ( ) ?</a><br><br>
<a name="1302641"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi all. For some reason, this code only works for entities created inside of Blitz3D. Not anything with LoadAnimMesh ( ). How can I fix this?<br><br>EntityBox_Lib.bb: <br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Const Infinity# = (999.0)^(99999.0), NaN# = (-1.0)^(0.5)

Global Mesh_MinX#,Mesh_MinY#,Mesh_MinZ#
Global Mesh_MaxX#,Mesh_MaxY#,Mesh_MaxZ#
Global Mesh_MagX#,Mesh_MagY#,Mesh_MagZ#

; create a collision box for a mesh entity taking into account entity scale

; ( will not work in non-uniform scaled space )

Function makecollbox ( mesh )

	Local sx# = EntityScaleX# ( mesh, 1 )

		Local sy# = EntityScaleY# ( mesh, 1 )
	
			Local sz# = EntityScaleZ# ( mesh, 1 )
	
		GetMeshExtents ( mesh )

	EntityBox mesh, Mesh_MinX * sx, Mesh_MinY * sy, Mesh_MinZ * sz, Mesh_MagX * sx, Mesh_MagY * sy, Mesh_MagZ * sz

End Function

; make a proxy bounding box for a mesh

; ( will work in non-uniform scaled space using sphere to poly collisions )

Function makeproxybox ( mesh, alpha# = 0.0 )

	Local proxy = CreateCube ( mesh )

		EntityAlpha proxy, alpha
	
			GetMeshExtents ( mesh )
	
		FitMesh proxy, Mesh_MinX, Mesh_MinY, Mesh_MinZ, Mesh_MagX, Mesh_MagY, Mesh_MagZ, 1

    Return proxy

End Function

; Find Mesh extents
Function GetMeshExtents ( Mesh )

	Local s, surf, surfs, v, verts, x#, y#, z#

		Local minx# = Infinity
	
			Local miny# = Infinity
		
				Local minz# = Infinity
		
			Local maxx# = -Infinity
	
		Local maxy# = -Infinity

	Local maxz# = -Infinity

	surfs = CountSurfaces ( mesh )

	For s = 1 To surfs

		surf  = GetSurface ( mesh, s )

		verts = CountVertices ( surf )
		
		For v = 0 To verts - 1
				
			x = VertexX# ( surf, v )
			y = VertexY# ( surf, v )
			z = VertexZ# ( surf, v )
			
			If x &lt; minx Then minx = x Else If x &gt; maxx Then maxx = x
			If y &lt; minx Then miny = y Else If y &gt; maxy Then maxy = y
			If z &lt; minz Then minz = z Else If z &gt; maxz Then maxz = z
			
		Next

	Next
	
	Mesh_MinX = minx

		Mesh_MinY = miny
	
			Mesh_MinZ = minz
		
				Mesh_MaxX = maxx
			
					Mesh_MaxY = maxy
			
				Mesh_MaxZ = maxz
		
			Mesh_MagX = maxx - minx
	
		Mesh_MagY = maxy - miny

	Mesh_MagZ = maxz - minz

End Function

Function EntityScaleX# ( entity, globl = False ) 

	If globl Then TFormVector 1, 0, 0, entity, 0 Else TFormVector 1, 0, 0, entity, GetParent ( entity )

	Return Sqr ( TFormedX# ( ) * TFormedX# ( ) + TFormedY# ( ) * TFormedY# ( ) + TFormedZ# ( ) * TFormedZ# ( ) ) 

End Function 

Function EntityScaleY# ( entity, globl = False )

	If globl Then TFormVector 0, 1, 0, entity, 0 Else TFormVector 0, 1, 0, entity, GetParent ( entity )

	Return Sqr ( TFormedX# ( ) * TFormedX# ( ) + TFormedY# ( ) * TFormedY# ( ) + TFormedZ# ( ) * TFormedZ# ( ) ) 

End Function 

Function EntityScaleZ# ( entity, globl = False )

	If globl Then TFormVector 0, 0, 1, entity, 0 Else TFormVector 0, 0, 1, entity, GetParent ( entity )

	Return Sqr ( TFormedX# ( ) * TFormedX# ( ) + TFormedY# ( ) * TFormedY# ( ) + TFormedZ# ( ) * TFormedZ# ( ) ) 

End Function 

Function Control_Entity ( ent, mspd# = 0.1, tspd# = 0.3, dbl_mspd# = 0.3, dbl_tspd# = 0.5 )

	If Not ( KeyDown ( 29 ) Or KeyDown ( 157 ) )
	
		If Not ( KeyDown ( 42 ) Or KeyDown ( 54 ) )
		
			MoveEntity ( ent, 0.0, 0.0, ( KeyDown ( 17 ) - KeyDown ( 31 ) Or KeyDown ( 200 ) - KeyDown ( 208 ) ) * mspd# )
			
			TurnEntity ( ent, 0.0, ( KeyDown ( 30 ) - KeyDown ( 32 ) Or KeyDown ( 203 ) - KeyDown ( 205 ) ) * tspd#, 0.0 )
		
		Else

			MoveEntity ( ent, 0.0, 0.0, ( KeyDown ( 17 ) - KeyDown ( 31 ) Or KeyDown ( 200 ) - KeyDown ( 208 ) ) * dbl_mspd# )
			
			TurnEntity ( ent, 0.0, ( KeyDown ( 30 ) - KeyDown ( 32 ) Or KeyDown ( 203 ) - KeyDown ( 205 ) ) * dbl_tspd#, 0.0 )
		
		EndIf
	
	Else
	
		If Not ( KeyDown ( 42 ) Or KeyDown ( 54 ) )
		
			MoveEntity ( ent, ( KeyDown ( 32 ) - KeyDown ( 30 ) Or KeyDown ( 205 ) - KeyDown ( 203 ) ) * mspd#, ( KeyDown ( 17 ) - KeyDown ( 31 ) Or KeyDown ( 200 ) - KeyDown ( 208 ) ) * mspd#, 0.0 )
		
		Else

			MoveEntity ( ent, ( KeyDown ( 32 ) - KeyDown ( 30 ) Or KeyDown ( 205 ) - KeyDown ( 203 ) ) * dbl_mspd#, ( KeyDown ( 17 ) - KeyDown ( 31 ) Or KeyDown ( 200 ) - KeyDown ( 208 ) ) * dbl_mspd#, 0.0 )
		
		EndIf

	EndIf

End Function
</textarea><br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Const Infinity# = (999.0)^(99999.0), NaN# = (-1.0)^(0.5)

Global Mesh_MinX#,Mesh_MinY#,Mesh_MinZ#
Global Mesh_MaxX#,Mesh_MaxY#,Mesh_MaxZ#
Global Mesh_MagX#,Mesh_MagY#,Mesh_MagZ#

; create a collision box for a mesh entity taking into account entity scale

; ( will not work in non-uniform scaled space )

Function makecollbox ( mesh )

	Local sx# = EntityScaleX# ( mesh, 1 )

		Local sy# = EntityScaleY# ( mesh, 1 )
	
			Local sz# = EntityScaleZ# ( mesh, 1 )
	
		GetMeshExtents ( mesh )

	EntityBox mesh, Mesh_MinX * sx, Mesh_MinY * sy, Mesh_MinZ * sz, Mesh_MagX * sx, Mesh_MagY * sy, Mesh_MagZ * sz

End Function

; make a proxy bounding box for a mesh

; ( will work in non-uniform scaled space using sphere to poly collisions )

Function makeproxybox ( mesh, alpha# = 0.0 )

	Local proxy = CreateCube ( mesh )

		EntityAlpha proxy, alpha
	
			GetMeshExtents ( mesh )
	
		FitMesh proxy, Mesh_MinX, Mesh_MinY, Mesh_MinZ, Mesh_MagX, Mesh_MagY, Mesh_MagZ, 1

    Return proxy

End Function

; Find Mesh extents
Function GetMeshExtents ( Mesh )

	Local s, surf, surfs, v, verts, x#, y#, z#

		Local minx# = Infinity
	
			Local miny# = Infinity
		
				Local minz# = Infinity
		
			Local maxx# = -Infinity
	
		Local maxy# = -Infinity

	Local maxz# = -Infinity

	surfs = CountSurfaces ( mesh )

	For s = 1 To surfs

		surf  = GetSurface ( mesh, s )

		verts = CountVertices ( surf )
		
		For v = 0 To verts - 1
				
			x = VertexX# ( surf, v )
			y = VertexY# ( surf, v )
			z = VertexZ# ( surf, v )
			
			If x &lt; minx Then minx = x Else If x &gt; maxx Then maxx = x
			If y &lt; minx Then miny = y Else If y &gt; maxy Then maxy = y
			If z &lt; minz Then minz = z Else If z &gt; maxz Then maxz = z
			
		Next

	Next
	
	Mesh_MinX = minx

		Mesh_MinY = miny
	
			Mesh_MinZ = minz
		
				Mesh_MaxX = maxx
			
					Mesh_MaxY = maxy
			
				Mesh_MaxZ = maxz
		
			Mesh_MagX = maxx - minx
	
		Mesh_MagY = maxy - miny

	Mesh_MagZ = maxz - minz

End Function

Function EntityScaleX# ( entity, globl = False ) 

	If globl Then TFormVector 1, 0, 0, entity, 0 Else TFormVector 1, 0, 0, entity, GetParent ( entity )

	Return Sqr ( TFormedX# ( ) * TFormedX# ( ) + TFormedY# ( ) * TFormedY# ( ) + TFormedZ# ( ) * TFormedZ# ( ) ) 

End Function 

Function EntityScaleY# ( entity, globl = False )

	If globl Then TFormVector 0, 1, 0, entity, 0 Else TFormVector 0, 1, 0, entity, GetParent ( entity )

	Return Sqr ( TFormedX# ( ) * TFormedX# ( ) + TFormedY# ( ) * TFormedY# ( ) + TFormedZ# ( ) * TFormedZ# ( ) ) 

End Function 

Function EntityScaleZ# ( entity, globl = False )

	If globl Then TFormVector 0, 0, 1, entity, 0 Else TFormVector 0, 0, 1, entity, GetParent ( entity )

	Return Sqr ( TFormedX# ( ) * TFormedX# ( ) + TFormedY# ( ) * TFormedY# ( ) + TFormedZ# ( ) * TFormedZ# ( ) ) 

End Function 

Function Control_Entity ( ent, mspd# = 0.1, tspd# = 0.3, dbl_mspd# = 0.3, dbl_tspd# = 0.5 )

	If Not ( KeyDown ( 29 ) Or KeyDown ( 157 ) )
	
		If Not ( KeyDown ( 42 ) Or KeyDown ( 54 ) )
		
			MoveEntity ( ent, 0.0, 0.0, ( KeyDown ( 17 ) - KeyDown ( 31 ) Or KeyDown ( 200 ) - KeyDown ( 208 ) ) * mspd# )
			
			TurnEntity ( ent, 0.0, ( KeyDown ( 30 ) - KeyDown ( 32 ) Or KeyDown ( 203 ) - KeyDown ( 205 ) ) * tspd#, 0.0 )
		
		Else

			MoveEntity ( ent, 0.0, 0.0, ( KeyDown ( 17 ) - KeyDown ( 31 ) Or KeyDown ( 200 ) - KeyDown ( 208 ) ) * dbl_mspd# )
			
			TurnEntity ( ent, 0.0, ( KeyDown ( 30 ) - KeyDown ( 32 ) Or KeyDown ( 203 ) - KeyDown ( 205 ) ) * dbl_tspd#, 0.0 )
		
		EndIf
	
	Else
	
		If Not ( KeyDown ( 42 ) Or KeyDown ( 54 ) )
		
			MoveEntity ( ent, ( KeyDown ( 32 ) - KeyDown ( 30 ) Or KeyDown ( 205 ) - KeyDown ( 203 ) ) * mspd#, ( KeyDown ( 17 ) - KeyDown ( 31 ) Or KeyDown ( 200 ) - KeyDown ( 208 ) ) * mspd#, 0.0 )
		
		Else

			MoveEntity ( ent, ( KeyDown ( 32 ) - KeyDown ( 30 ) Or KeyDown ( 205 ) - KeyDown ( 203 ) ) * dbl_mspd#, ( KeyDown ( 17 ) - KeyDown ( 31 ) Or KeyDown ( 200 ) - KeyDown ( 208 ) ) * dbl_mspd#, 0.0 )
		
		EndIf

	EndIf

End Function
</textarea><br><br>Thank You for the help! =)<br><br>~GF <br><br></td></tr></table><br>
<a name="1302699"></a>

<a name="1302700"></a>

<a name="1302701"></a>

<a name="1302702"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Your weird indentation disturbs me. (Sorry)<br><br><br>We have already discussed about skinned animated mesh and the tpose in another post, don't you remember ? Here : <a href="http://www.blitzbasic.com/Community/posts.php?topic=105302" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=105302</a><br><br>You can get the position of skinned animated vertices in any pose by using the ugrade vB.001 and vB.002 by Bobysait, here : <a href="http://www.blitzbasic.com/Community/posts.php?topic=105408" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=105408</a><br><br>What do you want to accomplish exactly ? <br><br></td></tr></table><br>
<a name="1302757"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I basically want to put a Bounding box no matter what size or position the animated mesh is around the animated mesh. That is all.<br><br>~GF <br><br></td></tr></table><br>
<a name="1302761"></a>

<a name="1302763"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> You could define manually the width,height,depth of the bounding box depending on the approximate width,height,depth used by the animated mesh when in a specific pose.<br><br>Or you could parent pivots to the extremities of each bodypart (hips, head, lefthand, righthand, leftfoot, rightfoot) and use their positions to determine the width,height, depth of the space used by the animated mesh when in a specific pose (between minx,miny,minz and maxx,maxy,maxz)<br><br>Or you could use the upgrade vB.001/vB.002 to be able to get the global position of each skinned vertex while the mesh is animating in order to dertermine the space used by the animated mesh when in a specific pose... <br><br></td></tr></table><br>
<a name="1302769"></a>

<a name="1302770"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I decided to use vB.003. But still the same problem. I can't get LoadAnimMesh ( ) to work with the Bounding Box and now with the Plot Points on Vertices functions... :(<br><br>EntityBox_Lib.bb: <br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Const Infinity# = (999.0)^(99999.0), NaN# = (-1.0)^(0.5)

Global Mesh_MinX#,Mesh_MinY#,Mesh_MinZ#
Global Mesh_MaxX#,Mesh_MaxY#,Mesh_MaxZ#
Global Mesh_MagX#,Mesh_MagY#,Mesh_MagZ#

; create a collision box for a mesh entity taking into account entity scale

; ( will not work in non-uniform scaled space )

Function makecollbox ( mesh )

	Local sx# = EntityScaleX# ( mesh, 1 )

		Local sy# = EntityScaleY# ( mesh, 1 )
	
			Local sz# = EntityScaleZ# ( mesh, 1 )
	
		GetMeshExtents ( mesh )

	EntityBox mesh, Mesh_MinX * sx, Mesh_MinY * sy, Mesh_MinZ * sz, Mesh_MagX * sx, Mesh_MagY * sy, Mesh_MagZ * sz

End Function

; make a proxy bounding box for a mesh

; ( will work in non-uniform scaled space using sphere to poly collisions )

Function makeproxybox ( mesh, alpha# = 0.0 )

	Local proxy = CreateCube ( mesh )

		EntityAlpha proxy, alpha
	
			GetMeshExtents ( mesh )
	
		FitMesh proxy, Mesh_MinX, Mesh_MinY, Mesh_MinZ, Mesh_MagX, Mesh_MagY, Mesh_MagZ, 1

    Return proxy

End Function

; Find Mesh extents
Function GetMeshExtents ( Mesh )

	Local s, surf, surfs, v, verts, x#, y#, z#

		Local minx# = Infinity
	
			Local miny# = Infinity
		
				Local minz# = Infinity
		
			Local maxx# = -Infinity
	
		Local maxy# = -Infinity

	Local maxz# = -Infinity

	surfs = CountSurfaces ( mesh )

	For s = 1 To surfs

		surf  = GetSurface ( mesh, s )

		verts = CountVertices ( surf )
		
		For v = 0 To verts - 1
				
			x = VertexX# ( surf, v )
			y = VertexY# ( surf, v )
			z = VertexZ# ( surf, v )
			
			If x &lt; minx Then minx = x Else If x &gt; maxx Then maxx = x
			If y &lt; minx Then miny = y Else If y &gt; maxy Then maxy = y
			If z &lt; minz Then minz = z Else If z &gt; maxz Then maxz = z
			
		Next

	Next
	
	Mesh_MinX = minx

		Mesh_MinY = miny
	
			Mesh_MinZ = minz
		
				Mesh_MaxX = maxx
			
					Mesh_MaxY = maxy
			
				Mesh_MaxZ = maxz
		
			Mesh_MagX = maxx - minx
	
		Mesh_MagY = maxy - miny

	Mesh_MagZ = maxz - minz

End Function

Function EntityScaleX# ( entity, globl = False ) 

	If globl Then TFormVector 1, 0, 0, entity, 0 Else TFormVector 1, 0, 0, entity, GetParent ( entity )

	Return Sqr ( TFormedX# ( ) * TFormedX# ( ) + TFormedY# ( ) * TFormedY# ( ) + TFormedZ# ( ) * TFormedZ# ( ) ) 

End Function 

Function EntityScaleY# ( entity, globl = False )

	If globl Then TFormVector 0, 1, 0, entity, 0 Else TFormVector 0, 1, 0, entity, GetParent ( entity )

	Return Sqr ( TFormedX# ( ) * TFormedX# ( ) + TFormedY# ( ) * TFormedY# ( ) + TFormedZ# ( ) * TFormedZ# ( ) ) 

End Function 

Function EntityScaleZ# ( entity, globl = False )

	If globl Then TFormVector 0, 0, 1, entity, 0 Else TFormVector 0, 0, 1, entity, GetParent ( entity )

	Return Sqr ( TFormedX# ( ) * TFormedX# ( ) + TFormedY# ( ) * TFormedY# ( ) + TFormedZ# ( ) * TFormedZ# ( ) ) 

End Function 

Function Control_Entity ( ent, mspd# = 0.1, tspd# = 0.3, dbl_mspd# = 0.3, dbl_tspd# = 0.5 )

	If Not ( KeyDown ( 29 ) Or KeyDown ( 157 ) )
	
		If Not ( KeyDown ( 42 ) Or KeyDown ( 54 ) )
		
			MoveEntity ( ent, 0.0, 0.0, ( KeyDown ( 17 ) - KeyDown ( 31 ) Or KeyDown ( 200 ) - KeyDown ( 208 ) ) * mspd# )
			
			TurnEntity ( ent, 0.0, ( KeyDown ( 30 ) - KeyDown ( 32 ) Or KeyDown ( 203 ) - KeyDown ( 205 ) ) * tspd#, 0.0 )
		
		Else

			MoveEntity ( ent, 0.0, 0.0, ( KeyDown ( 17 ) - KeyDown ( 31 ) Or KeyDown ( 200 ) - KeyDown ( 208 ) ) * dbl_mspd# )
			
			TurnEntity ( ent, 0.0, ( KeyDown ( 30 ) - KeyDown ( 32 ) Or KeyDown ( 203 ) - KeyDown ( 205 ) ) * dbl_tspd#, 0.0 )
		
		EndIf
	
	Else
	
		If Not ( KeyDown ( 42 ) Or KeyDown ( 54 ) )
		
			MoveEntity ( ent, ( KeyDown ( 32 ) - KeyDown ( 30 ) Or KeyDown ( 205 ) - KeyDown ( 203 ) ) * mspd#, ( KeyDown ( 17 ) - KeyDown ( 31 ) Or KeyDown ( 200 ) - KeyDown ( 208 ) ) * mspd#, 0.0 )
		
		Else

			MoveEntity ( ent, ( KeyDown ( 32 ) - KeyDown ( 30 ) Or KeyDown ( 205 ) - KeyDown ( 203 ) ) * dbl_mspd#, ( KeyDown ( 17 ) - KeyDown ( 31 ) Or KeyDown ( 200 ) - KeyDown ( 208 ) ) * dbl_mspd#, 0.0 )
		
		EndIf

	EndIf

End Function

; simple function to show a dot for each vertex of the mesh

; don't forget to use "UpdateWorld", else, there won't be "rigged animations"

Function PlotMeshVertices ( camera, mesh )

	Local is, nbs = CountSurfaces ( mesh )

	For is = 1 To nbs

		Local surf = GetSurface ( mesh, is )

		Local nbv% = CountVertices ( surf ), v

		For v = 0 To nbv - 1

			CameraProject ( camera, VertexRiggedX ( mesh, surf, v ), VertexRiggedY ( mesh, surf, v ), VertexRiggedZ ( mesh, surf, v ) )

			; Plot the projected "world" vertex
			Plot ProjectedX# ( ), ProjectedY# ( )

		Next

	Next

End Function
</textarea><br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
;Include "PreCache.bb"

	Global type_cam      =     1
	
		Global type_obj      =     2
		
			Global type_land     =     3
			
				Graphics3D 800, 600, 0, 2
				
					SetBuffer BackBuffer ( )
					
						SeedRnd MilliSecs ( )
						
;							PreCache ( )
							
								Include "EntityBox_Lib.bb"
							
							Global cam
						
						Global sky
					
					Global plane
				
				Global dummy_column
			
			Global dummy_mesh
		
		Global pbox
	
	Global walk_anim

Initialize_Scene ( )

;	api_ShowWindow ( SystemProperty$ ( "apphWnd" ), 1 )
	
		While Not KeyDown ( 1 )
			
			Animate dummy_mesh, 1, 0.1, walk_anim, 0.1

				UpdateWorld
	
					RenderWorld
	
							If KeyDown ( 57 ) Then s# = s# + 0.01 : ScaleEntity dummy_mesh, s#, s#, s#

								TurnEntity dummy_mesh, 0.0, -0.1, 0.0
		
								Control_Entity ( cam )
					
							VWait 1
						
							PlotMeshVertices ( cam, dummy_mesh )

						Text GraphicsWidth ( ) / 2.0, GraphicsHeight ( ) / 2.0 + 10.0, "X: " + EntityX# ( pbox ), 1, 1
	
					Text GraphicsWidth ( ) / 2.0, GraphicsHeight ( ) / 2.0 + 30.0, "Y: " + EntityY# ( pbox ), 1, 1
	
				Text GraphicsWidth ( ) / 2.0, GraphicsHeight ( ) / 2.0 + 50.0, "Z: " + EntityZ# ( pbox ), 1, 1
		
			Flip 0
			
		Delay 1
		
	Wend
	
End

Function Initialize_Scene ( )

	cam = CreateCamera ( )
	
		CameraRange cam, 0.1, 10000.0
		
			PositionEntity cam, 0.0, 1.001, 0.0
			
				EntityPickMode cam, 2, 1
				
					EntityType cam, type_cam
					
					sky = CreateCube ( cam )
					
						ScaleEntity sky, 100, 100, 100
						
							EntityFX sky, 1
							
								EntityColor sky, 102, 102, 255
							
							EntityOrder sky, 1000
						
						FlipMesh sky
					
					plane = CreatePlane ( )
				
				EntityFX plane, 1
			
			EntityColor plane, 0, 16, 0
		
		EntityPickMode plane, 2, 1
	
	EntityType plane, type_land

	dummy_mesh = LoadAnimMesh ( "dwarf\x\dwarf2.x" )

		EntityPickMode dummy_mesh, 2, 1
		
			EntityType dummy_mesh, type_obj
			
				pbox = makeproxybox ( dummy_mesh, 0.85 )
				
				PositionEntity pbox, EntityX# ( cam, 1 ), EntityY# ( cam, 1 ), EntityZ# ( cam, 1 ) + 10.0
				
					EntityPickMode pbox, 2, 1
					
					EntityType pbox, type_obj
				
				Collisions type_cam, type_land, 2, 3
			
			Collisions type_obj, type_land, 2, 3
		
		Collisions type_cam, type_obj, 2, 3

	walk_anim = ExtractAnimSeq ( dummy_mesh, 2, 14 )

End Function
</textarea><br><br>Thank You, Remi.<br><br>~GF <br><br></td></tr></table><br>
<a name="1302772"></a>

<a name="1302773"></a>

<a name="1302775"></a>

<a name="1302777"></a>

<a name="1302787"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Did you managed to get the skinned vertices positions while the mesh is animating ?<br>If no, i can provide an example.<br><br>For your other problem, you will have to learn to debug your code (i use debuglog and 3dmarkers to understand what is going on)<br><br>For example, for each vertex, get the vertex position, then create a marker (cube scaled 0.01,0.01,0.01), then position the marker at the vertex position, then position the camera near enough the mesh, then oriente the camera towards the vertex, then renderword flip waitkey, then check visually if the marker seems to be positionned at the correct position. This should help you to see if you can get the correct position of each vertex... Then debug your procedure to find the error and fix it...<br><br>Keep in mind that with rigged skinned animated meshes you have to use scaleentity, never scalemesh ! <br><br></td></tr></table><br>
<a name="1302776"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Remi. You don't get it. My code works fine. What I'm saying is the functions won't activate on LoadAnimMesh ( ) like they do on LoadMesh ( ). Which is the whole point of this post in the 1st place.<br><br>~GF <br><br></td></tr></table><br>
<a name="1302778"></a>

<a name="1302779"></a>

<a name="1302780"></a>

<a name="1302782"></a>

<a name="1302783"></a>

<a name="1302784"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> edit... You haven't answered this : <br><div class="quote"> <br>Did you managed to get the skinned vertices positions while the mesh is animating ?<br> <br></div><br>and debug visually with markers to make sure the positions you get are correct... <br><br></td></tr></table><br>
<a name="1302789"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> No, I did not. Why are you being so difficult to be around? You're sapping energy from me... Why is it SO hard for you to break your lame-stream programming &amp; come to help those in need? I broke mine 3 years ago! And I've NEVER felt better! But you.. YOU will <b><u>NEVER</u></b> help people. All that you will do is give them the same indoctrination <b><u>BULL CRAP</u></b> that you give me. So you know what? Unless you have come to actually help leave this thread. Otherwise, I'm glad to have you.<br><br>~GF <br><br></td></tr></table><br>
<a name="1302795"></a>

<a name="1302796"></a>

<a name="1302797"></a>

<a name="1302798"></a>

<a name="1302799"></a>

<a name="1302800"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not sure why you are angry, i have asked a question to make sure that you did this step properly...<br><br>In the code that you posted, there is the function PlotMeshVertices() which shows how to use the new functions created by Bobysait to get the skinned vertices positions (the names of his functions are incorrect, it should be SkinnedVertexX(), SkinnedVertexY(), SkinnedVertexZ(), but whatever...)<br>So, to get the position of a skinned vertex (a vertex which is influenced by a joint/bone), you need to use these new functions :<br>VertexRiggedX(MeshRef%,SurfaceRef%,VertexIndex%)<br>VertexRiggedY(MeshRef%,SurfaceRef%,VertexIndex%)<br>VertexRiggedZ(MeshRef%,SurfaceRef%,VertexIndex%)<br>instead of the usual functions :<br>VertexX(MeshRef%,SurfaceRef%,VertexIndex%)<br>VertexY(MeshRef%,SurfaceRef%,VertexIndex%)<br>VertexZ(MeshRef%,SurfaceRef%,VertexIndex%)<br><br>(notice how i have no problem with most members on these forums but you have problems with several members, and then reread your last post...)<br><br>So you will probably need 2 functions, one for meshes with notskinned vertices and one for meshes with skinned vertices. Or maybe add a flag in your function to know when to use VertexXYZ or VertexRiggedXYZ (depending on if the mesh is notrigged notskinned or rigged skinned) <br><br></td></tr></table><br>
<a name="1302801"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>Not sure why you are angry, i have asked a question to make sure that you did this step properly...<br><br>In the code that you posted, there is the function PlotMeshVertices() which shows how to use the new functions created by Bobysait to get the skinned vertices positions (the names of his functions are incorrect, it should be SkinnedVertexX(), SkinnedVertexY(), SkinnedVertexZ(), but whatever...)<br>So, to get the position of a skinned vertex (a vertex which is influenced by a joint/bone), you need to use these new functions :<br>VertexRiggedX(MeshRef%,SurfaceRef%,VertexIndex%)<br>VertexRiggedY(MeshRef%,SurfaceRef%,VertexIndex%)<br>VertexRiggedZ(MeshRef%,SurfaceRef%,VertexIndex%)<br>instead of the usual functions :<br>VertexX(MeshRef%,SurfaceRef%,VertexIndex%)<br>VertexY(MeshRef%,SurfaceRef%,VertexIndex%)<br>VertexZ(MeshRef%,SurfaceRef%,VertexIndex%)<br><br>(notice how i have no problem with most members on these forums but you have problems with several members, and then reread your last post...)<br><br>So you will probably need 2 functions, one for meshes with notskinned vertices and one for meshes with skinned vertices. Or maybe add a flag in your function to know when to use VertexXYZ or VertexRiggedXYZ (depending on if the mesh is notrigged notskinned or rigged skinned)<br> <br></div><br><br>Where's the question?<br><br>~GF <br><br></td></tr></table><br>
<a name="1302802"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I just gave you the solution in my previous post...<br>The error is (i think) in the function GetMeshExtents(), now use your brain and make it happen. <br><br></td></tr></table><br>
<a name="1302804"></a>

<a name="1302805"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nope. Try again.<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Function GetMeshExtents ( Mesh )

	Local s, surf, surfs, v, verts, x#, y#, z#

		Local minx# = Infinity
	
			Local miny# = Infinity
		
				Local minz# = Infinity
		
			Local maxx# = -Infinity
	
		Local maxy# = -Infinity

	Local maxz# = -Infinity

	surfs = CountSurfaces ( mesh )

	For s = 1 To surfs

		surf  = GetSurface ( mesh, s )

		verts = CountVertices ( surf )
		
		For v = 0 To verts - 1

			x = VertexRiggedX# ( Mesh, surf, v )
			y = VertexRiggedY# ( Mesh, surf, v )
			z = VertexRiggedZ# ( Mesh, surf, v )

			If x &lt; minx Then minx = x Else If x &gt; maxx Then maxx = x
			If y &lt; minx Then miny = y Else If y &gt; maxy Then maxy = y
			If z &lt; minz Then minz = z Else If z &gt; maxz Then maxz = z
			
		Next

	Next
	
	Mesh_MinX = minx

		Mesh_MinY = miny
	
			Mesh_MinZ = minz
		
				Mesh_MaxX = maxx
			
					Mesh_MaxY = maxy
			
				Mesh_MaxZ = maxz
		
			Mesh_MagX = maxx - minx
	
		Mesh_MagY = maxy - miny

	Mesh_MagZ = maxz - minz

End Function
</textarea> <br><br></td></tr></table><br>
<a name="1302806"></a>

<a name="1302807"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> I won't debug your code for you, i have explained what i would do and how, now it's your problem. Good luck anyway. <br><br></td></tr></table><br>
<a name="1302808"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Don't put words in my mouth. I didn't ask you to. -.- You do NOTHING but pick on me &amp; I do NOT appreciate it. PERIOD. <br><br></td></tr></table><br>
<a name="1302809"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzMan</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Guy Fawkes why do you get so irate,RemiD was just trying to help.<br><br>Damn it the ball fell out me mouse. <br><br></td></tr></table><br>
<a name="1302811"></a>

<a name="1302812"></a>

<a name="1302813"></a>

<a name="1302815"></a>

<a name="1302817"></a>

<a name="1302819"></a>

<a name="1302839"></a>

<a name="1302840"></a>

<a name="1302842"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> RemiD and the guys here have always been helpful to us GF. If you feel that you're not satisfied with the answer, just wait for someone or make it more clear what you are trying to do.<br><br>Let's not forget that they're doing this for free with their own spare time. We are all lucky enough that they have chosen to respond to some questions that "might" have been asked before and at least appreciate the gesture that they're answering it again.<br><br>In short, calm down man and drop the attitude. You're not paying them for support and they don't deserve to be treated like this, they're just trying to help.<br><br>I have rated this forum to be the most helpful or at least most active compared to previous discussion boards that I have participated before. So let's not abuse their generosity that they are extending to us noobs or novice blitz coders.<br><br>my 2¢ <br><br></td></tr></table><br>
<a name="1302862"></a>

<a name="1302863"></a>

<a name="1302864"></a>

<a name="1302865"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Your indentation is senseless and make the code more difficult to read.<br><pre class=code>
Local s, surf, surfs, v, verts, x#, y#, z#

		Local minx# = Infinity
	
			Local miny# = Infinity
		
				Local minz# = Infinity
		
			Local maxx# = -Infinity
	
		Local maxy# = -Infinity

	Local maxz# = -Infinity
</pre><br><pre class=code>
Mesh_MinX = minx

		Mesh_MinY = miny
	
			Mesh_MinZ = minz
		
				Mesh_MaxX = maxx
			
					Mesh_MaxY = maxy
			
				Mesh_MaxZ = maxz
		
			Mesh_MagX = maxx - minx
	
		Mesh_MagY = maxy - miny

	Mesh_MagZ = maxz - minz
</pre><br><pre class=code>
Global type_cam      =     1
	
		Global type_obj      =     2
		
			Global type_land     =     3
			
				Graphics3D 800, 600, 0, 2
				
					SetBuffer BackBuffer ( )
					
						SeedRnd MilliSecs ( )
						
;							PreCache ( )
							
								Include "EntityBox_Lib.bb"
							
							Global cam
						
						Global sky
					
					Global plane
				
				Global dummy_column
			
			Global dummy_mesh
		
		Global pbox
	
	Global walk_anim
</pre><br>Really ?<br><br>What's your problem man ?<br><br><br>Also, i have spotted an error on this line :<br><pre class=code>
If y &lt; minx Then miny = y Else If y &gt; maxy Then maxy = y
</pre><br>but you need to learn to debug your code by yourself (debuglog() is really helpful for this) <br><br></td></tr></table><br>
<a name="1302868"></a>

<a name="1302869"></a>

<a name="1302870"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> here is a code example + a rigged skinned animated mesh : <br><a href="http://rd-stuff.fr/SkinnedVertexX()-SkinnedVertexY()-SkinnedVertexZ()-PlotSkinnedVertices()-20160411.7z" target="_blank">http://rd-stuff.fr/SkinnedVertexX()-SkinnedVertexY()-SkinnedVertexZ()-PlotSkinnedVertices()-20160411.7z</a><br><br>4 functions useful for what you are trying to do :<br>SkinnedVertexX() ;get the skinned vertex X position<br>SkinnedVertexY() ;get the skinned vertex Y position<br>SkinnedVertexZ() ;get the skinned vertex Z position<br>PlotSkinnedVertices() ;display the skinned vertices positions with rect() (with a specific rect radius (like a bigger plot)) <br><br></td></tr></table><br>
<a name="1302893"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Remi. I've told you countless times &amp; I'll tell you one more time. I am NOT here to argue with you &amp; I do NOT criticize the way YOU code. So stop criticizing the way "I" code. <br><br></td></tr></table><br>
<a name="1302897"></a>

<a name="1302898"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> The way i code has a logic behind it, indentation is not done arbitrarily and not for art. But yes you are free to do what you want, just don't be surprised if we (or at least i) consider you like a weirdo...<br><br>Anyway i hope that my code example will help you to make some progress. <br><br></td></tr></table><br>
<a name="1302910"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >wmaass</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hey there guys. My youngest son is an Aspy. Very bright and lovable kid, proud to be his pop. I can tell you that he processes info and approaches problems in odd ways. And at times it makes it hard for me to help him with things. I have to try and think like he does and it ain't easy. But we manage. This year he will be graduating with all A grades!<br><br>I guess what I am saying is perhaps there is a little of this going on here, maybe. RemiD, I do admire how you continue to help. <br><br></td></tr></table><br>
<a name="1302915"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> I understand your thoughts on my coding style, however, I've had enough of that topic. Any help would be appreciated.<br><br>~GF <br><br></td></tr></table><br>
<a name="1302925"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >wmaass</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> GF, clearly you have a love for coding, you can go a long way with that kind of passion my friend.<br><br>Honestly, I don't have the answer to your original question. RemiD is pointing you in the right direction. He is a good, patient dude.<br><br>Consider that just as we all have a way learning, others have a way of teaching. We all have to give a little one way or the other. <br><br></td></tr></table><br>
<a name="1302936"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok i will consider in the future that GF may have a different way to think and view things. And maybe weird indentation can be an art if you want to obfuscate your code. :P<br><br><br>@GF&gt;&gt;please confirm : you want the bounding box to have a width,height,depth which corresponds to the space between minx,miny,minz and maxx,maxy,maxz of the animated mesh considering all poseframes of all animations (and the minx,miny,minz and the maxx,maxy,maxz must be found by considering the skinned vertices positions in all poseframes of all animations) ? <br><br></td></tr></table><br>
<a name="1302957"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> Correct, RemiD.<br><br>~GF <br><br></td></tr></table><br>
<a name="1302961"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wouldn't it be easier and quicker to manually define the minx,miny,minz maxx,maxy,maxz ?<br><br>Why do you absolutely need such a function for a rigged skinned animated mesh ? <br><br>If you really need it, you will need to check, for each poseframe, if each skinned vertex is inside or outside the minx,miny,minz maxx,maxy,maxz, so you will probably need this : <a href="http://www.blitzbasic.com/b3ddocs/command.php?name=SetAnimTime&amp;ref=3d_a-z" target="_blank">http://www.blitzbasic.com/b3ddocs/command.php?name=SetAnimTime&amp;ref=3d_a-z</a> <br><br></td></tr></table><br>
<a name="1302963"></a>

<a name="1302964"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> Remi. The whole point of this thread is to simply get the box to show up around an animated, skinned mesh. When you do a LoadAnimMesh ( ), the box DOESN'T show up. When you do a LoadMesh ( ), the box DOES show up. That's the only problem this code has is the ability for it not to show up on Anim Meshes. Plain &amp; simple.<br><br>~GF <br><br></td></tr></table><br>
<a name="1302965"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> And i have explained several times why your function will not work "plain &amp; simple" with rigged skinned animated meshes with several poseframes... But since you don't want to consider what i have explained, i give up. <br><br></td></tr></table><br>
<a name="1302968"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> Did it ever occur to you that I already TRIED changed it to the Rigged functions &amp; it STILL didn't work? <br><br></td></tr></table><br>
<a name="1302969"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> @ RemiD, I think you've been incredibly patient and it's disappointing that you have not been thanked a single time after all the time and effort.<br><br>@ GF,<br>The function works for loadmesh as it's a single mesh and your function only checks the extents for a single mesh.  Using loadanimmesh I would assume that you have a root mesh and multiple child meshes, which could also have child meshes.  You're extents function needs to check the root mesh and all it's children.<br><br>Something along these lines ...<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Function GetEntityExtents( Mesh, Recursive = True )

	Mesh_MinX = Infinity
	Mesh_MinY = Infinity
	Mesh_MinZ = Infinity
	Mesh_MaxX = -Infinity
	Mesh_MaxY = -Infinity
	Mesh_MaxZ = -Infinity

	GetMeshExtents( Mesh, Recursive )

	Mesh_MagX = Mesh_MaxX - Mesh_MinX
	Mesh_MagY = Mesh_MaxY - Mesh_MinY
	Mesh_MagZ = Mesh_MaxZ - Mesh_MinZ

End Function


; Find Mesh extents
Function GetMeshExtents ( Mesh, Recursive = True )

	Local s, surf, surfs, v, verts, x#, y#, z#
	Local c

	surfs = CountSurfaces ( Mesh )

	For s = 1 To surfs

		surf  = GetSurface ( Mesh, s )
		verts = CountVertices ( surf )
		
		For v = 0 To verts - 1
		
			x = VertexX# ( surf, v )
			y = VertexY# ( surf, v )
			z = VertexZ# ( surf, v )
			If x &lt; Mesh_MinX Then Mesh_MinX = x Else If x &gt; Mesh_MaxX Then Mesh_MaxX = x
			If y &lt; Mesh_MinY Then Mesh_MinY = y Else If y &gt; Mesh_MaxY Then Mesh_MaxY = y
			If z &lt; Mesh_MinZ Then Mesh_MinZ = z Else If z &gt; Mesh_MaxZ Then Mesh_MaxZ = z
			
		Next

	Next
	
	If Recursive
		For c = 1 To CountChildren( Mesh )
			GetMeshExtents( GetChild(Mesh, c) , True )
		Next
	EndIf
	

End Function
</textarea><br><br>Where you call GetEntityExtents, using recursive = false if using loadmesh and recursive = true if using loadanimmesh.<br><br>Now obviousyly this doesn't take into account the scale or rotation of each mesh and or the animation pose but I think RemiD has given you plenty to go on.<br><br>Stevie <br><br></td></tr></table><br>
<a name="1302970"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can you not work out the maximum bounding box in your modeling software and work from that? <br><br></td></tr></table><br>
<a name="1302971"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks, Stevie G, I'll try it! =) Matty, no. It must work for every mesh. Animated &amp; Skinned, scaled, rotated, etc.<br><br>~GF <br><br></td></tr></table><br>
<a name="1303033"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Stevie G&gt;&gt;Good point , there may be child meshes when using loadanimmesh(), i always forget about that because i never use it... <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
