<!DOCTYPE html><html lang="en" ><head ><title >Asteroids - Spaceship Movement Code</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Asteroids - Spaceship Movement Code</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Asteroids - Spaceship Movement Code</a><br><br>
<a name="1271035"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Davros</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi guys<br><br>I have literally spent days googling, trying to find spaceship movement code asteroids style but to work in 3D on the XZ plane.<br><br>Almost all of the examples I found were for 2D screen coordinates. I understand that I need to keep a local velocity vector and thrust for acceleration.<br><br>I got close, but found that when I turn the ship to fire the engines, it was immediate - no thrusting against the already built up inertia in the opposite direction to give a smooth decelerate and accelerate in the new direction.<br><br>I found something primitive in the code archives but it does the same. Can anyone help with some example code please? <br><br></td></tr></table><br>
<a name="1271049"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is the most basic version (concept) you can use which should work fine....<br><br>x = x + vx<br>y = y + vy<br>z = z + vz<br><br>vx = vx + ax<br>vy = vy + ay<br>vz = vz + az<br><br>set ax,ay,az based on applying 'thrust'.....<br><br>you may wish to limit the maximum value for vx,vy,vz (square root usually involved) <br><br></td></tr></table><br>
<a name="1271051"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Davros</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> so the vector 'a' is the acceleration vector? <br><br></td></tr></table><br>
<a name="1271053"></a>

<a name="1271054"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yes....sorry I should have been clearer.<br><br>this is a very basic method - (similar to Euler Integration which is a numerical technique that improves as long as the timestep is small however I wouldn't recommend it for anything that needs a high degree of accuracy over time - but it is good enough for games)<br><br>EDIT - similar to this:  <a href="http://mathworld.wolfram.com/EulerForwardMethod.html" target="_blank">http://mathworld.wolfram.com/EulerForwardMethod.html</a> <br><br></td></tr></table><br>
<a name="1271059"></a>

<a name="1271060"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Something like this should work.  No need for square roots etc.. and maximum speed is derived from from the drag and acceleration.  Just play about with the variables.<br><br><pre class=code>
Drag# = 0.99
Acceleration# = .03
TurnSpeed# = 3.0

'Maxmium Speed = Acceleration / ( 1.00 - Drag ) = 3.0

ACC_PRESSED = keydown(200)
TURN_PRESSED = keydown(203) - keydown(205)

'Movement
Tformvector 0,0,Acceleration * ACC_PRESSED, ShipEntity, 0
Ax# = tformedx()
Az# = tformedz()
Vx# = Vx# * Drag + Ax#
Vz# = Vz# * Drag + Az#
translateentity ShipEntity, Vx, 0, Vz

'Turning
turnentity ShipEntity,0,TurnSpeed * TURN_PRESSED, 0
</pre><br><br>You could also build momentum into the turning but I don't think asteroids does this.  See post 13 from this thread ..<br><br><a href="http://www.blitzbasic.com/Community/posts.php?topic=44999#500683" target="_blank">http://www.blitzbasic.com/Community/posts.php?topic=44999#500683</a><br><br>Stevie <br><br></td></tr></table><br>
<a name="1271075"></a>

<a name="1271076"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Davros</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> no it's fine, no need for turning momentum and this isn't for an asteroids clone (god there are plenty of them), but it's for my ship movement code... I wanted the directional inertia. My ships are meant to be generally large so I am going to have to figure out where I can Insert a Mass variable into the Acceleration. <br><br>I see you have defined Maximum Speed but i'm unsure as to where that goes. (unless we are talking of using that to compare a vector length and cap it?) <br><br></td></tr></table><br>
<a name="1271077"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well.. if good old F = ma applies then simply let a = your thrust force / mass.  <br><br>Drag only really applies in an atmosphere and increases in proportion to the square of the velocity of the object (cross sectional area comes into play too) <br><br></td></tr></table><br>
<a name="1271078"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Stevie - you are aware the tform commands use square roots internally? <br><br></td></tr></table><br>
<a name="1271088"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> @ Matty, Tformnormal does of course but I can't see why would you need a sqrt internally for the tformvector command?<br><br>@ Davros, maxmium speed is implied from the drag and the acceleration, there is no need to actually define it. You need to play about with the 2 values to see what feels right.   <br><br>e.g.  <br>Acceleration = 0.05, Drag = 0.98 =&gt; Max Speed = 0.05 /  ( 1 - 0.98 ) = 2.5<br><br>Basically if you were at a speed of 2.5 and you continue to hit the thrust then the next frame the speed would be ( 2.5 * .98 + 0.05 ) = 2.5. <br><br></td></tr></table><br>
<a name="1271089"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Because you are transforming the vector from one space to another (ie local object to world space) if there are any differences in the rotation between the two spaces then square roots will be involved internally ( or worse trigonometric functions) when the rotation matrix is calculated.<br><br>Ultimately whichever method is easier is probably best but ive always found it simpler to do the basic calcs explicitly and only involve various tform commands when it was absolutely necessary to transform between spaces. <br><br></td></tr></table><br>
<a name="1271092"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Davros</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> I didn't realise trig functions were slower than sqrt <br><br></td></tr></table><br>
<a name="1271094"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Davros</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Many thanks to @Stevie G and @Matty. Code works a treat. <br><br></td></tr></table><br>
<a name="1271098"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> @ Matty, ok, maybe it does use sqrt internally but why would you care as it's hardly likely to be a bottleneck in terms of execution speed?<br><br>My mention of not using square roots related to limiting the magnitude of a velocity vector.  It is unecessary in the simple example I've shown.<br><br>I've always found the tform commands to be among the most useful and powerful commands within Blitz3d. <br><br>To each their own :) <br><br></td></tr></table><br>
<a name="1271104"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Davros</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Stevie G / @Matty ..If you were to attach a helper child object to a parent and  change it's local position to that parent, When you rotate the parent, does that still use the square root to re-calculate the child position? or is it managed in some less expensive way? <br><br></td></tr></table><br>
<a name="1271110"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Matty</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> To be honest im not concerned with the speed of a square root....i just prefer the simplicity of my method....which is fairly accurate in most situations. <br><br></td></tr></table><br>
<a name="1272117"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >EpicElrod</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have a book that teaches you to make your own version of that game... <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
