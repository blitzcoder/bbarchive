<!DOCTYPE html><html lang="en" ><head ><title >Organization</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Organization</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Organization</a><br><br>
<a name="478386"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >wizzlefish</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've completely restarted my current project, because of lack of organization. Although I have put together a new "template," I guess you could call it. Here'sa my coda:<br><br><pre class=code>
;------------------------------;
;  O P E R A T I O N   6 0 0   ;
;    A No Enemies Production   ;
;    A sci-fi FPS-genre game   ;
;One of the first of its series;
;------------------------------;

;START-UP
.startup
Graphics3D 800,600
AppTitle "Operation 600"
SetBuffer BackBuffer()
AutoMidHandle True

;TYPES
.types

;player type
Type player
	Field pivot                             ;pivot entity
	Field camera                            ;camera entity
	Field x,y,z                             ;player's position
	Field health                            ;player health
	Field w_entity                          ;weapon entity
	Field w_ammo                            ;ammo in weapon
	Field w_type$                           ;type/name of weapon
	Field w_damage                          ;damage the weapon does
	Field w_offsetx, w_offsety, w_offsetz   ;weapon offset values
	Field running                           ;if the player is running or not (true/false)
End Typ

;object type
Type obj
	Field obj_type$                         ;enemy, car, box, etc.
	Field x,y,z                             ;object position
	Field e_weapon                          ;enemy's weapon - leave at "0" if not an enemy
	Field entity                            ;the actual mesh
	Field alpha#                            ;alpha of object
	Field shininess#                        ;shininess of object
	Field c_speed#                          ;car speed - leave at "0" if not a car
	Field c_wheels[4]                       ;car wheels - don't use if not a car
	Field x_vel#, y_vel#, z_vel#            ;velocity of the object
End Type 




;GLOBALS AND CONSTANTS
.globals

;CAMERA
Global cam_x#,cam_z#,cam_pitch#,cam_yaw#						;camera position
Global dest_cam_x#,dest_cam_z#,dest_cam_pitch#,dest_cam_yaw#	;camera destination




;MENU
Global mouse = LoadImage("media\menu\mouse.png")
Global glow = LoadImage("media\menu\glow.png")
Global title = LoadImage("media\menu\title1.png")
Global 




;MAINLOOP
While Not KeyDown(1)

	;do main loop stuff here

Wend



;INITIALIZING FUNCTIONS

;initilizes level
Function InitLevel(level) ;"level" is the level ID number. the level ID number is the number following the level mesh. "lvl0.op" - "0" would be level ID

	LoadLevel("lvl"+level+".op") ;if level=0, this would load "lvl0.op"
	
		
	
End Function

;UPDATING FUNCTIONS

;updates game/menu
Function UpdateLogic(logic$)

	Select logic$
		;game
		Case "game"
		
			;do game stuff
			
		Case "menu"
		
			UpdateMenu()
			
			RenderWorld
			UpdateWorld
			
			Flip 
			
	End Select 

End Function

;updates camera
Function UpdateCamera()
	
	;mouse look
	
	
	;camera move

End Function

;updates gun
Function UpdateGun(current_gun) ;"current_gun" is equal to the player's current gun set in "UpdateCamera()"

	;gun switch
	
	;gun shoot
	

End Function

;updates misc. actions
Function UpdateMiscActions()

	;do misc. stuff here

End Function

;updates all objects
Function UpdateObject()
	
	For o.obj = Each obj
	
		;do object stuff here
	
	Next 
		
End Function

;updates menu
Function UpdateMenu()
	
	;do menu stuff here

End Function 

;EXTERNAL FUNCTIONS 

;loads level
Function LoadLevel(filepath$)

	;load level here

End Function 
</pre> <br><br></td></tr></table><br>
<a name="478392"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> your obj type still needs a lot of information. I suggest to do a systematic wrapping of all possible parameters, simply read trough the command reference and implement every possible thing (mainly trough entity control chapter, but not only). Things like Rotation, Scaling etc... but as I said, instead of torturing your brain when you try to think of everything neccessary, instead simply pick up everything in the command reference. Then you still may drop things that are not required. <br><br></td></tr></table><br>
<a name="478429"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >wizzlefish</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah - I was thinking about the scale, rotation, etc. but I thought I didn't have to put that in the type. Here's the code for the "CreateObject" function:<br><pre class=code>
;OBJECT FUNCTIONS

;creates an object
Function CreateObject(type_of_object$, name$, filepath$, x=0, y=0, z=0, alpha#=1.0, shininess#=0.0, xv#=0, yv#=0, zv#=0, scalex#=1, scaley#=1, scalez#=1, rx#, ry#, rz#)
	
	;create object
	newObject.obj = New obj
	
	newObject\obj_type$ = type_of_object$
	newObject\name$ = name$
	newObject\entity = LoadMesh(filepath$)
	newObject\x = x
	newObject\y = y
	newObject\z = z
	newObject\alpha# = alpha#
	newObject\shininess = shininess#
	newObject\x_vel# = xv#
	newObject\y_vel# = yv#
	newObject\z_vel# = zv#
	
	;build object
	EntityAlpha newObject\entity, alpha#
	EntityShininess newObject\entity, shininess#
	PositionEntity newObject\entity, newObject\x, newObject\y, newObject\z
	ScaleEntity newObject\entity, scalex#, scaley#, scalez#
	RotateEntity newObject\entity, rx#, ry#, rz#
	
End Function 
</pre> <br><br></td></tr></table><br>
<a name="478461"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Clarks</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> take all of your global camera variable and make a global type out of it. <br><br></td></tr></table><br>
<a name="478510"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >wizzlefish</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sounds good. <br><br></td></tr></table><br>
<a name="478530"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Techlord</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Opto,<br><br>To help organize a project, I devised this set of generic <a href="/codearcs.php?code=890" target="_blank">Coding Conventions</a>. This set of rules made it easier for me to recognize and document code. <br><br>But,  its hard to follow the rules if you dont stick to your guns. If dont stick your guns, you will find yourself all wrapped up in speghetti code again and again. <br><br>Once you develop a some coding standards, you find it much easier to reuse code. You can also write <a href="/codearcs.php?code=888" target="_blank">coding wizards</a> that generate code for you. In the end a little discipline will save lots of time. <br><br></td></tr></table><br>
<a name="478531"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >wizzlefish</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, I do have a problem with guns.<br><br>Here's my player type:<br><pre class=code>
;player type
Type player
	Field pivot                             ;pivot entity
	Field camera                            ;camera entity
	Field x,y,z                             ;player's position
	Field health                            ;player health
	Field w_entity                          ;weapon entity
	Field w_ammo                            ;ammo in weapon
	Field w_type$                           ;type/name of weapon
	Field w_damage                          ;damage the weapon does
	Field w_offsetx, w_offsety, w_offsetz   ;weapon offset values
	Field running                           ;if the player is running or not (true/false)
End Type
</pre><br>There are 10 weapons. If each weapon has a different amount of ammo, and their ammo ONLY goes down if THAT gun is used, then how would I do that? I can't imaging making 10 fields called "Gun1_ammo", "Gun2_Ammo", etc. I also want to try to keep the amount of types as low as possible. Is there a way to go about doing this without creating a new type? <br><br></td></tr></table><br>
<a name="478533"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Techlord</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Create a separate Type for the Gun and Ammo. <br><br></td></tr></table><br>
<a name="478537"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >wizzlefish</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I thought about that - do you think it would be easier? I heard from someone that I should just merge the player and his weapons together in one type.<br><br>Is there ANY possible solution besides creating another type? <br><br></td></tr></table><br>
<a name="478539"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Techlord</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Opto,<br><br>You use as many Types you need to define each individual 'object'. You will have more flexibility. Simply find all the common properties for a 'gun' and make those the fields. By changing the values of the fields you can create a variety of guns. You apply this method to Ammo, Particles, Vehicles, Trees, etc. <br><br></td></tr></table><br>
<a name="478541"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >wizzlefish</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok. Although I think I will keep the "object" type - I haven't run into problems yet. <br><br></td></tr></table><br>
<a name="478543"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Techlord</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> <pre class=code>Type Gun
	Field id%
	Field typeid%
	Field mesh%
	Field ammoid%
	Field ammocount%
	Field triggerspeed#
	Field state%
End Type

Type Ammo
	Field id%
	Field typeid%
	Field mesh%
	Field particleid[4] ;empty, load, muzzleflash, travel, impact;
	Field soundid[4];empty,load, muzzleflash, travel, impact;
	Field travelpattern%
	Field damageeffectid%
	Field state%	
End Type

Type DamageEffect
	Field id%
	Field typeid%
	Field range%
	Field mesh% ;collision mesh for area effect
	;Player damage;
	Field speed#
	Field health#
	Field power#
	Field effect ;graphics effect;
	Field state%
End Field</pre><br><br>If a generic type meets your needs than go for it. <br><br></td></tr></table><br>
<a name="478544"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >wizzlefish</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok. Thanks.<br><br>Also - I have another problem.<br><br>Do you have ANY clue on how to use ODE? <br><br></td></tr></table><br>
<a name="478546"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Erroneouss</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'll start writing a tutorial for you on ODE<br>As you asked me to do yesterday (I think <br>yesteryday). <br><br></td></tr></table><br>
<a name="478548"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >wizzlefish</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK - although don't write it just for me. Put it in the code archives, or submit it to the tutorials section on my forums. <br><br></td></tr></table><br>
<a name="478564"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >wizzlefish</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> I JUST GOT IT!<br><br>A weapon could be under the "obj" type - and other fields could be added. As there are multiple objects and multiple weapons it'll all work out! And it shall reduce my type and function count by at least 2! <br><br></td></tr></table><br>
<a name="478577"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Techlord</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Optomistic,<br><br>I'm curious as to why your concerned about the number of types and functions used. Surely, media will eatup up more disk space.<br><br>By separating your 'objects' you can employ them in other projects. Trust me, if your going to code a hobby or career, you will use your libraries in other projects.<br><br>I personally dont favor a generic object because they can easily introduce ambiguity in the data, unless you have a good means of management. Heres a generic object class I wrote that may find itself in PW3D and PPF2k4.<pre class=code>;A Generic Obj Class with upto 64 Properties

Const OBJ_MAX%= 100
Const OBJ_PROPERTY_MAX%=64

Type obj
	Field id%
	Field name$
	;generic properties;
	Field offset%,label$[OBJ_PROPERTY_MAX],value$[OBJ_PROPERTY_MAX] 
End Type
Dim obj.objID(OBJ_MAX%);id key pointer
Global objcount

Function objCreate(objname$)
	this.obj=New obj
	objcount=objcount+1
	this\ID%=objcount
	objID(this\ID%)=this
	this\name$=objname$
	Return this\id
End Function

Function objPropertyAdd%(ID,objpropertylabel$,objpropertyvalue$="")
	objID(ID)\offset=objID(ID)\offset+1
	If objID(ID)\offset&gt;OBJ_MAX%
		RuntimeError(objID(ID)\name+" Properties Full")
	EndIf
	objID(ID)\label[objID(ID)\offset]=objpropertylabel$
	objID(ID)\value[objID(ID)\offset]=objpropertyvalue$
	Return objID(ID)\offset
End Function

Function objNameSet(ID,objname$)
	objID(ID)\name=objname 
End Function

Function objNameGet(ID)
	Return objID(ID)\name
End Function

Function objPropertyValueSet(ID,objpropertyoffset,objpropertyvalue$)
	objID(ID)\value$[objpropertyoffset]=objpropertyvalue$ 
End Function

Function objPropertyValueGet(ID,objpropertyoffset)
	Return objID(ID)\value[objpropertyoffset]
End Function

Function objPropertyValueGetByLabel(ID,objpropertylabel$)
	For objpropertyoffset = 0 To objID(ID)\offset
		If objID(ID)\label[objpropertyoffset] = objpropertylabel Return objID(ID)\value[objpropertyoffset]
	Next
End Function	

Function objPropertyLabelGetByOffset(ID,objpropertyoffset)
	Return objID(ID)\label[objpropertyoffset]
End Function	

Function objMimic(ID,objname$)
	this.obj=objID(objCreate(objName))
	this\offset%=objID(ID)\offset%
	For objpropertyoffset = 0 To OBJ_PROPERTY_MAX
		this\label$[objpropertyoffset]=objID(ID)\label$[objpropertyoffset]
		this\value$[objpropertyoffset]=objID(ID)\value$[objpropertyoffset]
	Next	
	Return this\id
End Function

;Create a New Ammo
ammo=objCreate("Ammo")
objPropertyAdd(ammo,"name","GoldBullet")
objPropertyAdd(ammo,"ïd","1")
objPropertyAdd(ammo,"damagepoint","5")
objPropertyAdd(ammo,"damagearea","10")
objPropertyAdd(ammo,"max_distance","100")

;Create a New Gun
gun=objCreate("Gun")
objPropertyAdd(gun,"name","Blazer3000")
objPropertyAdd(gun,"ïd","1")
objPropertyAdd(gun,"ammoid","1")
objPropertyAdd(gun,"ammo","100")
objPropertyAdd(gun,"recoil","0.5")</pre> <br><br></td></tr></table><br>
<a name="478635"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >wizzlefish</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Let me show you my Object type and "UpdateObject functions:<br><pre class=code>
;object type
Type obj
	Field obj_type$                         ;enemy, car, box, etc.
	Field name$                             ;name of object ("box1", "Bob's Car", etc.
	Field x#,y#,z#                          ;object position
	Field e_weapon                          ;enemy's weapon - leave at "0" if not an enemy
	Field d_secure                          ;if the door is secure (true/false) - only for doors
	Field el_dest#                          ;the y dest. of the elevator - only for elevator
	Field entity                            ;the actual mesh
	Field alpha#                            ;alpha of object
	Field shininess#                        ;shininess of object
	Field c_speed#                          ;car speed - leave at "0" if not a car
	Field c_wheels[4]                       ;car wheels - don't use if not a car
	Field x_vel#, y_vel#, z_vel#            ;velocity of the object
	Field w_type$                           ;weapon name
	Field w_id                              ;weapon id
	Field w_damage                          ;damage the weapon does
	Field offsetx, offsety, offsetz         ;offset values
End Type
</pre><br><br>Function:<br><pre class=code>
;updates all objects
Function UpdateObjects()
	
	For o.obj = Each obj
	For pl_o.user = Each user
	
		Select o\obj_type$
		
			Case "enemy
			
				;enemy AI
			
			Case "car"
				
				;update car
				
			Case "crate" 
					
				;update crate
			
			Case "glass"
			
				;update glass
				
			Case "weapon"
		
			
			Case "door"
				If obj\d_secure = True
					If door_rotation &lt;= 90 And good_code = True And EntityDistance(pl_o\camera,o\entity)&lt;=5 And MouseHit(2)
						door_rotation = door_rotation + 1
						RotateEntity o\entity, 0, door_rotation, 0
					EndIf 
				Else
					If door_rotation &lt;= 90 And EntityCollided(pl_o\camera,DOOR_COL) And MouseHit(2)
						door_rotation = door_rotation + 1
						RotateEntity o\entity, 0, door_rotation, 0
					EndIf
				EndIf
					
			Case "keypad"
				If EntityDistance(p\camera, o\entity)&lt;=5 And MouseHit(2)
					While good_code = False
						Rect 350, 250, 25, 25
						Locate 350, 250 
						code$ = Input("Insert code - ")
					
						If code = right_code
							good_code = True
						EndIf
					Wend
				EndIf 
				
			Case "elevator"
				
				If EntityCollided(p\camera, LIFT_COL) And o\y &lt;= o\el_dest
					MoveEntity o\entity, 0, -0.5, 0
				EndIf 
					
				
			Case "oil"
			
				If picked = o\entity
					e.effect = New effect
					e\entity = CopyEntity(ex_1\entity)
					PositionEntity e\entity, px#, py#, pz#
					RotateEntity o\entity, 0, 0, 90
					MoveEntity o\entity, 0, 1.5, 0
					
					If EntityDistance(p\camera, o\entity)&lt;=5
						p\health = p\health - 5
					EndIf 
					
				EndIf 
				
			Case "computer"
							
				;computer catch on fire
				
			Case "weapon"
			
				;update weapon
							
		End Select 
		
		EntityAlpha o\entity, o\alpha#
		EntityShininess o\entity, o\shininess#
		
			
	Next 
	Next 
		
End Function
</pre> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
