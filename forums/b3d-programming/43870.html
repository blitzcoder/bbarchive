<!DOCTYPE html><html lang="en" ><head ><title >My problem is this --</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >My problem is this --</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >My problem is this --</a><br><br>
<a name="489605"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jack</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here is what I need to get done.<br><br>Somehow I need to be able to  configure some verts to exacting spots on a terrain - which is a mesh - not a standard terain.<br><br>I have been doing this in Milkshape and it works just fine except that it takes FOREVER on a large mesh.On top of which there are places I want a really smooth curve and this is VERY hard to do moving vertices by hand in MS.<br><br>I'm guessing that if I knew more math I could write my own code in BB to do the job but I am lacking that skill.<br><br>So I have 4 questions.<br><br>1.What is the best way to choose the number of the closest vert to a spot on which I clicked the mouse?<br>2.How would I get the numbers of the surrounding verts so that I could move them in code?<br>3.Is there some code or maths somewhere to get me started on this type project?<br>4.Who wants to comment on the difficulty of doing this in Blitz.<br> <br>Hope this makes some kind of sense............... <br><br></td></tr></table><br>
<a name="489683"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can use PickedTiangle() and then TriangleVertex() to access a specific vert attached to the triangle you've picked. You will probably then have to find the distance from the picked point to each vert, using Pythag. The shortest distance is then the vert you want.<br><br>BTW, this may be of some interest:<br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=1008" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=1008</a><br><br>As for creating smooth curves, you could always write a mesh terrain generator that uses a heightmap, just like blitz terrains do.<br><br>To solve the problem using math, I'm sure someone else here has already done this kind of thing and will come along and give the details, shortly. :) <br><br></td></tr></table><br>
<a name="489719"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jack</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the reply.<br>Downloaded the link and will start to try to understand what it is doing. <br><br></td></tr></table><br>
<a name="489859"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK, I should have said that the demo doesn't actually use the PickedTriangle/TriangleVertex method I mentioned. :)<br>Rather, it works by attaching a 3D point 'handle' to each vert - I just thought this method might be more useful if you're writing a mesh editor. <br><br></td></tr></table><br>
<a name="489888"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jack</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> big10p -- Thanks for writing and posting this code.<br><br>This looks like it may be a big step forward for me.I need to move the vertices in specified directions and the code was easy enough to modify to get a start on that.Since I will start with a flat surface I guess that should be easy to get in place of the sphere.Problaby will improve on any camera distortion too I guess?<br><br>Next item would be to give choices as to how big I want a circle to be in diameter and then have each vertex moved an amount to form a nice curve.Either vertical or horizontal.<br><br>Would appreciate any ideas and help you could provide.<br>You certainly have been a big help.Thanks. <br><br></td></tr></table><br>
<a name="490351"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jack</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Still looking for some more input. <br><br></td></tr></table><br>
<a name="490470"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Got a bit sidetracked - the motherboard in my dev machine decided to give up after months of threatening it, and my HD died in sympathy. :(<br><br><div class="quote"> Since I will start with a flat surface I guess that should be easy to get in place of the sphere. <br></div><br>Well, as a start, here's a function to create a square, flat terrain mesh. :P<br><pre class=code>
Function create_mesh_terrain(size%, scale#=1.0)

	mesh = CreateMesh()
	surf = CreateSurface(mesh)
	
	For z = 0 To -size Step -1
		For x = 0 To size
			AddVertex(surf,x,0,z)
		Next
	Next
	
	For z = 0 To size-1
		n = z*(size+1)
		For x = 0 To size-1
			AddTriangle(surf,n,n+1,n+size+1)		
			AddTriangle(surf,n+1,n+size+2,n+size+1)		
			n = n + 1
		Next
	Next
	
	PositionMesh mesh,-(size/2.0),0,size/2.0
	ScaleMesh mesh,scale,1,scale
	UpdateNormals mesh
	
	Return mesh
	
End Function
</pre><br>Unfortunately, I don't know the maths off the top of my head for creating curves - I'd have to think about that, once I've got the PC working again. TBH, I thought someone who has already done this kind of thing would have dropped in by now. Oh, well.<br><br><div class="quote"> Problaby will improve on any camera distortion too I guess? <br></div><br>Sorry, you've lost me there.<br><br><br><div class="quote"> Next item would be to give choices as to how big I want a circle to be in diameter and then have each vertex moved an amount to form a nice curve.Either vertical or horizontal. <br></div><br>What do you mean by 'vertical' and 'horizontal' curves? I was thinking you just wanted to grab a vert and pull it straight up, affecting all verts in a certain radius of it - or have I mis-understood what you want?<br><br>BTW, have you tried Wings 3D to do this? It let's you pull vertices about and affect all other verts in a certain radius, using 'magnets'. <br><br></td></tr></table><br>
<a name="490489"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jack</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> big10p:<br>Thanks for the info. <br><br>You are correct.I want to pull verts up or down to make my hills,gullies,etc.That is 75% of the deal and I have used wings (don't really love it however) .Also,I would like the function to be available inside my final build.(happy to give credit).<br><br>As the other 25% I would also like to be able to move the verts on the horizontal plane.The reason is that I want very defined edges between the various textures.I have not found a way to have this anything but blocky with the squares of terrains.Currently I do this in milkshape but it just takes forever and is real difficult to get nice smooth curves,but it  can be done.<br><br>My comment on the camera was in reference to your remark in your archive code of not always getting the tiny verts to show in the right spot.I had no trouble in that regard however. <br><br></td></tr></table><br>
<a name="490549"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Jack,<br><br>A long time ago I wrote a patchwork landscape demo in the code archives - you may want to take a look at that. The random landscape is created by extruding heights based on cos/sin functions within a specified radius.  <br><br>However, for a much better effect you want to look at bezier patches. With these you can get a nice undulating landscape using relatively few control points.<br><br>I have done this successfully but only interpolate on the Y axis.  I kept the x/z step values uniform for simlicity.  E-mail me if you want to see some code.<br><br>Stevie <br><br></td></tr></table><br>
<a name="490608"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jack</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Stevie G.<br>Appreciate it.<br>Bezier patches but never thought  it possible to use in Blitz.<br>I  got a copy of the code but how do I get your e-mail?<br>Doesn't show in your profile. <br><br></td></tr></table><br>
<a name="490641"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> stevie@... <br><br></td></tr></table><br>
<a name="490694"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Jack</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Stevie.<br><br>Looks real good but does make me realize how little I know.<br><br>I have gone through a number of runs changing values etc.<br><br>You don't seem to be using the data statements but I assume that will work.I would be able to create a file,I would think,that would import locations based upon "pick" I made with your other code.Then I guess locations &amp; sizes of height variations could be given<br>chosen values.(somehow).<br><br>That sure solves the vertical stuff.If I have a reasonable grasp on things.<br><br>I'll work on that and then hope to tackle the X direction changes after that.<br><br>No way I could have moved along like this without your help&lt;Thanks.<br><br>By the way - I will look forward to any further input. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
