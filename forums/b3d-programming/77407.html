<!DOCTYPE html><html lang="en" ><head ><title >Server question</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Server question</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Server question</a><br><br>
<a name="866142"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Farflame</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not sure if this is important or not, but I'm currently testing out my online-football-management game, written in Blitz3D (not that there's any 3D in it) and left my server running for over two weeks recently. The test went well with no crashes, but when I came to turn off the server, it took about 30 seconds to shut down and return to the Blitz window. Just wondering if that's a problem and could become a serious problem if the server runs for longer periods? <br><br></td></tr></table><br>
<a name="866146"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GfK</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sounds like a memory leak..... <br><br></td></tr></table><br>
<a name="866154"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >andy_mc</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> leave task manager open and keep an eye on the memory usage by the application. If it's going up and not stopping then a definite memory leak.<br><br>Did you not notice any slowness towards the end of the test or do you just have tonnes of RAM? <br><br></td></tr></table><br>
<a name="866232"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Vertigo</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Blitz3d will always render/redraw the windows.  Especially for server reasons you need to hide this.  Blitz doesnt have a normal "console" window, so everything is using the direct draw frame.  I suggest using Kev's wonderful winblitz3d library and hiding the runtime window.  Should you need access to anything besides logs you can always have a winblitz3d gui up or access it with a remote client management type setup.  Also you can use the SC command and create a new service that runs this executable regardless of a user login.  Im not sure how youre setting this up now if its dedicated or not, but its handy when you have limited terminal service cals :) <br><br></td></tr></table><br>
<a name="866353"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Farflame</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> It does feel like a memory leak yes. There's only 1gb in the PC, so it's not exactly loads. I'll keep an eye on the memory usage and see what happens.<br><br>If it is a memory leak, what causes that and what's the solution? <br><br></td></tr></table><br>
<a name="866380"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >NewtSoup</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Memory Leaks can come in 2 types -<br><br>1) the type described above where the memory for the process keeps increasing and doesn't stop.  This can be caused by objects being continually created but not used or deleted.  Check for unused Custom Types not being disposed of properly. <br><br>2) The second type is not fixable from a programming within blitz point of view, memory is released by the bcc or the blitz application but remains tagged as "in use".  The win32 memory manager then skips over it because it's in use but  it has no process assigned to it.   The used memory does not appear in the task manager information as it is essentially "lost" or truly leaked away. This results in overall system slowness for no apparent reason and requires a full reboot to clear. (Everquest 2 used to do this to me, resulting in me rebooting every hour - fixed now though).  If your system runs speedily after shutting your server down then your problem isn't this.<br><br>There is another reason that your system could be slow to shut down.  The memory manager truly loves to page as much out to disk as possible.  So if your server activity has been low, or concentrated in just a few aspects of the game then the low usage data will be stuffed into you pagefile.sys  If the server has been idle for a week then probably the entire process memory, bar enough to keep the thing ticking, has been stuffed away.  The reason you get slowness when shutting down is it needs to pull all that data back from the disk in order to free up the memory properly when shutting down. <br><br></td></tr></table><br>
<a name="866545"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Farflame</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmm, the server activity is very low at the moment since I only have a handful of testers. It can sometimes go for days without any activity, so maybe it's that.<br><br>Regarding custom types, I've been quite careful to delete these as I go along, to the point that with the most commonly used ones I have the number displayed on the screen every frame to make sure there are none lingering in memory..... but maybe I need to check the lesser used ones aswell, as this only occured after a couple of weeks usage. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
