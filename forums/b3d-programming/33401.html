<!DOCTYPE html><html lang="en" ><head ><title >TCP Client Hangs ( But not in debug )</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >TCP Client Hangs ( But not in debug )</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >TCP Client Hangs ( But not in debug )</a><br><br>
<a name="360042"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Kinda weird this one. I'm plugging away slowly at my multiplayer code and everything's coming along nicely so far. I'm testing on localhost so I have two copies of the game running in debug mode to make sure everything's good, and it seems to be fine.<br>If I make an exe and do the same thing, the client hangs when it tries to join the server. Now I know OpenTCPStream can cause hangs like that if there is no response, but this is quite a long hang, and I'm not entirely sure why the server doesn't respond. In debug mode it does. Now obviously the server can't have focus if the client has it, but don't B3d programs continue to run anyway?<br><br>They ought to be happy to multitask because there are delays to ensure that there is plenty of cpu time to go round. Except obviously that I can't put a delay in the middle of a call to OpenTCPStream. Is that the problem? Should i just ignore it as long as it runs ok in debug mode? <br><br></td></tr></table><br>
<a name="360047"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Could just as easily be the Server hanging, you checked it's delays? <br><br></td></tr></table><br>
<a name="360050"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> 5 Milliseconds per frame. Everything works perfectly in debug mode. When I compile though, different story.<br><br>The Server opens just fine. Then I open another instance, the client. I hit the connect button and the client hangs completely ( to the point where Windows thinks the graphics card has failed after around 30 seconds. <br><br></td></tr></table><br>
<a name="360126"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skidracer</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Eek. <br><br></td></tr></table><br>
<a name="360139"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Neochrome</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> try connecting with two machines in a network, i had the same problem, worked ok with two computers <br><br></td></tr></table><br>
<a name="360200"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, I don't have a network to test on, unfortunately. It did occur to me that it may only be a problem because I'm using localhost, so I guess I'll leave it for now and just keep testing in debug mode until it's all finished. Hopefully if there is a problem, it won't be any harder to solve then. <br><br></td></tr></table><br>
<a name="360438"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nacra</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Are client and server trying to grab the same port?  That doesn't explain why debug works but not retail.<br><br>You might get a copy of Microsoft Virtual PC ($129) to run multiple windows sessions on the same box.  Some people use that to learn or simulate networks.  <a href="http://www.adtmag.com/article.asp?id=8606" target="_blank">http://www.adtmag.com/article.asp?id=8606</a> <br><br></td></tr></table><br>
<a name="360463"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Erm.. aren't client and server supposed to be using the same port? How are they going to link up if they're using a different port?<br><br>I open a TCP server on the port. Then AcceptTCPStream's on that server, while the client OpenTCPStream's to that port. As I say, in debug mode, it runs along merrily, chatting, playing the game, connecting, disconnecting, kicking, all works flawlessly. <br><br></td></tr></table><br>
<a name="360592"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nacra</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> &gt; Erm.. aren't client and server supposed to be using the same port? <br><br>No.  The client and server sides of a TCP connection can be on different ports.  For example connecting an ftp client to an ftp server:  The remote server is listening on port 20 but the client will locally use some random, high port like 15443.  And you could have the client and server on a single machine.<br><br>But the thought I originally had for your deal was that only one process should be listening on one port per machine.  It should be exclusive access, one port, one process.  If, for example, two processes are listening on port 3090, which one responds to a connection request or data transfer?  I don't know your client-server interactions - is it possible that they're both trying to connect to each other over the same port?<br><br>But this theorizing doesn't explain why it works for you in debug mode. !!??<br><br><br>Paul <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
