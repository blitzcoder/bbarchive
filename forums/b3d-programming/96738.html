<!DOCTYPE html><html lang="en" ><head ><title >SOMETHING WRONG WITH CAMERA ROTATION!</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >SOMETHING WRONG WITH CAMERA ROTATION!</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >SOMETHING WRONG WITH CAMERA ROTATION!</a><br><br>
<a name="1120290"></a>

<a name="1120291"></a>

<a name="1120292"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Someone PLEASE help! SOMETHING is wrong with my camera's x rotation when I try to rotate the camera with the mouse.<br><br><br>Can someone tell me why everytime I try to rotate my camera to look up or down, it acts like there's an earthquake there?<br><br><br>You'll need this include file:<br><br><br>Key_Consts.bb: <br><br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">; Common keys:
Const VK_LEFTMOUSE 				= $01	; Left physical mouse button 
Const VK_RIGHTMOUSE 			= $02	; Right physical mouse button
Const VK_MIDDLEMOUSE			= $04	; Middle physical mouse button 
Const VK_BACKSPACE				= $08	; BACKSPACE key
Const VK_TAB 					= $09	; TAB key
Const VK_ENTER 					= $0D	; ENTER key (Main keyboard or keypad)
Const VK_SHIFT 					= $10	; SHIFT key (Left or right)
Const VK_CONTROL 				= $11	; CTRL key (Left or right)
Const VK_ALT 					= $12	; ALT key (Left or right)
Const VK_PAUSE 					= $13	; PAUSE key
Const VK_SCROLL					= $14   ; SCROLL LOCK key
Const VK_ESCAPE 				= $1B	; ESC key
Const VK_SPACE 					= $20	; SPACEBAR
Const VK_PGUP 					= $21	; PAGE UP key
Const VK_PGDN 					= $22	; PAGE DOWN key
Const VK_END 					= $23	; END key
Const VK_HOME 					= $24	; HOME key
Const VK_LEFT 					= $25	; LEFT ARROW key
Const VK_UP 					= $26	; UP ARROW key
Const VK_RIGHT 					= $27	; RIGHT ARROW key
Const VK_DOWN 					= $28	; DOWN ARROW key
Const VK_PRINTSCRN 				= $2C	; PRINT SCREEN key
Const VK_INSERT 				= $2D	; INSERT key
Const VK_DELETE 				= $2E	; DELETE key
Const VK_0 						= $30
Const VK_1 						= $31
Const VK_2 						= $32
Const VK_3 						= $33
Const VK_4 						= $34
Const VK_5 						= $35
Const VK_6 						= $36
Const VK_7 						= $37
Const VK_8 						= $38
Const VK_9 						= $39
Const VK_A 						= $41
Const VK_B 						= $42
Const VK_C 						= $43
Const VK_D 						= $44
Const VK_E 						= $45
Const VK_F 						= $46
Const VK_G 						= $47
Const VK_H 						= $48
Const VK_I 						= $49
Const VK_J 						= $4A
Const VK_K 						= $4B
Const VK_L 						= $4C
Const VK_M 						= $4D
Const VK_N 						= $4E
Const VK_O 						= $4F
Const VK_P 						= $50
Const VK_Q 						= $51
Const VK_R 						= $52
Const VK_S 						= $53
Const VK_T 						= $54
Const VK_U	 					= $55
Const VK_V 						= $56
Const VK_W 						= $57
Const VK_X 						= $58
Const VK_Y		 				= $59
Const VK_Z 						= $5A
Const VK_LEFTWIN				= $5B	; Left Windows key 
Const VK_RIGHTWIN				= $5C	; Right Windows key
Const VK_NUMPAD0 				= $60
Const VK_NUMPAD1 				= $61
Const VK_NUMPAD2 				= $62
Const VK_NUMPAD3 				= $63
Const VK_NUMPAD4 				= $64
Const VK_NUMPAD5 				= $65
Const VK_NUMPAD6 				= $66
Const VK_NUMPAD7 				= $67
Const VK_NUMPAD8 				= $68
Const VK_NUMPAD9 				= $69
Const VK_MULTIPLY 				= $6A	; Keypad *
Const VK_ADD 					= $6B	; Keypad +
Const VK_SEPERATOR 				= $6C	; Keypad /
Const VK_SUBTRACT 				= $6D	; Keypad -
Const VK_DECIMAL 				= $6E	; Keypad .
Const VK_DIVIDE 				= $6F	; Keypad \
Const VK_F1 					= $70
Const VK_F2 					= $71
Const VK_F3 					= $72
Const VK_F4 					= $73
Const VK_F5 					= $74
Const VK_F6 					= $75
Const VK_F7 					= $76
Const VK_F8 					= $77
Const VK_F9 					= $78
Const VK_F10 					= $79
Const VK_F11 					= $7A
Const VK_F12 					= $7B
Const VK_NUMLOCK 				= $90	
Const VK_CAPITAL 				= $91	; CAPS LOCK key
Const VK_LEFTSHIFT				= $A0	; Windows 95 does not support the left and right distinguishing constants.	
Const VK_RIGHTSHIFT				= $A1	
Const VK_LEFTCTRL				= $A2	
Const VK_RIGHTCTRL				= $A3	
Const VK_LEFTALT				= $A4	
Const VK_RIGHTALT				= $A5

; Less common keys:
; Some of the keys here would seem to be common keys, but the documentation does not say they work in 95/98,
; so I did not include them with the other keys above just to be safe.
Const VK_CANCEL 				= $03	; Control-break processing
Const VK_X1MOUSE				= $05	; Windows 2000/XP: X1 mouse button
Const VK_X2MOUSE				= $06	; Windows 2000/XP: X2 mouse button
Const VK_CLEAR 					= $0C	; CLEAR key
Const VK_SELECT 				= $29	; SELECT key
Const VK_EXECUTE 				= $2B	; EXECUTE key
Const VK_PRINT 					= $2A	; PRINT key
Const VK_HELP 					= $2F	; HELP key
Const VK_KANA					= $15	; Input Method Editor (IME) Kana mode
Const VK_HANGUL					= $15	; IME Hangul mode
Const VK_JUNJA					= $17	; IME Junja mode
Const VK_FINAL 					= $18	; IME final mode
Const VK_KANJI 					= $19	; IME Hanja/Kanji mode	
Const VK_CONVERT 				= $1C	; IME convert
Const VK_NONCONVERT				= $1D	; IME nonconvert
Const VK_ACCEPT					= $1E	; IME accept
Const CK_MODECHANGE				= $1F	; IME mode change request
Const VK_APPS 					= $5D	; Applications key 
Const VK_SLEEP					= $5F	; Computer Sleep key
Const VK_F13 					= $7C
Const VK_F14 					= $7D
Const VK_F15 					= $7E
Const VK_F16 					= $7F
Const VK_F17 					= $80
Const VK_F18 					= $81
Const VK_F19 					= $82
Const VK_F20 					= $83
Const VK_F21 					= $84
Const VK_F22 					= $85
Const VK_F23 					= $86
Const VK_F24 					= $87
Const VK_BROWSER_BACK			= $A6	; Windows 2000/XP: Browser Back key
Const VK_BROWSER_FORWARD		= $A7	; Windows 2000/XP: Browser Forward key
Const VK_BROWSER_REFRESH 		= $A8	; Windows 2000/XP: Browser Refresh key
Const VK_BROWSER_STOP 			= $A9	; Windows 2000/XP: Browser Stop key
Const VK_BROWSER_SEARCH 		= $AA	; Windows 2000/XP: Browser Search key 
Const VK_BROWSER_FAVORITES		= $AB	; Windows 2000/XP: Browser Favorites key
Const VK_BROWSER_HOME 			= $AC	; Windows 2000/XP: Browser Start And Home key
Const VK_VOLUME_MUTE 			= $AD	; Windows 2000/XP: Volume Mute key
Const VK_VOLUME_DOWN 			= $AE	; Windows 2000/XP: Volume Down key
Const VK_VOLUME_UP 				= $AF	; Windows 2000/XP: Volume Up key
Const VK_MEDIA_NEXT_TRACK		= $B0	; Windows 2000/XP: Next Track key
Const VK_MEDIA_PREV_TRACK 		= $B1	; Windows 2000/XP: Previous Track key
Const VK_MEDIA_STOP 			= $B2	; Windows 2000/XP: Stop Media key
Const VK_MEDIA_PLAY_PAUSE 		= $B3	; Windows 2000/XP: Play/Pause Media key
Const VK_LAUNCH_MAIL 			= $B4	; Windows 2000/XP: Start Mail key
Const VK_LAUNCH_MEDIA_SELECT	= $B5	; Windows 2000/XP: Select Media key
Const VK_LAUNCH_APP1 			= $B6	; Windows 2000/XP: Start Application 1 key
Const VK_LAUNCH_APP2 			= $B7	; Windows 2000/XP: Start Application 2 key	
Const VK_OEM_1 					= $BA	; Windows 2000/XP: For the US standard keyboard, the ';:' key
Const VK_OEM_PLUS 				= $BB	; Windows 2000/XP: For any country/region, the '+' key
Const VK_OEM_COMMA 				= $BC	; Windows 2000/XP: For any country/region, the ',' key
Const VK_OEM_MINUS 				= $BD	; Windows 2000/XP: For any country/region, the '-' key
Const VK_OEM_PERIOD 			= $BE	; Windows 2000/XP: For any country/region, the '.' key
Const VK_OEM_2 					= $BF	; Windows 2000/XP: For the US standard keyboard, the '/?' key
Const VK_OEM_3 					= $C0	; Windows 2000/XP: For the US standard keyboard, the '`~' key
Const VK_OEM_4 					= $DB	; Windows 2000/XP: For the US standard keyboard, the '[{' key
Const VK_OEM_5 					= $DC	; Windows 2000/XP: For the US standard keyboard, the '\|' key
Const VK_OEM_6 					= $DD	; Windows 2000/XP: For the US standard keyboard, the ']}' key
Const VK_OEM_7					= $DE	; Windows 2000/XP: For the US standard keyboard, the 'single-quote/double-quote' key
Const VK_OEM_8					= $DF	; Used for miscellaneous characters; it can vary by keyboard.
Const VK_ICO_F17				= $E0	
Const VK_ICO_F18				= $E1	
Const VK_OEM102					= $E2	; Windows 2000/XP: Either the angle bracket key or the backslash key on the RT 102-key keyboard
Const VK_ICO_HELP				= $E3
Const VK_ICO_00					= $E4	
Const VK_PROCESSKEY				= $E5	; Windows 95/98/Me, Windows NT 4.0, Windows 2000/XP: IME PROCESS key
Const VK_ICO_CLEAR				= $E6
Const VK_PACKET					= $E7	; Windows 2000/XP: Used to pass Unicode characters as if they were keystrokes.
Const VK_OEM_RESET				= $E9
Const VK_OEM_JUMP				= $EA
Const VK_OEM_PA1				= $EB
Const VK_OEM_PA2				= $EC
Const VK_OEM_PA3				= $ED
Const VK_OEM_WSCTRL				= $EE
Const VK_OEM_CUSEL				= $EF
Const VK_OEM_ATTN				= $F0
Const VK_OEM_FINNISH			= $F1
Const VK_OEM_COPY				= $F2
Const VK_OEM_AUTO				= $F3
Const VK_OEM_ENLW				= $F4
Const VK_OEM_BACKTAB			= $F5
Const VK_ATTN					= $F6	; Attn key
Const VK_CRSEL					= $F7	; CrSel key
Const VK_EXSEL					= $F8	; ExSel key
Const VK_EREOF 					= $F9	; Erase EOF key
Const VK_PLAY 					= $FA	; Play key
Const VK_ZOOM 					= $FB	; Zoom key
Const VK_NONAME 				= $FC	; Reserved
Const VK_PA1 					= $FD	; PA1 key
Const VK_OEM_CLEAR				= $FE	; Clear key</textarea><br><br><br>Main.bb: <br><br><br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">Graphics3D 800, 600, 0, 2



Include "Key_Consts.bb"



AmbientLight 255, 255, 255



Global Camera = CreateCamera()



PositionEntity Camera, 0, 1, 0



Global land=CreatePlane()
EntityColor land, 102, 102, 255



While Not KeyHit(1)
	
	
	
	freelook(15)
	
	
	
	UpdateWorld()
	
	
	
	RenderWorld()
	
	
	
	Flip
	
	
	
Wend



End


;camera freelook
Function freelook(maxspeed#)
	mxspd#=MouseXSpeed()*0.25
	myspd#=MouseYSpeed()*0.25
	HidePointer
	MoveMouse GraphicsWidth()/2,GraphicsHeight()/2
	campitch#=campitch#+myspd#
	If campitch#&lt;-89 Then campitch#=-89
	If campitch#&gt;89 Then campitch#=89
	RotateEntity Camera,campitch#,EntityYaw#(Camera, True)-mxspd#,0
	If GDI_VKeyDown(VK_LEFT, True) Then mvx#=mvx#-maxspeed#
	If GDI_VKeyDown(VK_RIGHT, True) Then mvx#=mvx#+maxspeed#
	If GDI_VKeyDown(VK_UP, True) Then mvz#=mvz#+maxspeed#
	If GDI_VKeyDown(VK_DOWN, True) Then mvz=mvz-maxspeed#
	If GDI_VKeyDown(VK_A, True) Then mvx#=mvx#-maxspeed#
	If GDI_VKeyDown(VK_D, True) Then mvx#=mvx#+maxspeed#
	If GDI_VKeyDown(VK_W, True) Then mvz#=mvz#+maxspeed#
	If GDI_VKeyDown(VK_S, True) Then mvz#=mvz#-maxspeed#
	If GDI_VKeyDown(VK_LEFTMOUSE, True) Then mvz#=mvz#+maxspeed#
	If GDI_VKeyDown(VK_RIGHTMOUSE, True) Then mvz#=mvz#-maxspeed#
	mvx#=mvx#*.8
	mvy#=mvy#*.8
	mvz#=mvz#*.8
	MoveEntity Camera,mvx#,mvy#,mvz#
End Function



; -------------------------------------------------------------------------------------------------------------------------------------
; This function returns 1 if the specified virtual key is being pressed, and 0 if it is not.
;
; Normally, the function checks to see if your application has focus and ignores any keys being held down if it does not,
; but if you want it to tell you if a key is pressed regardless of whether your app has focus, you can set IgnoreFocus to True.
; -------------------------------------------------------------------------------------------------------------------------------------
Function GDI_VKeyDown(VirtualKey, IgnoreFocus=False)
	
	
	
	If (IgnoreFocus = True) And (api_GetActiveWindow() = 0) Then Return
	Return (api_GetAsyncKeyState%(VirtualKey) And %1000000000000000) &gt; 0
	
	
	
End Function</textarea><br><br><br>You'll also need to add this line to your user32.decls file: <br><br><br><br><br>user32.decls: <br><br><br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">.lib "user32.dll"
api_GetAsyncKeyState% (vKey%) : "GetAsyncKeyState"</textarea><br><br><br>Thank you to ALL who help! :)<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1120293"></a>

<a name="1120294"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> PLEASE DON'T WRITE IN CAPS. IT'S TERRIBLY ANNOYING AND DOESN'T MAKE ANYONE THINK YOUR PROBLEM IS PARTICULARLY IMPORTANT.<br><br>Sounds like a gimblelock problem:<br><br><a href="http://en.wikipedia.org/wiki/Gimbal_lock" target="_blank">http://en.wikipedia.org/wiki/Gimbal_lock</a><br><br>Yours is caused by entitypitch when adding/subtracting a number. When the yaw value reaches +90/-90, then the entity flips the yaw and roll values to -180. The entity snaps right round.<br><br><pre class=code>
Graphics3D 800,600
SetBuffer BackBuffer()

Global cam = CreateCamera()

Global sphere = CreateSphere()
FlipMesh sphere
ScaleEntity sphere,3,3,3

Global light = CreateLight()


While Not KeyHit(1)


	If KeyDown(200) Then RotateEntity cam,EntityPitch(cam,True)+1,EntityYaw(cam,True),EntityRoll(cam,True)
	If KeyDown(208) Then RotateEntity cam,EntityPitch(cam,True)-1,EntityYaw(cam,True),EntityRoll(cam,True)
	

	RenderWorld
	Color 0,0,0
	Text 0,0,EntityPitch(cam,True)+","+EntityYaw(cam,True)+","+EntityRoll(cam,True)
	Flip
Wend
End
</pre><br><br>You need to keep track and set the values of the rotations of the camera everytime you call rotateentity, or else it may flip:<br><br><pre class=code>
Graphics3D 800,600
SetBuffer BackBuffer()

Global cam = CreateCamera()

Global sphere = CreateSphere()
FlipMesh sphere
ScaleEntity sphere,3,3,3

Global light = CreateLight()


Global pitch# = 0.0
Global yaw# = 0
Global roll# = 0

While Not KeyHit(1)


	If KeyDown(200) Then
		pitch = pitch + 1
		RotateEntity cam,pitch,yaw,roll
	ElseIf KeyDown(208) Then
		pitch = pitch - 1
		RotateEntity cam,pitch,yaw,roll
	End If
	

	RenderWorld
	Color 0,0,0
	Text 0,0,EntityPitch(cam,True)+","+EntityYaw(cam,True)+","+EntityRoll(cam,True)
	Flip
Wend
End
</pre><br><br>Works perfectly.<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1120298"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks alot, Ross! :) <br><br></td></tr></table><br>
<a name="1120310"></a>

<a name="1120311"></a>

<a name="1120313"></a>

<a name="1120314"></a>

<a name="1120315"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> For those of u who dont want to deal with gimbal lock like me, here's the PERFECT, 3rd person, flying camera code: <br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">Function FreeLook(cam, maxmovespeed#)
	mxs=MouseXSpeed()/2
	mys=MouseYSpeed()/2
	Dest_xang#=Dest_xang#+mys
	Dest_yang#=Dest_yang#-mxs
	xang#=CurveValue#(xang#,Dest_xang#,5)
	yang#=CurveValue#(yang#,Dest_yang#,5)	
	RotateEntity cam,xang#,yang#,0
	MoveMouse GraphicsWidth()/2,GraphicsHeight()/2
	MoveEntity cam, (GDI_VKeyDown(VK_D, True)-GDI_VKeyDown(VK_A) Or GDI_VKeyDown(VK_RIGHT, True)-GDI_VKeyDown(VK_LEFT, True))*maxmovespeed#, (GDI_VKeyDown(VK_Z, True)-GDI_VKeyDown(VK_X, True))*maxmovespeed#, (GDI_VKeyDown(VK_W, True)-GDI_VKeyDown(VK_S) Or GDI_VKeyDown(VK_UP, True)-GDI_VKeyDown(VK_DOWN, True) Or GDI_VKeyDown(VK_LEFTMOUSE, True)-GDI_VKeyDown(VK_RIGHTMOUSE, True))*maxmovespeed#
End Function



Function CurveValue#(current#,destination#,curve)
	current#=current#+((destination#-current#)/curve)
	Return current#
End Function</textarea><br><br><br>Please note, you'll need the user32.decls line in your user32 decls file, and the constants library, along with the GDI_VKeyDown() function in order to get this to work. GDI_VKeyDown is a MUCH better version of KeyDown() It ALSO works with the MOUSE! So if you specify GDI_VKeyDown(VK_LEFTMOUSE, True), then it will check to see if you're holding the left mouse button down! =D<br><br>To use the function, simply call in your main loop before updateworld() AND / OR renderworld(): <br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">FreeLook(MYCAMERA, MYCAMERAMOVEMENTSPEED#) ;Where MYCAMERA is the id of the camera that you used, and MYCAMERAMOVEMENTSPEED# is a decimal number of however fast you want to move your camera around! =D</textarea><br><br>Enjoy! =D<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1120428"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, something's weird with this code... Ive gotten rid of gimbal lock, but NOW if xang# &gt; 85.0 or xang# &lt; -85.0, and i move the mouse up or down too much, for some reason, it doesnt rotate the camera unless whatever's causing this problem is apparently close to 0 on either the positive or negative rotation scale.<br><br><br>Here's the code:<br><br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">Function FreeLook(cam, maxmovespeed#)
	mxs=MouseXSpeed()/2*1.25
	mys=MouseYSpeed()/2*1.25
	MoveMouse GraphicsWidth()/2,GraphicsHeight()/2
	Dest_xang#=Dest_xang#+mys
	Dest_yang#=Dest_yang#-mxs
	xang#=CurveValue#(xang#,Dest_xang#,5)
	yang#=CurveValue#(yang#,Dest_yang#,5)	
	If xang# &gt; 85.0 Then xang# = 85.0
	If xang# &lt; -85.0 Then xang# = -85.0
	RotateEntity cam,xang#,yang#,0
	MoveEntity cam, (GDI_VKeyDown(VK_D, True)-GDI_VKeyDown(VK_A) Or GDI_VKeyDown(VK_RIGHT, True)-GDI_VKeyDown(VK_LEFT, True))*maxmovespeed#, (GDI_VKeyDown(VK_Z, True)-GDI_VKeyDown(VK_X, True))*maxmovespeed#, (GDI_VKeyDown(VK_W, True)-GDI_VKeyDown(VK_S) Or GDI_VKeyDown(VK_UP, True)-GDI_VKeyDown(VK_DOWN, True) Or GDI_VKeyDown(VK_LEFTMOUSE, True)-GDI_VKeyDown(VK_RIGHTMOUSE, True))*maxmovespeed#
End Function



Function CurveValue#(current#,destination#,curve)
	current#=current#+((destination#-current#)/curve)
	Return current#
End Function</textarea><br><br><br>Thanks guys! :) <br><br></td></tr></table><br>
<a name="1120691"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Anyone? :/ <br><br></td></tr></table><br>
<a name="1120727"></a>

<a name="1120728"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can you supply all the code so we can run it? Your "xang" variable should never be greater than 85 or less than -85. Have you tried using the debuglog commands to help you?<br><br>Oh, and if your supplying code for everyone to use, you shouldn't use global variables is in that people don't have. Your function should be passed across everything it needs, unless it is a type object.<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1120802"></a>

<a name="1120803"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, well here's an example code. Although.. I have NO idea why it's gimbal locking again... o.o At any rate, here's the code: <br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">Graphics3D 800, 600, 0, 2


Global cam = CreateCamera()
PositionEntity cam, 0, 1, 0
CameraRange cam, .1, 100000


AmbientLight 255, 255, 255


Global sky = CreateSphere(25)
EntityColor sky, 127, 127, 127
ScaleEntity sky, 10000, 10000, 10000
FlipMesh sky


Global plane = CreatePlane()
EntityColor plane, 102, 102, 255


Global something = CreateCube()
PositionEntity something, 10, 1, 10


While Not KeyHit(1)
	
	
	
	Cls
	
	
	
	If KeyDown(57) Then FreeLook(cam, 10.0)
	
	
	
	UpdateWorld()
	RenderWorld()
	

        Text GraphicsWidth()/2, GraphicsHeight()/2, "xang#: "+xang#, 1, 1
        Text GraphicsWidth()/2, GraphicsHeight()/2+20, "yang#: "+yang#, 1, 1
	
	
	Flip
	
	
	
Wend


Function FreeLook(cam, maxmovespeed#)
mxs=MouseXSpeed()/2*1.25
mys=MouseYSpeed()/2*1.25
MoveMouse GraphicsWidth()/2,GraphicsHeight()/2
Dest_xang#=Dest_xang#+mys
Dest_yang#=Dest_yang#-mxs
xang#=CurveValue#(xang#,Dest_xang#,5)
yang#=CurveValue#(yang#,Dest_yang#,5)	
If xang# &gt; 85.0 Then xang# = 85.0
If xang# &lt; -85.0 Then xang# = -85.0
RotateEntity cam,xang#,yang#,0
MoveEntity cam, 0, 0, (MouseDown(1)-MouseDown(2))*0.5
End Function



Function CurveValue#(current#,destination#,curve)
	current#=current#+((destination#-current#)/curve)
	Return current#
End Function</textarea><br><br><br>Just hold space to activate the camera :)<br><br>Try to go past 85.0 or -85.0 for a while, then move ur mouse in the reverse direction after that. ull see what i mean, if u are able to fix gimbal lock.. i tried and cant &gt;&lt;<br><br>Thanks! :)<br><br><font class="tiny">Last edited 2012</font> <br><br></td></tr></table><br>
<a name="1120825"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, your xang variable is not being declared anyway. That's why in my last psot I mentioned about not having variables in a function that rely on them being declared Global elsewhere, which you haven't done.<br><br>You are also using the "xang" and "yang" value as your rotation numbers. It should be Dest_xang and Dest_yang:<br><br><pre class=code>
Graphics3D 800, 600, 0, 2


Global cam = CreateCamera()
PositionEntity cam, 0, 1, 0
CameraRange cam, .1, 100000


AmbientLight 255, 255, 255


Global sky = CreateSphere(25)
EntityColor sky, 127, 127, 127
ScaleEntity sky, 10000, 10000, 10000
FlipMesh sky


Global plane = CreatePlane()
EntityColor plane, 102, 102, 255


Global something = CreateCube()
PositionEntity something, 10, 1, 10

Global xang#,yang#,Dest_yang#,Dest_xang#


While Not KeyHit(1)
	
	
	
	Cls
	
	
	
	If KeyDown(57) Then FreeLook(cam, 10.0)
	
	
	
	UpdateWorld()
	RenderWorld()
	

        Text GraphicsWidth()/2, GraphicsHeight()/2, "xang#: "+dest_xang#, 1, 1
        Text GraphicsWidth()/2, GraphicsHeight()/2+20, "yang#: "+dest_yang#, 1, 1
	
	
	Flip
	
	
	
Wend


Function FreeLook(cam, maxmovespeed#)
mxs#=MouseXSpeed()/2.0*1.25
mys#=MouseYSpeed()/2.0*1.25
DebugLog("mys="+mys)
MoveMouse GraphicsWidth()/2,GraphicsHeight()/2
Dest_xang#=Dest_xang#+mys
Dest_yang#=Dest_yang#-mxs
xang#=CurveValue#(xang#,Dest_xang#,5)
yang#=CurveValue#(yang#,Dest_yang#,5)	
If Dest_xang# &gt; 85.0 Then dest_xang# = 85.0
If Dest_xang# &lt; -85.0 Then dest_xang# = -85.0
RotateEntity cam,xang#,yang#,0
MoveEntity cam, 0, 0, (MouseDown(1)-MouseDown(2))*0.5
End Function



Function CurveValue#(current#,destination#,curve#)
	current#=current#+((destination#-current#)/curve#)
	Return current#
End Function
</pre> <br><br></td></tr></table><br>
<a name="1120827"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> um, thanks lol. but why is it backwards? o.o <br><br></td></tr></table><br>
<a name="1120875"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2012)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't know. That's the way you've coded it. It is actually the right way round. Games usually invert the Y axis. Beginners stuff...<br><br><pre class=code>
mys#=MouseYSpeed()/2.0*1.25
</pre><br><br>try:<br><br><pre class=code>
mys#=MouseYSpeed()/2.0*-1.25
</pre><br><br>Should invert the Y movement. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
