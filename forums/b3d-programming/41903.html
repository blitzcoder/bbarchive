<!DOCTYPE html><html lang="en" ><head ><title >Terrains - non-walkable areas (slopes)</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Terrains - non-walkable areas (slopes)</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Terrains - non-walkable areas (slopes)</a><br><br>
<a name="470215"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >fall_x</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>Sorry for the amount of questions I'm asking here :)<br>I was wondering, what is the best way to prevent my player from walking on specific areas in a terrain? For instance, I don't want him to walk up or down some mountains... The solution I thought of was creating a second terrain, (possibly a lower resolution image but then scale the terrain to save polygons), with white (very high) pixels where you can't walk, and set the alpha to 0 so you can't see it. Would this be a good solution, or would it be overkill? Any other things I could consider?<br><br>Thanks. <br><br></td></tr></table><br>
<a name="470224"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Iamhere</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Create a unvisible Barrier with Cube or other unvisible objects.<br>Alpha 0.0 <br><br></td></tr></table><br>
<a name="470229"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >fall_x</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, what I suggested above (a second terrain) is kind of the same, except that it allows for more detail... and it has LOD.<br>Still, it might be too slow because it uses more polygons (I would use a very small heightmap and scale it over the larger terrain to keep this to a minimum though).<br>So I'm not sure which method is best. <br><br></td></tr></table><br>
<a name="470236"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> I guess the size of the area required for 'Invisible barriers' would be the main factor on how to approach this. If it's a large, complicated area, perhaps your 2nd mesh may work. Otherwise, if it's just a couple of mountain bits here and there, use some primitives. <br><br></td></tr></table><br>
<a name="470307"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Keep in mind blitz terrains are a bit slow due to the constant rebuilding of the terrain mesh every renderworld. You could make the areas you don't want the player to walk on, a steep slope, and check the collision normals. If the collision normal is too large, then stop the player from walking and slide him down a bit. <br><br></td></tr></table><br>
<a name="470313"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> How do you check the 'collision Normals'?<br><br>I assume this check will give you an answer in vertices? This could really help me with something quite different... <br><br></td></tr></table><br>
<a name="470332"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob Farley</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> <a href="http://www.blitzbasic.com/b3ddocs/command.php?name=CollisionNX&amp;ref=3d_cat" target="_blank">http://www.blitzbasic.com/b3ddocs/command.php?name=CollisionNX&amp;ref=3d_cat</a> <br><br></td></tr></table><br>
<a name="470345"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> The problem is you cannot tell Blitz the max slope angle that is allowed for walking, this would make things much easier.<br><br>I suggest to use invisible things to limit zones. Invisible means, set up all collision settings, but EntityAlpha them to zero (don't use HideEntity), so they won't be rendered, but nevertheless act as collision factors.<br><br>Probably you will be able to write a function that will automaticly generate a ring of vertical quads around terrain-zones that have steep angles. At least that's what I would try to do to save myself a lot of work. <br><br></td></tr></table><br>
<a name="470348"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rob Farley</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Personally I would just stick another collision sphere infront of your player if it gets +/- on the y axis whatever your limit is by comparison to your standard collision sphere then you can't move.<br><br>The downside of this is that you could probably tack accross a cliff face. <br><br></td></tr></table><br>
<a name="470352"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Techlord</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Pehaps you could increase the 'steepness' of the slope so that it can not be climbed. <br><br></td></tr></table><br>
<a name="470356"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >fall_x</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks for the ideas.<br>Suppose I do go for my initial idea, with the extra terrain mesh - what would be best (performance-wise)? Making the image very small in resolution and scaling it, or just changing the terrain detail to a very low value in blitz? Or should I do both?<br>Thanks. <br><br></td></tr></table><br>
<a name="470396"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Pickford</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Are you creating the terrain using a heightmap?  If so create another bitmap the same same size and simply paint a particular colour for where you can walk and other colour for where you can't.   You can read that bitmap into an image and read pixels depending on where your character is?<br><br>You could use any number of key colours to indicate different terrain - water, sand, swamp, forest etc. <br><br></td></tr></table><br>
<a name="470409"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >mrtricks</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> The problem is you cannot tell Blitz the max slope angle that is allowed for walking, this would make things much easier. <br></div><br>Sure you could!<br><br>Create a pivot parented to you that is a little in front of you - or rather a little away from you in the direction you're trying to walk;<br><br>Use this to check the gradient (TerrainY of the pivot minus TerrainY of you)<br><br>If gradient &gt; maximum, don't allow the player to move forward.<br><br>You can get more subtle - in my demo you slow down as you climb steeper gradients and run quicker downhill - you could add fatigue etc. <br><br></td></tr></table><br>
<a name="470448"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GrahamK</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Johns method is the one I'd use. Very light on CPU, and easy to implement. <br><br></td></tr></table><br>
<a name="470454"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >mrtricks</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> The only problem with that method is that you run into kind of square force fields and it can feel a bit strange, but I agree it can be efficient. <br><br></td></tr></table><br>
<a name="470481"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >fall_x</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> "The only problem with that method is that you run into kind of square force fields and it can feel a bit strange, but I agree it can be efficient. "<br>The higher the resolution of the image, the more subtle it will get, so this wouldn't be a problem.<br><br>I think I'll use this method, thanks John! <br><br></td></tr></table><br>
<a name="470685"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >fall_x</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> I got it working, but the player stops very abruptly (I keep track of his previous position, if his current position after the updateworld is in a spot that has a white color in the image then he goes back to his previous position), and I don't know how to program the "image-collision" so that it's sliding collision... So for now I'm going for a second terrain with a detail of only 20, and it works great. <br><br></td></tr></table><br>
<a name="470708"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> &gt;&gt; player stops very abruptly&lt;&lt;<br><br>that's the problem with all "then don't walk" solutions. Additionally it will complicate the handling of other character controls or combinations, eg. jumping, underwatermode etc. Using invisible fences would allow sliding collision allong them.<br><br>If you watch some pro engines, like say lithtech, they all use invisible fences. Especially in outdoor scenes with steep terrain slopes. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
