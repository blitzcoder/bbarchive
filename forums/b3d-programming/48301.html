<!DOCTYPE html><html lang="en" ><head ><title >Mutliplayer IP issues</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Mutliplayer IP issues</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Mutliplayer IP issues</a><br><br>
<a name="537118"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Liberator</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have made multiplayer games before (not using blitz) and a huge issue that I ran into is IPs. What I set up was much like counterstike where you go to join a game, you join a game using a central server. the server sends down the IP of the host and the joining player then connects directly to them.<br><br>Now, problem is that I have two IPs I have to deal with. A local computer's IP addy, and a internet IP. For example you have a household with 3 computers, all connected to one router. The router has an IP like 87.34.123.321 and then each of the 3 computers has their own local IP within the router like 192.168.100.2. Ok so I know both these IP...however when I tell blitz to connect to another computers IP, I obviously have to use the internet IP. Problem is, when the router gets the packet, it doesnt know where to send it, so it ignores it. I can't tell the packet to go to two different IP addresses....so how do I get past this?<br><br>The soultion i came up with was opening up a port on the router then having the packet forwarded to the correct IP address....however this was so hard for players to understand, no one ended up being able to get it working. <br><br>Also, many many professional games are able to not have players go through extreme lengths to host and join over the internet....so why then is this such a headache? isnt there just a way to say "I want to connect to this computer" without having to disable ports, bake a cake and learn to fly? <br><br></td></tr></table><br>
<a name="537124"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Most routers are preconfigured in a way they will block data that comes trough "uncommon" ports, so you have to use a common port or tell the users to make sure the port is not blocked by a firewall, be it software or hardware, eg a router.<br><br>Well, as far as I see the client sends a request that is answererd by the server. The router should undertand this and send the answer to the right lan client, probably using some kind of session ID. Well, I must confess, I'm only guessing.<br><br>Did you try the GNet solution that is using a webserver, php and mySql? <br><br></td></tr></table><br>
<a name="537156"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> There is only one magic solution (that I have heard of) which is the method MSN uses for filetransfers. That method requires "Plug N play" router support which in turn is not 100%. Anyhow you can't rely on that for games. <br><br>Also note that most peer to peer programs like DC++ do require you to forward ports if you are behind a router (or be passive - use the hub to relay searches). As do all games I can think of, right? Actually there is people who are not behind a router.<br><br>I know it is possible to connect several local computers to online servers as long as they initiate the connection. WOW,UT,Quake.. The only time you should need to forward ports is when you host a game behind a router and you want people to connect to you directly (you external ip).<br><br>After initiating contact (to a server for example) the router seems to understand which packets are going back. Even if you are not forwarding any ports. So the solution would be to connect to a external server (Think Gamespy, Gnet should work for this), let people connect to a chat room or so you can connect to them - giving them a way back to your local computer.<br><br>I know this works but perhaps there is circumstances where it does not? <br><br></td></tr></table><br>
<a name="537157"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ozak</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> The user definately needs to setup port forwarding on their router. <br><br></td></tr></table><br>
<a name="537159"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> ozak do you mean to host a game or to join one? <br><br></td></tr></table><br>
<a name="537180"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ozak</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> To host a game. Everybody should be able to join, unless their firewall blocks access the other way. (Which it usually doesn't. It's mostly on coorporate networks, that access to MSN and gaming ports are blocked for "security" reasons :)<br><br>Letting outside users connect to a specified port is as usual as security risk, although if the program responding on a specific port is not flawed in any way it's safe enough.<br><br>XP SP2 actually seperates code and data segments (at last *sigh*) so buffer overrun errors are accounted for :) <br><br></td></tr></table><br>
<a name="537190"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Liberator</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> These are good points. The thing is with my game Lazer I made, people downloaded the game, and then hosted a game. When they told their friends in a different house to connect to their game, it gave them a timeout error and would not connect them - what happened next? Emails in MY mailbox saying my game has bugs....it seems that port forwarding for 'casually hosting' games is not yet common knowledge. I tried to explain to them.. "well see, you have to go to your routers main interface panel, and forward ports 1626 to your ip address which you can figure out by doing this this and this..." by time i got done explaining it they had already gone "screw it" and played anther game where this is not an issue.<br><br>Making players fustrated is one of the best ways to guarantee that they don't want to buy your game, so I don't look highly upon asking my customers to re-configure their routers...at least I know I'm not going crazy and this really is an issue people have to face...but has any other blitz developers run into this problem? I can't imagine someone who spent months making a huge multiplayer game, and then realizing their air-tight code wont work cuz players don't want to invest the time in learning how to host a game.... <br><br></td></tr></table><br>
<a name="537194"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ozak</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I worked on a multiplayer game once, and I never had issues with people connecting. But I did host the server myself.<br><br>It's not unfair to request that users who want to host games should configure their router.<br><br>You could just allow the user to change ports and then suggest they use port 80. this might however clash with any webservers currently running on the LAN :)<br><br>Some nasty firewalls even scans packages and only lets HTTP packages through in which case you'll have to support wrapping your packages inside "html" :)<br><br>If people have an outside IP they should tell the others to connect to that IP. If there are multiple computers behind that IP then port forwarding must be used.<br><br>Having a master server hosted by you where servers "sign up"  is another way to go but a bit harder and usually only recommended for huge online games.<br>This would allow the master server to direct the traffic, but hosts would still need their router configured. There's just no other way about it.<br><br>A last suggestion is to look at your default port. Is it within the user range (which I totally forgot :). Some routers might have whole port ranges open, while locking out anything outside those.<br><br>But don't start explaining people technical stuff. Tell them to look at their router manual. Even huge games like counterstrike and everquest needs open ports just to play.<br>You don't want to be excusing yourself. Make it very clear on your website and in the manual that this is a requirement. So people can see it before they buy, because then it's their own decision and can hardly come as a surprise later :)<br><br><br>A default router configuration however usually either blocks everything or nothing at all. <br>Please make sure that people have software firewalls turned off as those are guaranteed to be restrictive (*cough* windows firewall * cough*)<br>Zonealarm asks you if you want allow a certain program trying to send network packets access.<br><br>Long post. Maybe I repeated myself :) <br><br></td></tr></table><br>
<a name="537346"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> To have your game connect to a Master Server is the way to go. Doing that while listing all games would allow anyone to join games, and those with static ips, to host - for everyone to join. My question is: Have anyone used GNet for this, does it work? <br><br></td></tr></table><br>
<a name="537653"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just a note to zonealarm and other Firewalls that are throwing prompts to the user: When your game runs in Fullscreen, it's a random game if this popup prompt is visible at all, or if it's drawn to the backbuffer, because when you use FLIP, Blitz's Doublebuffer system will flip, but Windows will always draw to buffer 1. For a simple workaround see code archives: "coordinated Flip", in "Misc" AFAIR. <br><br></td></tr></table><br>
<a name="537868"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Wave some firewalls will not allow that sort of behaviour and it is usually such an integral part of their working there is very little you can do to help it. <br><br></td></tr></table><br>
<a name="539088"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Tibit</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Malice, what did you mean, Plug N Play support? <br><br></td></tr></table><br>
<a name="539430"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_Skully</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> I was working on a network layer a long long time ago that was going to allow auto-forwarding. So essentially each computer on the inside domain would route through one computer to fix that problem.<br><br>Never happened but hey... life got in the way <br><br></td></tr></table><br>
<a name="539644"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Andy UK</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> ok as far as i know(tested) if you connect to a host/server on a certain port , the server can send info back on the same port to you and you dont need a port open to recieve it. i think the router leaves the port you send the data on open for a second or two incase there is a response. Counterstrike uses this as you dont need to setup port forwarding to connect to the server. The only thing you need is the port open at the server end if its behind a router. The same thing applies to Internet explorer, when u connect to say "www.google.com" on port 80, you recieve the page data back without the need to have port 80 open at your end. Basically the rule is, if you send a packet of data through a router to a server, the port you sent it through should stay open to allow a response to come back. This is especially true for tcp connections as without you realising, every packet you send, a response is recieved and port 80 isnt open on your router. <br><br></td></tr></table><br>
<a name="539649"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ozak</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Indeed. Joining is no problem unless you have a VERY restrictive firewall like coorporate style. Hosting needs a port open if you are behind a firewall (which you really should be these days).<br><br>Alternative is to host game on port 80 which might clash with any webservers running on your system/LAN. Some firewalls check traffic on port 80 for genuine HTML content but that can be fooled by wrapping your packets in html :) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
