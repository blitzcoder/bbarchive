<!DOCTYPE html><html lang="en" ><head ><title >Unloading Objects</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Unloading Objects</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Unloading Objects</a><br><br>
<a name="1047292"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >pc_tek</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi all!<br><br>My program runs ok, but it is rather annoyingly slow to 'unload' itself from memory after it terminates.  There are 840 32x32 tiles.<br><br>Is there a way to speed this up?  Or should I just upgrade my PC? <br><br></td></tr></table><br>
<a name="1047315"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Axel Wheeler</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Are you sure it's your program?  Do other Blitz programs (like the samples) exit more quickly?<br><br>You might want to watch Task Manager before, during and after the run.  Watch the cpu usage and page file usage.  Does memory continue to get gobbled up even after all the tiles are created?  If so, you may have a memory leak in the program (allocating memory over and over again).<br><br>Here's one idea: If the tiles are quads or meshes that are similar to each other, consider using CopyEntity() rather than separate meshes.  I don't know if you can texture them differently, but you can color them differently and scale them differently, if that helps.<br><br>Good luck! <br><br></td></tr></table><br>
<a name="1047499"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >pc_tek</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> It is just the amount of tiles I have loading up that is taking so long to release once the program has ended.<br><br>Thank for the response, I need a better PC for this LOL. <br><br></td></tr></table><br>
<a name="1047510"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >BLaBZ</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> By tiles I assume you mean quads?<br><br>It may be faster if you "AddMesh" each tile with the same texture <br><br></td></tr></table><br>
<a name="1047516"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Axel Wheeler</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Good point.  A mesh doesn't have to be a single contibuous shape; you can for example add 100 unique tree meshes to one mesh (being sure to FreeEntity the original meshes, otherwise it's no help!).<br><br>There are issues and caveats with this approach though, vertex limits of meshes, multiple surfaces (addmesh tends to create a new surface each time.  Consider sswift's excellent AddMeshToSurface function to avoid this)<br><br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=575" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=575</a><br><br>Anyway, if you post the executable or code we can run it on our machines and see if we have the same experience.  If it's slow even on a fast machine then upgrading won't help.  (not that I have a fast machine, but someone here must!) <br><br></td></tr></table><br>
<a name="1047780"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is this your computer's memory management, or the program Free'ing Entities /Textures etc.?<br><br>Also, remember that Windows wroites various log files on program termination etc. and HD Disk-Writing is often comparitively slow. <br><br></td></tr></table><br>
<a name="1050281"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> If your Machine is running out of RAM, it will save parts of the System to the harddrive to allow your app to use more RAM. After termination it will reload the System parts, this sometimes takes a lot of time. <br><br></td></tr></table><br>
<a name="1050432"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Isn't that only if paging/swap file is set? Otherwise the computer just gives a memory low message. <br><br></td></tr></table><br>
<a name="1052028"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >pc_tek</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I found out through comprehensive testing that B3d takes almost 4 times as long to 'end graphics' than to load them - on my machine.<br><br>My program loads over a 1000 sprites...840 of them from a single image file.  It takes the program about a second to compile...and a second to run.  But takes 3.96 seconds to unload.  So I guess it would all depend on your processor/graphics/ram and HD speed.<br><br>I ran the same program on a high-speed machine (dual core) with lots of ram and SATA2 HD's...and it unloaded in under a second.<br><br>I don't use the 3d part of B3d at all <br><br></td></tr></table><br>
<a name="1052036"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warner</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Then couldn't you load the image once, and use it more often instead of loading it 840 times? <br><br></td></tr></table><br>
<a name="1052043"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >pc_tek</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Warner: No...there are 840 32x32 images...which are loaded using the LoadAnimImage command.  That plus 200 or so other sprites from other sources....<br><br>gfx_tileset=LoadAnimImage("Tiles.png",32,32,0,840) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
