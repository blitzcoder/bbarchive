<!DOCTYPE html><html lang="en" ><head ><title >reading lines from .txt -&gt;strange crash</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >reading lines from .txt -&gt;strange crash</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >reading lines from .txt -&gt;strange crash</a><br><br>
<a name="1032946"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dimas</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have this program:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
f1$=CommandLine$()
If f1$="" Then f1$="test.txt"
long#=FileSize(f1$)
fin=OpenFile(f1$)
If f1$=0 Then Print "error abriendo proyecto":WaitKey():End
op=0
While Not Eof(fin) 
	l$=""
	l$=ReadLine(fin)
	p#=(FilePos(fin)*100)/long
	pp=p
	If pp&lt;&gt;op
		Cls:Locate 0,0
		Print pp+"%"
		Print
		op=p
	EndIf
Wend
CloseFile fin
</textarea><br><br>but it crashed while reading the file "test.txt" (you can download it from <a href="http://www.ampostata.org/misc/test.rar" target="_blank">http://www.ampostata.org/misc/test.rar</a> )<br><br>and I dont know why. I have made several tests and checked the file, and found no reason why it should crash, at least where it does it.<br><br>Any hint?<br><br>Thank you.<br><br>Oh, I am using Win7 64 bits, if this helps.<br><br>PD: testes on XP64, and it also crashes... <br><br></td></tr></table><br>
<a name="1032954"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Charrua</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> is 10 megas!<br><br>i open it with: notepad, wordpad and word, at first seems to be ok, buy if you try to go to the end (Ctrl+End) all three programs hangs!<br>(hangs too from blitz)<br>is late at night here, tomorrow will see<br><br>Juan <br><br></td></tr></table><br>
<a name="1033013"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MusicianKool</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> notepad ++ handles it just fine on a P3 laptop XP. <br><br></td></tr></table><br>
<a name="1033053"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dimas</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> As you see, it is a premiere project.<br><br>I edit videos on HD, but as they are very cpu intensives, I first translate the HD clips to AVI.DV ones. I edited, and when finish, I did a search&amp;replace of some texts inside the project, so I can open this on Premiere as if it was native-edited in HD.<br><br>The problem is that wordpad takes ages (I mean, around 30 minutes) just to change all ".avi" to ".mts".<br><br>My program takes less than a minute... before crashing.<br><br>Juan, bonico, a ver si dieras con la teclaaaaa!!!!<br><br>Can be some problem related to Blitz variable buffer? <br><br></td></tr></table><br>
<a name="1033054"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Serpent</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> This isn't to do with your blitz program, but I second 'Notepad++'.  It handles large files very well with easy Find &amp; Replace options - I used it on a Premiere project myself a few weeks ago. <br><br></td></tr></table><br>
<a name="1033066"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MusicianKool</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> well my blitz crashes on my laptop at about 29 % - 30 %.  i had a look at the file at that mark and found that line 74692 is not only extremely long but seems to have some characters I've never seen before at the end of it.  blitz always seems to crash right before this line, I will try to remove it and re run the program . also that line makes notepad++ act very sluggish.<br>... Yep remove line 74692 in the test file and it works just fine.  <br><br>I will see if you can skip over the line or if it has to be deleted. <br><br></td></tr></table><br>
<a name="1033070"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MusicianKool</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> OMG lol, just saw how big line 74692 is.... its over 7mb no wonder blitz crashes. Cant just skip over it either, once its in the streambuffer that's it for blitz.  maybe you can cut that line out and paste it back in later. <br><br></td></tr></table><br>
<a name="1033145"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Serpent</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> if you wanted to ensure that the program doesn't encounter difficulties, you could try writing something that reads bytes rather than lines.  It would still be possible to do replaces, but at least blitz won't try to read 7mb lines at once... <br><br></td></tr></table><br>
<a name="1033156"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dimas</td><td align="right"><font class=tiny>(Posted 2010)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have in mind the solution, but I think it is too much effort... <br><br>Yes, I am lazy.<br><br>Thank you guys, anyway. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
