<!DOCTYPE html><html lang="en" ><head ><title >Trigger system</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Trigger system</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Trigger system</a><br><br>
<a name="835372"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Naughty Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> ..Im looking for decent, or at least usable trigger system, in order to control my previously generated portals...I saw that quite some time ago, in code archives, but it seems to be dissapeared or I just cant find it..anyone can help?? <br><br></td></tr></table><br>
<a name="835375"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >tonyg</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is it <a href="/codearcs.php?code=632" target="_blank"> this </a>? <br><br></td></tr></table><br>
<a name="835396"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Naughty Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> nope..its not...but luckily I somehow manage to grab it from code archives..its very easy to use, fast and reliable system..<br><br>; Sphere-Box Intersection Routine<br><br>; Blitz version by si@..., based on code found at <a href="http://www.acm.org/tog/GraphicsGems/gems/BoxSphere.c" target="_blank">http://www.acm.org/tog/GraphicsGems/gems/BoxSphere.c</a><br>; See also <a href="http://www.realtimerendering.com/int/" target="_blank">http://www.realtimerendering.com/int/</a> and <a href="http://www.magic-software.com/Intersection.html" target="_blank">http://www.magic-software.com/Intersection.html</a> for some more <br>; (non-Blitz flavoured) intersection routines<br><br>; This routine is a fast, accurate way of testing to see whether a solid sphere intersects a solid axis-aligned box.<br>; Useful to act as an activation zone in games - i.e. if sphere is in invisible zone then activate event.<br><br>; Use mouse to rotate camera, left and right mouse buttons to move camera forward/backward<br>; Move sphere by using cursor keys and r/f for rise/fall<br>; When the sphere touches the box, a 'collision' message should appear in the top-left hand corner of the screen<br><br>; Initialise<br>width=640<br>height=480<br><br>Graphics3D width,height,0,2<br>SetBuffer BackBuffer()<br><br>MoveMouse width/2,height/2<br><br>cam=CreateCamera()<br>PositionEntity cam,0,100,-100<br>RotateEntity cam,30,0,0<br><br>light=CreateLight()<br><br>; Set dimensions for box/sphere, then create them using these dimensions<br>bx#=0 ; box x<br>by#=0 ; box y<br>bz#=0 ; box z<br>bw#=50 ; box width<br>bh#=50 ; box height<br>bd#=50 ; box depth<br>sx#=0 ; sphere x<br>sy#=0 ; sphere y<br>sz#=0 ; sphere z<br>sr#=5 ; sphere radius<br><br>box=CreateCube()<br>EntityColor box,255,255,0<br>FitMesh box,0,0,0,bw,bd,bh<br>PositionEntity box,bx,by,bz<br><br>sphere=CreateSphere()<br>EntityColor sphere,255,0,0<br>ScaleEntity sphere,sr,sr,sr<br><br>PositionEntity sphere,sx#,sy#,sz#<br><br>While Not KeyDown(1)<br><br>	; Move camera<br>	mxs=mxs+MouseXSpeed()<br>	mys=mys+MouseYSpeed()<br><br>	RotateEntity cam,mys,-mxs,0<br>	MoveEntity cam,0,0,MouseDown(1)-MouseDown(2)<br><br>	; Move sphere<br>	If KeyDown(203) Then sx#=sx#-1<br>	If KeyDown(205) Then sx#=sx#+1<br>	If KeyDown(19) Then sy#=sy#+1<br>	If KeyDown(33) Then sy#=sy#-1<br>	If KeyDown(200) Then sz#=sz#+1<br>	If KeyDown(208) Then sz#=sz#-1<br><br>	sx#=sx#+mx#<br>	sy#=sy#+my#<br>	sz#=sz#+mz#<br><br>	PositionEntity sphere,sx#,sy#,sz#<br><br>	RenderWorld<br>	<br>	; Test to see if sphere intersects box<br>	If SphereBoxIntersection(sx#,sy#,sz#,sr#,bx#,by#,bz#,bw#,bh#,bd#)=True Then Text 0,0,"Collision"<br>	<br>	Flip<br><br>Wend<br><br><br>Function SphereBoxIntersection(sx#,sy#,sz#,sr#,bx#,by#,bz#,bw#,bh#,bd#)<br><br>	; sx#,sy#,sz# = sphere x,y,z centre co-ordinates<br>	; sr# = sphere radius<br>	; bx#,by#,bz# = box x,y,z corner co-ordinates<br>	; bw#,bh#,bd# = box width,height,depth<br><br>	Local dmin#=0<br>	Local sr2#=sr*sr<br>	<br>	; x axis<br>	If sx &lt; bx<br><br>		dmin=dmin+((sx-bx)*(sx-bx))<br>		<br>	Else If sx&gt;(bx+bw)<br><br>		dmin=dmin+(((sx-(bx+bw)))*((sx-(bx+bw))))<br><br>	EndIf<br><br>	; y axis<br>	If sy &lt; by<br><br>		dmin=dmin+((sy-by)*(sy-by))<br>		<br>	Else If sy&gt;(by+bh)<br><br>		dmin=dmin+(((sy-(by+bh)))*((sy-(by+bh))))<br><br>	EndIf<br><br>	; z axis<br>	If sz &lt; bz<br><br>		dmin=dmin+((sz-bz)*(sz-bz))<br><br>	Else If sz&gt;(bz+bd)<br><br>		dmin=dmin+(((sz-(bz+bd)))*((sz-(bz+bd))))<br><br>	EndIf<br><br>	If dmin#&lt;=sr2# Then Return True Else Return False<br><br>End Function <br><br></td></tr></table><br>
<a name="835624"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Zethrax</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here's a couple of my trigger systems, if they're any good to you.<br><br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=1901" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=1901</a><br><br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=1920" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=1920</a> <br><br></td></tr></table><br>
<a name="835634"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Naughty Alien</td><td align="right"><font class=tiny>(Posted 2007)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> ..mm..hey Bill..nice one really (OOB)...I like it.. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
