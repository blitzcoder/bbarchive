<!DOCTYPE html><html lang="en" ><head ><title >Surfaces Not Illuminated</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Surfaces Not Illuminated</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Surfaces Not Illuminated</a><br><br>
<a name="400109"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Newbunkle</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm fairly new to Blitz3D, and I've just run into my first major obstacle.<br><br>I've begun creating my own surfaces and meshes, but I run into problems when I add lighting effects. Some surfaces seem unaffected by lights. I created a corridor section which was hex shaped and I then placed a point light inside. Even though all the surfaces are visible from inside, and all are equally distant from the light source, some are illluminated and others aren't. Usually its the floor and the lower left hand wall that are lit up:<br><br>unlit --&gt;  _           <br>unlit --&gt; / \<br>unlit --&gt;   /<br><br>lit --&gt; \_ <br><br>NB: Each wall is a seperate surface, but the whole section is one mesh.<br><br>I can't post the code as I'm not at home. Does anyone have any idea why this might be happening? =/ <br><br></td></tr></table><br>
<a name="400111"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Newbunkle</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> PS: Oops, I've just seen Captain Laser's similar thread. I should point out that I have used UpdateNormal on the object.<br><br>The diagram didn;t turn out too good either. Doh. <br><br></td></tr></table><br>
<a name="400114"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Caff</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yep, updatenormal is your friend. The other time a surface is unaffected by lights is when you use the Fullbright flag on the texture (e.g. you have a lightmap covering the mesh) <br><br></td></tr></table><br>
<a name="400161"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Floyd</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Maybe the normals are pointing the wrong way, out of the corridor rather than into it. <br><br></td></tr></table><br>
<a name="400204"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Newbunkle</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Floyd, I think you've hit the nail on the head, but I'm not sure how to get around it. I've used UpdateNormal at the end of the code once the six sides have been generated. Is there a way to update the normal for each of the six sides seperately? Using ambient light, I've taken a walk around it and the surfaces are inward-facing. Does Blitz usually throw a fit when dealing with meshes with only internal surfaces? <br><br></td></tr></table><br>
<a name="400209"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> You sometimes get some dodgy results if it a very low poly.  You could set the normals manually using the VertexNX / NY / NZ commands  or ... I think SSwift has a function in the code archives which calculates the normals of a mesh and may produce better results for you. <br><br></td></tr></table><br>
<a name="400229"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Newbunkle</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Aha... thanks for the advice. I'll check it out when I get home! =) <br><br></td></tr></table><br>
<a name="400504"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >big10p</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmmm, I seem to be pimping my own stuff alot lately but this little lib may be of use. It'll actually draw the normals so you can visually check they look right.<br><br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=1085" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=1085</a> <br><br></td></tr></table><br>
<a name="400726"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rook Zimbabwe</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Um just a noob myself but did you set AMBIENTLIGHT to at least 12,12,12??? That does help with shadows as well!!! <br><br></td></tr></table><br>
<a name="401021"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Blackledge</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Don't know if this is relevant, but I had a lot of trouble trying to use single-sided rects with ambient lighting. The light just 'gathered at one corner'.<br>In the end I had to make all my village fences out of flattened cubes. <br><br></td></tr></table><br>
<a name="401221"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Newbunkle</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi everyone. I sorted out the problem. My corridor was too long, and the light was right at the middle. I did a test where the light was following the camera. It lights up when you get close to the edge but darkens near the middle. I'm guessing its because the light is worked out at the corners. Thanks for all your help though. I've certainly learned a lesson! From now on... lots of smaller surfaces. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
