<!DOCTYPE html><html lang="en" ><head ><title >Real Water question</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Real Water question</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Real Water question</a><br><br>
<a name="1310183"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Santiworld</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, i working in a own ship game in blitz3d.<br><br>i'm trying to make a good and realistic water.<br><br>for the moment, i using plane water from fastlib and is excelent calm water with reflect and refraction.<br>i Using 3D mesh water moving vertex to simulate waves movement.<br><br><br>the question is, with dx7 and blitz3d, there is any way to create water like this? using libs, or something?<br><a href="https://www.youtube.com/watch?v=ykPjzV9Z5Ew" target="_blank">https://www.youtube.com/watch?v=ykPjzV9Z5Ew</a><br><br><br><br>thanks and sorry my english! <br><br></td></tr></table><br>
<a name="1310195"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> no <br><br></td></tr></table><br>
<a name="1310196"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yue</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Mesh Water, Animating sample on Fragmotion. <br><br></td></tr></table><br>
<a name="1310201"></a>

<a name="1310202"></a>

<a name="1310203"></a>

<a name="1310204"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Using libs.. Yes, by choosing the best wrapper if not B3D, Blitzmax. If you really like to stick with B3D, my best bet is SoftPixel because of the DX9/DX11 rendering. DX11 is experimental as noted on their site.<br><br><a href="http://softpixelengine.sourceforge.net/download/SoftPixelEngineWrapper.zip" target="_blank">http://softpixelengine.sourceforge.net/download/SoftPixelEngineWrapper.zip</a><br><br><a href="http://softpixelengine.sourceforge.net/forum/viewtopic.php?f=11&amp;t=42" target="_blank">http://softpixelengine.sourceforge.net/forum/viewtopic.php?f=11&amp;t=42</a><br><br>Those wrappers seems outdated though, you may need help or some work but still depending on your usage.<br><br>I'm looking into the wrappers myself as I already forgot about this and just remembered picking it up again recently.<br><br>I think your keyword here in making those realistic water is "Tessellation". ;-)<br><br>Nvidia always comes first with some fancy graphics tech to showcase their hardware, this is similar to the Unity DX11 water you posted above<br><br><br><iframe width="560" height="345" src="http://www.youtube.com/embed/4G9anRoYGko" frameborder="0" allowfullscreen></iframe> <br><br></td></tr></table><br>
<a name="1310205"></a>

<a name="1310211"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yue</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi, I 've looked at a sample of water in the examples Blitz3D shows a choppy sea and I think you can improve with Faslibs .<br><br>The example is called water,<br><br><img src="http://i64.tinypic.com/2z4hl05.jpg"> <br><br></td></tr></table><br>
<a name="1310206"></a>

<a name="1310209"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Softpixel supports tessellation but I don't know how far it goes or if it is complete/stable enough for production.<br><br>Look inside the media folder, you'll find ShaderTessellationHLSL.txt but has no usage in those given examples, you have to ask the author (LukasBanana) <br><br></td></tr></table><br>
<a name="1310207"></a>

<a name="1310208"></a>

<a name="1310210"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Yue,<br><br>That's only a simple water example that you can get away with mobile. As long as you have access to Shaders and if SoftPixel's DX11 is good, it should be possible.<br><br>You cannot create your own Shader with Tessellation in FastLibs. <br><br></td></tr></table><br>
<a name="1310245"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Santiworld</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> hi, ok!, thanks!.<br><br>i see now , Tessellation is the secret!<br><br>Blitz3d is so compatible with all PC, and the only limitation is the graphics realism.<br><br>i choose blitz, i don't like Unity, and other lenguages.<br><br>so, i continue the search for good waters using dx7<br><br>this is my first 3dwater, the color of water is becouse is a river.<br><br><img src="https://1.bp.blogspot.com/-fuMFZEF91h8/V2NRpC-_NrI/AAAAAAAAHe4/HMWONTeivDcCdKx8Kv0Q-uiT-uj-t8x2ACK4B/s640/12871456_1611989679026001_630361662082699887_n.jpg"> <br><br></td></tr></table><br>
<a name="1310249"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Santiworld</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> maibe make something like this, is a good way.<br><br>but the shaders?, the sunshinne :(<br><br><a href="https://www.youtube.com/watch?v=C3UelEn15Sc" target="_blank">https://www.youtube.com/watch?v=C3UelEn15Sc</a> <br><br></td></tr></table><br>
<a name="1310250"></a>

<a name="1310251"></a>

<a name="1310252"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> That's nice. Yes, with using wrappers you are still using Blitz3D but with that you have to adjust to other context like 3D Sound and Collision since you are enabling another engine.<br><br><div class="quote"> so, i continue the search for good waters using dx7 <br></div><br><br>The best water I have seen so far in dx7 is fastlibs and ashadows, nothing comes close. I don't know about other demos but these two stand out but as you can see it does not even compare with today's new water rendering with realism.<br><br>I already have asked this and like you has some interest in improving Blitz3D effects but you can't do it without any help from other engine wrappers while maintaining B3D language code. <br><br>Unless you have an extensive knowledge in  C/C++ Graphics/Engine Programming where you can tear up old DX7 blitz3d source code and convert it to DX9/11. <br><br>Speaking of which, you can check out Ploppy's HardWired Lib, but that's far from being stable and can be used in production.<br><br>I would suggest studying Shader Programming and pick between your preferred renderer (DirectX 9/11 or OpenGL) and then pick an engine wrapper that works for you and Blitz3D. <br><br></td></tr></table><br>
<a name="1310253"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RustyKristi</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> but the shaders?, the sunshinne :( <br></div><br><br>sunshine? if you're talking about Fastlibs Light Scattering, it can be done using Shaders and you can find lots of information about that. :)<br><br>Everything that FastLibs and Ashadows offers is now possible even now have some improved versions like the water tessellation you see there. <br><br></td></tr></table><br>
<a name="1310326"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yue</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Real Water here.<br><a href="https://www.shadertoy.com/view/Ms2SD1" target="_blank">https://www.shadertoy.com/view/Ms2SD1</a><br><br><img src="http://i63.tinypic.com/28smot2.jpg"> <br><br></td></tr></table><br>
<a name="1310340"></a>

<a name="1310924"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rick Nasher</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, but contrary to what I've seen with fastlibs it's dead slow under softpixels. But hey perhaps it's just  my old 2007 laptop or I've not seen/tried the latest version..<br>[edit]<br>@Yue: That's some awesome water. I'd expect a shark to come out of there any time. Full screen is a tad slow on my machine though. <br><br></td></tr></table><br>
<a name="1310901"></a>

<a name="1310906"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gpete</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here's a nice piece of code from way back in the forum somewhere with a few changes I made... and also my path to the 20by20 3DS quad file and my local image file..<br><br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Graphics3D 1024,768,32,2
SetBuffer BackBuffer()


Global watermesh=LoadMesh("C:\Blitz3D108\blitzprog\Glenns/3ds/20x20quad.3ds") 
RotateMesh watermesh,90,0,0 
RotateEntity watermesh,-90,0,0
ScaleEntity watermesh,10,10,10

watertexture=LoadTexture("C:\Blitz3D108\blitzprog\Glenns/png/Image00152.png")
EntityTexture watermesh,watertexture,0,3
ScaleTexture watertexture,.05,.05
 

Camera=CreateCamera()
CameraRange camera,0.1,4000
CameraFogMode Camera,1
CameraFogColor Camera,10,10,50
CameraClsColor Camera,10,10,50
CameraFogRange Camera,1500,2000
MoveEntity Camera,0,150,1000
PointEntity Camera,watermesh

MoonLight=CreateLight(1)
PositionEntity Moonlight,100,100,40

light2=CreateLight(2)
PositionEntity light2,100,100,40

Global Moon=CreateSphere(10,MoonLight)
Global moontexture=LoadTexture("C:\Blitz3D108\blitzprog\Glenns/jpg/pluto.jpg")

ScaleEntity Moon,50,50,50
MoveEntity Moon,0,400,150
EntityTexture Moon,moontexture
EntityFX Moon,3

AmbientLight 160,160,160

; ##########################
; # Water Code Starts Here #
; ##########################

; DEPTH#= The maximum amount of movement a vertex will move up or down

Global surface=CountSurfaces(watermesh)
surface=GetSurface(watermesh,1)

Global VertexCount=CountVertices(surface)

Type Vertices
	Field x#
	Field y#
	Field z#
End Type

Dim Vertex.Vertices(VertexCount)

For A=0 To VertexCount-1
Vertex(a) = New Vertices
Vertex(a)\x#=VertexX#(surface,a)
Vertex(a)\y#=VertexY#(surface,a)
Vertex(a)\z#=VertexZ#(surface,a)
Next

Repeat

If KeyDown(200) Then MoveEntity camera,0,1,2
If KeyDown(208) Then MoveEntity camera,0,-1,-2
If KeyDown(203) Then MoveEntity camera,-2,0,0
If KeyDown(205) Then MoveEntity camera,+2,0,0



 
 ;=================================

; Update The Water By Moving The Vertices
UpdateWater()

UpdateWorld()

RenderWorld()

Flip
Until KeyHit(1)
End

Function UpdateWater()
; Create a wave effect by moving all the vertices in the mesh up and down using Sin
; Try editing:
; Freq#=MilliSecs()/10 
;                   ^ The Bigger the divide, the slower the water moves
; Vertex(a)\z#=Sin(freq+Vertex(a)\x#*300+Vertex(a)\y#*400)*1.125
;                                                         ^ The Bigger the Multiply The Higher 
;                                                           the waves will be, lower = smaller

For a=0 To VertexCount-1 
	Freq#=MilliSecs()/6
	Vertex(a)\z#=Sin(freq+Vertex(a)\x#*300+Vertex(a)\y#*400)*1
	VertexCoords surface,a,Vertex(a)\x#,Vertex(a)\y#,Vertex(a)\z#
Next

UpdateNormals watermesh

End Function
		

Function SetCameraFOV(Camera, FOV#) 
	CameraZoom Camera, 1.0 / Tan(FOV#/2.0) 
End Function 

Function SuperCam(cam,ent,cspeed#,dist2#,hite2#,xrot#,tilt#)

TFormPoint 0,hite2#,-dist2#,ent,0

cx#=(TFormedX()-EntityX(cam))*cspeed#
cy#=(TFormedY()-EntityY(cam))
cz#=(TFormedZ()-EntityZ(cam))*cspeed#

TranslateEntity cam,cx,cy#,cz
PointEntity cam,ship
RotateEntity cam,xrot#,EntityYaw(cam),tilt#

End Function


</textarea><br><br>I can't remember where in the forum I found this years ago.. <br><br></td></tr></table><br>
<a name="1310922"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rick Nasher</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Would love to try and run this, but.. eh, media for this? Also: is this quick enough to be applied in a real live game environment? <br><br></td></tr></table><br>
<a name="1310945"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >gpete</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok Rick I looked it up....  the original code is in:<br><br>Blitz3D Code archives/3D Graphics - Mesh/3D Water<br><br>"3D Water by CyBeRGoth"<br>It has a 60 kilobyte media download in the archive of textures.<br>As for the water texture I used there are HUNDREDS of them for free on the web- you don't need the moon thing- the graphic there is one I got from the JPL Nasa Pluto Mission site. So it looks like Cybergoth had a animated texture-   I just used a plain old .png file -  remember that textures have to be a multiple of 8-    32x32  64x64, 128x128, 256x256  etc,<br><br>So in an old program I did the animated Quad mesh moves with the ship mesh- basically that isn't much overhead <br><br></td></tr></table><br>
<a name="1310990"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rick Nasher</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> OK gpete, that seems doable and I probably already have the JPL Nasa pluto texture as I was using that for a planetary sim a while back :-). So then the major question: <br><br>-What does it look like? Can you post a screenshot perhaps so we can see what results we're actually talking about.<br>-Does it rival FastExtensions water? (currently using that one) <br><br></td></tr></table><br>
<a name="1310992"></a>

<a name="1310993"></a>

<a name="1310994"></a>

<a name="1311004"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yue</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here test,<br><br><img src="http://i63.tinypic.com/2zsv67a.png"> <br><br></td></tr></table><br>
<a name="1311005"></a>

<a name="1311006"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yue</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> ... <br><br></td></tr></table><br>
<a name="1310995"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yue</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> My Water, no FastExt, no Ashadow.<br><img src="http://i66.tinypic.com/24zx7hy.png"> <br><br></td></tr></table><br>
<a name="1310996"></a>

<a name="1310998"></a>

<a name="1310999"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yue</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is the best water I've seen in Blitz3D without libraries .<br><br><img src="http://i64.tinypic.com/68rck3.png"><br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
; ID: 991
; Author: Danny
; Date: 2004-04-08 06:26:39
; Title: Dynamic Water
; Description: want footsteps creating ripples in a water surface?

; fxWater Module by Danny van der Ark - dendanny@...
;
; (Heavily) inpired by samples by Reda Borchardt and Rob Cummings.
; use as you like - send me a sample would be cool.
;
; april '04
;

;
; Usage:
;
; 1. Create a water surface using: fxWater_Create( name$, xsize, zsize, dampening#, parent )
;    This function returns the 'type-handle' to the water surface wich you will need later.
;
; 2. Obtain the entity handle (to apply color, texture, alpha, etc) using the function
;	 fxWater_get_entity( typehandle) -&gt; typehandle is the value returned by fxWater_Create()
;
; 3. Then simply call 'fxWater_Update()' every frame during your main loop.
;
;
; 4. To create a splah in the water use the fxWater_Dimple() function. The function needs the
;	 type handle that was returned by 'fxWater_Create', the coordinates of the splash, the
;	 force/strength of the splash and the 'range' or size of the splash.
;
;	 fxWater_Dimple( hand, x,z, force#=1.0, range#=1.0)
;
; 5. Freeing stuff not done yet because I want to alter it to use memory banks in stead of
;	 a large static array to store the vertex data - wich should give a more efficient use
;	 of memory...
;
; You can create as many surfaces of any size as you wish. If you wish surfaces larger than 100x100
; then adjust the fxwater_max_depth/width globals. If you want more than 5 surfaces at the same time
; adjust the fxwater_max accordingly. 
; 
; It is necesary To 'UpdateNormals' every frame to ensure the highlights are re-calculated every
; frame. Without this the ripples are there, but just not visible. This slows things down
; dramatically ofcourse. Any other ideas welcome....
;
; He ho, enjoy!
;
; ooo
; (_) Danny v.d. Ark



Global fxWATER_MAX = 5				;max number of active surfaces/effects at one time
Global fxWATER_NUM = 0				;current number of active water effects.

Global FXWATER_MAX_WIDTH = 100		;max sub-division for water meshes
Global FXWATER_MAX_DEPTH = 100		;max sub-division for water meshes

Global FXWATER_MAX_BANKS = fxWATER_MAX * 2
Global FXWATER_NUM_BANKS = 0


Global DEMO_WATER_WIDTH	 = 40 	;--&gt; Adjust these for different plane sizes / mesh resolution
Global DEMO_WATER_DEPTH  = 40


;reserve memory banks for vertice altitudes
Dim fxWaterBank#(FXWATER_MAX_BANKS, FXWATER_MAX_WIDTH, FXWATER_MAX_DEPTH )


Type fxWaterWave

	Field id
	Field name$
	
	Field active		;if not ripples then fx is not actiave
	
	Field parent		;parent entity (if any)
	Field entity		;water mesh
	Field surface		;water surface

	Field bank1			;pointers to array for mem storage
	Field bank2

	Field width			;width of plane / surface
	Field depth			;depth of plane / surface
	Field dampening#	;water dynamics

End Type

;Demo options
Global OPT_WIREFRAME = 0
Global OPT_REFRSH 	 = 0
Global OPT_BALLFREEZE= 0
Global OPT_CEILING	 = 1

;--------------------------------------------------------------------------------------------------

;Graphics3D 640,480,32,1
Graphics3D 640,480,0,2

; Camera + Light
Global campivot = CreatePivot()
Global camera = CreateCamera(campivot)

PositionEntity camera, 0, 0, -35
PointEntity camera, campivot

light = CreateLight(2)
PositionEntity light,-60,0,100
LightColor light,240,240,210
PointEntity light, campivot

light = CreateLight(2)
PositionEntity light,50,0,-50
LightColor light,150,150,180
PointEntity light, campivot

AmbientLight 40,40,40

;load texture
;tex = LoadTexture ("water.tga",1+64)
tex = create_noise_map()

;create water planes
Global w1 = fxWater_Create( "floor",  DEMO_WATER_WIDTH, DEMO_WATER_DEPTH, 0.025 )
water = fxWater_get_entity( w1 )
PositionEntity water, 0, -10, 0
EntityColor water, 30,50,200
EntityShininess water, 0.1
EntityTexture water,tex

Global w2 = fxWater_Create( "ceiling",  DEMO_WATER_WIDTH, DEMO_WATER_DEPTH, 0.025 )
water = fxWater_get_entity( w2 )
FlipMesh water ; flip it because the camera is underneath it
PositionEntity water, 0, 10, 0
EntityColor water, 250,100,100
EntityColor water, 140,130,20
EntityShininess water, 0.1
EntityTexture water,tex

;force refresh
fxWater_Dimple( w1, 1,1, 0.001, 0.001)
fxWater_Dimple( w2, 1,1, 0.001, 0.001)

;set random ball direction/speed
Global bx#=  0.2
Global by#= -1.75
Global bz#= -0.25

Global bmaxx# =  DEMO_WATER_WIDTH * 0.5	;half the width of the water plane
Global bmaxy# = 10.0
Global bmaxz# =  DEMO_WATER_DEPTH * 0.5	;half the depth of the water plane

;create ball
ball = CreateSphere(6)
EntityColor ball, 0,0,0
EntityShininess ball, 1.0
EntityTexture ball, tex

SeedRnd MilliSecs()

; Main Loop
tstart = MilliSecs() + 1000
frame = 0

Global lastx# = 0
Global lasty# = 0
Global lastz# = 0

tim = CreateTimer(50)

l$ = "WavyWaterFx by Danny van der Ark"

While Not KeyHit(1)

	;update bouncing ball
	update_ball( ball )
	
	;update fxWater
	fxWater_update()
	
	;render
    UpdateWorld
    RenderWorld

	;debug
	Color 000,000,000
	Text 2,1, l$
	Color 255,255,255
	Text 2,0, l$
	Color 100,100,100
	Text 2,12, "based on samples from Reda Borchardt And Rob Cummings."
	Color 20,140,255
	Text 2,454, "[ESC] to quit - [D] for fast but dirty refresh(" + OPT_REFRESH + ") - [W] To toggle WireFrame (" + OPT_WIREFRAME + ")"
	Text 2,466, "[P] To pause  - [B] to pause/reset ball - [C] to toggle ceiling"
	Color 250,250,220
	Text 10,220,"FPS  " + fps
	Text 10,232,"TRIS " + TrisRendered()

	;orbit camera
	;TurnEntity campivot, 0, 0.25, 0

	;check fps
	frame = frame + 1
	If MilliSecs() &gt;= tstart Then
		fps = frame
		frame = 0
		tstart = MilliSecs() + 1000
	EndIf

	;toggle ceiling [C]
	If KeyHit(46) Then
		OPT_CEILING = 1 - OPT_CEILING
		If OPT_CEILING Then
			water = fxWater_get_entity(w2)
			ShowEntity water
		Else
			water = fxWater_get_entity(w2)
			HideEntity water
		EndIf
	EndIf
	
	;pause all [P]
	If KeyHit(25) Then
		FlushKeys
		While Not KeyHit(25) Wend
	EndIf

	;pause ball [B]
	If KeyHit(48) Then
		OPT_BALLFREEZE = 1 - OPT_BALLFREEZE
		If OPT_BALLFREEZE Then
			PositionEntity ball, 0,0,0
			bx# = 0
			by# = 0
			bz# = 0
		Else
			bx#=Rnd#(-1,1)
			by#=Rnd#(-2,2)
			bz#=Rnd#(-1,1)
		EndIf
	EndIf

	;wireframe [W]
	If KeyHit(17) Then
		OPT_WIREFRAME = 1 - OPT_WIREFRAME
		WireFrame OPT_WIREFRAME
	EndIf
	
	;Dirty refresh [D]
	If KeyHit(32) Then
		OPT_REFRESH = 1 - OPT_REFRESH
	EndIf	

	;check refresh mode
	If OPT_REFRESH Then
		;fast and dirty (pot noodle style)
	    Flip False
	Else
		;slow but clean
		Flip True
		WaitTimer(tim)
	EndIf

	If MouseHit(1) Then
		x = Rnd(1,DEMO_WATER_WIDTH)
		z = Rnd(1,DEMO_WATER_DEPTH)
		fxWater_Dimple( w1, x, z, 1, 5)
	EndIf
Wend

End

;--------------------------------------------------------------------------------------------------

Function update_ball( ent )

	;move the ball
	TranslateEntity ent, bx,by,bz

	DoDimple = False
	
	;check left/right walls
	If EntityX#(ent) &gt;  bmaxx-2 Then bx# = bx# * -1
	If EntityX#(ent) &lt; -bmaxx+2 Then bx# = bx# * -1

	;check ceiling bounce
	If EntityY#(ent) &gt;  bmaxy-2 Then
		;reverse vertical direction
		by# = by# * -1.0
		;create dimple
		fxWater_Dimple(w2, EntityX(ent)+bmaxx,EntityZ(ent)+bmaxz, -1.0, 5.0)
		;slightly alter direction
		bx# = bx# + Rnd#(-0.25, 0.25)
		bz# = bz# + Rnd#(-0.25, 0.25)
	EndIf

	;check floor bounce
	If EntityY#(ent) &lt; -bmaxy+2 Then
		;reverse vertical direction
		by# = by# * -1.0
		;create dimple
		fxWater_Dimple(w1, EntityX(ent)+bmaxx,EntityZ(ent)+bmaxz, 1.0, 5.0)
		;slightly alter direction
		bx# = bx# + Rnd#(-0.25, 0.25)
		bz# = bz# + Rnd#(-0.25, 0.25)
	EndIf

	;check front/back walls
	If EntityZ#(ent) &gt;  bmaxz-2 Then bz# = bz# * -1
	If EntityZ#(ent) &lt; -bmaxz+2 Then bz# = bz# * -1

End Function

;--------------------------------------------------------------------------------------------------

Function fxWater_Create( name$="", width=1, depth=1, damp#=0.01, parent=0 )


	;create new Wavy water effect plane
	w.fxWaterWave = New fxWaterWave

	w\id		= 1
	w\name$		= name$
	
	w\active	= True
	
	;create rectangular grid mesh
	w\width		= width
	w\depth		= depth
	w\dampening#= 1 - damp#
	
	w\parent	= parent
	w\entity	= create_mesh_plane( w\width, w\depth, False, parent )
	w\surface	= GetSurface(w\entity,1)
	
	;store handle for quick retrieval during collision
	NameEntity w\entity, Handle(w)
	
	;reserve memory banks to hold vertex energy
	w\bank1		= fxWater_Create_Buffer()
	w\bank2		= fxWater_Create_Buffer()
	
	;return mesh handle
	Return Handle(w)
	
End Function

;--------------------------------------------------------------------------------------------------

Function fxWater_update()

	For w.fxWaterWave = Each fxWaterWave

		;if the surface is perfectly flat then this value remains 0
		dyna# = 0
		
		;process water
	    For x = 1 To w\width-1
	        For z = 1 To w\depth-1
				fxWaterBank#(w\bank2,x,z) = (fxWaterBank#(w\bank1,x-1,z) + fxWaterBank#(w\bank1,x+1,z) + fxWaterBank#(w\bank1,x,z+1) + fxWaterBank#(w\bank1,x,z-1)) / 2.1-fxWaterBank#(w\bank2,x,z) 
				fxWaterBank#(w\bank2,x,z) = fxWaterBank#(w\bank2,x,z) * w\dampening#
				dyna# = dyna# + fxWaterBank#(w\bank2,x,z)
	        Next
	    Next

		;Only deform patch if necesary
		If dyna# &lt;&gt; 0 Then
		    ;PatchTransform
			k=0
			For i = 0 To w\depth
		        For j = 0 To w\width
					VertexCoords(w\surface,k,VertexX(w\surface,k),fxWaterBank#(w\bank2,j,i),VertexZ(w\surface,k))
		            k=k+1
		        Next
		    Next
		EndIf

		;should be optional - depending on type of texture (slows down seriously!)
		UpdateNormals w\entity
		
	    ;SwapWaterBuffer
		tmp = w\bank1
		w\bank1 = w\bank2
		w\bank2 = tmp

	Next

End Function

;--------------------------------------------------------------------------------------------------

Function fxWater_Dimple( hand, x,z, force#=1.0, range#=1.0)
	
	w.fxWaterWave = Object.fxWaterWave(hand)

	For xg = x - range# * 0.5 To x+range# * 0.5
		For zg = z - range# * 0.5 To z+range# * 0.5
			If xg&gt; 0 And xg &lt; w\width And zg&gt;0 And zg&lt;w\depth Then
				fxWaterBank#(w\bank2, xg,zg) = force#
			EndIf
		Next
	Next

End Function

;--------------------------------------------------------------------------------------------------

Function fxWater_get_surface( hand )

	w.fxWaterWave = Object.fxWaterWave( hand )
	Return w\surface

End Function

;--------------------------------------------------------------------------------------------------

Function fxWater_get_entity( hand )

	w.fxWaterWave = Object.fxWaterWave( hand )
	Return w\entity

End Function

;--------------------------------------------------------------------------------------------------

Function fxWater_Create_Buffer() ; xsize=1, zsize=1 )

	If FXWATER_NUM_BANKS &gt;= FXWATER_MAX_BANKS Then 
		RuntimeError "[fxWater::Create_buffer] Max amount of fxWater memory banks reached!"
	Else
		;create a new memory bank and resize it to fit
		FXWATER_NUM_BANKS = FXWATER_NUM_BANKS + 1
		;NOTE: convert array into memory bank
	EndIf

	Return FXWATER_NUM_BANKS
	
End Function

;--------------------------------------------------------------------------------------------------

Function fxWater_Free_Buffers( )

;| Frees all buffers. Call as a part of when scene/level is removed from memory.


	;NOTE: resize memory banks to 0 (once implemented).

	Return 0
	
End Function

;--------------------------------------------------------------------------------------------------

;Creates a flat grid mesh
Function create_mesh_plane(width=1,depth=1,doublesided=False,parent=0)

	tot = width + (depth*width)
	mix#= (width+depth) * 0.5
	
	mesh=CreateMesh( parent )
	surf=CreateSurface( mesh )
	
	stx#=-.5
	sty#=stx
	stp#=Float(1)/Float(mix#)
	y#=sty#
	
	For a=0 To depth
		x#=stx
		v#=a/Float(depth)
		
		For b=0 To width
			u#=b/Float(width)
			AddVertex(surf,x,0,y,u,v)
			x=x+stp
		Next
		y=y+stp
	Next
	
	For a=0 To depth-1
		For b=0 To width-1
			v0=a*(width+1)+b:v1=v0+1
			v2=(a+1)*(width+1)+b+1:v3=v2-1
			AddTriangle( surf,v0,v2,v1 )
			AddTriangle( surf,v0,v3,v2 )
		Next
	Next
	
	UpdateNormals mesh

	If doublesided=True Then EntityFX mesh,16
	
	FitMesh mesh, -width*0.5, 0, -depth*0.5, width, 1, depth
	
	Return mesh

	
End Function

;--------------------------------------------------------------------------------------------------

Function create_noise_map()

; creates a noise map to be used as a generic reflection map

	sq = 128

	tex = CreateTexture(sq,sq,65,1)
	tbuf = TextureBuffer(tex)
	SetBuffer(tbuf)
	
	For x = 0 To sq-1
		For y = 0 To sq-1
			r = Rnd(100,120)
			g = Rnd(100,130)
			b = Rnd(190,240)
			Color r,g,b
			Rect x,y,1,1
		Next
	Next	
	
	SetBuffer(BackBuffer())
	
	Return tex

End Function


;--------------------------------------------------------------------------------------------------
;[End of stuff]

</textarea> <br><br></td></tr></table><br>
<a name="1311007"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Santiworld</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi! the montain water looks very good!, can you upload more image of that water? <br><br></td></tr></table><br>
<a name="1311009"></a>

<a name="1311010"></a>

<a name="1311012"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yue</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> Here Code Water only Blitz3D.<br><img src="http://i68.tinypic.com/2cigvnp.png"><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Function CurveValue#(current#,destination#,curve)
	current#=current#+((destination#-current#)/curve)
	Return current#
End Function
Graphics3D 800,600,32, 2
SetBuffer BackBuffer() 
Global setup_cubemapping

;detect hardware
If GfxDriverCaps3D() =&gt; 110 setup_cubemapping=True Else setup_cubemapping=False

;uncomment this to try env map instead
;setup_cubemapping=False 
;create misc 'world stuff'
Global sky
sky=LoadSkyBox("sky\")
EntityOrder sky,1
campiv=CreatePivot()
head=CreatePivot(campiv)
camera=CreateCamera(campiv)
CameraClsColor camera,60,60,60
CameraFogMode camera,1
CameraFogColor camera,255,255,255
MoveEntity head,0,0,10 
PositionEntity camera,-20,5,40
;light for envmap mode
light=CreateLight(3)
RotateEntity light,45,0,0 

;resolution of water better to make y bigger than x so the waves move in right direction (water can be rotated later)


;use this to create a parent for our water as obj is animated its best to use a pivot for moving, rotating etc
waterpiv=CreatePivot() 
segx=200
segy=200
;create the water, works best if you keep the xsegs as a low value, and the larger the y value the smaller the fall ln zone.
water = CreateWater(waterpiv,segx,segy,600,600,.25,1.02,1,100,120,140)

;initialise cubemapper
Init_cubemapper()


;main loop
While Not KeyDown( 1 ) 
	
	If KeyDown(200)Then MoveEntity camera,0,1,0
	If KeyDown(208)Then 	If EntityY(camera)&gt;3 MoveEntity camera,0,-1,0
	If KeyDown(54)Then 	MoveEntity camera,0,0,2
	If KeyDown(157)Then 	MoveEntity camera,0,0,-2
	If KeyDown(205)Then 	TurnEntity campiv,0,1,0
	If KeyDown(203)Then TurnEntity campiv,0,-1,0
	

	PointEntity camera,head
	
	;MOUSE CONTROL
	mx=MouseX()
	my=MouseY()
	mx=GraphicsWidth()/2
	my=GraphicsHeight()/2
	mxs=MouseXSpeed()
	mys=MouseYSpeed()

	dest_xang#=dest_xang#+mys/4
	dest_yang#=dest_yang#-mxs/4
	
	xang#=CurveValue#(xang#,dest_xang#,3)
	yang#=CurveValue#(yang#,dest_yang#,3)
	
	RotateEntity camera,xang#,yang#,0
	

	MoveMouse GraphicsWidth()/2,GraphicsHeight()/2
	UpdateWorld
	UpdateCubemaps(camera)
	RenderWorld 
	Flip 

Wend 
 

Function CreateWater(	parent,wxsegs,wysegs,wquadsizex#=100,wquadsizey#=100,wamplitude#=1,wspeed#=0.01,dir=0,colr=100,colg=120,colb=140)
	;create water
	h=CreateWaterQuad(wxsegs,wysegs) 
	
	;joint to pivot/parent
	If parent EntityParent h,parent

	;size to correct size and rotation
	ScaleMesh h,wquadsizex#,wamplitude#,wquadsizey#
	UpdateNormals h
	RotateEntity h,0,dir,0

	;create 2 animation frames at start and end positions 
	;First frame 0
	PositionEntity h,0,0,0
	SetAnimKey h,0
	
	;Frame 1
	PositionEntity h,0,0,0+((wquadsizey/wysegs)*4)				
	SetAnimKey h,1
	
	;store animation, reset pos &amp; setup loop animation
	seq=AddAnimSeq (h,1)
	PositionEntity h,0,0,0
	Animate h,1,wspeed#,0
							
	;add reflections
	DebugLog"cubemap init"
	cu.cubemap=New cubemap 
	cu\h=h
	If setup_cubemapping 
		cu\tex=CreateTexture(256,256,1+16+32+128+256)
		DebugLog("Passed")
		EntityFX cu\h,1
	Else
		cu\tex=LoadTexture("sky\up.jpg",64)
		DebugLog("Failed switching to envmap")
		EntityFX cu\h,0
	EndIf	
	TextureBlend cu\tex,2
	EntityColor cu\h,colr,colg,colb
	EntityTexture cu\h,cu\tex
		
					
	Return h
End Function 


Function CreateWaterQuad(yblocs=100,xblocs=100)

	;create our mesh
	mesh=CreateMesh()
	surface=CreateSurface( mesh )
	startpointx#=0: xgridstep#=1.0/Float(xblocs)
	startpointy#=0: ygridstep#=1.0/Float(yblocs)
	
	;create points
	y#=startpointy
	For a=0 To xblocs
		x#=startpointx
		v#=a/Float(xblocs)
		For b=0 To yblocs
			u#=b/Float(yblocs)
			AddVertex(surface,x,0,y,u,v) 
			x=x+xgridstep
		Next
		y=y+ygridstep
	Next
	;create faces
	For a=0 To xblocs-1
		For b=0 To yblocs-1
			v0=a*(yblocs+1)+b
			v1=v0+1
			v2=(a+1)*(yblocs+1)+b+1
			v3=v2-1
			AddTriangle( surface,v0,v2,v1 )
			AddTriangle( surface,v0,v3,v2 )
		Next	
	Next

	;move the vertices up &amp; down alternately
	inv=-1
	inv2=1
	For x=0 To xblocs Step 2
		cStep=cStep+1:If cStep=9 cStep=1
		yheight=inv
		inv=-inv 
		;inv2=-inv2
		If inv=1 Then cstep2=0 Else cstep2=7
		For y=0 To yblocs Step 1
			cStep2=cStep2+1:If  cStep2=9 cStep2=1
			xheight=inv2
			inv2=-inv2
			vert = y+((x*(yblocs+1)));works out vertex number on matrix
			VertexCoords surface,vert,VertexX(surface,vert),VertexY(surface,vert)+(yheight+xheight),VertexZ(surface,vert)
		Next
	Next
	
		
	FitMesh mesh,-0.5,-0.5,-0.5,1,1,1
	Return mesh
End Function


;Cubemapper code 
Global cubemapcamera

Type cubemap
	Field h,tex
End Type

Function Init_cubemapper()
If setup_cubemapping
	cubemapcamera=CreateCamera()	
	HideEntity cubemapcamera
EndIf
End Function

Function UpdateCubemaps(maincamera,range=5000)
If setup_cubemapping
	For cube.cubemap = Each cubemap

		tex=cube\tex
		entity=cube\h
		camera=cubemapcamera
	
		CameraProjMode maincamera,0
		CameraRange	camera,1,range
		HideEntity entity
		ShowEntity camera
		CameraClsMode camera,False,True

		;position cubemap camera
		camoffsety#=(EntityY(maincamera,True)-EntityY(entity,True))
		PositionEntity camera,EntityX#(maincamera,True),EntityY#(entity,True)-camoffsety,EntityZ(maincamera,True)

		;make texture from all angles
		texturesize=TextureWidth(tex)
		CameraViewport camera,0,0,texturesize,texturesize
		SetCubeFace tex,0:RotateEntity camera,0,90,0:RenderWorld
		CopyRect 0,0,texturesize,texturesize,0,0,BackBuffer(),TextureBuffer(tex)
		SetCubeFace tex,1:RotateEntity camera,0,0,0:RenderWorld
		CopyRect 0,0,texturesize,texturesize,0,0,BackBuffer(),TextureBuffer(tex)
		SetCubeFace tex,2:RotateEntity camera,0,-90,0:	RenderWorld
		CopyRect 0,0,texturesize,texturesize,0,0,BackBuffer(),TextureBuffer(tex)
		SetCubeFace tex,3:RotateEntity camera,0,180,0:	RenderWorld
		CopyRect 0,0,texturesize,texturesize,0,0,BackBuffer(),TextureBuffer(tex)
		SetCubeFace tex,4:RotateEntity camera,-90,0,0:	RenderWorld
		CopyRect 0,0,texturesize,texturesize,0,0,BackBuffer(),TextureBuffer(tex)
		SetCubeFace tex,5:RotateEntity camera,90,0,0:	RenderWorld
		CopyRect 0,0,texturesize,texturesize,0,0,BackBuffer(),TextureBuffer(tex)
		
		ShowEntity entity
		HideEntity camera
		CameraProjMode maincamera,1

	Next		
EndIf
End Function

Function LoadSkyBox( file$ );courtesy of the ol' castle demo! :)
	m=CreateMesh()
	;front face
	b=LoadBrush( file$+"front.jpg",49 )
	s=CreateSurface( m,b )
	AddVertex s,+1,+1,-1,0,0:AddVertex s,-1,+1,-1,1,0
	AddVertex s,-1,-1,-1,1,1:AddVertex s,+1,-1,-1,0,1
	AddTriangle s,0,1,2:AddTriangle s,0,2,3
	FreeBrush b
	;right face
	b=LoadBrush( file$+"left.jpg",49 )
	s=CreateSurface( m,b )
	AddVertex s,+1,+1,+1,0,0:AddVertex s,+1,+1,-1,1,0
	AddVertex s,+1,-1,-1,1,1:AddVertex s,+1,-1,+1,0,1
	AddTriangle s,0,1,2:AddTriangle s,0,2,3
	FreeBrush b
	;back face
	b=LoadBrush( file$+"back.jpg",49 )
	s=CreateSurface( m,b )
	AddVertex s,-1,+1,+1,0,0:AddVertex s,+1,+1,+1,1,0
	AddVertex s,+1,-1,+1,1,1:AddVertex s,-1,-1,+1,0,1
	AddTriangle s,0,1,2:AddTriangle s,0,2,3
	FreeBrush b
	;left face
	b=LoadBrush( file$+"right.jpg",49 )
	s=CreateSurface( m,b )
	AddVertex s,-1,+1,-1,0,0:AddVertex s,-1,+1,+1,1,0
	AddVertex s,-1,-1,+1,1,1:AddVertex s,-1,-1,-1,0,1
	AddTriangle s,0,1,2:AddTriangle s,0,2,3
	FreeBrush b
	;top face
	b=LoadBrush( file$+"up.jpg",49 )
	s=CreateSurface( m,b )
	AddVertex s,-1,+1,-1,0,1:AddVertex s,+1,+1,-1,0,0
	AddVertex s,+1,+1,+1,1,0:AddVertex s,-1,+1,+1,1,1
	AddTriangle s,0,1,2:AddTriangle s,0,2,3
	FreeBrush b
	;bottom face	
	b=LoadBrush( file$+"down.jpg",49 )
	s=CreateSurface( m,b )
	AddVertex s,-1,-1,+1,1,0:AddVertex s,+1,-1,+1,1,1
	AddVertex s,+1,-1,-1,0,1:AddVertex s,-1,-1,-1,0,0
	AddTriangle s,0,1,2:AddTriangle s,0,2,3
	FreeBrush b
	ScaleMesh m,500,500,500
	;FlipMesh m
	EntityFX m,1+8
	Return m
End Function
</textarea> <br><br></td></tr></table><br>
<a name="1311011"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rick Nasher</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Yue.<br><br>-1st picture doesn't look good to me.<br>-2nd picture looks good, but no waves so is a bit too much like a mirror.<br>-know that demo. Indeed very nice, but not really useable for open worlds scene I think. <br><br></td></tr></table><br>
<a name="1311013"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yue</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Rick Nasher<br><br>Yes, this sea has waves , set plays<br><br><img src="http://i63.tinypic.com/vrsyns.png"> <br><br></td></tr></table><br>
<a name="1311014"></a>

<a name="1311015"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yue</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> <img src="http://i65.tinypic.com/6gvb41.png"><br><img src="http://i65.tinypic.com/xf5741.png"> <br><br></td></tr></table><br>
<a name="1311016"></a>

<a name="1311017"></a>

<a name="1311018"></a>

<a name="1311019"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rick Nasher</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah, yeah see it now, well done. <br><br></td></tr></table><br>
<a name="1311021"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Yue: Can you post the source &amp; any needed files to that water generator code so others can have vertex-water as well? :)<br><br>Thanks!<br><br>~GF <br><br></td></tr></table><br>
<a name="1311024"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yue</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> Water Anim here: <a href="https://www.dropbox.com/s/dji61llllnrb38n/WATERANIM.rar?dl=0" target="_blank">https://www.dropbox.com/s/dji61llllnrb38n/WATERANIM.rar?dl=0</a><br><br><img src="http://i64.tinypic.com/2e1syeo.png"> <br><br></td></tr></table><br>
<a name="1311025"></a>

<a name="1311041"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yue</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> Water 2 Here Download  : <a href="https://www.dropbox.com/s/li0hgs25zxu2l3g/water.rar?dl=0" target="_blank">https://www.dropbox.com/s/li0hgs25zxu2l3g/water.rar?dl=0</a><br><img src="http://i65.tinypic.com/2v31oy8.png"> <br><br></td></tr></table><br>
<a name="1311026"></a>

<a name="1311040"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yue</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#31">[#31]</a></td></tr></table></td></tr><tr ><td class="posttext"> Other Water Download here : <a href="https://www.dropbox.com/s/44lt3byno6lhk2k/WATER2.rar?dl=0" target="_blank">https://www.dropbox.com/s/44lt3byno6lhk2k/WATER2.rar?dl=0</a><br><br><img src="http://i68.tinypic.com/ddjczs.png"> <br><br></td></tr></table><br>
<a name="1311027"></a>

<a name="1311028"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yue</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#32">[#32]</a></td></tr></table></td></tr><tr ><td class="posttext"> <img src="http://i68.tinypic.com/4ilirn.png"><br><br>Water Waves paragraph A vast sea in a storm.<br><img src="http://laurasanjuan.es/wp-content/uploads/ni%C3%B1o-asombrado.jpg"><br><br>Here Download: <a href="https://www.dropbox.com/s/y31un2wc1hnb3bx/waterscape.rar?dl=0" target="_blank">https://www.dropbox.com/s/y31un2wc1hnb3bx/waterscape.rar?dl=0</a> <br><br></td></tr></table><br>
<a name="1311036"></a>

<a name="1311037"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#33">[#33]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can you post this 1 too?<br><br><img src="http://i65.tinypic.com/2v31oy8.png"><br><br>This is the one I'm after.<br><br>I tried WATER2 and it was only blue water. What I need is clear water where the vertices are moving.<br><br>Thanks Yue! :)<br><br>~GF <br><br></td></tr></table><br>
<a name="1311038"></a>

<a name="1311039"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yue</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#34">[#34]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Guy Fawkes<br><br>Download here: Water 2 <a href="https://www.dropbox.com/s/li0hgs25zxu2l3g/water.rar?dl=0" target="_blank">https://www.dropbox.com/s/li0hgs25zxu2l3g/water.rar?dl=0</a> <br><br></td></tr></table><br>
<a name="1311042"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#35">[#35]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks ALOT Yue! Simply BEAUTIFUL! =D<br><br>~GF <br><br></td></tr></table><br>
<a name="1311079"></a>

<a name="1311080"></a>

<a name="1311081"></a>

<a name="1311233"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Rick Nasher</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#36">[#36]</a></td></tr></table></td></tr><tr ><td class="posttext"> This a rather nice looking water for all blitz code. Only pity that such things only work under a certain angle, which limits the usability.<br>If you change the line <br><pre class=code>
If KeyDown(208)Then If EntityY(camera)&gt;3 MoveEntity 
</pre><br>into:<br><pre class=code>
If KeyDown(208)Then MoveEntity camera,0,-1,0  ;If EntityY(camera)&gt;3 
</pre><br>You'll see what I mean.<br>Nevertheless, very nice little piece of code, I wouldn't have guessed it was possible like this. Many thanks, I will use this somewhere I am sure. <br><br></td></tr></table><br>
<a name="1311163"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yue</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#37">[#37]</a></td></tr></table></td></tr><tr ><td class="posttext"> To me what intrigues me most of all is that you can still learn a lot from Blitz3D in terms of programming . <br><br></td></tr></table><br>
<a name="1311188"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Santiworld</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#38">[#38]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Yue!<br><br>is a excelent water!! for lakes waters<br><br><br>i test in my 3dWater, but only works in a calm waters, becouse the cubemap not work in 3D big waves.<br><br><img src="https://fbcdn-sphotos-c-a.akamaihd.net/hphotos-ak-xfa1/t31.0-8/13490803_1621296871428615_26847801774835626_o.jpg"> <br><br></td></tr></table><br>
<a name="1311189"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Santiworld</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#39">[#39]</a></td></tr></table></td></tr><tr ><td class="posttext"> this is my water without cubemap<br><br><img src="https://fbcdn-sphotos-g-a.akamaihd.net/hphotos-ak-xpa1/t31.0-8/13475002_1619759194915716_5889456150060611304_o.jpg"> <br><br></td></tr></table><br>
<a name="1311190"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#40">[#40]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can you please post this demo, Santi so others can learn?<br><br>Thanks!<br><br>~GF <br><br></td></tr></table><br>
<a name="1311192"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Santiworld</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#41">[#41]</a></td></tr></table></td></tr><tr ><td class="posttext"> is a work in progress, i wish to finish the demo in dicember.<br><br>i have a lot of work to finish the demo becouse is a very big project.<br><br><br>here is a video of the scenary editor, work in progress<br><br><iframe width="560" height="345" src="http://www.youtube.com/embed/ktJUlcnQTLM" frameborder="0" allowfullscreen></iframe> <br><br></td></tr></table><br>
<a name="1311193"></a>

<a name="1311195"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Yue</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#42">[#42]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think for the wave cubemap work you have to change the distance of the camera from cubemap. I just speculate about it.<br><br>Edit: Power Full Video Santiago. :) <br><br></td></tr></table><br>
<a name="1311194"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Santiworld</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#43">[#43]</a></td></tr></table></td></tr><tr ><td class="posttext"> for wavemesh i have a big quad mesh, i move vertex using this funcion<br><br><br><pre class=code>


;! NUEVA FUNCION PARA AGUAS 3D BY Santiago Gonzalez www.indiesoft.com.ar
Function wave_mesh()
	fdx# = 5
	fdy# = 1
	fdz# = 11
	wtipe = 0
	alpha# = 1
	f_vel# = 1
	For b.boton_menu = Each boton_menu
		If b\texto = "Vel" Then f_vel# = b\val
		If b\texto = "Alt" Then f_alt# = b\val
		If b\texto = "fdx" Then fdx# = b\val
		If b\texto = "fdy" Then fdy# = b\val
		If b\texto = "fdz" Then fdz# = b\val
		If b\texto = "Wtype" Then wtipe = b\val
		If b\texto = "Waves" Then waves = b\val
		If b\texto = "Alpha" Then alpha# = b\val
	Next
	
	t_e_frame = (t_e_frame + 1) Mod 23
	
	For i = 0 To mesh_agua_childs
		surf_agua = GetSurface (mesh_agua[i],1)
		;EntityTexture mesh_agua[i],t_espuma,t_e_frame,3
		
		vert = CountVertices(surf_agua)
		tri = CountTriangles(surf_agua)
		
		For v = 0 To vert-1
			
			If wtipe = 1 Then
				
				x# = VertexX(surf_agua,v)
				y# = 0;VertexY(surf_agua,v) 
				z# = VertexZ(surf_agua,v)
				
				
				For w = 1 To waves
					dir = w * 30
					y = y+Sin(dir+(z*waves*fdz+((x+waves)*fdy)+(wave_cicle)))* f_alt 
					
				Next	
				x# = x + Cos((z*fdx)+MilliSecs()*f_vel)*.05
				;y# = y# - (y *.6)
				
				VertexCoords (surf_agua,v,x,y,z)
				
;				d# = Abs(x) + Abs(z)
;				cb = 220
;				ec# = 50
;				ec2#= 50-(d*1)
;				If ec2 &lt; 0 Then ec2 = 0
;				c1# = cb + (y*ec)-(y*ec2 )
;				c2# = cb + (y*ec) 
;				c3# = cb + (y*ec)+(y*ec2)
;				If c1 &lt; 0 Then c1 = 0
;				If c2 &lt; 0 Then c2 = 0
;				If c3 &lt; 0 Then c3 = 0
;				If c1 &gt; 255 Then c1 = 255
;				If c2 &gt; 255 Then c2 = 255
;				If c3 &gt; 255 Then c3 = 255
;				VertexColor surf_agua,v,c1,c2,c3
				
			End If
			
			
		Next
		
		UpdateNormals mesh_agua[i]
		
	Next
	wave_cicle = wave_cicle + (f_vel* t_fix#)*20 
;	
;	If (MilliSecs()-BumpTextureFrameF)&gt;33 Then
;		BumpTextureFrame = BumpTextureFrame + 1*game_speed
;		BumpTextureFrameF = MilliSecs()
;	EndIf
	BumpTextureFrameF = BumpTextureFrameF + 1
	If BumpTextureFrameF &gt; 5 Then
		BumpTextureFrameF = 0
		BumpTextureFrame = BumpTextureFrame + 1
		If BumpTextureFrame &gt; 31 Then
			BumpTextureFrame = 0
		End If
		
	End If
	
	EntityTexture mesh_agua[0], BumpTexture, BumpTextureFrame, 0
	
	
	
End Function

</pre> <br><br></td></tr></table><br>
<a name="1311196"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Santiworld</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#44">[#44]</a></td></tr></table></td></tr><tr ><td class="posttext"> is important this aspect for wave mesh 3D<br><br><br>you have a quad mesh (Plane)<br><br>you move the Y vertex (up and down) using sin(time..)<br><br>and if you MOVE the vertex horizontal, (vertexX) you simulate a soft surface of water.<br><br><pre class=code>


x# = VertexX(surf_agua,v)
y# = 0;VertexY(surf_agua,v) 
z# = VertexZ(surf_agua,v)
				
For w = 1 To waves
	dir = w * 30
	y = y+Sin(dir+(z*waves*fdz+((x+waves)*fdy)+(wave_cicle)))* f_alt 
Next	
	
;! THIS IS THE HORIZONTAL VERTEX MOVEMENT!!!
x# = x + Cos((z*fdx)+MilliSecs()*f_vel)*.05


</pre> <br><br></td></tr></table><br>
<a name="1311197"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Santiworld</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#45">[#45]</a></td></tr></table></td></tr><tr ><td class="posttext"> the problem, is very SLOW move big count of vertexs. in the Image you can see i have 30 FPS, very slow! <br><br></td></tr></table><br>
<a name="1311218"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#46">[#46]</a></td></tr></table></td></tr><tr ><td class="posttext"> o no problem, santi. I just wanted the water part of it. =)<br><br>~GF <br><br></td></tr></table><br>
<a name="1311248"></a>

<a name="1311249"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Santiworld</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#47">[#47]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oka, i upload media textures tomorow<br>AAnd the  to ccodeauncticreatefunctionr. <br><br></td></tr></table><br>
<a name="1311252"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#48">[#48]</a></td></tr></table></td></tr><tr ><td class="posttext"> Great, thanks Santi! =) I look forward to it!<br><br>Regards, <br><br>~GF <br><br></td></tr></table><br>
<a name="1311293"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Santiworld</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#49">[#49]</a></td></tr></table></td></tr><tr ><td class="posttext"> I Upload in code Archives my 3dwaves<br><br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=3281" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=3281</a><br><br><img src="https://fbcdn-sphotos-g-a.akamaihd.net/hphotos-ak-xfp1/t31.0-8/13568821_809808885787691_2313814904661300494_o.png"><br><br>im shure this code can be improved!! <br><br><br><img src="https://scontent-gru2-1.xx.fbcdn.net/t31.0-8/13495657_809827142452532_3271483948278081007_o.png"> <br><br></td></tr></table><br>
<a name="1311299"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#50">[#50]</a></td></tr></table></td></tr><tr ><td class="posttext"> Nice, Santi world! =)<br><br>It would be nice if you could manipulate the vertices instead of loading a texture! =)<br><br>~GF <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
