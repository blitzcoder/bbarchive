<!DOCTYPE html><html lang="en" ><head ><title >how to collide with water type objects?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >how to collide with water type objects?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >how to collide with water type objects?</a><br><br>
<a name="353159"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >D_Town_Tony</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have a plane that represents acid, when my character is in the acid I want his life to go down, I can't use collisions to detect it because I want him to go into the acid not sit on top of it, any ideas on a way to do this? <br><br></td></tr></table><br>
<a name="353166"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Make the plane pickable and then use linepick to check. <br><br></td></tr></table><br>
<a name="353178"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhocking</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> You could use MeshesIntersect, although that command can be slow. <br><br></td></tr></table><br>
<a name="353296"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >OrcSlayer</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, if it's just a plane, make his life go down when his position is below the Y position of the acid (might need to add/subtract a little depending on your collision radius). <br><br></td></tr></table><br>
<a name="353388"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Look in the code archives for my polygon clipping system.<br><br>Set up planes that define a convex region containing the acid.  <br><br>In other words, set up six planes if the acid is in a rectangular hole.  Top of acid, bottom of hole, and 4 sides to hole.<br><br>Region could also be somewhat cylindrical with X number of sides.  And it might even be able to be concave, but I won't guarantee that as I don't know if the agorithm can handle that properly.<br><br>Once you have done this, there is a function in the lib which tells you if a sphere is intersecting/inside the region defined by the planes.  It will also tell you if any polygons are intersecting/inside the region, but a sphere test would be much faster and more than accurate enough.<br><br>Don't send me emails for support though! :-)  Post here if you have questions.<br><br>The system also has a function to tell you the plane equation of a triangle, so if you can find one triangle of each side of your cube region you're in business. <br><br></td></tr></table><br>
<a name="353392"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >fredborg</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> You could use the AreaCollision system by David Bird.<br><br>You can find it here: <a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=316" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=316</a> <br><br></td></tr></table><br>
<a name="353395"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ps:<br><br>There are many other ways to do this.<br><br>One way would be to look down on the scene from above, and dtermine if the center of the player is inside the 2D region that the acid is in.  Then dtermine the player's Y height, and if that matches the region between the top of the water and the bottom of the pool, then they're definitely inside the acid.  Though you might have to fudge the heights a bit because their feet could be dipping in it while their center remains safely above it.<br><br>Another would be to make a polygon representign the surface of the water, and simulating the player with a vertical line segment.  If one or both points of the vertical line segment are on the bottom side of the acid plane then they're in the acid... unless they're in a room under the acid, in which case you need to check that.  And you still need to check that the points are in the 2d region that bounds the acid when looking down from above.<br><br>I suggest using my library though.  It'll be totally accurate and there's lots of cool stuff you can do with it besides this. <br><br></td></tr></table><br>
<a name="353397"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Fred:<br>That limits you to rectangular regions that are aligned to the grid though.  Just so he knows.  He might not want his acid pit to be rectangular and/or aligned to the grid. <br><br></td></tr></table><br>
<a name="353778"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> It may be a useful compromise to limit the shapes to rectangular areas, aligned to the grid. This way you can set huge areas to be water and in the same time allow rectangular containers with say acid.<br><br>The reason why this is useful is it's gonna be very fast to check if the player is inside such a cube. A leveleditor can be used to define water zones by a simple scaled box. The engine can then determine min and max xyz of all water boxes at startup. This way it will take only a fragment of a milliseconds to check all water-boxes. Slow Linepicks are not neccessary, as well as MeshesINtersect, whoch would return zero if the player if completely inside a water object.<br><br>If you once know that the player jumped into the water, all you have to do is reducing gravity to almost zero, use some kind of filter etc. <br><br></td></tr></table><br>
<a name="353793"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >cash</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Not an expert by any means but could you not place another object below the plane and use that to have the player collide with and reudce the health, it would still mean the player would stop but give the effect it was below the plane. <br><br></td></tr></table><br>
<a name="353813"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >sswift</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> jfk:<br>The method I outlined allows you to check against multiple bodies of water, and it extremely fast.<br><br>How fast?  Well, if you imagine each polygon in a level is 10 of those spheres, I can test at least 3,000 polygons per frame, which means you could have 30,000 bodies of water tested against one sphere and not have any hiccups in framerate. <br><br></td></tr></table><br>
<a name="354969"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >D_Town_Tony</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks guys, very helpful.<br>sswift-that method worked out great. <br><br></td></tr></table><br>
<a name="675476"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >OrcSlayer</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry to bring up an ancient thread, but the point has come that this is something I need to be concerned about...Sswift, your method seems to be the best, but please, can you give me an example as to how to do it with your polyclip system?<br><br>I just spent a while browsing through your polyclip code and...I've got nothing. <br><br></td></tr></table><br>
<a name="675508"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Red Ocktober</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> actually... i think a lot of the ideas are great... but in this case, a bit overkill...<br><br>the suggestion Orc made above should work fine... just check the y position of the entity, or an offset from the y...<br><br>--Mike <br><br></td></tr></table><br>
<a name="675575"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >OrcSlayer</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> That was ok for my original plan, which was to have one liquid plane per map...but now plans have changed and I need to be able to seperate liquid areas into rectangular zones...<br><br>I got the area collision by david bird working perfectly for what I need, but I'm a bit disturbed by the fact that the code isn't declared public domain... <br><br></td></tr></table><br>
<a name="675585"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Sledge</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> actually... i think a lot of the ideas are great... but in this case, a bit overkill...<br> <br></div><br><br>I agree - welcome to over-engineering.com ;)<br><br>You can use Blitz collisions pretty much as normal - just make a child pivot that is sensitive to acid and try to position it at the player's feet each frame. If he's in acid it will register. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
