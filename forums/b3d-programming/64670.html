<!DOCTYPE html><html lang="en" ><head ><title >Brushes limit for a mesh?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Brushes limit for a mesh?</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Brushes limit for a mesh?</a><br><br>
<a name="721912"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't know where i picked it up, but i thought there was an 8 brushes limit to a mesh? If there's not, does anyone know what the limit is? I am trying to scan a mesh to see how many brushes it has applied to it. <br><br></td></tr></table><br>
<a name="721914"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, so i've counted that there are 9 surfaces on my mesh. Is there no limit to that? This kind of throws alot of what i thought i knew in the air. <br><br></td></tr></table><br>
<a name="721935"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, so limme see if this is right:<br><br>A mesh can have as many brushes/surfaces as it wishes.<br>A brush is a surface.<br>A brush may have up to 8 textures.<br><br>The only thing that doesn't really make sense, is the entitybrush thing. Whats the point in it? Does it get added over the top of the surface brushes? Or does it override them? <br><br></td></tr></table><br>
<a name="721951"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I don't know where i picked it up, but i thought there was an 8 brushes limit to a mesh? <br></div><br>Nope. Perhaps you're thinking of texture layers?<br><br><div class="quote"> A mesh can have as many brushes/surfaces as it wishes. <br></div><br>I've never hit a limit and I've gone way over eight. There might be some arbitrary limit, but I would think it would high. 255 at least.<br><br><div class="quote"> A brush is a surface. <br></div><br>Not exactly, but basically. A brush is a Blitz invention, doesn't really have any corresponding lower-level structure. It's a set of material properties, for want of a better description. But it's applied on a per-surface basis, yes. You can, of course, apply the same brush to lots of different surfaces. And probably should.<br><br>Brushes are just a convenient way of applying the same properties to multiple entities without duplicating all the commands over and over. No more, no less.<br><br><div class="quote"> A brush may have up to 8 textures. <br></div><br>Yep, just as if you were applying them directly with EntityTexture.<br><br><div class="quote"> The only thing that doesn't really make sense, is the entitybrush thing. Whats the point in it? Does it get added over the top of the surface brushes? Or does it override them? <br></div><br>What EntityBrush thing is this? I've never used that command and it seems to be undocumented. I also don't have B3D installed right now so I can't see what it does. Is it the opposite of PaintEntity? As in, it returns the brush you painted an entity with if indeed you have painted an entity with a brush? <br><br></td></tr></table><br>
<a name="721953"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm not sure, but you have two commands. GetEntityBrush and GetSurfaceBrush.<br><br>Back to the other point, i assume that when use entitytexture, a brush is created and applied to the mesh, also creating a brush texture? <br><br></td></tr></table><br>
<a name="721965"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well you do have PaintEntity and PaintSurface, the former applying the same brush to all surfaces. So I guess that would make sense.<br><br>I haven't tested, but I don't think a brush is automatically created when you use EntityTexture. I think brushes are created when you use the GetBrush commands, and the properties are populated at that point. <br><br></td></tr></table><br>
<a name="721974"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hmmm, that would make more sense. I posted another topic on this about creating clone brushes. So basically, when a mesh is loaded, no brushes are created or textures. But using GetBrush commands, that actually creates them?<br><br>Just didn't see the point in freeing them afterwards, as this would surely free the texture i just modified...<br><br>Thanks for your help on this btw. Most appreciated! <br><br></td></tr></table><br>
<a name="721990"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm pretty sure - though this is all from memory - that the GetBrush() stuff was added much later after frequent requests from people. I'm also pretty sure that there were discussions that using it caused memory to be allocated, indicating that the brush was being created or copied from the original. That you were, in fact, not getting the original brush back.<br><br>Test it to be sure, but I'm pretty sure freeing a brush won't free anything attached to it. Again, don't take this as gospel, but I'm pretty sure you can think of brushes as something like this :<br><br><pre class=code>
Type Brush
   Field Tex1:Int
   Field Tex2:Int
   Field Tex3:Int
   Field Tex4:Int
End Type

PaintEntity(Entity,Brush)

Function PaintEntity(E,Brush)
   EntityTexture E,Brush\Tex1,0
   EntityTexture E,Brush\Tex2,1
   EntityTexture E,Brush\Tex3,2
   EntityTexture E,Brush\Tex4,3
End Function
</pre><br><br>Apologies if my syntax is a bit off there, it's been ages since I did any B3D. Anyway, what that's supposed to illustrate is that it's really no more than a wrapper for your Entity commands. I'd be VERY surprised if it freed a texture when the brush was freed. I think it's just a bunch of fields storing anything you send to it and then when you paint with it, it triggers all the entity commands you would have used.<br><br>You'd need Mark or Simon, or perhaps just someone a bit smarter than me to confirm this, but I think this is how it works. Ironically, I never used brushes when I was coding with B3D and now that I'm coding with BlitzMax and TV3D, I've invented my own brush class encompassing everything the B3D brushes encompass and several other things like lights and shaders which B3D doesn't actually have, but might be well be in brushes if it did. <br><br></td></tr></table><br>
<a name="722015"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hehehe :o) Well, that makes most thing clearer, thanks. Still makes me wonder though. I'm creating an editor, with the ability to save to .b3d. After getting a little frustrated the code archives ones didn't work, i set out to code my own. If i'm creating copies of brushes and textures every time i load a mesh, i guess that's the way it'll have to be.<br><br>Thanks again for your time with this. Most helpful and much appreciated. Cheers! <br><br></td></tr></table><br>
<a name="722028"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ok, well, i've made a discovery. It seems everything created in blitz, has a brush. If you do:<br><br><pre class=code>
s = CreateSphere()
</pre><br><br>Then this is given an Entity Brush. Seems to be different from a surface brush. I checked through all the surfaces and didn't find any textures on them. So, it seems the EntityBrush comes from the EntityTexture command. I assume any loaded in meshes, that have been textured from a modeller, will have surface brushes. <br><br></td></tr></table><br>
<a name="1322733"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RemiD</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br> I assume any loaded in meshes, that have been textured from a modeller, will have surface brushes.<br> <br></div><br>brush = material<br>and there is one material/brush per surface (a material/brush has color, alpha, shininess, fx, blendmode, and can have one or several textures) <br><br></td></tr></table><br>
<a name="1322752"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >_PJ_</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Gabriel is correct in that GetEntityBush and GetSurfaceBrush actuaally generate an identical copy of the information, so you may need to track the return handle from using these commands and free it afterwards in order to prevent memory leaks. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
