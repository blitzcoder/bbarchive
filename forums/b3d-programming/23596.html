<!DOCTYPE html><html lang="en" ><head ><title >PointHeight in a Triangle</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >PointHeight in a Triangle</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >PointHeight in a Triangle</a><br><br>
<a name="243998"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RGR</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> ;- <br><br></td></tr></table><br>
<a name="244008"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Koriolis</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> The simpler is to use bilinear filtering. Let's suppose that your terrain has one point per unit (as the default in blitz) and that the corner is positioned in (0,0) (also the default). Let's say (x,z) is the position on the terrain.<br><pre class=code>
xi% = Int(x)
zi% = Int(z)
xfrac# = x-xi
zfrac# = z-zi
h00# = TerrainHeight(xi,zi)
h01# = TerrainHeight(xi,zi+1)
h10# = TerrainHeight(xi+1,zi)
h11# = TerrainHeight(xi+1,zi+1)
h# = (1-xfrac)*(1-yfrac)*h00 + xfrac*(1-yfrac)*h10 + (1-xfrac)*yfrac*h01 + xfrac*yfrac*h11
</pre><br>I didn't test it but it should work as is.<br>'h' holds the interpolated height. <br><br></td></tr></table><br>
<a name="244024"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RGR</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> ;- <br><br></td></tr></table><br>
<a name="244038"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >makakoman</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Take a look at Swifts terrain system.  There is an function in there, GetTerrainHeight, that uses the Plane Equation to get the height of any point in a quad.<br><br>MK <br><br></td></tr></table><br>
<a name="244041"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RGR</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> ;- <br><br></td></tr></table><br>
<a name="244100"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RGR</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> ;- <br><br></td></tr></table><br>
<a name="244186"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >makakoman</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Kournikov,<br><br><div class="quote"> Thanks - but if I get it right that's not what I want either. As I interpret it, Swift is finding the Position via Collision Camera - Terrain... at least in the version I have - no Include-file available ... <br><br>I am looking for a math-solution <br>------------------------------------------  <br></div><br><br>I just noticed, Shawn must have taken the source code off the forums. If I remember correctly, he used to let people view the source to the Terrain System, but you had to license it if you wanted to use it in a project.  Oh well.  His code IS a math-solution.  No camera/collision code.  He uses the two triangles of the quad, determines which triangle the point lies in, then uses the plane equation to get the EXACT Y of the point X,Z on the plane of the triangle.  <br><br>I am sorry for the confusion.  <br><br>Regards,<br>MK <br><br></td></tr></table><br>
<a name="244738"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RGR</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> ;- <br><br></td></tr></table><br>
<a name="244803"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RGR</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> ;- <br><br></td></tr></table><br>
<a name="245027"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RGR</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> ;- <br><br></td></tr></table><br>
<a name="245106"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >cyberseth</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> You will have to use maths in order to find the height at a point. If you don't want to use maths, use LinePick. Here is a my LinePick bodge.<br><br>LinePick(x, Y, z, 0, -10000, 0)<br><br>Where Y is somewhere you know that's above the triangle, and x,z are the coordinates of the point you wanna check the height of. Basically it finds a point above the triangle, then does a linepick straight through it. Make sure your triangle is 'pickable' first. <br><br></td></tr></table><br>
<a name="245147"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RGR</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> ;- <br><br></td></tr></table><br>
<a name="246037"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >cyberseth</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> How was I to know you spent hours trying to find a math solution? Your headline said:<br><div class="quote"> I found some wise explanations (google, etc.) use the Hesse-algorithm and blah blah and formulas that were not understandable for someone who has not studied mathematics... <br></div><br><br>That last bit can be taken to mean "I don't want a math solution, because they are too complicated", therefore I wrote a LinePick solution. You don't have to get so impatient and angry with me just for trying to offer an alternative, calling my post "such rubbish". Man, you posh Blitz uppercrusts are all alike. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
