<!DOCTYPE html><html lang="en" ><head ><title >Scaling a mesh attached to a pivot</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Scaling a mesh attached to a pivot</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Scaling a mesh attached to a pivot</a><br><br>
<a name="418482"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >PowerPC603</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm using 3DS Max to create my models and use the B3D pipeline for export to B3D.<br><br>When I export the models, I use the option "Add Scene Root" (which AFAIK creates a pivot and attaches all objects in the scene to it).<br><br>If I would scale the meshes in Blitz, should I use ScaleEntity or ScaleMesh (when loaded with LoadAnimMesh)?<br><br>Or should all children be scaled (and moved) separately within a "For i = 1 to CountChildren(object%)"-loop?<br><br>The entire model will be used to represent a spacestation, but with separate pivots at certain points (which indicate where a docking port, defensive turrets, etc. must be attached via code).<br><br>I cannot load the stations as 1 object (LoadMesh), as I need the names of those pivots for positioning the correct sub-object at the correct positions. <br><br></td></tr></table><br>
<a name="418484"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AntonyWells</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> You could always export the pivots in a seperate geo-less info .b3d, and just load the visual mesh as a static one. I do it in cryo to get light positions for the cubic lighting, as i had similar probs to do with scaling. <br><br></td></tr></table><br>
<a name="418485"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AntonyWells</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> But to answer your question, children entities don't seem to be updated. When I scaled up the levels, and found the light pivots, I then had to scale the x,y,z manually to match the entity scale. I.e,<br><br>scaleMesh yourentity,200,150,200<br><br>light=findChild("light")<br><br>lightX=entityX(light)*200<br>lightY=entityY(light)*150<br>lightZ=entityZ(light)*200 <br><br></td></tr></table><br>
<a name="418740"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >PowerPC603</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Then I think the best way to do it is to scale the entire station in 3DS MAX itself.<br>Then I don't have to scale them anymore.<br><br>This way it seems easier to implement.<br>If all objects must be scaled, then I have to remember the scale for each object separately.<br>And it makes more code, which isn't really needed if the objects are pre-scaled to fit directly into the game.<br><br>Loading the meshes as static meshes isn't an option either.<br>In the future, some children will be animated with code (rotated and such).<br><br>I'm only this far to load the objects and put their handle in an array of types and then fly through the space with a camera.<br><br>Much more to come... <br><br></td></tr></table><br>
<a name="418747"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >PowerPC603</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've just updated my routines and implemented the scaling with ScaleEntity.<br><br>And it scales all children too (in fact the entire mesh is scaled).<br><br><br><br>But one more question:<br><br>I intend to put only 1 texture onto the entire station (including the children), so the entire station has only 1 surface.<br>The texture would be applied with code, so I can put "texture1" onto the station in sector A, and put another texture "texture2" onto the same mesh in sector B.<br><br>This way I can create the illusion that these 2 stations are not the same mesh (because they look different in different sectors in space).<br><br>But when I would apply the texture onto the mesh (which has a Scene Root), the texture would only be applied to the Scene Root Pivot, am I right?<br><br>Then I would have to put the same texture onto all children of the station.<br>Would this mean that the texture only exists once in memory, or does every child keep it's own copy of the texture (having 10 children would mean the same texture exists 10x in memory)?<br><br>The stations are loaded this way:<br><br><pre class=code>
; Create the 3D-object and store the handle in a temporary variable
TempObject% = LoadMesh("Data\Objects\FFX2Cube.b3d")
TempTex% = LoadTexture("Data\Textures\FFX2.bmp")

EntityTexture TempObject%, TempTex%

; Store the handle to the object in the array for future reference
ArrayJumpgates(SectorNumber%, i)\ObjectHandle% = TempObject%
</pre><br><br>This would become:<br><br><pre class=code>
; Create the 3D-object and store the handle in a temporary variable
TempObject% = LoadAnimMesh("Data\Objects\FFX2Cube.b3d")
TempTex% = LoadTexture("Data\Textures\FFX2.bmp")

For i = 1 to CountChildren(TempObject%)
    TempChild% = GetChild(TempObject%, i)
    EntityTexture TempChild%, TempTex%
Next

; Store the handle to the object in the array for future reference
ArrayJumpgates(SectorNumber%, i)\ObjectHandle% = TempObject%
</pre><br><br>The second code would apply the same texture onto all children.<br><br>Is this correct? <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
