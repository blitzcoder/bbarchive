<!DOCTYPE html><html lang="en" ><head ><title >Entity dimensions</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Entity dimensions</h1><a href="forums.php" >Blitz3D Forums</a>/<a href="topics.php?forum=82" >Blitz3D Programming</a>/<a href="#bottom" >Entity dimensions</a><br><br>
<a name="277305"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >necky</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is there a command in Blitz which will return the width, height and depth of an entity?<br><br>thanks. <br><br></td></tr></table><br>
<a name="277310"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jfk EO-11110</td><td align="right"><font class=tiny>(Posted 2003)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> simply multiply the meshsize*entityscaling. eg.<br><br>thing=loadmesh()<br>scaleentity thing,3,4,5<br><br>realwidth=meshwidth(thing)*3<br>realheight=meshheight(thing)*4<br>realdepth=meshdepth(thing)*5<br><br>requires to store the entity scaling parameters whenever used, of course. <br><br></td></tr></table><br>
<a name="664807"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Is there a command in Blitz which will return the width, height and depth of an entity, which is a loaded in entity so doesnt have access to the Mesh commands? <br><br></td></tr></table><br>
<a name="664815"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Picklesworth</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Protecting the endangered population of free spaces in the database, I see :P<br><br><br>I believe MeshWidth/height/depth should work... doesn't it?<br><br><br><br>If not, I guess you could always use this:<br><a href="http://www.blitzbasic.com/codearcs/codearcs.php?code=1364" target="_blank">http://www.blitzbasic.com/codearcs/codearcs.php?code=1364</a> <br><br></td></tr></table><br>
<a name="664821"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, if you have scaled your entity, with scaleentity, then i don't believe mesh commands will return the correect results. You'll need to loop thru all the vertices in the mesh, and tform their points to the global 3d world command. That way you can find the left most, right most, highest, lowest, deepest and shallowest vertices and return some sort of dimensions from that :o) <br><br></td></tr></table><br>
<a name="664872"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Picklesworth</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Of course, this now depends on how you've scaled your entity.<br><br>If you use ScaleMesh, than the mesh itself is scaled so MeshWidth, etc will give you the scaled sizes.<br><br>It's probably slower than ScaleEntity, though, and I would only recommend it if you're just scaling the mesh when it's loaded -- scaling at run-time (well... not that loading the mesh isn't in runtime... but run-time in the user sense) is best performed with ScaleEntity. <br><br></td></tr></table><br>
<a name="664891"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, getting the vertex co-ords, works, taking into account entity scale. <br><br></td></tr></table><br>
<a name="664892"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can manually, and dynamically, do this by Larging 6 surfaces in box formation at the Entity in question and then measuring the distance between the opposing faces at the point of dynamic collision - ignoring the collision between the aformentioned dynamic surfaces.  Effectively, you have created a box that contains the Entity at its widest/longest/deepest points.  You may have to ponce about a bit as the centre of the calculations will not necessarily be the centre point you want - however, you will have very accurate dimensions for your entity. <br><br></td></tr></table><br>
<a name="664893"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> You could just use this code ;o) mesh.b3d is the mesh you want to measure :o)<br><br>I use these functions to calculate my bounding boxes for my editor.<br><br><pre class=code>
Graphics3D 800,600
SetBuffer BackBuffer()

Global mesh = LoadMesh("mesh.b3d")

Global camera = CreateCamera()
PositionEntity camera,0,0,-10




Global mesh_width = find_rightmost_vertex(mesh) - find_leftmost_vertex(mesh)
Global mesh_height = find_highest_vertex(mesh) - find_lowest_vertex(mesh)
Global mesh_depth = find_zmost_vertex(mesh) - find_zleast_vertex(mesh)


While Not KeyHit(1)



	UpdateWorld
	RenderWorld
	Text 0,0," mesh width = "+mesh_width
	Text 0,10," mesh height = "+mesh_height
	Text 0,20," mesh depth = "+mesh_depth
	Flip
Wend
End

Function find_lowest_vertex#(mesh)

	lowest# = 999999.0
	no_surfaces = CountSurfaces(mesh)
	
	For sloop = 1 To no_surfaces

		Surface_Handle = GetSurface(mesh, sloop)
		
			For loop = 0 To CountVertices(surface_handle)-1
			
				TFormPoint VertexX(surface_handle,loop),VertexY(surface_handle,loop),VertexZ(surface_handle,loop),mesh,0
				If TFormedY#() &lt; lowest Then
					lowest = TFormedY#()
				End If
			Next
	Next
	Return lowest
	
End Function

Function find_highest_vertex#(mesh)

	highest# = -999999.0
	no_surfaces = CountSurfaces(mesh)
	
	For sloop = 1 To no_surfaces

		Surface_Handle = GetSurface(mesh, sloop)
		
			For loop = 0 To CountVertices(surface_handle)-1
			
				TFormPoint VertexX(surface_handle,loop),VertexY(surface_handle,loop),VertexZ(surface_handle,loop),mesh,0
				If TFormedY#() &gt; highest Then
					highest = TFormedY#()
				End If
			Next
	Next
	Return highest
	
End Function

Function find_leftmost_vertex#(mesh)

	leftmost# = 999999.0
	no_surfaces = CountSurfaces(mesh)
	
	For sloop = 1 To no_surfaces

		Surface_Handle = GetSurface(mesh, sloop)
		
			For loop = 0 To CountVertices(surface_handle)-1
			
				TFormPoint VertexX(surface_handle,loop),VertexY(surface_handle,loop),VertexZ(surface_handle,loop),mesh,0
				If TFormedX#() &lt; leftmost Then
					leftmost = TFormedX#()
				End If
			Next
	Next
	Return leftmost
	
End Function


Function find_rightmost_vertex#(mesh)

	rightmost# = -999999.0
	no_surfaces = CountSurfaces(mesh)
	
	For sloop = 1 To no_surfaces

		Surface_Handle = GetSurface(mesh, sloop)
		
			For loop = 0 To CountVertices(surface_handle)-1
			
				TFormPoint VertexX(surface_handle,loop),VertexY(surface_handle,loop),VertexZ(surface_handle,loop),mesh,0
				If TFormedX#() &gt; rightmost Then
					rightmost = TFormedX#()
				End If
			Next
	Next
	Return rightmost
	
End Function

Function find_zmost_vertex#(mesh) ; the furthest away on the Z axis

	zmost# = -999999.0
	no_surfaces = CountSurfaces(mesh)
	
	For sloop = 1 To no_surfaces

		Surface_Handle = GetSurface(mesh, sloop)
		
			For loop = 0 To CountVertices(surface_handle)-1
			
				TFormPoint VertexX(surface_handle,loop),VertexY(surface_handle,loop),VertexZ(surface_handle,loop),mesh,0
				If TFormedZ#() &gt; zmost Then
					zmost = TFormedZ#()
				End If
			Next
	Next
	Return zmost
	
End Function

Function find_zleast_vertex#(mesh) ; the closest on the Z axis

	zleast# = 999999.0
	no_surfaces = CountSurfaces(mesh)
	
	For sloop = 1 To no_surfaces

		Surface_Handle = GetSurface(mesh, sloop)
		
			For loop = 0 To CountVertices(surface_handle)-1
			
				TFormPoint VertexX(surface_handle,loop),VertexY(surface_handle,loop),VertexZ(surface_handle,loop),mesh,0
				If TFormedZ#() &lt; zleast Then
					zleast = TFormedZ#()
				End If
			Next
	Next
	Return zleast
	
End Function
</pre> <br><br></td></tr></table><br>
<a name="664895"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> My way is cuter. <br><br></td></tr></table><br>
<a name="664899"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> lol <br><br></td></tr></table><br>
<a name="665143"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Andy</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> &gt;My way is cuter. <br><br>Goto's cuter says the puker!<br><br><br>Andy <br><br></td></tr></table><br>
<a name="665186"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Stevie G</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> ... deleted <br><br></td></tr></table><br>
<a name="665217"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cool, Its true if you post just before you go to bed, when you look the next day you have at least three differnt anwsers :)<br><br>As I wanted the information for positioning and Colistion boundrybox createing. Im going to go with pikis.<br><br><br>@mr pickleworth. loadMDS returns an enitity not a mesh, and meshheight# (at least) doesnt work<br><br>Ps @Ross c, dosent work. It still says that the mds modle I have loaded is an entity, and not a mesh ;( <br><br></td></tr></table><br>
<a name="665219"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> My answer was the best. <br><br></td></tr></table><br>
<a name="665221"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> Puki, thats probably what I would have thought of doing myself (honest), I was just supprised that there isnt a command to do it. :) <br><br></td></tr></table><br>
<a name="665231"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Arm raised aloft, "puki" waves to the millions of 'guests' that visit this site every day.<br><br>You know who the 'daddy' is when you finally buy a Blitz product and join the community. <br><br></td></tr></table><br>
<a name="665292"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >lo-tekk</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> In conjunction with the mesh dimension commands you may use GetMatElement to retrieve the scale-values:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
entity = CreateCube()
ScaleEntity entity,1.1, 2.2, 3.3
xscale# = GetMatElement( entity, 0,0 )
yscale# = GetMatElement( entity, 1,1 )
zscale# = GetMatElement( entity, 2,2 )
</textarea><br>-------------------------<br>www.moonworx.de <br><br></td></tr></table><br>
<a name="665344"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah, sorry, i didn't realise it was an MD2. <br><br></td></tr></table><br>
<a name="665346"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just curious... Since it's an MD2, you can only use sphere collsions with it. So, how big do you make your collision sphere? When you activate a collision in blitz, it defaults to a size of one. So, you now have the problem of determining the size of the entity, so you can set a collision mode, to determine the size of the entity.<br><br>Can't you use a different model format for this? <br><br></td></tr></table><br>
<a name="665367"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> I use easyTok to set the collitions, so in reality its an invisable box round the MD2. (You can put tubes and stuff round arms and legs etc, but I generaly dont go that far)<br>So as long as I know how wide/tall(and err the other one) it is, thats enough <br><br></td></tr></table><br>
<a name="665370"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> But, an MD2 isn't a mesh. So, how do you go about putting things round it, if you don't know it's dimensions? <br><br></td></tr></table><br>
<a name="665371"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well at the moment by eye. I load in the tris model, create the collition box, and make it smaller and smaller unto I can see the model. Thats why PUkis Idea is the one to go for, cos Im doing that anyway, just not automaticaly <br><br></td></tr></table><br>
<a name="665372"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >puki</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wait a minute.<br><br>I just noticed "H&amp;K" didn't create the thread - he gate-crashed it like a large rodent after an even larger piece of cheese.<br><br>He stole my idea.<br><br>Mother!, mother!!! <br><br></td></tr></table><br>
<a name="665374"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thats because I did a search on my problem ie "Entity dimensions", and when I found that the anwser didnt sovle my problem, (ie Entity dimensions) I reposted the origional Question.<br>Should I have started a new thread? <br><br></td></tr></table><br>
<a name="665387"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah, sorry. I was confused about who started the thread :o) What i'm trying to say, is, if you had to do it automatically, is wouldn't really be possible :o) <br><br></td></tr></table><br>
<a name="665392"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh, <br>So is by eye the only way I can do it then?<br><br>Now That Ive thought about it I see what you mean, is it impossible to set polygon collitions for md2 models. Cos yes if I cannot do that then pukis idea dosnt work. <br><br>How about I keep making the model bigger and bigger, and when I get an error cos its too big, I can divide the biggests it can be, by how much I multiplied it, then I would know How big it was?<br><br>If that would work, whats the biddest it could be? <br><br></td></tr></table><br>
<a name="665397"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> I don't think there is a limit really... One, really hacky way to do this, would be too...<br><br>Position the camera at the entities position. Move away out. Render the model against a black backround, ensuring the model isn't black. Scan from the top, to the middle of the screen with readpixel commands. If only a few pixels are detect at the middle of the screen, then move the camera in and repeat. When a decent amount of pixels are read, you have a rough idea about the height of the mesh, based on how far out the camera is. Verrrrrry hacky way to do it tho... <br><br></td></tr></table><br>
<a name="665399"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >H&amp;K</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#29">[#29]</a></td></tr></table></td></tr><tr ><td class="posttext"> If I turned on orthographic projection there wouldnt be any distortion due to perspective, so I could start bigger, then make the model smaller and smaller, until the top line of the screen didnt have any model in it. (and so on for the bottom).<br><br>Is there realy no easy way to do it? Or are you all winding me up, and theres a EntitySizeY() command? <br><br></td></tr></table><br>
<a name="665414"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Ross C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#30">[#30]</a></td></tr></table></td></tr><tr ><td class="posttext"> No, really. An MD2 isn't treated as a mesh. You cannot use any mesh commands on it. It's basically treated as a pivot. A tip when using orthographic mode. Camera zoom is the only way to move the camera back and forward. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
