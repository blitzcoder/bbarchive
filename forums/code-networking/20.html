<!DOCTYPE html><html lang="en" ><head ><title >BlitzMail</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='An example of sending email, language=bb, category=Networking'><meta name='author' content='marksibly'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 ><a href=codearcs.php>Code archives</a>/<a href=codearcs.php?cat=4>Networking</a>/BlitzMail</h1><div class="quote">This code has been declared by its author to be Public Domain code.</div><br><a href="20.bb">Download source code</a><br><br><table width="100%" cellspacing="0" cellpadding="0"><tr ><td width="100%"><table width=100% cellspacing=0 cellpadding=0><tr ><td class=headleft></td><td class=head><table width=100% cellspacing=0 cellpadding=0><tr ><td >BlitzMail by marksibly</td><td align="right">2001 </td></tr></table></td><td class=headright></td></tr></table></td></tr><tr ><td class="cell"> This code will send an email.<br><br>Its pretty rude - doesn't check for errors or responses - but appears to work!<br><br>Note that the '<>' around the addresses are required, and that the message is terminated by sending the "" and "." lines.<br> </td></tr><tr ><td class="cell"><pre class="code">t=OpenTCPStream( "smtp.yourisphere",25 )
If Not t RuntimeError( "Error connecting" )
WriteLine t,"HELO BlitzMail"
WriteLine t,"MAIL FROM: <from@fromhost>"
WriteLine t,"RCPT TO: <to@tohost>"
WriteLine t,"DATA"
WriteLine t,"Hello there Mark!"
WriteLine t,"This is from Blitz Mail!"
WriteLine t,""
WriteLine t,"."
WriteLine t,"QUIT"
Print "Done. Press any key...":WaitKey
</pre></td></tr></table><br><a name="comments">Comments</a><br><br><table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warren</td><td align="right"><font class=tiny>2004</font></td></tr></table></td></tr><tr ><td class="posttext"> Hey, cool!  I was wanting to do a "tell a friend" button on the main menu of my next game.  I want it to send an email to the address the user provides ... this is perfect!<br><br>Thanks!<br><br>-- although it looks like some of your '&lt;&gt;' markers got cleared out by the code display. <br><br></td></tr></table><br><table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >dangerdave</td><td align="right"><font class=tiny>2004</font></td></tr></table></td></tr><tr ><td class="posttext"> Beware of course, that user's firewall, antivirus may interrupt the process and wreak havoc on a full screen program. <br><br></td></tr></table><br><table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warren</td><td align="right"><font class=tiny>2004</font></td></tr></table></td></tr><tr ><td class="posttext"> I just tackled that in my game actually, in regards to the online high score board.<br><br>If the game is running fullscreen, it drops down to windowed mode for the "connect to the internet and upload/download high scores" procedure.  It then pops back into fullscreen once finished. <br><br></td></tr></table><br><table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warren</td><td align="right"><font class=tiny>2004</font></td></tr></table></td></tr><tr ><td class="posttext"> Has anyone gotten this to work?  It claims to send the mail but I never get it... <br><br></td></tr></table><br><table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >electronin</td><td align="right"><font class=tiny>2004</font></td></tr></table></td></tr><tr ><td class="posttext"> I'm having the same problem. The mail never actually arives :( <br><br></td></tr></table><br><table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warren</td><td align="right"><font class=tiny>2004</font></td></tr></table></td></tr><tr ><td class="posttext"> For those interested, you can stick this piece of code just before the last line to read any output from the mail server:<br><pre class=code>
Not Eof(t)
	Print ReadLine$( t )
Wend
</pre><br>I get messages from some servers saying routing is not allowed, but others don't say a thing.  I never get the email at any rate... <br><br></td></tr></table><br><table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Craig Watson</td><td align="right"><font class=tiny>2004</font></td></tr></table></td></tr><tr ><td class="posttext"> You can never expect this to realistically work for a game.<br><br>You will need the user to enter their own SMTP server address, because as you have noted SMTP servers tend to be locked to your local IP group.<br><br>This is done to make spamming harder.<br><br>There are some ways around it, but a much better idea would be to call a Perl/CGI/Whatever script on your webserver that sends mail.  You could also customise the script specifically for the purposes of marketing your game so it would be of less interest to hackers. <br><br></td></tr></table><br><table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warren</td><td align="right"><font class=tiny>2004</font></td></tr></table></td></tr><tr ><td class="posttext"> Yeah, I've decided to use a PHP script on my server now instead.  Ahh well...  :) <br><br></td></tr></table><br><table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >GNS</td><td align="right"><font class=tiny>2004</font></td></tr></table></td></tr><tr ><td class="posttext"> I had problems implementing this in the past. I did some research and found my mail server supports the 'ESMTP' protocol. I looked over the ESMTP RCC docs and modified the above to work with my mail server/support the ESMTP protocol to a certain extent.<br><br>Oddly enough, the only thing preventing the above example from supporting 'basic' ESMTP is an 'EHLO' (yes, 'EHLO') command. <br><br>With that said, using a web-based solution is probably the best idea. With all of these obscure mail protocols floating around there's no telling what type Player A's mail server supports.<br><br>Oh, and for the curious soul, here's my modified example:<br><br><pre class=code>
;ESMTP Protocol Test

;Notes on the ESMTP Protocol:
;-To see a list of features the server supports, send the server a "HELP" command
;-Each server message is prefixed with a 3 digit code. Certain codes represent error messages, etc.
;and can be parsed to determine the error. 
;-Common error codes Include:
;421 -&gt; SMTP server no longer available
;500 -&gt; 'EHLO' command is not supported (server doesn't support ESMTP)
;501 -&gt; 'EHLO' arguement not acceptable
;502 -&gt; Server unnable to implement 'EHLO' command
;504 -&gt; Unknown error


streamin = OpenTCPStream(Input("Enter SMTP Server: " ), 25) ;assumed port 25 (standard port)

If Not streamin
	RuntimeError("Server not found.")
EndIf

mailFrom$ = Input("Enter From Address: ")
mailTo$ = Input("Enter To Address: ")
message$ = Input("Enter Mail Message (\n for new line): ")
message$ = Replace$(message$, "\n", Chr$(13)+Chr(10))

If streamin
	WriteLine streamin, "EHLO ESMTPTest" ;seems to be the only thing separating SMTP from being ESMTP on the client side
	
	DebugLog ReadLine(streamin) ;should acknowledge 'EHLO' (what an odd greeting..)
	
	WriteLine streamin, "HELO ESMTPTest"
	
	WriteLine streamin, "MAIL FROM:&lt;" + Trim$(mailFrom$) + "&gt;"
	
	DebugLog ReadLine(streamin)
	
	WriteLine streamin, "RCPT TO:&lt;" + Trim$(mailTo$) + "&gt;"
	
	DebugLog ReadLine(streamin)
	
	WriteLine streamin, "DATA"
	
	DebugLog ReadLine(streamin)
	
	WriteLine streamin, message$
	
	WriteLine streamin, " "
	
	WriteLine streamin, "."
	
	WriteLine streamin, "QUIT"
	
	DebugLog ReadLine(streamin)
	
	CloseTCPStream(streamin)
	
EndIf

WaitKey()
</pre> <br><br></td></tr></table><br><table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Regular K</td><td align="right"><font class=tiny>2004</font></td></tr></table></td></tr><tr ><td class="posttext"> I'd love to use something like this for my game, for reporting bugs.<br><br>But I dont know the SMTP server I would use.<br><br>My ISP is Shaw<br>My email is by Hotmail<br><br>Can anyone help me? <br><br></td></tr></table><br><table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Craig Watson</td><td align="right"><font class=tiny>2004</font></td></tr></table></td></tr><tr ><td class="posttext"> Apparently you can just use "shawmail" (minus quotes) as your SMTP server.  Also check <a href="http://support.shaw.ca/customercare/faq.htm#servernames" target="_blank">here</a> if that doesn't work. <br><br></td></tr></table><br><table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Regular K</td><td align="right"><font class=tiny>2004</font></td></tr></table></td></tr><tr ><td class="posttext"> Ill keep trying.<br>My email is with hotmail, how can I get this to work!? <br><br></td></tr></table><br><table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RGR</td><td align="right"><font class=tiny>2004</font></td></tr></table></td></tr><tr ><td class="posttext"> If this would be that easy you could send spam under any hotmail email address you know.<br>I guess you must provide your password to the mail server first to be able to send anything that way.<br>For hotmail smtp server "mail.hotmail.com" in the connection line works - it accepts; but does not send anything due to no proper identification (Username? Password?). <br><br></td></tr></table><br><table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >chwaga</td><td align="right"><font class=tiny>2007</font></td></tr></table></td></tr><tr ><td class="posttext"> lets say my email is fakeemail@... and my smtp is smtp-server.com.  How could i send a mail to myself for bug reports? <br><br></td></tr></table><br><a href="codearcs.php" >Code Archives Forum</a><table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
