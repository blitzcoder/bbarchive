<!DOCTYPE html><html lang="en" ><head ><title >Inline assembler support</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Inline assembler support</h1><a href="forums.php" >Archives Forums</a>/<a href="topics.php?forum=108" >Win32 Discussion</a>/<a href="#bottom" >Inline assembler support</a><br><br>
<a name="471357"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Proger</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Can we have inline assembler support? <br><br></td></tr></table><br>
<a name="471358"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AntonyWells</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can import ASM files/files directly in bmax,<br><br>Import "Test.a"<br><br>Extern<br><br>;Link to above code-<br><br>End Extern. <br><br></td></tr></table><br>
<a name="471372"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Proger</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I know about importing asm files, but im want inline assembler :) i dont whant to write full asm sources, but only small parts... <br><br></td></tr></table><br>
<a name="471439"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >FlameDuck</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> How does the size of the asemmbly file make importing it less useful? <br><br></td></tr></table><br>
<a name="471747"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Pickford</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Inline assembler usually allows usage of variables created in the host language.  It's very easy and very powerful.  Not multi-platform of course. <br><br></td></tr></table><br>
<a name="471758"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Not multi-platform of course. <br></div><br><br>there are good examples of languages that are multi platform and support inline assembler ... <br><br></td></tr></table><br>
<a name="471916"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hotcakes</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Well, there'd be no reason not to use the ?PPC, ?x86, ?Mac, ?Linux or ?Win32 compiler directives. <br><br></td></tr></table><br>
<a name="472100"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Pickford</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> there are good examples of languages that are multi platform and support inline assembler ... <br> <br></div><br>A pedantic point.  The moment you use assembler you lose cross platform compatibility.   Of course you can re-write chunks of code for different processors but that's not the same thing is it?<br><br>Currently writing in straight Blitzmax results in code which will compile on each platform supported.   Personally I think that's a rather valuable feature. <br><br></td></tr></table><br>
<a name="472103"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dreamora</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> I just assume that you never used PureBasic otherwise you wouldn't write something quite pointless.<br><br>BlitzMax isn't "crossplattform" as well from your point of view as the implementation behind the scene is different for each plattform and just 1 set of calls for all plattforms. <br><br></td></tr></table><br>
<a name="472109"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warren</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> BlitzMax compiles to 3 platforms from the same source files.  That is the very definition of cross platform.  It can do whatever it feels like behind the scenes - it's what I have to write on my side of the screen that matters. <br><br></td></tr></table><br>
<a name="472155"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Pickford</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> Dreamora. What are you on about? <br><br></td></tr></table><br>
<a name="472307"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bot Builder</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> In some cases inline ASM could be handy. True, you may have to change parts of it depending on the platform using ? tags, but hey, thats the price for speed. <br><br></td></tr></table><br>
<a name="472331"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hotcakes</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> There's no real reason why those against it should be arguing, it's another one of those 'don't like it don't use it' sorta features... <br><br></td></tr></table><br>
<a name="472632"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >flying willy</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> It's not a priority. I've seen that riot fella argue against stuff before though.<br><br>Tut tut. <br><br></td></tr></table><br>
<a name="472764"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hotcakes</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Never anything useful.  =] <br><br></td></tr></table><br>
<a name="472961"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ashmantle</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> not everyone is going to make multiplatform stuff, so to them inline asm stuff is actually useful.<br><br>I myself will not make multiplatform stuff, but I will use BlitzMax for all my windows needs. <br><br></td></tr></table><br>
<a name="472969"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >John Pickford</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> &gt;not everyone is going to make multiplatform stuff, so to &gt;them inline asm stuff is actually useful.<br><br>Possibly.  I love using inline assembler myself.   <br><br>I stopped using it when I realised that compilers often generate more optimal code than me. <br><br></td></tr></table><br>
<a name="473003"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Warren</td><td align="right"><font class=tiny>(Posted 2004)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> I stopped using it when I realised that compilers often generate more optimal code than me.  <br></div><br>And this is really the point these days.  It's doubtful that anyone here knows assembler well enough to outperform what the compiler spits out already.  That's not a knock on the coders here, it's just reality.<br><br>I can count on one hand the number of places that the Unreal engine uses inline assembly ... and even in those places, if they were thoughtfully rewritten, could probably do without it. <br><br></td></tr></table><br>
<a name="473452"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Back in the DOS days, inline ASM had more benefits than just a potential speed increase -- Since hardware was directly accessible under DOS, it would allow you to actually extend the capabilities of your program itself, and add new functionality that could not be accomplished with the built-in commands of many languages.<br><br>For example: PowerBASIC for DOS only had native support for screenmodes up to 640x480, in 16 colors. <br><br>Using inline ASM, I was able to interface with VESA video adapters directly, and enable hi-res 256 and true-color screenmodes, among others. <br><br>Nowadays I think inline ASM is of a much more limited use than back then, since windows 2000/XP/etc no longer allows applications to access hardware directly. <br>Sure, you can 'optimize' certain code by hand-coding it in ASM, but it does take an awful long time to do so, for relatively little gain with todays' efficient compilers.<br><br>In most (not all, but most) cases, it's simply not worth the time spent on it. <br><br></td></tr></table><br>
<a name="475512"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Russell</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#20">[#20]</a></td></tr></table></td></tr><tr ><td class="posttext"> Bmax includes FASM, which, as far as I know, is a generic assembler that is available on multiple platforms.<br><br>This is the way PureBasic does it: You include the FASM (Flat ASseMbler) source directly in your PB source and, depending on what platform you're running it on, it is compiled by the version of FASM made for your system. Naturally, there are some drawbacks. If you want to use ASM codes that are specific to a particular processor then you will most likely be out of luck. However, I think the advantages to this approach far outweigh the disadvantages and FASM actually does a very very good job of creating its compiled code.<br><br>That being said, I think really only a very very small percentage of Blitz programmers would ever make use of this feature. It is nice to have there "just in case" you want to write some device drivers or have a very CPU-intensive section of code that you want to speed up, etc. (Or parhaps you want to write an entire OS like this guy: <a href="http://www.menuetos.org/" target="_blank">http://www.menuetos.org/</a> - which fits entirely on a single floppy!)<br><br>Anyway, the ability is there and could probably be made completely inline (so you can access variables, etc) pretty easily...<br><br>Russell <br><br></td></tr></table><br>
<a name="475757"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chris C</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#21">[#21]</a></td></tr></table></td></tr><tr ><td class="posttext"> struggling to think how I could inline this to make it better....<br><br>okay this is a very simple example, but generally the<br>max produces nice compact code...<br><br>most languages that let you inline with language variables<br>usually output *hideous* code, pushing and popping<br>between each inline "asm" <br><br>So usually no faster and ofter slower...<br><br>As for being closer to the hardware so you can extend the<br>language are you really interested in coding for 20 <br>different sound cards...<br><br>Instead of trying to knock off the odd millisecond a frame<br>look again at your algorithm, sometimes its not the odd<br>millisecond but 10 times that. <br><br><pre class=code>
rem

	mov	ebx,5
	mov	dword [ebp-4],6
	mov	edi,7
	mov	ecx,8
	mov	edx,9
	mov	eax,10
	mov	dword [ebp-8],11
	jmp	_3
_5:
	add	ebx,1
	add	dword [ebp-4],1
	add	edi,1
	add	ecx,1
	add	edx,1
	add	eax,1
	add	dword [ebp-8],1
	mov	esi,ebx
	add	esi,dword [ebp-4]
	add	esi,edi
	add	esi,ecx
	add	esi,edx
	add	esi,eax
	add	esi,dword [ebp-8]
	cmp	esi,1
	jge	_15
	jmp	_4
_15:
_3:
	cmp	ebx,10
	jl	_5

End Rem

a:Int=5
b:Int=6
c:Int=7
d:Int=8
e:Int=9
f:Int=10 ' oh no we've run out of registers!!
g:Int=11  



While a&lt;10
a:+1 
b:+1
c:+1
d:+1
e:+1
f:+1
g:+1
If (a+b+c+d+e+f+g)&lt;1 Then exit

Wend
</pre> <br><br></td></tr></table><br>
<a name="477622"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Russell</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#22">[#22]</a></td></tr></table></td></tr><tr ><td class="posttext"> Honestly, I feel that inline asm should be low on Mark's priority list. But the possibility is definately there for someone to do it right now, since we know that FASM is already used by BlitzMax for something....<br><br>Also, Chris C, I agree with your points. Slightly OT, but why do I see a lot of people use such nondescriptive label names in their asm code, like '_15' and '_3'? It's been a long time since I dabbled in asm, but I'm sure there's a reason, eh? ;)<br><br>Russell <br><br></td></tr></table><br>
<a name="477796"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >jhague</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#23">[#23]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Slightly OT, but why do I see a lot of people use such nondescriptive label names in their asm code, like '_15' and '_3'? It's been a long time since I dabbled in asm, but I'm sure there's a reason, eh? ;)  <br></div><br>They're labels generated by the compiler. <br><br></td></tr></table><br>
<a name="534253"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Panno</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#24">[#24]</a></td></tr></table></td></tr><tr ><td class="posttext"> @ John<br>I stopped using it when I realised that compilers often generate more optimal code than me.<br><br>hehe ;) <br><br></td></tr></table><br>
<a name="535227"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AntonyWells</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#25">[#25]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think it's a great feature for using self modifying code to speed up some things vastly.<br><br>Besides that, I'm sure mark could actually just write a very  thin abstraction layer that basically spits out 1 for 1 asm  opcodes except for the parts where multi-platforms give ambuiguity.<br><br>Like...register names. <br><br></td></tr></table><br>
<a name="535326"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >LarsG</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#26">[#26]</a></td></tr></table></td></tr><tr ><td class="posttext"> I personally feel that inline C would be better.. :) <br><br></td></tr></table><br>
<a name="535328"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Koriolis</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#27">[#27]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> except for the parts where multi-platforms give ambuiguity.<br>Like...register names.  <br></div>Have you really ever compared  Intel assembly vs PowerPC assembly? <br><br></td></tr></table><br>
<a name="535425"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AntonyWells</td><td align="right"><font class=tiny>(Posted 2005)</font>&nbsp;<a href="#28">[#28]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Have you really ever compared Intel assembly vs PowerPC assembly? <br></div><br><br>Of course I havn't. That would mean I had an informed opinon. <br>People with information don't need opinons. (Barry Zuckerman was my mentor.) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
