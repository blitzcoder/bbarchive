<!DOCTYPE html><html lang="en" ><head ><title >Creating Universal Binary Distributable files</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Creating Universal Binary Distributable files</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=112" >BlitzMax Tutorials</a>/<a href="#bottom" >Creating Universal Binary Distributable files</a><br><br>
<a name="727497"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Nigel Brown</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> You will need:<br><br>PPC and Intel based MAC's<br>Icon Composer<br>Lipo (command line tool)<br>Disk Utility<br><br>1. Build you application on both PPC and Intel based platforms and ensure they are working correctly. If your application uses loadable data then you will need to use “littleendian::” as a prefix to all your ReadFile() and other stream based commands.<br><br>2. Next take the two pre-built bundles and create a universal binary from them. An application bundle is not the executable file but a container that holds the executable file and other resources so pay attention to the pathnames. From a terminal window:<br><br>Where the following would be the path to Pushy on the Mac Book Pro.<br><br>&lt;user&gt; = nigelibrown<br>&lt;appname&gt; = PushyIntel<br> /Users/&lt;user&gt;/&lt;appname&gt;/&lt;apname&gt;.app/Contents/MacOS/&lt;appname&gt;<br><br>This would be the path to the PPC bundle I have previously copied to the Mac Book Pro.<br><br>&lt;appname&gt; = PushyPPC<br><br>/Users/&lt;user&gt;/&lt;appname&gt;/&lt;apname&gt;.app/Contents/MacOS/&lt;appname&gt;<br><br>So to overwrite the Intel version of Pushy you would use:<br><br>Lipo –create [AppPPC] [AppIntel] –output [AppIntel]<br><pre class=code>
Lipo –create /Users/Nigel/PushyPPC/PushyPPC.app/Contents/MacOS/PushyPPC /Users/Nigel/PushyIntel/PushyIntel.app/Contents/MacOS/PushyIntel
 –output /Users/Nigel/PushyIntel/PushyIntel.app/Contents/MacOS/PushyIntel
</pre><br><br>3. Use Icon composer (spotlight search) to generate associated icons for the bundle. Now you have a universal binary in your bundle you should add your own icons and replace the BlitzMAX versions that are generated automatically. Run Icon Composer and load the icons from:<br><br>/Users/&lt;user&gt;/&lt;appname&gt;/&lt;apname&gt;.app/Contents/Resources/&lt;appname&gt;.icns<br><br>Create a 128x128 image in a paint package and using file-&gt;Import Image add it to the resource or replace the current version. Then drag to all the other sizes in the file 48x48 32x32 etc… you will be asked to auto scale and mask say yes to all. Should give you something like this:<br><br>[img <img src="http://www.nigelibrown.pwp.blueyonder.co.uk/icns.png"> ]<br><br><br>4. Finaly use Disk Utility (spotlight search) to create a disk image (dmg) file-&gt;New-&gt;Blank Disk Image… make sure it is large enough to hold all your files. copy the bundle and any resource / data files that will need to be loaded. Then use convert image to compress it. <br><br></td></tr></table><br>
<a name="734611"></a>

<a name="1058750"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JazzieB</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> &lt;h1&gt;Thanks for this... got my universal binaries sorted in no time at all.<br><br>Just a shame you end up with a file twice the size if you include all your media via IncBin :o(  Different strategy required for media and Mac, me thinks.  Hmmm....&lt;/h1&gt;<br><br><font class="tiny">Last edited 2010</font> <br><br></td></tr></table><br>
<a name="898800"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JoshK</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> What is a universal binary distributable? <br><br></td></tr></table><br>
<a name="898805"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Gabriel</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> One that works on both PowerPC macs and the newer Intel Macs natively. <br><br></td></tr></table><br>
<a name="898847"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImaginaryHuman</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> A universal binary is Apple's attempt to simplify for users the fact that Macs now run on two different processor families and thus needs a specific binary compiled for each cpu. So the universal binary contains executable code for both Intel X86 and PowerPC cpu's and MacOS knows how to use it on a given hardware platform ie which code to run. Usually when you use a universal binary, since your executable is in there twice, you would normally NOT use incbin's in your code, and instead have all your data stored in files that you load, otherwise you would continue to double the space consumed. It's meant to make it easier to distribute and to install, ie forget about what CPU you have. <br><br></td></tr></table><br>
<a name="927359"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >boomboom</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am a little stuck on point 2. I have 2 folders now at:<br><br>/BBGBuild/PPC/<br>/BBGBuild/Intel/<br><br>Each folder contains the relivent compiled executionable and the media. How do I make a 'bundle' for each of them before then continueing with the rest of the guide and making the 2 bundles into a univeral binary?<br><br>Sorry, I am a complete Mac noob. <br><br></td></tr></table><br>
<a name="927711"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >boomboom</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> ah I got it. I quite like how mac packages stuff up like that! especially when you can go inside the package and edit things so easily. <br><br></td></tr></table><br>
<a name="927809"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >JazzieB</td><td align="right"><font class=tiny>(Posted 2008)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> If anyone wants to know how to include their data within the application bundle so that it can be shared by both the PPC and Intel binaries (so that you don't end up with a file twice the size when using Incbin, or are forced to use an external folder), then I have produced a guide <a href="/posts.php?topic=73690" target="_blank">here</a>.  Why this has not been made a sticky, I don't know.  Anyway, it's there if anyone needs it. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
