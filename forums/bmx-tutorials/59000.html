<!DOCTYPE html><html lang="en" ><head ><title >Beginner Tutorial: Using SQLite with BlitzMax</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Beginner Tutorial: Using SQLite with BlitzMax</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=112" >BlitzMax Tutorials</a>/<a href="#bottom" >Beginner Tutorial: Using SQLite with BlitzMax</a><br><br>
<a name="656734"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >assari</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I have been meaning to learn how to use the SQLite modules that have been written for BlitzMax. I finally had the excuse to do this as an application I'm writing required a database engine.<br><br>Special thanks to TeaMonkey and Rene Aye whose examples I studied to figure out how to use the module.<br><br>The Tutorials are in two parts: <a href="http://www.2dgamecreators.com/tutorials/database/" target="_blank">Tutorial 1</a> and <a href="http://www.2dgamecreators.com/tutorials/database/Using%20SQLite%20with%20BlitzMax.html" target="_blank">Tutorial 2</a>.<br><br>**Added <a href="http://www.2dgamecreators.com/tutorials/database/Using_SQLite_with_BlitzMax_Part3.html" target="_blank">Part 3</a><br><br>Have Fun. <br><br></td></tr></table><br>
<a name="656841"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >bruZard</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> wow ... thank you!! <br><br></td></tr></table><br>
<a name="656864"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Chris C</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> as ever, a well laid out and clear tutorial, well done! <br><br></td></tr></table><br>
<a name="657047"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >RepeatUntil</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Great tutorial!! <br>Maybe you could add (in this thread or in the tutorial) how we can use SQLite for games written with BlitzMax. Some clear examples of application could clarify the use of this tool! <br><br></td></tr></table><br>
<a name="657266"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >assari</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> RepeatUntil,<br>I have no experience using this in a game but databases are not known for their speed. Quote from TeaMonkey's site<br><div class="quote"> Be warned that a database query is pretty slow. Prepared statements are a big performance boost, as are memory tables, but they're still "slow" as far as a realtime game is concerned so try and keep your main loop queries to a minimum. <br></div><br>I remembered reading an article about SQLite and game programming but cannot locate it now :( <br><br></td></tr></table><br>
<a name="666162"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >allos</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thank you for your very informative SQLite tutorial <br>I have a question: <br>when in need to use a SQL function in a query (eg MAX(), COUNT(),...) how can I manage its result?<br>in the following example of SQL query the value returned by the query shold be the total number of records; I understand that a callback function works on all subsequent records in a query; how can I manage the result of COUNT() function, eg print or store it in a variable?<br>--- query example (general) ----<br>SELECT COUNT(field) FROM database<br>the query shold return the number of records in database "database" where the field "field" is not null (this is my guess)<br><br>in BlitzMax we should have something like this:<br>rc = sqlite3_exec(db, "SELECT COUNT(field) FROM database",callback, Null, Null)<br><br>If I don't use a callback function ( ... null,null,null) how can I manage the result of SELECT statement? <br>If I use a callback function (normally called on every record) what are the parameters to use (where is the returned value stored)?<br>bye <br>allox <br><br></td></tr></table><br>
<a name="666581"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >oraclelover</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> "I have no experience using this in a game but databases are not known for their speed. Quote from TeaMonkey's site"<br><br>Please keep in mind when you say databases are not known for speed that is relative to what you are doing. <br><br>If you have 5 terebytes of data I bet a database will beat out your c routine.  Unless your right the same logic that the database uses to scrub datafiles for data.  Which in that case you would be writing a database engine.   A database may not  be good for real time data most of the time, it excels at mountians of data. <br><br></td></tr></table><br>
<a name="666611"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >assari</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> @oraclelover - did not mean to poke an ant's nest. The speed is relative as you say.<br><br>@allos, I've added a part 3 to answer your question. Take a look <a href="http://www.2dgamecreators.com/tutorials/database/Using_SQLite_with_BlitzMax_Part3.html" target="_blank">Part 3</a>. Hope that answers your questions. AFAIK you need to use callbacks to get the result of the query. <br><br></td></tr></table><br>
<a name="666728"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >HappyCat</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> You can get results without using a callback using something like this:<br><br><pre class=code>Local StatementHandle:int
Local Tail: Byte Ptr

' Executes the Command
Local ErrorCode:int = SQLite3_Prepare(db, Command, Command.Length, StatementHandle, Varptr(Tail))

' Make sure it executed correctly
If ErrorCode = 0 then

	' The Tail contains any part of the Command which wasn't executed
	' I've never had reason to use this myself
	Local UnusedSQL:string = string.FromCString(Tail)

	' Loop round all the rows in the resulting data set	
	Local Done = False
	Repeat
			
		' Move to the next row in the data set
		Local StepResult:Int = SQLite3_Step(StatementHandle)
			
		Select StepResult
		
			' Step has found the next row
			Case 100
				' If for example the first column is an integer
				Print SQLite3_Column_Int(StatementHandle, 0)
				' The next column is a string
				Print SQLite3_Column_Text(StatementHandle, 1)
				' The next column is a float
				Print SQLite3_Column_Double(StatementHandle, 2)
				
			' Step has reached the end of the data set
			Case 101
				Done = true
				
			' Step has resulted in an error
			Default
				RuntimeError(StepResult)
				
		End Select
	
	Until Done
	
	' Closes the data set
	SQLite3_Finalize(StatementHandle)
	
End If</pre><br>Note that this code has been extracted from SQLite wrapper classes I was working on with the BMX v1.09 demo. The demo expired months ago and I haven't bought BMX yet so I haven't been able to finish the wrapper classes or test this code   :-)<br><br>I've been planning to release my SQLite wrapper classes once I've bought BMX and finished them off   :-)<br><br>Edit: As for using SQLite in games - I'm using it (in Blitz3D) for storing player profiles (options, high scores, stats etc) in Eridani. I guess I could use it for storing level data too, but then I'd have to write an editor for it and I find it much easier to just put that stuff into XML files. <br><br></td></tr></table><br>
<a name="666774"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >allos</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> thank you Assari, I knew my question would have found an answer<br>great! (see you at the next stop)<br><br>bye <br>Allos <br><br></td></tr></table><br>
<a name="666789"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >assari</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> @HappyCat, thanks for that info. I've yet to try out the SQLite3_prepare and its associated functionalities. I now understand a bit better how that works.<br><br>@allos, you're welcomed. <br><br></td></tr></table><br>
<a name="680648"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >siread</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Just trying to run part 1 but get this when compiling:<br><br><pre class=code>
Linking:untitled1.debug.exe
C:/Program Files/BlitzMaxDemo/tmp/.bmx/untitled1.bmx.gui.debug.win32.o(code+0x47): undefined reference to `__bb_sqlite_sqlite_'
Build Error: Failed to link C:/Program Files/BlitzMaxDemo/tmp/untitled1.debug.exe
</pre><br><br>I've put TeaMonkey's mod in the mod folder but I'm just using the BlitzMax demo, so i'm not sure if that's an issue. Any ideas? <br><br></td></tr></table><br>
<a name="680808"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >siread</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> No worries, it works fine in the new version. <br><br></td></tr></table><br>
<a name="694465"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hosh</td><td align="right"><font class=tiny>(Posted 2006)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm running BlitzMax demo version 1.12(downloaded it yesterday).<br>I downloaded both versions of SQLite for BlitzMax. <br>(tm.mod and user.mod)<br>When running the example program in tutorial 1 I get the following error when using tm.mod<br><br>Linking:untitled2.debug.exe<br>C:/Program Files/BlitzMaxDemo/tmp/.bmx/untitled2.bmx.gui.debug.win32.o(code+0x47): undefined reference to `__bb_sqlite_sqlite_'<br>Build Error: Failed to link C:/Program Files/BlitzMaxDemo/tmp/untitled2.debug.exe<br>Process complete<br><br><br>When using user.mod I get the following error...<br><br>Linking:sqlite_trial.debug.exe<br>C:/Program Files/BlitzMaxDemo/bin/ld.exe: cannot find C:/Program Files/BlitzMaxDemo/mod/user.mod/sqlite.mod/sqlite.debug.win32.a<br>Build Error: Failed to link C:/Program Files/BlitzMaxDemo/sqlite_trial.debug.exe<br>Process complete<br><br>Neither one works for me.   Apparently I just don't have the files it is looking for?  I'm mystified.<br><br>Thanks for reading this! <br><br></td></tr></table><br>
<a name="1277268"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >KevCoder</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> Wow, this tutorial post is 9 years old. I guess it doesn't exist anymore ?<br><br>Regards<br>KevCoder <br><br></td></tr></table><br>
<a name="1277269"></a>

<a name="1277270"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xlsior</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Wow, this tutorial post is 9 years old. I guess it doesn't exist anymore ? <br></div><br><br>Archive.org still has a cached copy from February 2015:<br><br>http://web.archive.org/web/20150202010021/http://www.2dgamecreators.com/tutorials/database/<br><br>That said: IIRC the tm module is fairly basic, and quite outdated by now (it's over ten years old) -- If you're looking at SQLite, I'd strongly suggest you look for Brucey's SQLite module instead. <br><br></td></tr></table><br>
<a name="1277292"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >KevCoder</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thank you xisior, greatly appreciated.<br><br>I am migrating from VisualBasic and am very impressed with what can be done in BlitzMax.<br><br>Purchasing Logic GUI was a huge help in making the transition.<br><br>Thanks again for taking the time to put up the link.<br><br>I will follow your advise :-) <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
