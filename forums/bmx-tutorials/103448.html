<!DOCTYPE html><html lang="en" ><head ><title >DirectShow for BlitzMax</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >DirectShow for BlitzMax</h1><a href="forums.php" >BlitzMax Forums</a>/<a href="topics.php?forum=112" >BlitzMax Tutorials</a>/<a href="#bottom" >DirectShow for BlitzMax</a><br><br>
<a name="1245754"></a>

<a name="1245756"></a>

<a name="1245757"></a>

<a name="1245759"></a>

<a name="1245761"></a>

<a name="1245762"></a>

<a name="1245764"></a>

<a name="1245765"></a>

<a name="1245766"></a>

<a name="1247009"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >time-killer-games</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> This doesn't fit in the tutorial subforum but everywhere else seems to be even less fitting. Feel free to move this wherever.<br><br>Play AVI, MP4, MPG and many other popular video formats in BlitzMax using the popular Win32 API known as DirectShow. Please note the end user MUST have any necessary codecs installed that your videos may be using!<br><br>This is an open source C++ DLL which can be called by BlitzMax for video playback. The zip includes the binaries, source, and example BMX project.<br><br>I haven't used BlitzMax for anything other than the MaxGUI stuff so you'll need to include the MaxGUI module, however, there may be a way to use this in a non-MaxGUI project if anyone wants to contribute such a feature.<br><br>Download: <a href="https://db.tt/ktzD9KOI" target="_blank">https://db.tt/ktzD9KOI</a><br><br><img src="https://dl.dropboxusercontent.com/u/79893663/Extensions/Direct%20Show/screenshots/Screenshot%201.gif"><br><br>The code is pretty straight forward but if I get enough complaints I'll turn this into an official tutorial.<br><br>Thank you col! This wouldn't be possible without him. He doesn't want us to credit him (if I heard right, correct me if I'm wrong).<br><br>My dropbox is getting full so if anyone wants to upload mirrors of the screenshot and download they are more than welcome to do so and tell me about it (just in case).<br><br>Cheers.<br>Sam <br><br></td></tr></table><br>
<a name="1252147"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Thank you col! ...  He doesn't want us to credit him ... <br></div><br><br>Heh, that's cool. You did it anyway.<br><br>The only reason was that it wasn't any where near a complete dshow library, it just about scratches the surface of what's possible, but if it helps peeps then all is good :^)<br><br>BTW... In the code... you're not checking those 'hr' return values like you should, if something isn't right and you don't check them ( just use ' If hr &lt; 0 ' and if its True then you have an error ) then it will give you at best unpredictable behavior and at worst a full on crash, more than likely the latter.<br><br>Have fun. <br><br></td></tr></table><br>
<a name="1254920"></a>

<a name="1254921"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Hezkore</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Cool stuff, but I can't seem to play any MP4 files?<br>Out of the 40 or so MP4 files I've tested, none has worked. <br><br></td></tr></table><br>
<a name="1269245"></a>

<a name="1269247"></a>

<a name="1269266"></a>

<a name="1269267"></a>

<a name="1269302"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >col</td><td align="right"><font class=tiny>(Posted 2015)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> @Hezkore<br><br>I realise its older post but I just saw your message.<br><br>There are many ways to resolve the issue, and in true MS style - it can get complicated.<br><br>DirectShow has a mechanism called 'intelligent connect' that will scan your system for codecs and filters to use to create a graph, in this case a playback graph ( you can also create capture graphs too for capturing from anywhere! ). DShow filters and codecs are built with a 'priority of use' flag that the intelligent connect system also uses during graph construction. However I've seen several flaws in this system, one of which is that if intelligent connect finds a valid filter then it will use that filter in the graph and carry on building the graph further, but its almost as though it gets its knickers in a twist and doesn't try every combination of possible graphs that could be made and ultimately fails to build a correct playback graph. It doesn't mean that it can't play it, just that the intelligent connect system isn't intelligent enough! I've experienced this myself especially with mp4 playback.<br><br>Anyway the code above use the intelligent connection feature, but you can also build a graph manually in a couple of different ways: you can add instances of the filters yourself to the graph and then use the intelligent connect to connect them, and/or you could also connect the filters manually using specified media types. Its actually a very good system but its an incredibly steep learning ( for new comers to DShow ) with very lightweight documentation on how to do it scattered all over the internet. I've spent the last year learning this system. Once you get to grips with it then you realise that you can do absolutely anything related to audio/video media ( including receiving/creating live analog/digital/satellite broadcasts in any format for any language/country ), all you need are the filters and codecs to do what you need, and if they don't exist then you can create them yourself. Creating filters is an even steeper learning curve again, but not because the system is difficult but purely because of the lack of information available.<br><br>Getting to your issue of none of your videos playing back will undoubtedly be caused by the codecs used in the mp4 file and the intelligent connect system getting it wrong while trying to create a playback graph. So there's a couple of options, a fully customizable DirectShow system for Blitz products that are on Windows, or install more codecs on the hope that the intelligent connect will choose those filters, or maybe try to simply re-encode the mp4s to use a different codec so that the intelligent connect system doesn't get confused.<br><br>Windows Media Player uses the DirectShow system under the hood but I'm sure they don't use the intelligent connect feature and the coders of WMP have probably written their own version of intelligent connection handling.<br><br>Oh yeah, and don't forget who actually owns the rights to mp4 format and that we want to playback mp4s on a competitors OS, not that it should make any different but we all know how these OS creators 'play' at the top. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
