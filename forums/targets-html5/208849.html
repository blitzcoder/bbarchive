<!DOCTYPE html><html lang="en" ><head ><title >Mserver HTTP server port range?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Mserver HTTP server port range?</h1><a href="forums.php" >Monkey Targets Forums</a>/<a href="topics.php?forum=504" >HTML5</a>/<a href="#bottom" >Mserver HTTP server port range?</a><br><br>
<a name="2092661"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Redbeer</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Could Mark or someone else tell me what the potential range of port numbers are for mserver?<br>The server itself has a fixed port, but the HTTP listener seems to use a range somewhere in the 623XXX range.  It stays consistent once the server is open, but each time it reopens it uses a new port number after localhost as in the  URL below, 62339 will change to something else.<br><br>http://localhost:62339/MonkeyGame.html<br><br>The issue I'm having is that I use the HTML trans to teach Monkey, and one of the tools I have at my teaching disposal is to block the use of certain programs and/or internet for students so they don't get distracted.  This is an extremely important thing, because quite a few students will spend whole weeks of class periods with me having to tell them ever five minutes to focus on the task I've given them, if they have access to the internet and other programs.  In a class of 25 to 30, this is needless to say very time consuming even if it's only 5 or so students.  It would be a lot easier to just block everything for those students EXCEPT Ted, mserver, and the specific site address their code will be translated to, as in the line above.<br><br>The problem is, each students localhost number is different every time the mserver is reloaded, for every different student, so I need to create a batch that includes ALL the possible port numbers to filter the URLs.<br><br>I guess ideally an mserver application recompiled with on specific fixed port for everyone would be better, but at least if I know all the possible port numbers, I can make my web and application filtering work.<br><br>Help is greatly appreciated. <br><br></td></tr></table><br>
<a name="2092687"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Paul - Taiphoz</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> some one corrent me if I am wrong but the source code to mserve is in your monkey download, peek through the source, and edit where needed to alter or check the range that it uses.<br><br>it would be nice to force it to use the same port all the time, or be able to set a range. <br><br></td></tr></table><br>
<a name="2092698"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Redbeer</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Paul.<br>I looked at the source before posting, but there are two issues.<br>1) It's BlitzMax, which I'm am not so familiar with.  I can probably figure it out, but it wasn't obvious what to change, and it seems to use external dependencies that are not included with the source.<br>2) I don't have BlitzMax to recompile it, even if I can fix it.<br><br>For reference, I think this is the code, but I'm unsure exactly how it works given my unfamiliarity with BlitzMax<br><br><pre class=code>
Local client:TSocket=ConnectToMServer()
	
	Local stream:TSocketStream=CreateSocketStream( client,False )
	
	WriteLine stream,"NEW "+HTTPEncode( ExtractDir(p) )
	
	Local resp$=ReadLine( stream )
	
	CloseSocket client
	
	If resp.StartsWith( "OK " )
		Local port=Int(resp[3..])
?Linux
		system_ "xdg-open ~qhttp://localhost:"+port+"/"+StripDir(p)+"~q"
?Not Linux
		OpenURL "http://localhost:"+port+"/"+StripDir(p)
?		
</pre> <br><br></td></tr></table><br>
<a name="2092700"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Redbeer</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> On further review, it seems that the port does not start from 623 all the time.  The same project, in the same directory, that I was testing with before is now using 54XXX.  Also, judging by the code it sets the port dynamically from ports somehow mapped to the computer I'm running the server on?<br><br>I could, maybe, just set port in the OpenURL to a fixed value, but, as I said, I have no way to compile BlitzMax on my current PC or the Mac's I use at work. <br><br></td></tr></table><br>
<a name="2092709"></a>

<a name="2092710"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >nikoniko</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> - <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
