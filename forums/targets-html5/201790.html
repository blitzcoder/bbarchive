<!DOCTYPE html><html lang="en" ><head ><title >HTML5 oddity warning</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >HTML5 oddity warning</h1><a href="forums.php" >Monkey Targets Forums</a>/<a href="topics.php?forum=504" >HTML5</a>/<a href="#bottom" >HTML5 oddity warning</a><br><br>
<a name="2016885"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xAD</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm guessing the majority will never experience this, but...<br><br>I've been banging my head for weeks over a bit of code I made in an older Monkey revision that I loaded up in the new revision and it didn't work. Still worked in Flash, didn't work in HTML5.<br><br>Well, I'm (mostly) sure I've found the culprit, finally. Apparently an OnRender call is no longer generated by Monkey in HTML5 without an OnUpdate call. So if all you want to do is put an image on the screen, you still need to make your program pretend it's doing something continuously or, as Wilder's Wonka would say, "YOU GET NOTHING!" <br><br></td></tr></table><br>
<a name="2016886"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Goodlookinguy</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Every time you change to a different build, you're supposed to delete the game's previous .build folder. The App class already has OnUpdate being called with or without you overwriting it in the extended App class. <br><br></td></tr></table><br>
<a name="2016892"></a>

<a name="2016893"></a>

<a name="2016895"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xAD</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I had in fact deleted the .build folder. I had even copied the code to a new project.<br><br>Nothing worked (in HTML5) until I added a SetUpdateRate() <br><br></td></tr></table><br>
<a name="2016894"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xAD</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> ...or you could just try this vs uncommented and see for yourself<br><br><pre class=code>
Import mojo

Function Main()
	New MyApp
End

Class MyApp Extends App

'	Method OnCreate()
'		SetUpdateRate(60)
'	End

	Method OnRender()
		Cls(0,0,0)
	End

End
</pre> <br><br></td></tr></table><br>
<a name="2016896"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Goodlookinguy</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Oh, you said OnUpdate. Yeah, it won't run without OnCreate and SetUpdateRate. Without an update rate, how is it supposed to know how many updates to do a second. And since OnRender tries to get called at the same frequency as OnUpdate, without that rate, it'll never be called. <br><br></td></tr></table><br>
<a name="2016901"></a>

<a name="2016903"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skid</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> I would expect an app without an update rate to draw at least once. <br><br>For example, static image generators for page backgrounds.<br><br>[edit] actually you can change OnRender to OnLoading to get a single render out of an HTML5 app with above example but not so for flash <br><br></td></tr></table><br>
<a name="2016902"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xAD</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Exactly. And it used to - and it still does in anything I've tested *except* HTML5. <br><br></td></tr></table><br>
<a name="2016904"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skid</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> Agreed. <br><br></td></tr></table><br>
<a name="2016907"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >muddy_shoes</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> This isn't new behaviour: <a href="http://monkeycoder.co.nz/Community/posts.php?topic=754#6009" target="_blank">http://monkeycoder.co.nz/Community/posts.php?topic=754#6009</a><br><br>And yes, it's inconsistent and I consider it a bug. <br><br></td></tr></table><br>
<a name="2016922"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >xAD</td><td align="right"><font class=tiny>(Posted 2011)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> Ah. Well, it's been several revisions since I last used Monkey and I found nothing on the topic via search. At least Mark is presumably aware. <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
