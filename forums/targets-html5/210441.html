<!DOCTYPE html><html lang="en" ><head ><title >File access coding example</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >File access coding example</h1><a href="forums.php" >Monkey Targets Forums</a>/<a href="topics.php?forum=504" >HTML5</a>/<a href="#bottom" >File access coding example</a><br><br>
<a name="2117647"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MonkeyPlotter</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I am compiling a Monkey program that imports/parses .tcx files that are embedded within my compiled program.<br>I appreciate this might be a big ask, however, is anyone aware of an example of file locator logic which will allow a compiled Monkey program to:<br><br>1. Present a 'pick file' button within the GUI/web browser<br>2. Allow copy and pasting of a file locations text from windows explorer<br>3. Save the path to the file into a variable for use by the program when a 'import data' button is pressed.<br><br>[EDIT]  used code from the following thread to produce a three button file selector:<br><a href="http://www.monkey-x.com/Community/posts.php?topic=5698" target="_blank">http://www.monkey-x.com/Community/posts.php?topic=5698</a><br><br>The issue I've got at the mo is developing the syntax to detect when 3 files have been selected, then invoking the logic to run 'other' functionality (namely a data parser using the three files selected with the three buttons).<br><br>Any help invoking a 'run' button gratefully appreciated..... My attempt at using a global variable that gets incremented within each of the file classes results in only one 'browse' button being displayed. I suspect this is the wrong approach....<br><br><pre class=code>
'original code sourced from Monkey forum posting:
'http://www.monkey-x.com/Community/posts.php?topic=5698

Strict

Import mojo

#If TARGET = "html5" Then
	Import dom.dom
	
	
	Extern
		Function log:Void(e:Event) = "window.console.log"
		Function log:Void(f:FileList) = "window.console.log"
		Function log:Void(f:File) = "window.console.log"
		
		'Global file1size:Int
		
		Class File
			Field lastModified:Int
			Field lastModifiedDate:String
			Field name:String
			Field size:Int
			Field fileName:String
			Field fileSize:Int
			Field type:String
		End Class
		
		Class FileList Extends DOMObject
			Field length:Int
			Method item:File( index:Int)
		End Class
		
		Class customHTMLInputElement Extends HTMLInputElement = "HTMLInputElement"
			Field files:FileList
		End Class
		
		'second file
		
		Class File2
			Field lastModified:Int
			Field lastModifiedDate:String
			Field name:String
			Field size:Int
			Field fileName:String
			Field fileSize:Int
			Field type:String
		End Class
		
		Class FileList2 Extends DOMObject
			Field length:Int
			Method item:File( index:Int)
		End Class
		
		Class customHTMLInputElement2 Extends HTMLInputElement = "HTMLInputElement"
			Field files:FileList2
		End Class
		
		'third file
		
		Class File3
			Field lastModified:Int
			Field lastModifiedDate:String
			Field name:String
			Field size:Int
			Field fileName:String
			Field fileSize:Int
			Field type:String
		End Class
		
		Class FileList3 Extends DOMObject
			Field length:Int
			Method item:File( index:Int)
		End Class
		
		Class customHTMLInputElement3 Extends HTMLInputElement = "HTMLInputElement"
			Field files:FileList3
		End Class
		
		'fourth file -- ideally want to change this to a button which
		' is only displayed once three files have been selected
		' which will in turn call a data parser by importing another Monkey application
		' suspect might have to embed the data parser within this file.
		
		'Class File4
		'	Field lastModified:Int
		'	Field lastModifiedDate:String
		'	Field name:String
		'	Field size:Int
		'	Field fileName:String
		'	Field fileSize:Int
		'	Field type:String
		'End Class
		
		'Class FileList4 Extends DOMObject
		'	Field length:Int
		'	Method item:File( index:Int)
		'End Class
		
		'Class customHTMLInputElement4 Extends HTMLInputElement = "HTMLInputElement"
		'	Field files:FileList4
		'End Class
		
	Public
	
		Class Listener Extends EventListener
			Method handleEvent:Int(e:Event)
				Local target:customHTMLInputElement = customHTMLInputElement(e.target)
				Select e.type
					Case "change"
						Local f:File = target.files.item(0)
						Print "new file: "+f.name+" - "+f.size+" bytes"
						
				End Select
				Return 1
			End Method
		End Class
		
		Class Listener1 Extends EventListener
			Method handleEvent:Int(e:Event)
				Local target:customHTMLInputElement2 = customHTMLInputElement2(e.target)
				Select e.type
					Case "change"
						Local f:File = target.files.item(0)
						Print "new file: "+f.name+" - "+f.size+" bytes"
						
				End Select
				Return 1
			End Method
		End Class
		
		Class Listener2 Extends EventListener
			Method handleEvent:Int(e:Event)
				Local target:customHTMLInputElement3 = customHTMLInputElement3(e.target)
				Select e.type
					Case "change"
						Local f:File = target.files.item(0)
						Print "new file: "+f.name+" - "+f.size+" bytes"
						
				End Select
				Return 1
			End Method
		End Class
		
		'Class Listener3 Extends EventListener
		'	Method handleEvent:Int(e:Event)
		'		Local target:customHTMLInputElement3 = customHTMLInputElement3(e.target)
		'		Select e.type
		'			Case "change"
		'				Local f:File = target.files.item(0)
		'				Print "new file: "+f.name+" - "+f.size+" bytes"
		'				
		'		End Select
		'		Return 1
		'	End Method
		'End Class
		
		Function Init:Void()
		
			Local input:HTMLInputElement = HTMLInputElement(document.createElement("input"))
			input.type = "file"

			Local div:HTMLDivElement = HTMLDivElement(Element(document.getElementsByTagName("body").item(0)).getElementsByTagName("div").item(0))
			div.appendChild(input)
			
			Local listener:EventListener = New Listener()
			input.addEventListener("change",listener)
			
			'file1size = file1size + 1
			
		End Function
		
		Function Init2:Void()
		
			Local input:HTMLInputElement = HTMLInputElement(document.createElement("input"))
			input.type = "file"

			Local div:HTMLDivElement = HTMLDivElement(Element(document.getElementsByTagName("body").item(0)).getElementsByTagName("div").item(0))
			div.appendChild(input)
			
			Local listener1:EventListener = New Listener1()
			input.addEventListener("change",listener1)
			
			'file1size = file1size + 1
			
		End Function
		
		Function Init3:Void()
		
			Local input:HTMLInputElement = HTMLInputElement(document.createElement("input"))
			input.type = "file"

			Local div:HTMLDivElement = HTMLDivElement(Element(document.getElementsByTagName("body").item(0)).getElementsByTagName("div").item(0))
			div.appendChild(input)
			
			Local listener2:EventListener = New Listener2()
			input.addEventListener("change",listener2)
			
			'file1size = file1size + 1
			
		End Function
		
		'Function Init4:Void()
		
			'Local input:HTMLInputElement = HTMLInputElement(document.createElement("submit"))
			'input.type = "submit"
			
		'	Local input:HTMLInputElement = HTMLInputElement(document.createElement("input"))
		'	input.type = "file"


		'	Local div:HTMLDivElement = HTMLDivElement(Element(document.getElementsByTagName("body").item(0)).getElementsByTagName("div").item(0))
		'	div.appendChild(input)
			
		'	Local listener3:EventListener = New Listener3()
		'	input.addEventListener("change",listener3)
			
		'End Function
#End If


Class FileApp Extends App
	Method OnCreate:Int()
		SetUpdateRate(30)
		
		Init()
		Init2()
		Init3()
		
		'failed attempt at adding logic to display a 4th 'run data parser' button once 3 files selected:
		
		'If file1size=2
		'		Init4()
		'		Endif
		
		
		Return 0
	End Method
	
	
	Method OnUpdate:Int()
	
		Return 0
	End Method
	
	
	Method OnRender:Int()
		Cls(0,0,0)
		Return 0
	End method
End Class

Function Main:Int()
	New FileApp()
	Return 0
End function
</pre><br><br><br>Thanks, BP. <br><br></td></tr></table><br>
<a name="2117645"></a>

<a name="2117646"></a>

<a name="2117639"></a>

<a name="2117640"></a>

<a name="2117641"></a>

<a name="2117642"></a>

<a name="2117643"></a>

<a name="2117644"></a>

<a name="2117655"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImmutableOctet(SKNG)</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> <b><a href="https://github.com/ImmutableOctet/html5-file-demo-monkey.git" target="_blank">This version</a></b> may be less confusing to you. It shows how to create a button and the like.<br><br>If you want something more effective for HTML5 I/O, I'd recommend my '<a href="https://github.com/Regal-Internet-Brothers/virtualos#virtualos" target="_blank">regal.virtualos</a>' module. If you just want to deal with external bindings yourself, my version of the demo should get you started.<br><br>For the specific streaming features 'virtualos' has, you'll need to <a href="https://github.com/Regal-Internet-Brothers/regal-modules#installation" target="_blank">install the other modules</a>. Again, that's only if you're interested in a cohesive solution. You'll still have to pipe data into it, so I only recommend my module if you're looking for a file-system.<br><br><b>EDIT: I just updated the demo to asynchronously load files, rather than just show how to use the API.</b> The current version should be pretty much what you're looking for. Again, this isn't a file-system like 'regal.virtualos', but it'll allow you to load files. Obviously, this only allows you to load the file as a buffer, so you'd need to use the "Peek" commands or a 'DataStream' object to make any use of it. <br><br></td></tr></table><br>
<a name="2117650"></a>

<a name="2117654"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImmutableOctet(SKNG)</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> I forgot to mention this, but I also wrote a <b><a href="https://github.com/Regal-Internet-Brothers/jstool-target-monkey" target="_blank">target</a></b> or <i><a href="https://github.com/Regal-Internet-Brothers/webcc_frontend-target-monkey" target="_blank">two</a></i> that execute Monkey code on demand. More specifically, it lets you execute 'Main' ('bbMain'), but you get the idea. Technically you could execute any arbitrary function given the right "glue code", either from the observation end (HTML/JS), or the self-contained end (Monkey). <br><br></td></tr></table><br>
<a name="2117653"></a>

<a name="2117651"></a>

<a name="2117677"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MonkeyPlotter</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> @ImmutableOctet(SKNG) Thank you for the feedback and suggestion, trying it out now. <br><br></td></tr></table><br>
<a name="2117703"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MonkeyPlotter</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> @ImmutableOctet(SKNG), very excited about your help, moving forwards ;)<br><br>[EDIT]<br><br>I just need to suss how to type convert the databuffer to a dataList - I was manipulating my files individually using the following code in my data parsing Monkey code:<br><br><pre class=code>
'## Load the Red data	
	
		file = New FileLoaderClass("testerTwo.txt")
		
		While Not file.Eof()
			dataList = dataList.Resize(dataList.Length() + 1)
			dataList[dataList.Length() - 1] = file.ReadLine()
			numberOfLines = numberOfLines + 1
		Wend

</pre><br><br>I was hoping to extract the relative path to each file, store that in a global variable, and then use the three global variables with my existing code.<br><br>However, I feel a more succinct way forward is to sort through the bytes that are stored in the data buffers by hopefully loading the dataBuffers into a dataList - I'm sure that I'll see a better way forwards after some sleep.... Need rest ;) <br><br>[EDIT] able to investigate your suggestion about the datastream object now, cheers for the help again.<br><br><img src="http://www.wishingwellsoftware.co.uk/troisblah.png"> <br><br></td></tr></table><br>
<a name="2117681"></a>

<a name="2117682"></a>

<a name="2117683"></a>

<a name="2117707"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MonkeyPlotter</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Managing to do some byte by byte comparison in order to parse the data from files.<br><br>Probably an easier way to achieve parsing the data, which is kind of xml in format, however the syntactical sugar eludes me for now.  My plan at the mo is to search for a carriage return character then use that to populate a line_string until a successive carriage return character. <br><br><pre class=code>
	Local i:Int
		
		'okay - need to work my logic that parses files into here maybe......
		'OR how about populating the arrays I established via the following 
		'as the data transfer device
		
		If (MouseHit(MOUSE_LEFT)) Then
			For Local I:= 0 Until files.Length
				Print("File #" + (I+1) + ":")
				Print("")
				
								'parse the data from all three files into 
				If I=0
				'parse file 1 data 
				
				Print "Parsing file 1...."
				
				'For i = 0 To (dataList.Length() - 1)
				For i = 0 To (files[0].Length() - 1)
				
					Print ("i is: "+i)
					
					Print(files[I].PeekString(i))
					
					Print ("Is Byte Number: "+(files[I].PeekByte(i)))
					
					If files[I].PeekByte(i)=62
						Print "Carriage ##### return symbol maybe detected"
					Endif
					
					If files[I].PeekByte(i)=60
						Print "Lesser than &lt;&lt;&lt;&lt;&lt; symbol detected"
					Endif
					
					
				
					'strSource = (files[i])    ' cannot convert from databuffer to string....
					'Print strSource
					
				Next
				
				Print(files[I].PeekString(i))
								
				Endif
				
				If I=1
				'parse file 2 data 
</pre> <br><br></td></tr></table><br>
<a name="2117706"></a>

<a name="2117705"></a>

<a name="2117716"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImmutableOctet(SKNG)</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> You mean, like 'ReadLine'? Because as I previously brought up, 'DataStream' and 'Stream' are great ways to make your code storage agnostic. That's what they're made for. In the example I posted you could simply write:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Local buffer:= files[INSERT_INDEX_HERE]
Local inputStream:= New DataStream(buffer)
...
While (Not inputStream.Eof)
	' Read the current line.
	Local line:= inputStream.ReadLine()
Wend
</textarea><br><br>That, or if the format is XML or XML-like, you could probably plug the data into one of the existing XML parsers. For example, <a href="https://github.com/swoolcock/diddy" target="_blank">Diddy</a> has one, and <a href="http://www.monkey-x.com/Community/posts.php?topic=4125&amp;page=first" target="_blank">SKN3 made one</a>.<br><br>In the case of a string-based input for those parsers, you could use:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Local buffer:= files[INSERT_INDEX_HERE]
Local content:= buffer.PeekString(0)
</textarea><br><br>Or alternatively, you could still use a 'Stream' object and call the 'ReadString' method. In this particular case, that's probably unnecessary.<br><br>You've got options for parsing, including doing it yourself, so you shouldn't have any problems. Just as a side note, if you ever need to compare the contents of files, I wrote <a href="https://github.com/Regal-Internet-Brothers/hash" target="_blank">this module</a> (Installed with the <a href="https://github.com/Regal-Internet-Brothers/regal-modules" target="_blank">main repo</a>).<br><br>Anyway, I hope those suggestions help. In general, it's best to stay within the borders of Monkey wherever possible, because that makes the code portable. Sometimes that's not realistic, but in this case, once the data is loaded, you shouldn't have any issues accessing the data from Monkey. <br><br></td></tr></table><br>
<a name="2117715"></a>

<a name="2117744"></a>

<a name="2117745"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MonkeyPlotter</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> @ImmtuableOctet(SKNG)<br><br>Thanks again for the additional feedback - during the week I can only squeeze in coding when I'm dog tired - your suggestion will save me a bucket load of work that I didn't need to do.<br><br>I already have developed my own data parser using the following sytnax that works quite well, I was struggling to see how to implement manipulating the dataBuffer as a readline object.<br><br>I look forward to trying your suggestion this evening - after I've done my daily work thing ;)<br><br>This is a slice of my current data parser, where my dataList is a string object:<br><br><br><pre class=code>
	Field file:FileLoaderClass
	Field dataList:String[]
	Field numberOfLines:Int
	
	file = New FileLoaderClass("testerTwo.txt")
		
		While Not file.Eof()
			dataList = dataList.Resize(dataList.Length() + 1)
			dataList[dataList.Length() - 1] = file.ReadLine()
			numberOfLines = numberOfLines + 1
		Wend

For i = 0 To (dataList.Length() - 1)
			
				count=count+1
				strSource = (dataList[i])

				If strSource[0 .. 16] = "&lt;DistanceMeters&gt;" Then
					distanceOneList = distanceOneList.Resize(distanceOneList.Length() + 1)
					strippedStr = strSource[16 .. 24]
					'Print "DstrippedStr = "+strippedStr
					distanceOneList[distanceOneList.Length() - 1] = strippedStr
				End If			
				
				'Print "strSource = "+strSource				
				'NOTE: Sometimes the DATE is sourced as a TIME field...need to capture that
				
				If strSource[0 .. 6] = "&lt;Time&gt;" Then
					timeOneList = timeOneList.Resize(timeOneList.Length() + 1)
					strippedStr = strSource[6 .. 26]
					'Print "TstrippedStr = "+strippedStr
					timeOneList[timeOneList.Length() - 1] = strippedStr
				End If
				
				If strSource[0 .. 17] = "&lt;LatitudeDegrees&gt;" Then
					latOneList = latOneList.Resize(latOneList.Length() + 1)
					strippedStr = strSource[17 .. 26]
					'Print "LaTstrippedStr = "+strippedStr
					latOneList[latOneList.Length() - 1] = strippedStr
				End If
				
				If strSource[0 .. 18] = "&lt;LongitudeDegrees&gt;" Then
					longOneList = longOneList.Resize(longOneList.Length() + 1)
					strippedStr = strSource[18 .. 28]
					'Print "LonGstrippedStr = "+strippedStr
					longOneList[longOneList.Length() - 1] = strippedStr
				End If
				
				'need logic to suss whether the BPM is over 99BPM or no (3 figs required then...
				If strSource[0 .. 7] = "&lt;Value&gt;" Then
					BPMOneList = BPMOneList.Resize(BPMOneList.Length() + 1)
					strippedStr = strSource[7 .. 12]
					'Print "LonGstrippedStr = "+strippedStr
					BPMOneList[BPMOneList.Length() - 1] = strippedStr
				End If
						
			Next

</pre><br><br><br>I'll be sure to check out your version of data parsing, as you mentioned here:<br><br><div class="quote"> <br>You've got options for parsing, including doing it yourself, so you shouldn't have any problems. Just as a side note, if you ever need to compare the contents of files, I wrote this module (Installed with the main repo). <br></div><br><br>My code may not necessarily be the most succinct way to achieve my goals - but its a baby steps process for moi. I genuinely appreciate your feedback - helps me retain my coding mojo ;) Right, off to work..... <br><br></td></tr></table><br>
<a name="2117743"></a>

<a name="2117742"></a>

<a name="2117795"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MonkeyPlotter</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Sorry for my ignorance, I tried invoking the following: (interpreting the INSERT_INDEX_HERE as if I entered 0 it would use the first selected file)<br><br>[EDIT] Okay, found that by simply adding Import brl.datastream (from the example within the following link) I resolved the datastream object not being identified, however,  the line<br><br><pre class=code> While (Not inputStream.Eof)
</pre><br><br>Cannot be used this way....? I suspect I am failing to retrieve the file data identified within the button from the LoadFile request.<br><br><a href="https://github.com/Regal-Internet-Brothers/ioutil/blob/master/Examples/publicdatastream/TransferTo_Example.monkey" target="_blank">https://github.com/Regal-Internet-Brothers/ioutil/blob/master/Examples/publicdatastream/TransferTo_Example.monkey</a><br><br>[EDIT] I found a reference to filestream here, looking around for datastream....<br><br><a href="https://github.com/Regal-Internet-Brothers/virtualos/blob/master/filestream.monkey" target="_blank">https://github.com/Regal-Internet-Brothers/virtualos/blob/master/filestream.monkey</a><br><br>Found a reference to 'publicdatastream' here:<br><br><a href="https://github.com/Regal-Internet-Brothers/ioutil/commit/d50c85abe53c87ae77aab057817902485ed7cd95" target="_blank">https://github.com/Regal-Internet-Brothers/ioutil/commit/d50c85abe53c87ae77aab057817902485ed7cd95</a><br><br><pre class=code>
	Method HandleEvent:Int(event:Event)
		Select event.type
			Case "change"
				Local fileButton:= GetFileButton(event.target)
				
				If (fileButton &lt;&gt; Null) Then
					Local f:File = fileButton.files.item(0)
					
					Print("New file: ~q" + f.name + "~q - " + f.size + " bytes")
					
					' Allocate a "shell" object.
					
					'Local buffer1:= fileButton.files.item[0]
					
					Local buffer:= files[0]
					
					'Local inputStream:= New DataStream(buffer1)
					Local inputStream:= New DataStream(buffer)

					While (Not inputStream.Eof)
						' Read the current line.
						Local line:= inputStream.ReadLine()
					Wend
					

</pre><br><br>Edit, resolved not accessing the compiler not accessing the dataStream object... as stated above.<br><br><div class="quote"> However, I receive type 'DataStream' not found. Now I suspect I may need to include a reference to your DataStream module but am not sure how to go about achieving this.  <br></div> <br><br></td></tr></table><br>
<a name="2117794"></a>

<a name="2117793"></a>

<a name="2117792"></a>

<a name="2117791"></a>

<a name="2117790"></a>

<a name="2117789"></a>

<a name="2117788"></a>

<a name="2117787"></a>

<a name="2117786"></a>

<a name="2117785"></a>

<a name="2117784"></a>

<a name="2117783"></a>

<a name="2117813"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImmutableOctet(SKNG)</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> <br>However, I receive type 'DataStream' not found. Now I suspect I may need to include a reference to your DataStream module but am not sure how to go about achieving this.<br> <br></div><br><br>You don't have to import it unless you want a different implementation. It's separate from the <b>official '<a href="http://www.monkey-x.com/docs/html/Modules_brl.datastream.html" target="_blank">brl.datastream</a>' API</b>. You can <u>import that module</u> to get what you're looking for.<br><br>Just for future reference, '<a href="http://www.monkey-x.com/docs/html/Modules_brl.datastream.html" target="_blank">brl.datastream</a>' and '<a href="https://github.com/Regal-Internet-Brothers/ioutil/blob/master/publicdatastream.monkey" target="_blank">regal.ioutil.publicdatastream</a>' are different modules ('regal' doesn't have the standard '<a href="http://www.monkey-x.com/docs/html/Modules_brl.datastream_DataStream.html" target="_blank">brl.datastream.DataStream</a>' class).<br><br>Likewise, the 'FileStream' implementation found in '<a href="https://github.com/Regal-Internet-Brothers/virtualos" target="_blank">regal.virtualos</a>' is different from the version in '<a href="http://www.monkey-x.com/docs/html/Modules_brl.filestream_FileStream.html" target="_blank">brl.filestream</a>'. In that particular case, it's a reimplementation for the virtual file-system. If you want to pass data into the file-system via extensions, that's possible with <a href="https://github.com/Regal-Internet-Brothers/virtualos/blob/66e7b716356e9c9c4a3e1ef4ae613a3d5d301210/legend.monkey#L64" target="_blank">'__OS_SaveBuffer', found in 'regal.virtualos.legend'</a>.<br><br>To do something like this, you would upload to the file-system, then use '<a href="https://github.com/Regal-Internet-Brothers/virtualos/filestream.monkey" target="_blank">regal.virtualos.filestream</a>.FileStream' to load from the file-system. It's experimental, but it works well. Just keep in mind that 'regal.virtualos.filestream' is dependent on 'regal.ioutil' and co.<br><br><b>With that said, <u>you don't need all of those dependencies here</u></b>. If you're looking for solid behavior to <u>manage</u> the files, then you could use 'regal.virtualos'. However, for something this simple, it's not really needed. Useful, but not necessary. You don't seem to need to keep track of files beyond the loader, so it's not really relevant.<br><br>All you really need to do is plug the buffers into 'brl.databuffer.DataStream'. You've already got the buffers, you can just start reading from there. Streams, particularly 'brl.databuffer.DataStream' is the standard way of doing this. Just to confirm, <b>the BRL modules are already installed</b>. They're default modules that make up the "standard library", so you can import them anywhere you want.<br><br><b>The code you posted above should work just fine.</b> As long as you're importing '<b>brl.datastream</b>', then it should compile with no problems. If you've got any trouble from here, feel free to ask. Although, I recommend making multiple posts so I understand the intended message order. Edits are good for extra info that's not largely canonical.<br><br>In regards to this question:<br><pre class=code>While (Not inputStream.Eof)</pre><br><div class="quote"> Cannot be used this way....? I suspect I am failing to retrieve the file data identified within the button from the LoadFile request. <br></div><br><br>If the 'While' loop isn't working, try adding parentheses to it. It's a property in 'Stream', but some extending APIs just implement it as an undecorated method. You're probably loading the data just fine. It'd be a runtime error / exception if it failed, so if the compiler itself says there's an error, it's related to the code. <br><br></td></tr></table><br>
<a name="2117821"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MonkeyPlotter</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> @ImmutableOctet(SKNG), thanks for the feedback, not normally up quite so early, thanks again for the prompt feedback, digesting your info now - hopefully I'll manage to work through your 'input' before work.<br><br>I have tried adding extra parentheses to the <br><br><div class="quote"> While (Not inputStream.Eof)  <br></div> to no avail.<br><br>Even tried modifying inputStream.Eof to DataStream.Eof to no avail:<br><br><div class="quote"> <br>				While (Not (DataStream.Eof))<br>						' Read the current line.<br>						Local line:= DataStream.ReadLine()<br>					Wend<br><br> <br></div><br><br>With the inputStream.Eof commented out, the following code compiles and runs fine - I'm simply using three small text files to test the code.<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">

Strict

'original code sourced from Monkey forum posting:
'http://www.monkey-x.com/Community/posts.php?topic=5698

' Preprocessor related:
#MOJO_AUTO_SUSPEND_ENABLED = False

' Imports:
Import mojo
Import brl.databuffer

'attempts at getting inputstream.Eof to work
Import brl.datastream

Import brl.inputstream

' Check if we're using HTML5:
#If TARGET = "html5"
	Import dom
	
	Import "native/file_to_databuffer.js"
	
	' External bindings (JavaScript):
	Extern
	
	' Functions:
	
	' File-to-DataBuffer:
	Function LoadFile:DataBuffer(F:File, B_Out:DataBuffer)="loadFile"
	
	' DOM:
	Function log:Void(e:Event) = "window.console.log"
	Function log:Void(f:FileList) = "window.console.log"
	Function log:Void(f:File) = "window.console.log"
	'Function log:Void(o:Object) = "window.console.log"
	
	' Classes:
	Class File
		' Fields:
		Field lastModified:Int
		Field lastModifiedDate:String
		Field name:String
		Field size:Int
		Field fileName:String
		Field fileSize:Int
		Field type:String
	End
	
	Class FileList Extends DOMObject
		' Fields:
		Field length:Int
		
		' Methods:
		Method item:File(index:Int)
	End
	
	Class HTMLFileInputElement Extends HTMLInputElement = "HTMLInputElement"
		' Fields:
		Field files:FileList
	End
	
	Public
	
	' HTML5-specific Monkey code:
	
	' Globals
	
	Global file1path:String="one"
	Global file2path:String="two"
	Global file3path:String="three"
	
	
	' Classes:
	Class EventRepeater Extends EventListener
		' Constructor(s):
		Method New(Callback:EventHandler)
			Self.Callback = Callback
		End
		
		' Methods:
		Method handleEvent:Int(event:Event)
			Return Callback.HandleEvent(event)
		End
		
		' Fields:
		Field Callback:EventHandler
	End
	
	' Functions:
	Function AddFileRequester:HTMLFileInputElement(listener:EventListener, node:dom.Node)
		Local input:= HTMLFileInputElement(document.createElement("input")) ' HTMLInputElement
		
		input.type = "file"
		input.addEventListener("change", listener)
		
		node.appendChild(input)
		
		Return input
	End
	
	Function AddButton:HTMLInputElement(name:String, listener:EventListener, node:dom.Node)
		Local button:= document.createElement("input")
		
		button.setAttribute("type", "button")
		button.setAttribute("name", name)
		button.setAttribute("value", name)
		button.addEventListener("click", listener)
		
		node.appendChild(button)
		
		Return HTMLInputElement(button)
	End
#Else
	#Error "Please build this application with the HTML5 target."
#End

' Interfaces:
Interface EventHandler
	' Methods:
	Method HandleEvent:Int(event:Event)
End

' Classes:
Class FileApp Extends App Implements EventHandler
	' Constant variable(s):
	Const FILES_NEEDED:= 3
	
	' Methods:
	Method OnCreate:Int()
		SetUpdateRate(30) ' 0 ' 60
		
		Self.running = False
		Self.filesQueued = 0
		
		' This is a dummy object used to get around the limitations of DOM:
		Self.repeater = New EventRepeater(Self)
		
		Self.bodyNode = dom.Node(Element(document.getElementsByTagName("body").item(0)).getElementsByTagName("div").item(0))
		
		Self.fileButtons = New HTMLFileInputElement[FILES_NEEDED]
		Self.files = New DataBuffer[FILES_NEEDED] ' Self.fileButtons.Length
		
		For Local I:= 0 Until fileButtons.Length ' FILES_NEEDED
			Self.fileButtons[I] = AddFileRequester(repeater, bodyNode)
		Next
		
		#If CONFIG = "debug"
			MakeRunButton()
		#End
		
		Return 0
	End
	
	Method HandleEvent:Int(event:Event)
		Select event.type
			Case "change"
				Local fileButton:= GetFileButton(event.target)
				
				If (fileButton &lt;&gt; Null) Then
					Local f:File = fileButton.files.item(0)
					
					Print("New file: ~q" + f.name + "~q - " + f.size + " bytes")
					
					' Allocate a "shell" object: these are my attempts to get the pointer to the 
					' path to obtain the data from, I suspect I am failing to access the 
					' path to the file, or indeed the object within the Local 'f' variable
					' that refers to the file path. Suspect that could be why
					' While (Not inputStream.Eof) is failing to compile
					
					
					Local buffer:= New DataBuffer()
					
					LoadFile(f, buffer)
					files[filesQueued] = buffer
					
					'Local inputStream:= New DataStream(buffer1)
					Local inputStream:= New DataStream(buffer)
					
					'suspect I may need to 'open' the inputStream
					'here prior to accessing it ? Code compiles
					'and runs ok with the next 4 lines commented out
					
					'While (Not (inputStream.Eof))
						' Read the current line.
					'	Local line:= inputStream.ReadLine()
					'Wend

					Local buffer1:= New DataBuffer()
					Local buffer2:= New DataBuffer()
					Local buffer3:= New DataBuffer()
					
					If filesQueued = 0
					
					LoadFile(f, buffer1)
						
					files[filesQueued] = buffer1
					
					Endif
					
					If filesQueued = 1
					
					LoadFile(f, buffer2)
						
					files[filesQueued] = buffer2
					
					Endif
					
					If filesQueued = 2
					
					LoadFile(f, buffer3)
						
					files[filesQueued] = buffer3
					
					Endif		
					
					filesQueued += 1
				Endif
			Case "click"
				If (event.target = runButton) Then
					'Local runButton:= Self.runButton
					
					OnRunButtonPressed()
				Endif
		End Select
		
		Return 1
	End
	
	Method OnFilesLoaded:Void()
		If (runButton &lt;&gt; Null) Then
			Return
		Endif
		
		'running = True
		
		MakeRunButton()
		
		Print("All files have been loaded.")
		
		Return
	End
	
	Method OnRunButtonPressed:Void()
		If (running Or Not AllFilesLoaded) Then
			Return
		Endif
		
		running = True
		
		Print("Starting the application properly.")
		
			Print("File 1 Path is:")+file1path
			Print("File 2 Path is:")+file2path
			Print("File 3 Path is:")+file3path
			
		
		Return
	End
	
	Method MakeRunButton:Void()
		If (runButton &lt;&gt; Null) Then
			Return
		Endif
		
		runButton = AddButton("Run", repeater, bodyNode)
		
		Return
	End
	
	Method GetFileButton:HTMLFileInputElement(target:EventTarget)
		For Local I:= 0 Until fileButtons.Length
			If (fileButtons[I] = target) Then ' EventTarget(...)
				Return fileButtons[I]
			Endif
		Next
		
		Return Null
	End
	
	Method OnUpdate:Int()
		If (Not running) Then
			If (AllFilesLoaded) Then
				OnFilesLoaded()
			Endif
			
			Return 0
		Endif
		
		Local strSource:String
		Local i:Int
		
		'okay - need to work my logic that parses files into here maybe......
		'OR how about populating the arrays I established via the following 
		'as the data transfer device
		
		If (MouseHit(MOUSE_LEFT)) Then
			For Local I:= 0 Until files.Length
				Print("File #" + (I+1) + ":")
				Print("")
				
								'parse the data from all three files into 
				If I=0
				'parse file 1 data 
				
				Print "Parsing file 1...."
				
				'For i = 0 To (dataList.Length() - 1)
				For i = 0 To (files[I].Length() - 1)
				
					'strSource = (files[i])    ' cannot convert from databuffer to string....
					'Print strSource
					
				Next
								
				Endif
				
				If I=1
				'parse file 2 data 
				
				Print "Parsing file 2...."
				
				Endif
				
				If I=2
				'parse file 3 data 
				
				Print "Parsing file 3...."

				
				Endif
				
				
				Print(files[I].PeekString(0))
				
				
				
				If I=2
				
				Print " "
				Print "========== End of parsing files==========="
				Print " "
				
				Endif
				
				
				

				
				
				
				
				
			Next
		Endif
		
		Return 0
	End
	
	Method OnRender:Int()
		Cls()
		
		If (Not running) Then
			If (AllFilesLoaded) Then
				DrawText("All files have been loaded.", 8.0, 8.0)
			Else
				' This basically never happens.
				DrawText("Waiting for files; " + FilesCompleted + " completed.", 8.0, 8.0)
			Endif
			
			Return 0
		Endif
		
		DrawText("Running as expected, click on the screen to output all files as plain text.", 8.0, 8.0)
		
		Return 0
	End
	
	' Properties:
	Method AllFilesLoaded:Bool() Property
		Return ((filesQueued = FILES_NEEDED) And FileBuffersLoaded)
	End
	
	Method FileBuffersLoaded:Bool() Property
		For Local I:= 0 Until files.Length
			If (files[I].Length = 0) Then
				Return False
			Endif
		Next
		
		Return True
	End
	
	Method FilesCompleted:Int() Property
		Local count:= 0
		
		For Local I:= 0 Until files.Length
			Local file:= files[I]
			
			If (file &lt;&gt; Null And file.Length &lt;&gt; 0) Then
				count += 1
			Endif
		Next
		
		Return count
	End
	
	' Fields:
	Field fileButtons:HTMLFileInputElement[]
	Field runButton:HTMLInputElement
	
	Field files:DataBuffer[]
	
	Field filesQueued:Int
	Field repeater:EventRepeater
	
	Field bodyNode:dom.Node
	
	Field running:Bool
End

' Functions:
Function Main:Int()
	New FileApp()
	
	Return 0
End

</textarea><br><br>here it is not 'codeboxed'<br><br><pre class=code>
Strict

'original code sourced from Monkey forum posting:
'http://www.monkey-x.com/Community/posts.php?topic=5698

' Preprocessor related:
#MOJO_AUTO_SUSPEND_ENABLED = False

' Imports:
Import mojo
Import brl.databuffer

'attempts at getting inputstream.Eof to work
Import brl.datastream

Import brl.inputstream

' Check if we're using HTML5:
#If TARGET = "html5"
	Import dom
	
	Import "native/file_to_databuffer.js"
	
	' External bindings (JavaScript):
	Extern
	
	' Functions:
	
	' File-to-DataBuffer:
	Function LoadFile:DataBuffer(F:File, B_Out:DataBuffer)="loadFile"
	
	' DOM:
	Function log:Void(e:Event) = "window.console.log"
	Function log:Void(f:FileList) = "window.console.log"
	Function log:Void(f:File) = "window.console.log"
	'Function log:Void(o:Object) = "window.console.log"
	
	' Classes:
	Class File
		' Fields:
		Field lastModified:Int
		Field lastModifiedDate:String
		Field name:String
		Field size:Int
		Field fileName:String
		Field fileSize:Int
		Field type:String
	End
	
	Class FileList Extends DOMObject
		' Fields:
		Field length:Int
		
		' Methods:
		Method item:File(index:Int)
	End
	
	Class HTMLFileInputElement Extends HTMLInputElement = "HTMLInputElement"
		' Fields:
		Field files:FileList
	End
	
	Public
	
	' HTML5-specific Monkey code:
	
	' Globals
	
	Global file1path:String="one"
	Global file2path:String="two"
	Global file3path:String="three"
	
	
	' Classes:
	Class EventRepeater Extends EventListener
		' Constructor(s):
		Method New(Callback:EventHandler)
			Self.Callback = Callback
		End
		
		' Methods:
		Method handleEvent:Int(event:Event)
			Return Callback.HandleEvent(event)
		End
		
		' Fields:
		Field Callback:EventHandler
	End
	
	' Functions:
	Function AddFileRequester:HTMLFileInputElement(listener:EventListener, node:dom.Node)
		Local input:= HTMLFileInputElement(document.createElement("input")) ' HTMLInputElement
		
		input.type = "file"
		input.addEventListener("change", listener)
		
		node.appendChild(input)
		
		Return input
	End
	
	Function AddButton:HTMLInputElement(name:String, listener:EventListener, node:dom.Node)
		Local button:= document.createElement("input")
		
		button.setAttribute("type", "button")
		button.setAttribute("name", name)
		button.setAttribute("value", name)
		button.addEventListener("click", listener)
		
		node.appendChild(button)
		
		Return HTMLInputElement(button)
	End
#Else
	#Error "Please build this application with the HTML5 target."
#End

' Interfaces:
Interface EventHandler
	' Methods:
	Method HandleEvent:Int(event:Event)
End

' Classes:
Class FileApp Extends App Implements EventHandler
	' Constant variable(s):
	Const FILES_NEEDED:= 3
	
	' Methods:
	Method OnCreate:Int()
		SetUpdateRate(30) ' 0 ' 60
		
		Self.running = False
		Self.filesQueued = 0
		
		' This is a dummy object used to get around the limitations of DOM:
		Self.repeater = New EventRepeater(Self)
		
		Self.bodyNode = dom.Node(Element(document.getElementsByTagName("body").item(0)).getElementsByTagName("div").item(0))
		
		Self.fileButtons = New HTMLFileInputElement[FILES_NEEDED]
		Self.files = New DataBuffer[FILES_NEEDED] ' Self.fileButtons.Length
		
		For Local I:= 0 Until fileButtons.Length ' FILES_NEEDED
			Self.fileButtons[I] = AddFileRequester(repeater, bodyNode)
		Next
		
		#If CONFIG = "debug"
			MakeRunButton()
		#End
		
		Return 0
	End
	
	Method HandleEvent:Int(event:Event)
		Select event.type
			Case "change"
				Local fileButton:= GetFileButton(event.target)
				
				If (fileButton &lt;&gt; Null) Then
					Local f:File = fileButton.files.item(0)
					
					Print("New file: ~q" + f.name + "~q - " + f.size + " bytes")
					
					' Allocate a "shell" object: these are my attempts to get the pointer to the 
					' path to obtain the data from, I suspect I am failing to access the 
					' path to the file, or indeed the object within the Local 'f' variable
					' that refers to the file path. Suspect that could be why
					' While (Not inputStream.Eof) is failing to compile
					
					
					Local buffer:= New DataBuffer()
					
					LoadFile(f, buffer)
					files[filesQueued] = buffer
					
					'Local inputStream:= New DataStream(buffer1)
					Local inputStream:= New DataStream(buffer)
					
					'suspect I may need to 'open' the inputStream
					'here prior to accessing it ? Code compiles
					'and runs ok with the next 4 lines commented out
					
					'While (Not (inputStream.Eof))
						' Read the current line.
					'	Local line:= inputStream.ReadLine()
					'Wend

					Local buffer1:= New DataBuffer()
					Local buffer2:= New DataBuffer()
					Local buffer3:= New DataBuffer()
					
					If filesQueued = 0
					
					LoadFile(f, buffer1)
						
					files[filesQueued] = buffer1
					
					Endif
					
					If filesQueued = 1
					
					LoadFile(f, buffer2)
						
					files[filesQueued] = buffer2
					
					Endif
					
					If filesQueued = 2
					
					LoadFile(f, buffer3)
						
					files[filesQueued] = buffer3
					
					Endif		
					
					filesQueued += 1
				Endif
			Case "click"
				If (event.target = runButton) Then
					'Local runButton:= Self.runButton
					
					OnRunButtonPressed()
				Endif
		End Select
		
		Return 1
	End
	
	Method OnFilesLoaded:Void()
		If (runButton &lt;&gt; Null) Then
			Return
		Endif
		
		'running = True
		
		MakeRunButton()
		
		Print("All files have been loaded.")
		
		Return
	End
	
	Method OnRunButtonPressed:Void()
		If (running Or Not AllFilesLoaded) Then
			Return
		Endif
		
		running = True
		
		Print("Starting the application properly.")
		
			Print("File 1 Path is:")+file1path
			Print("File 2 Path is:")+file2path
			Print("File 3 Path is:")+file3path
			
		
		Return
	End
	
	Method MakeRunButton:Void()
		If (runButton &lt;&gt; Null) Then
			Return
		Endif
		
		runButton = AddButton("Run", repeater, bodyNode)
		
		Return
	End
	
	Method GetFileButton:HTMLFileInputElement(target:EventTarget)
		For Local I:= 0 Until fileButtons.Length
			If (fileButtons[I] = target) Then ' EventTarget(...)
				Return fileButtons[I]
			Endif
		Next
		
		Return Null
	End
	
	Method OnUpdate:Int()
		If (Not running) Then
			If (AllFilesLoaded) Then
				OnFilesLoaded()
			Endif
			
			Return 0
		Endif
		
		Local strSource:String
		Local i:Int
		
		'okay - need to work my logic that parses files into here maybe......
		'OR how about populating the arrays I established via the following 
		'as the data transfer device
		
		If (MouseHit(MOUSE_LEFT)) Then
			For Local I:= 0 Until files.Length
				Print("File #" + (I+1) + ":")
				Print("")
				
								'parse the data from all three files into 
				If I=0
				'parse file 1 data 
				
				Print "Parsing file 1...."
				
				'For i = 0 To (dataList.Length() - 1)
				For i = 0 To (files[I].Length() - 1)
				
					'strSource = (files[i])    ' cannot convert from databuffer to string....
					'Print strSource
					
				Next
								
				Endif
				
				If I=1
				'parse file 2 data 
				
				Print "Parsing file 2...."
				
				Endif
				
				If I=2
				'parse file 3 data 
				
				Print "Parsing file 3...."

				
				Endif
				
				
				Print(files[I].PeekString(0))
				
				
				
				If I=2
				
				Print " "
				Print "========== End of parsing files==========="
				Print " "
				
				Endif
				
				
				

				
				
				
				
				
			Next
		Endif
		
		Return 0
	End
	
	Method OnRender:Int()
		Cls()
		
		If (Not running) Then
			If (AllFilesLoaded) Then
				DrawText("All files have been loaded.", 8.0, 8.0)
			Else
				' This basically never happens.
				DrawText("Waiting for files; " + FilesCompleted + " completed.", 8.0, 8.0)
			Endif
			
			Return 0
		Endif
		
		DrawText("Running as expected, click on the screen to output all files as plain text.", 8.0, 8.0)
		
		Return 0
	End
	
	' Properties:
	Method AllFilesLoaded:Bool() Property
		Return ((filesQueued = FILES_NEEDED) And FileBuffersLoaded)
	End
	
	Method FileBuffersLoaded:Bool() Property
		For Local I:= 0 Until files.Length
			If (files[I].Length = 0) Then
				Return False
			Endif
		Next
		
		Return True
	End
	
	Method FilesCompleted:Int() Property
		Local count:= 0
		
		For Local I:= 0 Until files.Length
			Local file:= files[I]
			
			If (file &lt;&gt; Null And file.Length &lt;&gt; 0) Then
				count += 1
			Endif
		Next
		
		Return count
	End
	
	' Fields:
	Field fileButtons:HTMLFileInputElement[]
	Field runButton:HTMLInputElement
	
	Field files:DataBuffer[]
	
	Field filesQueued:Int
	Field repeater:EventRepeater
	
	Field bodyNode:dom.Node
	
	Field running:Bool
End

' Functions:
Function Main:Int()
	New FileApp()
	
	Return 0
End
</pre> <br><br></td></tr></table><br>
<a name="2117820"></a>

<a name="2117819"></a>

<a name="2117818"></a>

<a name="2117817"></a>

<a name="2117816"></a>

<a name="2117815"></a>

<a name="2117814"></a>

<a name="2117822"></a>

<a name="2117823"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MonkeyPlotter</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote">  With that said, you don't need all of those dependencies here. If you're looking for solid behavior to manage the files, then you could use 'regal.virtualos'. However, for something this simple, it's not really needed. Useful, but not necessary. You don't seem to need to keep track of files beyond the loader, so it's not really relevant.  <br></div><br>Yes, Iâ€™m hoping to load the data into a format that my existing file parser can access without using code to glue the bytes back together to strings with carriage returns, which was the elongated path I was embarking upon  prior to your help ;) <br><br></td></tr></table><br>
<a name="2117824"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MonkeyPlotter</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> I think the error in my code is within the following area specifically:<br><br><pre class=code>

				If (fileButton &lt;&gt; Null) Then
					Local f:File = fileButton.files.item(0)
					
					Print("New file: ~q" + f.name + "~q - " + f.size + " bytes")
					
					' Allocate a "shell" object: these are my attempts to get the pointer to the 
					' path to obtain the data from, I suspect I am failing to access the 
					' path to the file, or indeed the object within the Local 'f' variable
					' that refers to the file path. Suspect that could be why
					' While (Not inputStream.Eof) is failing to compile
					
					
					Local buffer:= New DataBuffer()
					
					LoadFile(f, buffer)
					files[filesQueued] = buffer
					
					'Local inputStream:= New DataStream(buffer1)
					Local inputStream:= New DataStream(buffer)
					
					'suspect I may need to 'open' the inputStream
					'here prior to accessing it ? Code compiles
					'and runs ok with the next 4 lines commented out
					
					While (Not (inputStream.Eof))
						' Read the current line.
						Local line:= inputStream.ReadLine()
					Wend

					Local buffer1:= New DataBuffer()
					Local buffer2:= New DataBuffer()
					Local buffer3:= New DataBuffer()

</pre> <br><br></td></tr></table><br>
<a name="2117828"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImmutableOctet(SKNG)</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Okay, I think I get what you're trying to do, but it's not quite right. <b><a href="https://github.com/ImmutableOctet/html5-file-demo-monkey" target="_blank">I updated the example</a></b> to do what you seem to be looking for. I made a change to the native JavaScript file, so you should probably <a href="https://github.com/ImmutableOctet/html5-file-demo-monkey/archive/master.zip" target="_blank">download the entire thing (Click here)</a>.<br><br>I hope that helps. Everything can be done in the 'ReadLoadedFiles' method. Just for reference, I meant that you should call 'Eof<b>()</b>', not <i>surround</i> it with parentheses. To be fair, that one was my fault. <br><br></td></tr></table><br>
<a name="2117827"></a>

<a name="2117839"></a>

<a name="2117840"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MonkeyPlotter</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> @SKNG, Thankyou ;) Really appreciated - I'd normally be at work by now but thanks to a docs appointment I've managed to see your resolution without tired eyes for a change. I'm still cutting my teeth with Monkey, your help is going a long way to ensuring I achieve my goal - have a good day.<br><br>I've even created my own little method:<br><br><pre class=code>

	Method ParseLoadedFiles:Void()
	
        'TO DO: populate....
	
Return
	End

</pre><br><br>[EDIT] - Oh yes, this is exactly what I was looking for, cheers again. <br><br></td></tr></table><br>
<a name="2117841"></a>

<a name="2117842"></a>

<a name="2117843"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MonkeyPlotter</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> @SKNG, Thankyou ;) Really appreciated - I'd normally be at work by now but thanks to a docs appointment I've managed to see your resolution without tired eyes for a change. I'm still cutting my teeth with Monkey, your help is going a long way to ensuring I achieve my goal - have a good day.<br><br>I've even created my own little method, the fog is slowly clearing on the Object Oriented study I did a (few) years ago now.....<br><br><pre class=code>

Method ParseLoadedFiles:Void()
	
        'TO DO: populate....
	
         Return
End

</pre><br><br>[EDIT] - Oh yes, this is exactly what I was looking for, cheers again. <br><br></td></tr></table><br>
<a name="2117836"></a>

<a name="2117837"></a>

<a name="2117838"></a>

<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
