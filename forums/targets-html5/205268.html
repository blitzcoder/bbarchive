<!DOCTYPE html><html lang="en" ><head ><title >How To Read From A Local File ?</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >How To Read From A Local File ?</h1><a href="forums.php" >Monkey Targets Forums</a>/<a href="topics.php?forum=504" >HTML5</a>/<a href="#bottom" >How To Read From A Local File ?</a><br><br>
<a name="2058328"></a>

<a name="2058329"></a>

<a name="2058330"></a>

<a name="2058331"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >semar</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi all,<br><br>I would like to make a quiz game for a Mac computer.<br><br>Initially I thought to use BMax for this purpose, but since I have a PC with Windows XP, I can't compile a BMax source for it, can I ?<br><br>So I though, I can do it with Monkey, and let the game run locally on a browser.<br><br>But !<br><br>I need to read a text file with questions and answers, so that the game can challenge the player.<br><br>Question: how can I read such a text file from within a .monkey program, (target HTML5) ?<br><br>The LoadState does not really work with a real file; by the way, where is the text saved when SaveState is used ? In a cookie ?<br><br>Back to the question: which tool do we have to let a monkey program read from a text file ?<br><br>Any help would be greatly appreciated.<br><br>Alternatively: do Java compiled programs (.class files) run on a Mac by default ? Or should I re-compile the source code on it - that is, on the Mac ?<br><br>Sergio. <br><br></td></tr></table><br>
<a name="2058336"></a>

<a name="2058337"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MikeHart</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> Use LoadString to read from a textfile.<br><br>SaveState doesn't store in a cookie but in the local storage of your browser. <br><br></td></tr></table><br>
<a name="2058349"></a>

<a name="2058350"></a>

<a name="2058351"></a>

<a name="2058352"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >semar</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> <div class="quote"> Use LoadString to read from a textfile <br></div><br><br>The documentation states that LoadString does not work with HTML5.<br>Are you sure, that we can use LoadString on a HTML5 target ? Because that is exactly what I need, just read text from an external file.<br><br><div class="quote"> in the local storage of your browser <br></div><br>Where is this local storage exactly ? <br><br></td></tr></table><br>
<a name="2058368"></a>

<a name="2058369"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >semar</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> By the way, there is here on the forum a link to an html5 example demo which uses Diddy combobox, inputbox, etc.<br><br>Question 1: where is that demo link ?<br>Question 2: does the Diddis input box accept text from a clipboard ? In other terms, if I copy a text from somewhere, can I then paste it on a Diddy inputbox ?<br><br>Thanks for the attention,<br>Sergio. <br><br></td></tr></table><br>
<a name="2058376"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >MikeHart</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> Use mojo.Loadstring, not os.loadsring.<br><br>About localstorage, google is your friend. I just looked into this once, but forgot about it.. I I needed an extra tool to look through the db where it was stored. <br><br></td></tr></table><br>
<a name="2058389"></a>

<a name="2058390"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >semar</td><td align="right"><font class=tiny>(Posted 2013)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Mike, I'll try the mojo.LoadString as soon as I can. <br><br></td></tr></table><br>
<a name="2124240"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >diemar</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Did anybody try to make a script extension that uses Browser cookies to read and save data on the client machine? <br><br></td></tr></table><br>
<a name="2124243"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >ImmutableOctet(SKNG)</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> @diemar: Maybe have a look at the HTML5 file APIs? <a href="https://github.com/ImmutableOctet/html5-file-demo-monkey" target="_blank">I put this together a while back</a>. Here's the <a href="http://www.monkey-x.com/Community/posts.php?topic=10441" target="_blank">related thread</a>.<br><br>You can take a look at <a href="https://github.com/Regal-Internet-Brothers/webcc-monkey" target="_blank">WebCC</a> and '<a href="https://github.com/Regal-Internet-Brothers/virtualos" target="_blank">regal.virtualos</a>' if you want to see how you can do some crazy stuff. As a means of storing data local to the browser, 'regal.virtualos' is pretty simple. Examples can be <a href="https://github.com/Regal-Internet-Brothers/virtualos/tree/master/Examples" target="_blank">found here</a>. It's best to install the 'virtualos' module as a sub-folder in a new folder called "modules/regal". Alternatively, it should be independent of the 'regal' prefix, so you <i>should</i> be able to use it separately.<br><br>To download 'virtualos', either clone it from GitHub, or <a href="https://github.com/Regal-Internet-Brothers/virtualos/archive/master.zip" target="_blank">click here for a direct download</a>. <br><br></td></tr></table><br>
<a name="2124242"></a>

<a name="2124270"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >diemar</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Thank you very much! <br><br></td></tr></table><br>
<a name="2124353"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >diemar</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> actually, it turned out to be extremly simple to access cookies and webstorage in html5 as read/write when using additional javascript function in monkeygame.html and access them from within monkey after declaring them as dummy  Extern functions in monkey. The actual javascript cookie or webstorage reading/writing code is really just 1 line of code, as demonstrated in various tutorials. <br><br></td></tr></table><br>
<a name="2124355"></a>

<a name="2124358"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >diemar</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> here's some code. add this to your monkey source:<br><pre class=code>
Extern
Function myExternalFunction()
Function myExternalFunction2()
Public
</pre><br>eg. just before the line "Function Main()".<br>Then in your build folder edit monkeygame.html (copy paste from notepad to wordpad to notepad to convert to windows linebreaks if neccessary) and add your function at the end in the HEAD's script section, eg.:<br><pre class=code>
var myVar="";
Function myExternalFunction()
{
  myStorage=setItem("lastname","Smith");
  myVar=myStorage.getItem("lastname");
}
</pre><br> to test this, add an input  button of a form to the html code, like:<br><pre class=code>
&lt;input type="button" value="clickme" onclick="alert(myVar)"&gt;&lt;/input&gt;
</pre><br>Obviously, both cookies and Webstorage use Strings, so one may need to convert eg. binary data, I would suggest a simple hex encoding, requiring twice the space of the binary data, eg. A3FFC7 ... and each pair represents one byte of the string, which may be rather fast.<br><br>This is primitive, but simple :)<br><br>oh, BTW. you can declare a global variable in monkey, like:<br><pre class=code>
Import mojo
Global myVar:String=""
</pre><br>and then access it from within monkeygame.html by adding a certain prefix:<br><pre class=code>
alert(bb_monkeysourcename_myVar);
</pre><br>where monkeysourcename is the name of your monkey sourcefile, without the ".monkey" part. <br><br></td></tr></table><br>
<a name="2124357"></a>

<a name="2124356"></a>

<a name="2124408"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >diemar</td><td align="right"><font class=tiny>(Posted 2016)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> I wrote a simple emulation of BASIC sequential file io using the local webstorage in html5:<br> <a href="http://www.monkey-x.com/Community/posts.php?topic=12667" target="_blank">http://www.monkey-x.com/Community/posts.php?topic=12667</a> <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
