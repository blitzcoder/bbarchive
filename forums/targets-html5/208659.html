<!DOCTYPE html><html lang="en" ><head ><title >Httprequest - Get issue with firefox</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='language:basic, target:desktop, category:game development'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 >Httprequest - Get issue with firefox</h1><a href="forums.php" >Monkey Targets Forums</a>/<a href="topics.php?forum=504" >HTML5</a>/<a href="#bottom" >Httprequest - Get issue with firefox</a><br><br>
<a name="2089861"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bob</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#1">[#1]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've modified the get section of the bananas/httprequest example so that the URL points to a .php script that returns a list of current high scores. When I run the example in Chrome or IE it works fine and returns the list as expected. When it is run in Firefox, I get a blank response.<br><br>Pasting the URL of the script directly into a browser address bar also returns the high score list in both Chrome and IE. However, when I try it in Firefox, I noticed it changes the pasted text slightly:<br><br> from: <a href="http://www.DOMAINNAME.com/highscore.php?function=read" target="_blank">http://www.DOMAINNAME.com/highscore.php?function=read</a><br> to: <a href="http://www.DOMAINNAME.com/highscore.php/?function=read" target="_blank">http://www.DOMAINNAME.com/highscore.php/?function=read</a><br><br>Removing the added / after .php causes the high score list to be displayed as it does in the other browsers.<br><br>Has anyone else had issues with Firefox and .php scripts? Does Firefox add always add the extra / to the request thus causing it to point to an invalid address? <br><br></td></tr></table><br>
<a name="2089966"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >nikoniko</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#2">[#2]</a></td></tr></table></td></tr><tr ><td class="posttext"> <b>Bob wrote:</b><br><div class="quote">  However, when I try it in Firefox, I noticed it changes the pasted text slightly:<br><br>from: <a href="http://www.DOMAINNAME.com/highscore.php?function=read" target="_blank">http://www.DOMAINNAME.com/highscore.php?function=read</a><br>to: <a href="http://www.DOMAINNAME.com/highscore.php/?function=read" target="_blank">http://www.DOMAINNAME.com/highscore.php/?function=read</a> <br></div><br><br>Webserver does usually that. Test via Dev Tools (F12) uri to server and server's answer(s). <br><br></td></tr></table><br>
<a name="2089862"></a>

<a name="2089926"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bob</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#3">[#3]</a></td></tr></table></td></tr><tr ><td class="posttext"> This is the error being shown when I use DEV Tools:<br>Cross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at URL. This can be fixed by moving the resource to the same domain or enabling CORS.<br><br>The PHP file it is trying to access uses this header:    header("Access-Control-Allow-Origin: *");<br><br>Is there somewhere else Cross Origin needs to be enabled? <br><br></td></tr></table><br>
<a name="2089967"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >nikoniko</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#4">[#4]</a></td></tr></table></td></tr><tr ><td class="posttext"> Try load game from the same domain where php scripts running to exclude cors issue. <br><br></td></tr></table><br>
<a name="2090115"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bob</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#5">[#5]</a></td></tr></table></td></tr><tr ><td class="posttext"> I get the same Cross-Origin Request Blocked error even with everything on the same domain.<br>Does CORS need to be set in MonkeyGame.html or main.js also, or is setting it in the .php script the only place needed? <br><br></td></tr></table><br>
<a name="2090116"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >nikoniko</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#6">[#6]</a></td></tr></table></td></tr><tr ><td class="posttext"> <b>Bob wrote:</b><br><div class="quote"> or is setting it in the .php script the only place needed? <br></div><br><br>On the server side (php script) only.<br><br><b>Bob wrote:</b><br><div class="quote"> Does CORS need to be set in MonkeyGame.html or main.js also <br></div><br><br>CORS is set to domain. <br><br>Note: www.domain.com and domain.com are the different domains. Check your webserver doesn't make redirect from www.domain to domain or vise versa.<br>If your game requests page/script on www.domain but get answer from domain you got CORS violation. <br><br></td></tr></table><br>
<a name="2090117"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >nikoniko</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#7">[#7]</a></td></tr></table></td></tr><tr ><td class="posttext"> Also browsers can block crossdomain requests from loca file system or localhost domain.<br><br>See some way to fix:<br> <a href="http://stackoverflow.com/questions/10883211/deadly-cors-when-http-localhost-is-the-origin" target="_blank">http://stackoverflow.com/questions/10883211/deadly-cors-when-http-localhost-is-the-origin</a> <br><br></td></tr></table><br>
<a name="2090118"></a>

<a name="2090119"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bob</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#8">[#8]</a></td></tr></table></td></tr><tr ><td class="posttext"> I've tried changing the URL of the .php file to include www and also without www. The Firefox dev tools error updates to reflect the URL change, but gives the same error.<br><br>I also tried changing the name of the .php file being pointed to in the code to one that doesn't exist and I still get Same Origin Policy error. Could the error I'm getting be caused by the file not being found due to the extra / in the URL?<br><br>The FireFox Dev Tools console says it is unable to read the resource at URL/highscore.php/?function=read <br><br></td></tr></table><br>
<a name="2090121"></a>

<a name="2090122"></a>

<a name="2090123"></a>

<a name="2090124"></a>

<a name="2090125"></a>

<a name="2090126"></a>

<a name="2090127"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TeaBoy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#9">[#9]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Bob,<br><br>Not sure if your still having probs, but I have been working on a little prompt for my web server using php and monkey and it seems to<br>work ok for me at the moment.<br><br>The example works on the local server and on my host too.<br><br>Not the best example I know but I hope it could help you out.<br><br>This works on Firefox.<br><br>httprequests:<br><pre class=code>
Method SendRequest()
    getRequest.Open("GET", "http://127.0.0.1/tomo/monkeyprompt.php?cmd="+Self.text, Self)
    getRequest.Send
End Method
</pre><br><br>php script to pass command to:<br><pre class=code>
  if(!empty($_GET))
  {
    $getCmd = $_GET['cmd'];
	
    $cmdArray = array("ls", "help");
    
    if(!array_keys($cmdArray, $getCmd))
    {
      echo "Command does not exist, Please type 'help' for a list of supported commands.";
	  exit(1);
    }
	
	//$output = shell_exec($getCmd);
	//echo $output;
    
	switch($getCmd)
    {
      case "ls":
	    ls();
	  break;
	  
	  case "help":
	    help($cmdArray);
	  break;
    }
   }
   
  function ls()
  {
    $contents = '';
	
    if ($hndDir = opendir('.')) 
	{
      while (($entry = readdir($hndDir)) !== false) 
	  {
	    if(is_dir($entry))
		{
		  printf("%s - [DIR]\n", $entry);
		}
		else
		{
         printf("%s - [FILE]\n", $entry);
		}
      }
    }
    
	closedir($hndDir);
  }
  
  function help($cmdArray)
  {
    foreach($cmdArray as $cmd)
    {
      printf("%s\n", $cmd);
	}
  }
?&gt;
</pre> <br><br></td></tr></table><br>
<a name="2090130"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >nikoniko</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#10">[#10]</a></td></tr></table></td></tr><tr ><td class="posttext"> <b>Bob wrote:</b><br><div class="quote"> The FireFox Dev Tools console says it is unable to read the resource at URL/highscore.php/?function=read <br></div><br><br>What IE/Chrome consoles says? <br><br></td></tr></table><br>
<a name="2090134"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bob</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#11">[#11]</a></td></tr></table></td></tr><tr ><td class="posttext"> @nikoniko<br>Chrome - Shows no errors in the console and the top 10 scores load correctly<br><br>IE - Shows "XMLHttpRequest for <a href="http://URL/highscore.php?function=read" target="_blank">http://URL/highscore.php?function=read</a> required Cross Origin Resource Sharing (CORS)." The top 10 scores still load correctly despite the error. Notice there is no additional "/" after highscore.php.<br><br>@TeaBoy<br>Have you happened to try this with the Firefox Dev Console open? If so did you see any calls to your monkeyprompt.php with an extra / after the file name? <br><br></td></tr></table><br>
<a name="2090136"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >nikoniko</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#12">[#12]</a></td></tr></table></td></tr><tr ><td class="posttext"> Read this <br><a href="https://support.mozilla.org/en-US/questions/951951" target="_blank">https://support.mozilla.org/en-US/questions/951951</a> <br><br></td></tr></table><br>
<a name="2090139"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bob</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#13">[#13]</a></td></tr></table></td></tr><tr ><td class="posttext"> I thought for sure that would fix it, but I get the same result. The Dev Console still shows the extra slash in the URL. <br><br></td></tr></table><br>
<a name="2090142"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >TeaBoy</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#14">[#14]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi Bob, looking at the dev console, see no / using Firefox 29.0.1<br><br>Everything seems to run ok. <br><br></td></tr></table><br>
<a name="2090155"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >nikoniko</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#15">[#15]</a></td></tr></table></td></tr><tr ><td class="posttext"> <b>Bob wrote:</b><br><div class="quote"> I thought for sure that would fix it, but I get the same result. The Dev Console still shows the extra slash in the URL. <br></div><br><br>Create new empty profile (firefox.exe -p to get access profile manager) and try from here. <br><br></td></tr></table><br>
<a name="2090348"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skid</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#16">[#16]</a></td></tr></table></td></tr><tr ><td class="posttext"> The first issue (I think as monkey docs aren't explicit) is that you are not url encoding Self.text ( the symbol = is reserved ). <br><br></td></tr></table><br>
<a name="2090347"></a>

<a name="2090444"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Bob</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#17">[#17]</a></td></tr></table></td></tr><tr ><td class="posttext"> @skid<br>I'm not sure I follow. How would that be implemented if my HttpRequest looks like this:<br><br>get_req=New HttpRequest( "GET","http://URL\highscore.php?function=read",Self ) <br><br></td></tr></table><br>
<a name="2090456"></a>

<a name="2090459"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >skid</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#18">[#18]</a></td></tr></table></td></tr><tr ><td class="posttext"> I'm not positive but that example has two problems:<br><br>1. the backslash will produce issues on some platforms <br>2. the = may need to be replaced with escaped version %3d<br><br>I'm going to hunt down the relevant RFC regarding equals cos I'm not sure I'm correct.<br><br>[edit]<br><br>OK I'm none the wiser :( <a href="http://tools.ietf.org/html/rfc3986" target="_blank">http://tools.ietf.org/html/rfc3986</a> <br><br></td></tr></table><br>
<a name="2095495"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >golomp</td><td align="right"><font class=tiny>(Posted 2014)</font>&nbsp;<a href="#19">[#19]</a></td></tr></table></td></tr><tr ><td class="posttext"> Hi,<br><br>Maybe if domains are differents, it's not in agrement with W3C rules ?<br><br>Regards,<br>Golomp <br><br></td></tr></table><br>
<a name="bottom"></a>
<table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
