<!DOCTYPE html><html lang="en" ><head ><title >RPG 2d scrolling game example</title><meta name='viewport' content='width=device-width, initial-scale=0.66'><meta name='description' content='player, scrolling, multi maps, coins, doors,keys, language=bb, category=Miscellaneous'><meta name='author' content='Pakz'><link rel="styleSheet" href="../skins/granite/style.css" type="text/css"><style type="text/css">div.bbcode {padding: 8px;background: #E5E5E5;color: #000000;border: 1px dashed #B4B4BE;}</style></head><body ><table width=100% cellspacing=0 cellpadding=0><tr ><td class="menubarleft"></td><td class="menubar"><table cellspacing="0" cellpadding="0"><tr ><td >&nbsp;</td><td class="menuitemleft"></td><td class="menuitem"><a href="/" class="menuitem">News</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/forums.php" class="menuitem">Forums</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/codearcs.php" class="menuitem">Code</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/logs.php" class="menuitem">Logs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/gallery.php" class="menuitem">Gallery</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/sdkspecs.php" class="menuitem">Specs</a></td><td class="menuitemright"></td><td class="menuitemleft"></td><td class="menuitem"><a href="/search.php" class="menuitem">Search</a></td><td class="menuitemright"></td></tr></table></td><td class="menubarright"></td></tr></table><div class="main"><h1 ><a href=codearcs.php>Code archives</a>/<a href=codearcs.php?cat=9>Miscellaneous</a>/RPG 2d scrolling game example</h1><div class="quote">This code has been declared by its author to be Public Domain code.</div><br><a href="3269.bb">Download source code</a><br><br><table width="100%" cellspacing="0" cellpadding="0"><tr ><td width="100%"><table width=100% cellspacing=0 cellpadding=0><tr ><td class=headleft></td><td class=head><table width=100% cellspacing=0 cellpadding=0><tr ><td >RPG 2d scrolling game example by Pakz</td><td align="right">2016 </td></tr></table></td><td class=headright></td></tr></table></td></tr><tr ><td class="cell"> player, scrolling, multi maps, coins, doors,keys </td></tr><tr ><td class="cell"><pre class="code">AppTitle "RPG 2D scrolling multi map - cursor keys to move."
Graphics 640,480,16,2
SetBuffer BackBuffer()

Global editmode = False
Global edittile 

Global keys = 0
Global gold = 0

; map variables
Global mw = 40
Global mh = 30
Global tw = 32
Global th = 32

Global numlevels = 5

Dim map(numlevels,mw,mh)
; player variables
Global pw = (tw-5)
Global ph = (th-5)
Global px = GraphicsWidth()/2-tw/2
Global py = GraphicsHeight()/2-th/2
; scrolling variables
Global mx
Global my
Global msx=0
Global msy

; for the multi map
;
; this is a mdimensional array
; the player location on the multi map
; is mcx (map cursor x)
; it starts at 1,1, the center of the 
; multidimensional array
;
Global mcx=1
Global mcy=1
Dim ml(3,3)
;corner maps -1 non existant
ml(0,0)=-1
ml(2,0)=-1
ml(0,2)=-1
ml(2,2)=-1
; the maps assigned
ml(1,0)=1
ml(1,1)=0
ml(2,1)=2
ml(1,2)=3
ml(0,1)=4

; Here we create/buffer the maps
Dim mapimage(5)
For i=0 To 5
	mapimage(i) = CreateImage(mw*tw,mh*th)
Next
Text 0,0,"Please wait"
Flip

readlevels()
makemaps()

.mainloop
While KeyDown(1) = False
	Cls	
	If KeyHit(18);key e
		If editmode=True Then editmode = False Else editmode = True
	EndIf
	edit
	If editmode = False
		For i=0 To 4 ;speed of movement
			moveplayer
			playeritemcollision
			centermap
			switchmap()
		Next
		DrawBlock mapimage(ml(mcx,mcy)),msx,msy
		drawplayer	
		Color 255,255,255
		Text 0,0,"Use cursors to move around"
		Text 0,15,"cursor : " + mcx +","+mcy+" on map : "+ml(mcx,mcy)
		Text 320,0,"gold:"+gold+" keys:"+keys
		Text 320,15,"Press e for edit mode"
	End If
	Flip
Wend
End


Function edit()
	If editmode = True
		DrawBlock mapimage(ml(mcx,mcy)),msx,msy
		Color 20,20,20		
		Rect 0,0,GraphicsWidth(),36,True
		For x=0 To 10
			drawtile(x,0,x)
			If edittile = x
				Color 255,0,0
				Rect x*tw,y*th,32,32,False
			End If
			If RectsOverlap(MouseX(),MouseY(),1,1,x*tw,0,32,32)
				Color 255,255,255
				Rect x*tw,0,32,32,False
				Color 0,0,0
				Rect x*tw+1,1,30,30,False
				If MouseDown(1) = True
					edittile = x
				End If
			End If
		Next
		If RectsOverlap(MouseX(),MouseY(),1,1,0,32,GraphicsWidth(),GraphicsHeight()-32)
			x1 = (MouseX()-msx)/tw
			y1 = (MouseY()-msy)/th
			If MouseDown(1) = True
				map(ml(mcx,mcy),x1,y1)=edittile
				updatemap x1,y1,edittile
			End If
			Color 255,255,255
			Rect x1*tw,y1*th,32,32,False
			Color 0,0,0
			Rect x1*tw+1,y1*th+1,30,30,False
		End If
		If KeyDown(205) ; right
			msx=msx-3
		EndIf
		If KeyDown(203);left		
			msx=msx+3
		End If
		If KeyDown(200);up
			msy=msy+3
		End If
		If KeyDown(208);down
			msy=msy-3
		End If
	End If
End Function

; here we check if the player is
; at a border and if he can go to another map
; and set the start positions
Function switchmap()
	; touches the left side of the screen
	If px&lt;5 And mcx&gt;0 
		If ml(mcx-1,mcy) &lt;&gt;-1
			mcx=mcx-1
			px=630-pw			
			msx=-(mw*tw-GraphicsWidth())
			If py&lt;10 Then py=py+10
			If py+ph&gt;GraphicsHeight()-10 Then py=py-10
		End If		
	End If
	; touches the top part of the screen
	If py&lt;5 And mcy&gt;0 
		If ml(mcx,mcy-1) &lt;&gt; -1
			mcy=mcy-1
			py=470-ph
			msy=-(mh*th-GraphicsHeight())
			If px&lt;10 Then px=10
			If px+pw&gt;GraphicsWidth()-10 Then px=px-10
		End If
	End If
	; touches the right side of the screen
	If px+pw&gt;GraphicsWidth()-4 And mcx&lt;2
		If ml(mcx+1,mcy) &lt;&gt; -1
			mcx=mcx+1
			px=10
			msx=0
			If py&lt;10 Then py=10
			If py+ph&gt;GraphicsHeight()-10 Then py=py-10
		End If
	End If
	; touches the bottom of the screen
	If py+ph&gt;GraphicsHeight()-5 And mcy&lt;2
		If ml(mcx,mcy+1) &lt;&gt;-1
			mcy=mcy+1
			py=10
			msy=0
			If px&lt;10 Then px=px+10
			If px+pw&gt;GraphicsWidth()-10 Then px=px-10
		End If
	End If
End Function

Function centermap()
	If px&lt;GraphicsWidth()/3 And Abs(msx)&gt;0 Then msx=msx+1 :px=px+1
	If py&lt;GraphicsHeight()/3 And Abs(msy)&gt;0 Then msy=msy+1 :py=py+1
	If px&gt;GraphicsWidth()/100*66
		If (Abs(msx)+GraphicsWidth()) &lt; mw*tw
			msx=msx-1
			px=px-1
		End If
	End If
	If py&gt;GraphicsHeight()/100*66
		If (Abs(msy)+GraphicsHeight()) &lt; mh*th
			msy=msy-1
			py=py-1
		End If
	End If	
End Function

Function moveplayer()
	Local x=0
	Local y=0
	If KeyDown(200) ; up
		y=-1
	End If
	If KeyDown(205) ; right
		x=1
	End If
	If KeyDown(208) ; down
		y=1
	End If
	If KeyDown(203) ; left
		x=-1
	End If
	If px+x &lt; 0 Then x=0
	If px+pw+x &gt; GraphicsWidth() Then x=0
	If py+y &lt; 0 Then y=0
	If py+ph+y &gt; GraphicsHeight() Then y=0
	If playermapcollision((px+Abs(msx))+x,py+Abs(msy)) = False
		px=px+x
	End If
	If playermapcollision(px+Abs(msx),py+Abs(msy)+y) = False
		py=py+y
	End If

End Function

Function playermapcollision(x1,y1)
	Local cx=x1/tw
	Local cy=y1/th
	For y2=cy-1 To cy+1
	For x2=cx-1 To cx+1	
		If x2&gt;=0 And x2&lt;=mw And y2&gt;=0 And y2&lt;=mh
		mt = map(ml(mcx,mcy),x2,y2)
		If mt &gt;= 1 And mt &lt;= 3 Or mt = 7 ; is the map around the player a block
		If RectsOverlap(x2*tw,y2*th,tw,th,x1,y1,pw,ph)
			;
			; Here the player is inside a wall
			; a value 1 on the map
			;
			Return True
			;
		End If
		End If
		End If
	Next
	Next
	; no collision occured
	Return False
End Function

Function playeritemcollision()
	Local cx=(px+Abs(msx))/tw
	Local cy=(py+Abs(msy))/th
	For y2=cy-1 To cy+1
	For x2=cx-1 To cx+1
		If x2&gt;=0 And x2&lt;=mw And y2&gt;=0 And y2&lt;=mh
		; collision with coin
		If map(ml(mcx,mcy),x2,y2) = 9 ; is the map around the player a 9 value
		If RectsOverlap(x2*tw+8,y2*th+8,tw-16,th-16,px+Abs(msx),py+Abs(msy),pw,ph)
			;
			; Here the player touches a map item (9)
			; We remove it from the map
			;
			gold=gold+1
			map(ml(mcx,mcy),x2,y2) = 0
			updatemap(x2,y2,0)
		End If
		End If
		; collision with key
		If map(ml(mcx,mcy),x2,y2) = 8 ; is the map around the player a 9 value
		If RectsOverlap(x2*tw+8,y2*th+8,tw-16,th-16,px+Abs(msx),py+Abs(msy),pw,ph)
			;
			; Here the player touches a map item (9)
			; We remove it from the map
			;
			keys=keys+1
			map(ml(mcx,mcy),x2,y2) = 0
			updatemap(x2,y2,0)
		End If
		End If
		; collision with door
		If map(ml(mcx,mcy),x2,y2) = 7 ; is the map around the player a 9 value
		If RectsOverlap(x2*tw-1,y2*th-1,tw+2,th+2,px+Abs(msx),py+Abs(msy),pw,ph)
		If keys&gt;0
			;
			; Here the player touches a map item (9)
			; We remove it from the map
			;
			keys=keys-1
			map(ml(mcx,mcy),x2,y2) = 0
			updatemap(x2,y2,0)
		End If
		End If
		End If


		End If
	Next
	Next
End Function


Function updatemap(x,y,t)
	SetBuffer ImageBuffer(mapimage(ml(mcx,mcy)))
	drawtile(x,y,t)
	SetBuffer BackBuffer()
End Function

Function drawplayer()
	Color 0,0,255
	Oval px,py,pw,ph
End Function

Function makemaps()
	For i=0 To numlevels
	SetBuffer ImageBuffer(mapimage(i))
	For y=0 To mh-1
	For x=0 To mw-1
		a = map(i,x,y)
		drawtile(x,y,a)
	Next
	Next
	Next
	SetBuffer BackBuffer()
End Function

Function drawtile(x,y,t)
	Select t
		Case 0;nothing
			Color 0,0,0
			Rect x*tw,y*th,tw,th
		Case 1;wall
			Color 255,255,255
			Rect x*tw,y*th,tw,th,True
		Case 2;water
			Color 30,80,255
			Rect x*tw,y*th,tw,th,True
		Case 3;tree
			Color 0,255,0
			x1=x*tw
			y1=y*th
			Line x1+tw/2,y1,x1+tw,y1+th
			Line x1+tw,y1+th-1,x1,y1+th-1
			Line x1,y1+th,x1+tw/2,y1
		Case 7 ; door
			Color 150,150,150
			Rect x*tw,y*th,tw,th
		Case 8; key
			Color 200,200,0
			Oval x*tw+2,y*th+2,tw-4,th-4
			Color 255,255,255
			Text x*tw+tw/2,y*th+th/2,"K",1,1			
		Case 9 ; gold
			Color 200,200,0
			Oval x*tw+2,y*th+2,tw-4,th-4
	End Select
End Function

Function readlevels()
	Restore level1
	For i=0 To numlevels-1
		For y=0 To mh-1
		For x=0 To mw-1
			Read a
			map(i,x,y) = a
		Next
		Next
	Next
End Function

.level1
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,8,0,1,1,1,1,1,1,1
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,1,1,1,1,1,1,1
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,1,0,1,1,1,1,1
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0,0,1,1,1,1,1
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,1,0,1,1,1
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,1,1,1,1
Data 0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,3,3,0,0,0,1,1,1,1
Data 0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0
Data 0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0
Data 0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0
Data 0,0,0,1,1,1,1,1,1,1,0,0,0,0,1,9,9,9,1,0,0,0,0,3,3,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0
Data 0,0,0,1,0,0,0,9,9,1,0,0,0,0,1,9,9,9,1,0,0,0,0,3,3,3,0,0,0,0,3,3,3,3,3,0,0,0,0,0
Data 0,0,0,1,0,0,0,0,0,1,0,0,0,0,1,0,0,0,1,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,1,0,0,0,0,0,1,0,0,0,0,1,0,0,0,1,0,0,0,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,1,0,0,0,0,0,1,0,0,1,1,1,1,1,7,1,0,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,1,0,0,0,0,0,7,0,0,7,0,0,0,0,0,1,0,0,0,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,0,0,0,0,0
Data 0,0,0,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,8,2,2,2,2,2,2,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,0,2,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,2,2,2,2,2,2,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,2,2,2,2,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,2,2,0,0,0,0,0,0,3,3,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3
Data 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3
Data 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3
.level2
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1
Data 0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1
Data 0,0,1,0,9,9,1,0,0,0,3,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1
Data 0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1
Data 0,0,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1
Data 0,0,1,1,7,1,0,0,0,0,0,0,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1
Data 0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,0,0,0,2,2,2,2,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1
Data 0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2,0,0,0,2,2,2,2,0,0,0,0,3,0,0,0,0,0,0,1,1,1,1,1
Data 0,0,0,0,0,0,0,0,2,2,2,2,2,0,0,0,0,0,0,0,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0
Data 0,0,0,0,0,2,2,2,2,2,2,2,0,0,0,0,0,0,0,0,2,2,0,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,2,2,2,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,2,2,2,2,2,0,0,0,0,0,3,3,3,0,0,0
Data 0,0,0,0,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,0,0,0,0,0,0,3,3,0,0
Data 0,0,0,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,0,2,0,0,0,0,0,0,3,0,0
Data 0,0,0,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,2,0,0,0,0,0,0,0,0
Data 0,0,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,2,2,2,2,2,2,0,2,0,0,0,0,0,0,0,0
Data 0,2,2,2,2,8,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,2,2,2,2,0,2,2,2,0,0,0,0,0,0,0,0,0
Data 2,2,2,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0
Data 2,2,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0
Data 2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
Data 0,0,0,3,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,1,1
Data 0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,0,1,1,1,1,1
Data 0,0,0,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1
.level3
Data 3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3
Data 3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3
Data 3,3,3,3,3,3,0,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,3,3,3
Data 3,3,3,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,3,3,3,0,3,3,3,0,3,3,0,0,0,0,0,0,0,3,3,3
Data 3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,3,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,3,3,3
Data 3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,0,3,3,3
Data 3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,0,3,3,3
Data 3,8,0,0,0,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,0,3,3,3
Data 3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,3,3
Data 3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 0,0,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,3,3
Data 0,0,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,1,7,1,1,1,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,9,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,1,9,9,9,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0,0,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,3,3,0,0,0,0,0,3
Data 0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,0,0,0,0,0,0,0,3
Data 0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3
Data 0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,3,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 3,3,3,0,0,0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,3,3
Data 3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3
.level4
Data 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3
Data 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3
Data 3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3
Data 3,0,0,1,1,1,7,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3
Data 3,0,0,1,9,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 3,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,7,1,1,1,1,0,0,3
Data 3,0,0,1,0,0,0,0,0,0,0,9,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,9,1,0,0,3
Data 3,0,0,1,0,0,0,1,1,1,1,1,1,7,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,9,1,0,0,3
Data 3,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,3
Data 3,0,0,1,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,3
Data 3,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,7,1,1,1,1,0,0,3
Data 3,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 3,0,0,1,0,0,1,0,0,1,0,0,0,0,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3
Data 3,0,0,7,0,0,1,1,1,1,0,0,0,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3
Data 3,0,0,1,0,0,1,0,0,0,0,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3
Data 3,0,0,1,0,9,1,0,0,0,3,3,3,3,3,3,3,8,0,0,0,3,3,3,0,3,0,0,0,0,0,0,3,3,3,3,3,3,3,3
Data 3,0,0,1,1,1,1,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,3,3,8,3,3,3,3,3
Data 3,0,0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,3,3,3,3,3
Data 3,0,0,0,0,0,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0,0,3,3,3,3,3
Data 3,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,3,0,0,0,0,0,0,0,0,3,0,3,3
Data 3,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 3,3,0,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3
Data 3,3,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3
Data 3,3,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3
Data 3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3
Data 3,3,3,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0,2,2,2,2
Data 3,3,3,0,0,0,0,0,2,2,2,2,2,2,0,2,2,2,2,2,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2
Data 2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2
.level5
Data 3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0
Data 3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0
Data 3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0
Data 3,3,3,3,0,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,3,3,3,3,3,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0
Data 3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0
Data 3,3,3,3,3,3,0,3,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0
Data 3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,0,3,3,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,3,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,0,0,0,0,1,1,1,0,0,0,0,0,3,0,0,0,0,7,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,0,0,0,0,7,0,1,0,0,0,0,3,0,0,0,0,0,1,0,0,0,0,8,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,0,0,0,0,1,9,1,0,0,0,0,3,0,0,0,0,0,1,0,0,0,0,8,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,1,9,9,8,8,8,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,1,1,1,1,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0
Data 2,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 2,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 2,2,3,3,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 2,2,2,3,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,0
Data 2,2,2,3,3,3,0,2,2,2,2,0,2,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0
Data 2,2,2,3,3,2,0,2,2,2,2,2,2,2,2,2,2,2,2,2,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0
Data 2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,0,0,3,3,0,0,3,3,3,3,0,0,0,0,0,0,0,0
Data 2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0
Data 2,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0
Data 2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3
Data 2,2,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3</pre></td></tr></table><br><a name="comments">Comments</a><br><br><table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dan</td><td align="right"><font class=tiny>2016</font></td></tr></table></td></tr><tr ><td class="posttext"> great example.<br>There is a bug, where the player cannot go through the doors.<br><br>to fix this, make following change:<br><br><pre class=code>
Global pw = (tw-5)
Global ph = (th-5)
</pre> <br><br></td></tr></table><br><table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>2016</font></td></tr></table></td></tr><tr ><td class="posttext"> INCREDIBLE! :O Is there a way to add detection of a collision sprite on another map? I sometimes warp to another map &amp; I'm stuck in a tree. A way to edit the Data of the levels would be INCREDIBLE!<br><br>Keep up the GREAT work!<br><br>~GF <br><br></td></tr></table><br><table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pakz</td><td align="right"><font class=tiny>2016</font></td></tr></table></td></tr><tr ><td class="posttext"> @Dan - That bug I had before (last year or so) and I had a different fix but I forgot how I did that. <br><br>@Guy - I might add a simple map editor. tonight  Maybe I will add a warp key shortcut to. <br><br></td></tr></table><br><table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>2016</font></td></tr></table></td></tr><tr ><td class="posttext"> COOOOOOOOOOOOOOOOOOOOOL! =D Keep up the GREAT work! =) I see this project going a LONG way!<br><br>~GF <br><br></td></tr></table><br><table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dan</td><td align="right"><font class=tiny>2016</font></td></tr></table></td></tr><tr ><td class="posttext"> @pakz i guess the bug is up to the steps which the circle need to move from one position to another.<br>So if the circle is not 100% at the empty space, it wont go through.<br><br>You can go through the door with your original example, you will need to use 2 keys (down/up and left if the door is at the left side).<br>but if you try to position the circle directly at the door, and then press left, it doesnt work (here). so i made the circle a bit smaller. <br><br></td></tr></table><br><table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>2016</font></td></tr></table></td></tr><tr ><td class="posttext"> Any luck Pakz? =)<br><br>~GF <br><br></td></tr></table><br><table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pakz</td><td align="right"><font class=tiny>2016</font></td></tr></table></td></tr><tr ><td class="posttext"> I have not had any time yet Guy. <br><br>Also, a map editor would require a save/load feature. Do you think you could do that on your own? Or should I just put in the code for you to enable? The code archives have no file inclusion. That is why I have the data statements in. <br><br></td></tr></table><br><table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>2016</font></td></tr></table></td></tr><tr ><td class="posttext"> Put the code in to enable would be awesome! =)<br><br>Thanks Pakz!<br><br>~GF <br><br></td></tr></table><br><table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Andy_A</td><td align="right"><font class=tiny>2016</font></td></tr></table></td></tr><tr ><td class="posttext"> Pakz<br><br>You can include ****small**** files (.zip, .png, .jpg) indirectly.<br><br><a href="http://www.blitzmax.com/codearcs/codearcs.php?code=3026" target="_blank">http://www.blitzmax.com/codearcs/codearcs.php?code=3026</a> <br><br></td></tr></table><br><table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pakz</td><td align="right"><font class=tiny>2016</font></td></tr></table></td></tr><tr ><td class="posttext"> Thanks Andy :)<br><br>@Dan - I changed the code, the player is now smaller.<br><br>@Guy - I have added a simple editor. Press e for edit mode. Still need to add save and load feature. <br><br></td></tr></table><br><table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamStrange</td><td align="right"><font class=tiny>2016</font></td></tr></table></td></tr><tr ><td class="posttext"> here's a blitzmax version with some error checking and deeper water added plus some minor interface changes<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">

Graphics 640,480

Global editmode = False
Global edittile 

Global keys = 0
Global gold = 0
global totalgold:int = 0

' map variables
Global mw = 40
Global mh = 30
Global tw = 32
Global th = 32

Global numlevels = 5

global map:int[numlevels, mw, mh]

' player variables
Global pw = (tw-5)
Global ph = (th-5)
Global px = GraphicsWidth()/2-tw/2
Global py = GraphicsHeight()/2-th/2
' scrolling variables
Global mx
Global my
Global msx=0
Global msy

' for the multi map
'
' this is a mdimensional array
' the player location on the multi map
' is mcx (map cursor x)
' it starts at 1,1, the center of the 
' multidimensional array
'
Global mcx=1
Global mcy=1

global ml[3, 3]

'corner maps -1 non existant
ml[0,0]=-1
ml[2,0]=-1
ml[0,2]=-1
ml[2,2]=-1
' the maps assigned
ml[1,0]=1
ml[1,1]=0
ml[2,1]=2
ml[1,2]=3
ml[0,1]=4


setblend alphablend

readlevels()
makemaps()

'.mainloop
While KeyDown(1) = False and not(AppTerminate())
	Cls	
	If KeyHit(KEY_E)'key e
		If editmode=True Then editmode = False Else editmode = True
	EndIf
	edit
	If editmode = False
		For i=0 To 4 'speed of movement
			moveplayer
			playeritemcollision
			centermap
			switchmap()
		Next
		
		drawmap(ml(mcx,mcy), msx,msy)
		
		setalpha 0.2
		setcolor 0,0,0
		drawrect 0,0,640,30
		setalpha 1
		
		drawplayer	
		
		setColor 0,0,0
		drawText "Use cursors to move around",1,1
		drawText "cursor : " + mcx +","+mcy+" on map : "+ml(mcx,mcy), 1,16
		drawText "gold:"+gold+" of "+totalgold+"   keys:"+keys, 321,1
		drawText "Press e for edit mode", 321,16
		setColor 240,240,150
		drawText "Use cursors to move around",0,0
		drawText "cursor : " + mcx +","+mcy+" on map : "+ml(mcx,mcy), 0,15
		drawText "gold:"+gold+" of "+totalgold+"   keys:"+keys, 320,0
		drawText "Press e for edit mode", 320,15
	End If
	
	delay 10
	Flip
Wend
End

Function drawmap(level:int, xo:int, yo:int)
		For y=0 To mh-1
			For x=0 To mw-1
				a = map[level,x,y]
				drawtile(x,y,a, xo, yo)
			Next
		Next
End Function

function rectsOverlap:int(x1,y1,w1,h1, x2,y2,w2,h2)
	w1 :+ x1
	h1 :+ y1
	w2 :+ x2
	h2 :+ y2
	
	if w1 &lt; x2 then return false
	if x1 &gt; w2 then return false

	if h1 &lt; y2 then return false
	if y1 &gt; h2 then return false
	
	return true
end function

Function edit()
	If editmode = True
		drawmap(ml(mcx,mcy), msx,msy)
		
		setColor 20,20,20		
		drawRect 0,0,GraphicsWidth(),36
		For x=0 To 10
			drawtile(x,0,x)
			If edittile = x
				setColor 255,0,0
				drawRect x*tw,y*th,32,32
			End If
			If RectsOverlap(MouseX(),MouseY(),1,1,x*tw,0,32,32)
				setColor 255,255,255
				drawRect x*tw,0,32,32
				setColor 0,0,0
				drawRect x*tw+1,1,30,30
				If MouseDown(1) = True
					edittile = x
				End If
			End If
		Next
		If RectsOverlap(MouseX(),MouseY(),1,1,0,32,GraphicsWidth(),GraphicsHeight()-32)
			x1 = (MouseX()-msx)/tw
			y1 = (MouseY()-msy)/th
			If MouseDown(1) = True
				map(ml(mcx,mcy),x1,y1)=edittile
				updatemap x1,y1,edittile
			End If
			setColor 255,255,255
			drawRect x1*tw+msx,y1*th+msy,32,32
			setColor 0,0,0
			drawRect x1*tw+1+msx,y1*th+1+msy,30,30
		End If
		If KeyDown(KEY_RIGHT) ' right
			msx=msx-3
		EndIf
		If KeyDown(KEY_LEFT)'left		
			msx=msx+3
		End If
		If KeyDown(KEY_UP)'up
			msy=msy+3
		End If
		If KeyDown(KEY_DOWN)'down
			msy=msy-3
		End If
	End If
End Function

' here we check if the player is
' at a border and if he can go to another map
' and set the start positions
Function switchmap()
	' touches the left side of the screen
	If px&lt;5 And mcx&gt;0 
		If ml(mcx-1,mcy) &lt;&gt;-1
			mcx=mcx-1
			px=630-pw			
			msx=-(mw*tw-GraphicsWidth())
			If py&lt;10 Then py=py+10
			If py+ph&gt;GraphicsHeight()-10 Then py=py-10
		End If		
	End If
	' touches the top part of the screen
	If py&lt;5 And mcy&gt;0 
		If ml(mcx,mcy-1) &lt;&gt; -1
			mcy=mcy-1
			py=470-ph
			msy=-(mh*th-GraphicsHeight())
			If px&lt;10 Then px=10
			If px+pw&gt;GraphicsWidth()-10 Then px=px-10
		End If
	End If
	' touches the right side of the screen
	If px+pw&gt;GraphicsWidth()-4 And mcx&lt;2
		If ml(mcx+1,mcy) &lt;&gt; -1
			mcx=mcx+1
			px=10
			msx=0
			If py&lt;10 Then py=10
			If py+ph&gt;GraphicsHeight()-10 Then py=py-10
		End If
	End If
	' touches the bottom of the screen
	If py+ph&gt;GraphicsHeight()-5 And mcy&lt;2
		If ml(mcx,mcy+1) &lt;&gt;-1
			mcy=mcy+1
			py=10
			msy=0
			If px&lt;10 Then px=px+10
			If px+pw&gt;GraphicsWidth()-10 Then px=px-10
		End If
	End If
End Function

Function centermap()
	If px&lt;GraphicsWidth()/3 And Abs(msx)&gt;0 Then
		msx=msx+1
		px=px+1
	end if
	If py&lt;GraphicsHeight()/3 And Abs(msy)&gt;0 Then
		msy=msy+1
		py=py+1
	end if
	If px&gt;GraphicsWidth()/100*66
		If (Abs(msx)+GraphicsWidth()) &lt; mw*tw then
			msx=msx-1
			px=px-1
		End If
	End If
	If py&gt;GraphicsHeight()/100*66
		If (Abs(msy)+GraphicsHeight()) &lt; mh*th then
			msy=msy-1
			py=py-1
		End If
	End If	
End Function

Function moveplayer()
	Local x=0
	Local y=0
	If KeyDown(KEY_UP) ' up
		y=-1
	End If
	If KeyDown(KEY_RIGHT) ' right
		x=1
	End If
	If KeyDown(KEY_DOWN) ' down
		y=1
	End If
	If KeyDown(KEY_LEFT) ' left
		x=-1
	End If
	If px+x &lt; 0 Then x=0
	If px+pw+x &gt; GraphicsWidth() Then x=0
	If py+y &lt; 0 Then y=0
	If py+ph+y &gt; GraphicsHeight() Then y=0
	
	local collide:int = playermapcollision((px+Abs(msx))+x,py+Abs(msy))
	if collide = 0 then
		px=px+x
	else if collide = 2 and rand(0,100) &lt; 40 then		px=px+x
	End If
	
	collide = playermapcollision(px+Abs(msx),py+Abs(msy)+y)
	if collide = 0 then
		py=py+y
	else if collide = 2 and rand(0,100) &lt; 40 then		py=py+y
	End If

End Function

Function playermapcollision(x1,y1)
	Local cx=x1/tw
	Local cy=y1/th
	For y2=cy-1 To cy+1
		For x2=cx-1 To cx+1	
			If x2 &gt;= 0 And x2 &lt; mw And y2 &gt;= 0 And y2 &lt; mh then
				mt = map[ml(mcx,mcy),x2,y2]
				
				If mt = 1 or mt = 2 or mt = 3 Or mt = 4 or mt = 7 then ' is the map around the player a block
					If RectsOverlap(x2*tw,y2*th,tw,th,x1,y1,pw,ph)
						' Here the player is inside a wall
						' a value 1 on the map
						Return mt
					End If
				End If
			End If
		Next
	Next
	' no collision occured
	Return 0
End Function

Function playeritemcollision()
	Local cx=(px+Abs(msx))/tw
	Local cy=(py+Abs(msy))/th
	For y2=cy-1 To cy+1
		For x2=cx-1 To cx+1
			If x2 &gt;= 0 And x2 &lt; mw And y2 &gt;= 0 And y2 &lt; mh then
				' collision with coin
				If map(ml(mcx,mcy),x2,y2) = 9 then ' is the map around the player a 9 value
					If RectsOverlap(x2*tw+8,y2*th+8,tw-16,th-16,px+Abs(msx),py+Abs(msy),pw,ph) then
						' Here the player touches a map item (9)
						' We remove it from the map
						gold=gold+1
						map(ml(mcx,mcy),x2,y2) = 0
						updatemap(x2,y2,0)
					End If
				End If
				
				' collision with key
				If map(ml(mcx,mcy),x2,y2) = 8 then' is the map around the player a 9 value
					If RectsOverlap(x2*tw+8,y2*th+8,tw-16,th-16,px+Abs(msx),py+Abs(msy),pw,ph) then
						' Here the player touches a map item (9)
						' We remove it from the map
						keys=keys+1
						map(ml(mcx,mcy),x2,y2) = 0
						updatemap(x2,y2,0)
					End If
				End If
				
				' collision with door
				If map(ml(mcx,mcy),x2,y2) = 7 then' is the map around the player a 9 value
					If RectsOverlap(x2*tw-1,y2*th-1,tw+2,th+2,px+Abs(msx),py+Abs(msy),pw,ph) then
				 		If keys &gt; 0 then
							' Here the player touches a map item (9)
							' We remove it from the map
							keys=keys-1
							map(ml(mcx,mcy),x2,y2) = 0
							updatemap(x2,y2,0)
						End If
					End If
				End If
	
			End If
		Next
	Next
End Function


Function updatemap(x,y,t)
	drawtile(x,y,t)
End Function

Function drawplayer()
	setColor 0,0,255
	drawOval px,py,pw,ph
End Function

Function makemaps()
	For i=0 To numlevels-1
		For y=0 To mh-1
			For x=0 To mw-1
				a = map[i,x,y]
				drawtile(x,y,a)
			Next
		Next
	Next
End Function

Function drawtile(x,y,t, xo:int = 0, yo:int = 0)
	Select t
		Case 0'nothing
			setColor 0,0,0
			drawRect x*tw + xo,y*th + yo,tw,th
		Case 1'wall
			setColor 255,255,255
			drawRect x*tw + xo,y*th + yo,tw,th
		Case 2'water
			setColor 30,140,255
			drawRect x*tw + xo,y*th + yo,tw,th
		Case 3'tree
			setColor 0,255,0
			x1=x*tw + xo
			y1=y*th + yo
			drawLine x1+tw/2,y1,x1+tw,y1+th
			drawLine x1+tw,y1+th-1,x1,y1+th-1
			drawLine x1,y1+th,x1+tw/2,y1
		Case 4'deepwater
			setColor 30,100,245
			drawRect x*tw + xo,y*th + yo,tw,th
		Case 7 ' door
			setColor 150,150,150
			drawRect x*tw + xo,y*th + yo,tw,th
		Case 8' key
			setColor 180,120,00
			drawOval x*tw+2 + xo,y*th+2 + yo,tw-4,th-4
			setColor 255,255,255
			drawText "K",x*tw + (tw/3.4) + xo, y*th + (th/3.4) + yo
			
		Case 9 ' gold
			setColor 230,200,0
			drawOval (x*tw+2) + xo, (y*th+2) + yo, tw-4, th-4
	End Select
End Function

Function readlevels()
'	Restore level1
	print numlevels
	For i=0 To numlevels-1
		For y=0 To mh-1
			For x=0 To mw-1
				Readdata a
				map[i, x,y] = a
				if a = 9 then totalgold :+ 1
			Next
		Next
	Next
End Function

'.level1
defdata 0,0,0,0,0,0,0,0,0,0,0,0,2,2,4,2,2,2,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1
defdata 0,0,0,0,0,0,0,2,2,2,2,2,4,4,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1
defdata 0,0,0,0,0,0,2,4,4,4,4,4,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1
defdata 0,0,0,0,0,2,4,4,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1
defdata 0,0,0,2,2,4,4,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,8,0,1,1,1,1,1,1,1
defdata 2,2,2,4,4,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,1,1,1,1,1,1,1
defdata 4,4,4,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,1,0,1,1,1,1,1
defdata 2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0,0,1,1,1,1,1
defdata 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,1,0,1,1,1
defdata 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,1,1,1,1
defdata 0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,3,3,0,0,0,1,1,1,1
defdata 0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0
defdata 0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0
defdata 0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0
defdata 0,0,0,1,1,1,1,1,1,1,0,0,0,0,1,9,9,9,1,0,0,0,0,3,3,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0
defdata 0,0,0,1,0,0,0,9,9,1,0,0,0,0,1,9,9,9,1,0,0,0,0,3,3,3,0,0,0,0,3,3,3,3,3,0,0,0,0,0
defdata 0,0,0,1,0,0,0,0,0,1,0,0,0,0,1,0,0,0,1,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0
defdata 0,0,0,1,0,0,0,0,0,1,0,0,0,0,1,0,0,0,1,0,0,0,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0
defdata 0,0,0,1,0,0,0,0,0,1,0,0,1,1,1,1,1,7,1,0,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0
defdata 0,0,0,1,0,0,0,0,0,7,0,0,7,0,0,0,0,0,1,0,0,0,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0
defdata 0,0,0,1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,0,0,0,0,0
defdata 0,0,0,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,8,2,2,4,4,2,2,0,0,0,0
defdata 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,4,4,4,2,0,2,0,0,0,0
defdata 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,4,4,2,2,2,2,2,0,0,0,0
defdata 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,2,2,4,2,2,2,0,0,0,0,0,0
defdata 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,2,2,2,2,0,0,0,0,0,0,0,0
defdata 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,2,2,0,0,0,0,0,0,3,3,3,3
defdata 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3
defdata 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3
defdata 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3
'.level2
defdata 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1
defdata 0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1
defdata 0,0,1,0,9,9,1,0,0,0,3,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1
defdata 0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1
defdata 0,0,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1
defdata 0,0,1,1,7,1,0,0,0,0,0,0,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1
defdata 0,0,0,0,0,0,0,0,0,0,2,2,2,4,4,2,2,0,0,0,2,2,2,2,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1
defdata 0,0,0,0,0,0,0,0,0,2,2,4,2,2,2,2,2,0,0,0,2,2,2,2,0,0,0,0,3,0,0,0,0,0,0,1,1,1,1,1
defdata 0,0,0,0,0,0,0,0,2,2,4,2,2,0,0,0,0,0,0,0,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0
defdata 0,0,0,0,0,2,2,2,2,2,2,2,0,0,0,0,0,0,0,0,2,2,0,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0
defdata 0,0,0,0,0,2,4,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0
defdata 0,0,0,0,0,2,4,4,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0
defdata 0,0,0,0,0,2,2,4,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,2,2,2,2,2,0,0,0,0,0,3,3,3,0,0,0
defdata 0,0,0,0,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,4,2,2,2,2,0,0,0,0,0,0,3,3,0,0
defdata 0,0,0,2,4,4,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,4,4,4,4,2,0,2,0,0,0,0,0,0,3,0,0
defdata 0,0,0,2,4,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,4,4,4,4,2,2,2,0,0,0,0,0,0,0,0
defdata 0,0,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,2,2,4,2,2,2,0,2,0,0,0,0,0,0,0,0
defdata 0,2,2,2,2,8,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,2,2,2,2,0,2,2,2,0,0,0,0,0,0,0,0,0
defdata 2,2,2,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0
defdata 2,2,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
defdata 2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0
defdata 2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
defdata 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
defdata 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
defdata 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
defdata 0,0,0,3,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,1,1
defdata 0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,0,1,1,1,1,1
defdata 0,0,0,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1
defdata 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1
defdata 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1
'.level3
defdata 3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3
defdata 3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3
defdata 3,3,3,3,3,3,0,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,3,3,3
defdata 3,3,3,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,3,3,3,0,3,3,3,0,3,3,0,0,0,0,0,0,0,3,3,3
defdata 3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,3,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,3,3,3
defdata 3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,0,3,3,3
defdata 3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,4,4,4,2,0,3,3,3
defdata 3,8,0,0,0,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,0,3,3,3
defdata 3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,3,3
defdata 3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
defdata 3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
defdata 0,0,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,3,3
defdata 0,0,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,3,3
defdata 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,3,3
defdata 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,3,3
defdata 0,0,0,0,0,0,0,0,0,0,0,0,0,1,7,1,1,1,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,3,3
defdata 0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
defdata 0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,9,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
defdata 0,0,0,0,0,0,0,0,0,0,0,0,0,1,9,9,9,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
defdata 0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
defdata 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0,0,3
defdata 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,3
defdata 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,3,3,0,0,0,0,0,3
defdata 0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,0,0,0,0,0,0,0,3
defdata 0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3
defdata 0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,3,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
defdata 3,3,3,0,0,0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
defdata 3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
defdata 3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,3,3
defdata 3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3
'.level4
defdata 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3
defdata 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3
defdata 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3
defdata 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3
defdata 3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3
defdata 3,0,0,1,1,1,7,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3
defdata 3,0,0,1,9,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
defdata 3,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,7,1,1,1,1,0,0,3
defdata 3,0,0,1,0,0,0,0,0,0,0,9,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,9,1,0,0,3
defdata 3,0,0,1,0,0,0,1,1,1,1,1,1,7,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,9,1,0,0,3
defdata 3,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,3
defdata 3,0,0,1,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,3
defdata 3,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,7,1,1,1,1,0,0,3
defdata 3,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
defdata 3,0,0,1,0,0,1,0,0,1,0,0,0,0,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3
defdata 3,0,0,7,0,0,1,1,1,1,0,0,0,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3
defdata 3,0,0,1,0,0,1,0,0,0,0,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3
defdata 3,0,0,1,0,9,1,0,0,0,3,3,3,3,3,3,3,8,0,0,0,3,3,3,0,3,0,0,0,0,0,0,3,3,3,3,3,3,3,3
defdata 3,0,0,1,1,1,1,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,3,3,8,3,3,3,3,3
defdata 3,0,0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,3,3,3,3,3
defdata 3,0,0,0,0,0,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0,0,3,3,3,3,3
defdata 3,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,3,0,0,0,0,0,0,0,0,3,0,3,3
defdata 3,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,3,3
defdata 3,3,0,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3
defdata 3,3,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3
defdata 3,3,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3
defdata 3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3
defdata 3,3,3,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0,2,2,2,2
defdata 3,3,3,0,0,0,0,0,2,2,2,2,2,2,0,2,2,2,2,2,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2
defdata 2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2
'.level5
defdata 3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0
defdata 3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0
defdata 3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
defdata 3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0
defdata 3,3,3,3,0,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
defdata 3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
defdata 3,3,3,3,3,3,3,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0
defdata 3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0
defdata 3,3,3,3,3,3,0,3,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0
defdata 3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
defdata 3,3,0,3,3,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
defdata 3,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,3,0,0,0,0,0,0,0,0,0,0,0,0
defdata 3,3,0,0,0,0,1,1,1,0,0,0,0,0,3,0,0,0,0,7,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
defdata 3,3,0,0,0,0,7,0,1,0,0,0,0,3,0,0,0,0,0,1,0,0,0,0,8,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
defdata 3,3,0,0,0,0,1,9,1,0,0,0,0,3,0,0,0,0,0,1,0,0,0,0,8,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
defdata 3,3,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,1,9,9,8,8,8,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
defdata 3,3,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,1,1,1,1,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
defdata 3,3,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
defdata 3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0
defdata 2,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
defdata 2,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
defdata 2,2,3,3,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
defdata 2,2,2,3,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,0
defdata 2,2,2,3,3,3,0,2,2,2,2,0,2,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0
defdata 2,2,2,3,3,2,0,2,2,2,2,2,2,2,2,2,2,2,2,2,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0
defdata 2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,0,0,3,3,0,0,3,3,3,3,0,0,0,0,0,0,0,0
defdata 2,2,4,4,4,4,4,4,2,2,2,2,2,2,4,4,4,2,2,2,2,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0
defdata 2,0,2,4,4,4,4,2,4,4,4,4,4,4,4,4,4,4,4,4,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0
defdata 2,2,4,4,4,4,4,4,4,4,2,2,4,4,4,4,4,4,4,4,4,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3
defeat 2,2,4,4,4,4,4,4,4,2,2,2,2,2,4,4,4,4,4,4,4,4,4,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3
</textarea> <br><br></td></tr></table><br><table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>2016</font></td></tr></table></td></tr><tr ><td class="posttext"> Here's the same thing, translated into Blitz3D :: <br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Graphics3D ( 800, 600, 0, 2 )

Global editmode = False
Global edittile 

Global keys = 0
Global gold = 0
Global totalgold = 0

; map variables
Global mw = 40
Global mh = 30
Global tw = 32
Global th = 32

Global numlevels = 5

Dim map ( numlevels, mw, mh ) 

; player variables
Global pw = ( tw - 5 ) 
Global ph = ( th - 5 ) 
Global px =  GraphicsWidth ( ) / 2 - tw / 2
Global py = GraphicsHeight ( ) / 2 - th / 2

; scrolling variables
Global mx
Global my
Global msx = 0
Global msy

; For the multi map
;
; this is a mdimensional array
; the player location on the multi map
; is mcx ( map cursor x ) 
; it starts at 1, 1, the center of the 
; multidimensional array
;
Global mcx = 1
Global mcy = 1

Dim ml ( 3, 3 ) 

;corner maps  - 1 non existant
ml ( 0, 0 ) =  -1
ml ( 2, 0 ) =  -1
ml ( 0, 2 ) =  -1
ml ( 2, 2 ) =  -1

; the maps assigned
ml ( 1, 0 ) = 1
ml ( 1, 1 ) = 0
ml ( 2, 1 ) = 2
ml ( 1, 2 ) = 3
ml ( 0, 1 ) = 4

readlevels ( ) 

makemaps ( ) 

;.mainloop
While Not KeyDown ( 1 ) 

	Cls

		;key e
		If KeyHit ( 18 ) Then editmode = 1 - editmode

		edit ( ) 
	
			If editmode = False
		
				For i = 0 To 4 ;speed of movement
		
					moveplayer ( )
		
						playeritemcollision ( )
			
						centermap ( )
		
					switchmap ( ) 
		
				Next
				
					drawmap ( ml ( mcx, mcy ), msx, msy ) 
	
						Color 0, 0, 0
				
						Rect 0, 0, 640, 30
					
					drawplayer ( )

				Color 0, 0, 0

					Text "Use cursors to move around", 1, 1
			
						Text "cursor : " + mcx + ", " + mcy + " on map : " + ml ( mcx, mcy ), 1, 16
			
					Text "gold:" + gold + " of " + totalgold + "   keys:" + keys, 321, 1
		
				Text "Press e for edit mode", 321, 16
		
				Color 240, 240, 150
		
					Text "Use cursors to move around", 0, 0
			
						Text "cursor : " + mcx + ", " + mcy + " on map : " + ml ( mcx, mcy ), 0, 15
			
					Text "gold:" + gold + " of " + totalgold + "   keys:" + keys, 320, 0
		
				Text "Press e for edit mode", 320, 15
		
			EndIf
	
		Delay 10

	Flip

Wend

End

Function drawmap ( level, xo, yo ) 

	For y = 0 To mh - 1

		For x = 0 To mw - 1

			a = map ( level, x, y ) 

			drawtile ( x, y, a, xo, yo ) 

		Next

	Next

End Function

Function edit ( ) 

	If editmode = True

		drawmap ( ml ( mcx, mcy ), msx, msy ) 
		
		Color 20, 20, 20		

		Rect 0, 0, GraphicsWidth ( ), 36

		For x = 0 To 10

			drawtile ( x, 0, x ) 

				If edittile = x
	
					Color 255, 0, 0
	
					Rect x * tw, y * th, 32, 32
	
				EndIf

			If RectsOverlap ( MouseX ( ), MouseY ( ), 1, 1, x * tw, 0, 32, 32 )

				Color 255, 255, 255

					Rect x * tw, 0, 32, 32
	
						Color 0, 0, 0
	
					Rect x * tw + 1, 1, 30, 30

				If MouseDown ( 1 ) = True Then edittile = x

			EndIf

		Next

		If RectsOverlap ( MouseX ( ), MouseY ( ), 1, 1, 0, 32, GraphicsWidth ( ), GraphicsHeight ( ) - 32 ) 

			x1 = ( MouseX ( ) - msx ) / tw

				y1 = ( MouseY ( ) - msy ) / th
	
					If MouseDown ( 1 ) = True
		
						map ( ml ( mcx, mcy ), x1, y1 ) = edittile
		
							updatemap x1, y1, edittile
						
						FlushMouse ( ) 
		
					EndIf
	
				Color 255, 255, 255
	
				Rect x1 * tw + msx, y1 * th + msy, 32, 32

			Color 0, 0, 0

			Rect x1 * tw + 1 + msx, y1 * th + 1 + msy, 30, 30

		EndIf

		If KeyDown ( 200 ) Then msy = msy + 3

			If KeyDown ( 208 ) Then msy = msy - 3
	
			If KeyDown ( 203 ) Then msx = msx + 3

		If KeyDown ( 205 ) Then msx = msx - 3

	EndIf

End Function

; here we check If the player is
; at a border And If he can go To another map
; And set the start positions
Function switchmap ( ) 

	; touches the Left side of the screen
	If px &lt; 5 And mcx &gt; 0 
		If ml ( mcx - 1, mcy ) &lt;&gt; - 1
			mcx = mcx - 1
			px = 630 - pw			
			msx =  - ( mw * tw - GraphicsWidth ( ) ) 
			If py &lt; 10 py = py + 10
			If py + ph &gt; GraphicsHeight ( ) - 10 py = py - 10
		EndIf		
	EndIf
	; touches the top part of the screen
	If py &lt; 5 And mcy &gt; 0 
		If ml ( mcx, mcy - 1 ) &lt;&gt; - 1
			mcy = mcy - 1
			py = 470 - ph
			msy =  - ( mh * th - GraphicsHeight ( ) ) 
			If px &lt; 10 px = 10
			If px + pw &gt; GraphicsWidth ( ) - 10 px = px - 10
		EndIf
	EndIf
	; touches the Right side of the screen
	If px + pw &gt; GraphicsWidth ( ) -4 And mcx &lt; 2
		If ml ( mcx + 1, mcy ) &lt;&gt; -1
			mcx = mcx + 1
			px = 10
			msx = 0
			If py &lt; 10 py = 10
			If py + ph &gt; GraphicsHeight ( ) - 10 py = py - 10
		EndIf
	EndIf
	; touches the bottom of the screen
	If py + ph &gt; GraphicsHeight ( ) - 5 And mcy &lt; 2
		If ml ( mcx, mcy + 1 ) &lt;&gt; -1
			mcy = mcy + 1
			py = 10
			msy = 0
			If px &lt; 10 px = px + 10
			If px + pw &gt; GraphicsWidth ( ) - 10 px = px - 10
		EndIf
	EndIf
End Function

Function centermap ( ) 
	If px &lt; GraphicsWidth ( ) / 3 And Abs ( msx ) &gt; 0 Then
		msx = msx + 1
		px = px + 1
	EndIf
	If py &lt; GraphicsHeight ( ) / 3 And Abs ( msy ) &gt; 0 Then
		msy = msy + 1
		py = py + 1
	EndIf
	If px &gt; GraphicsWidth ( ) / 100 * 66
		If ( Abs ( msx ) + GraphicsWidth ( ) ) &lt; mw * tw Then
			msx = msx - 1
			px = px - 1
		EndIf
	EndIf
	If py &gt; GraphicsHeight ( ) / 100 * 66
		If ( Abs ( msy ) + GraphicsHeight ( ) ) &lt; mh * th Then
			msy = msy - 1
			py = py - 1
		EndIf
	EndIf	
End Function

Function moveplayer ( ) 

	Local x = 0
	Local y = 0

	If KeyDown ( 200 ) Then y = y - 1
	If KeyDown ( 208 ) Then y = y + 1
	If KeyDown ( 203 ) Then x = x - 1
	If KeyDown ( 205 ) Then x = x + 1

	If px + x &lt; 0 Then x = 0
	If px + pw + x &gt; GraphicsWidth ( ) Then x = 0
	If py + y &lt; 0 Then y = 0
	If py + ph + y &gt; GraphicsHeight ( ) Then y = 0

	Local collide = playermapcollision ( ( px + Abs ( msx ) ) + x, py + Abs ( msy ) ) 

	If collide = 0
		px = px + x
	ElseIf collide = 2 And Rand ( 0, 100 ) &lt; 40
		px = px + x
	EndIf

	collide = playermapcollision ( px + Abs ( msx ), py + Abs ( msy ) + y ) 

	If collide = 0

		py = py + y

	ElseIf collide = 2 And Rand ( 0, 100 ) &lt; 40

		py = py + y

	EndIf

End Function

Function playermapcollision ( x1, y1 ) 

	Local cx = x1 / tw

		Local cy = y1 / th
	
			For y2 = cy - 1 To cy + 1
		
				For x2 = cx - 1 To cx + 1	
		
					If x2 &gt;= 0 And x2 &lt; mw And y2 &gt;= 0 And y2 &lt; mh
		
						mt = map ( ml ( mcx, mcy ), x2, y2 ) 
		
						; Is the Map around the Player a Block?
						If mt = 1 Or mt = 2 Or mt = 3 Or mt = 4 Or mt = 7
		
							If RectsOverlap ( x2 * tw, y2 * th, tw, th, x1, y1, pw, ph ) 
		
								; Here the Player is inside a Wall
		
									; A value 1 on the Map
		
								Return mt
		
							EndIf
		
						EndIf
		
					EndIf
		
				Next
		
			Next

		; No Collision Occured

	Return 0

End Function

Function playeritemcollision ( ) 

	Local cx = ( px + Abs ( msx ) ) / tw

	Local cy = ( py + Abs ( msy ) ) / th

	For y2 = cy - 1 To cy + 1

		For x2 = cx - 1 To cx + 1

			If x2 &gt;= 0 And x2 &lt; mw And y2 &gt;= 0 And y2 &lt; mh

				; Collision with Coin

					; Is the Map around the Player a 9 value?

				If map ( ml ( mcx, mcy ), x2, y2 ) = 9

					If RectsOverlap ( x2 * tw + 8, y2 * th + 8, tw - 16, th - 16, px + Abs ( msx ), py + Abs ( msy ), pw, ph ) 

						; Here the player touches a map item ( 9 ) 

							; We remove it from the map

						gold = gold + 1

							map ( ml ( mcx, mcy ), x2, y2 ) = 0

						updatemap ( x2, y2, 0 ) 

					EndIf

				EndIf
				
					; Collision with Key

						; Is the Map around the Player an 8 value?
	
					If map ( ml ( mcx, mcy ), x2, y2 ) = 8
	
						If RectsOverlap ( x2 * tw + 8, y2 * th + 8, tw - 16, th - 16, px + Abs ( msx ), py + Abs ( msy ), pw, ph )
	
							; Here the player touches a map item ( 9 ) 

								; We remove it from the map
	
									keys = keys + 1
	
								map ( ml ( mcx, mcy ), x2, y2 ) = 0
	
							updatemap ( x2, y2, 0 ) 
	
						EndIf
	
					EndIf
				
				; Collision with Door

					; Is the Map around the Player a 7 value?

				If map ( ml ( mcx, mcy ), x2, y2 ) = 7

					If RectsOverlap ( x2 * tw - 1, y2 * th - 1, tw + 2, th + 2, px + Abs ( msx ), py + Abs ( msy ), pw, ph )

				 		If keys &gt; 0

							; Here the Player touches a map item ( 9 ) 

								; We remove it from the map
	
									keys = keys - 1

								map ( ml ( mcx, mcy ), x2, y2 ) = 0

							updatemap ( x2, y2, 0 ) 

						EndIf

					EndIf

				EndIf
	
			EndIf

		Next

	Next

End Function

Function updatemap ( x, y, t ) 

	drawtile ( x, y, t ) 

End Function

Function drawplayer ( ) 

	Color 0, 0, 255

	Oval px, py, pw, ph

End Function

Function makemaps ( ) 

	For i = 0 To numlevels - 1

		For y = 0 To mh - 1

			For x = 0 To mw - 1

				a = map ( i, x, y ) 

				drawtile ( x, y, a ) 

			Next

		Next

	Next

End Function

Function drawtile ( x, y, t, xo = 0, yo = 0 ) 

	Select t

		;Nothing
		Case 0

			Color 0, 0, 0

			Rect x * tw + xo, y * th + yo, tw, th

		;Wall

		Case 1

			Color 255, 255, 255

			Rect x * tw + xo, y * th + yo, tw, th

		;Water

		Case 2

			Color 30, 140, 255

			Rect x * tw + xo, y * th + yo, tw, th

		;Tree

		Case 3

			Color 0, 255, 0

				x1 = x * tw + xo
	
					y1 = y * th + yo
		
					DrawLine x1 + tw / 2, y1, x1 + tw, y1 + th
	
				DrawLine x1 + tw, y1 + th - 1, x1, y1 + th - 1

			DrawLine x1, y1 + th, x1 + tw / 2, y1

		;Deep Water

		Case 4

			Color 30, 100, 245

			Rect x * tw + xo, y * th + yo, tw, th

		; Door

		Case 7

			Color 150, 150, 150

			Rect x * tw + xo, y * th + yo, tw, th

		; Key

		Case 8

			Color 180, 120, 00
	
				Oval x * tw + 2 + xo, y * th + 2 + yo, tw - 4, th - 4
		
				Color 255, 255, 255
	
			Text x * tw + ( tw / 3.4 ) + xo, y * th + ( th / 3.4 ) + yo, "K"

		; Gold

		Case 9

			Color 230, 200, 0
	
			Oval ( x * tw + 2 ) + xo, ( y * th + 2 ) + yo, tw - 4, th - 4

	End Select

End Function

Function readlevels ( ) 

;	Restore level1

	Print numlevels

	For i = 0 To numlevels - 1

		For y = 0 To mh - 1

			For x = 0 To mw - 1

				Read a

					map ( i, x, y ) = a

				If a = 9 Then totalgold = totalgold + 1

			Next

		Next

	Next

End Function

.level1
Data 0,0,0,0,0,0,0,0,0,0,0,0,2,2,4,2,2,2,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1
Data 0,0,0,0,0,0,0,2,2,2,2,2,4,4,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1
Data 0,0,0,0,0,0,2,4,4,4,4,4,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1
Data 0,0,0,0,0,2,4,4,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1
Data 0,0,0,2,2,4,4,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,8,0,1,1,1,1,1,1,1
Data 2,2,2,4,4,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,1,1,1,1,1,1,1
Data 4,4,4,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,1,0,1,1,1,1,1
Data 2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0,0,1,1,1,1,1
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,1,0,1,1,1
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,1,1,1,1
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,3,3,0,0,0,1,1,1,1
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0
Data 0,0,0,1,1,1,1,1,1,1,0,0,0,0,1,9,9,9,1,0,0,0,0,3,3,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0
Data 0,0,0,1,0,0,0,9,9,1,0,0,0,0,1,9,9,9,1,0,0,0,0,3,3,3,0,0,0,0,3,3,3,3,3,0,0,0,0,0
Data 0,0,0,1,0,0,0,0,0,1,0,0,0,0,1,0,0,0,1,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,1,0,0,0,0,0,1,0,0,0,0,1,0,0,0,1,0,0,0,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,1,0,0,0,0,0,1,0,0,1,1,1,1,1,7,1,0,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,1,0,0,0,0,0,7,0,0,7,0,0,0,0,0,1,0,0,0,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,0,0,0,0,0
Data 0,0,0,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,8,2,2,4,4,2,2,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,4,4,4,2,0,2,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,4,4,2,2,2,2,2,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,2,2,4,2,2,2,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,2,2,2,2,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,2,2,0,0,0,0,0,0,3,3,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3
Data 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3
Data 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3

.level2
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1
Data 0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1
Data 0,0,1,0,9,9,1,0,0,0,3,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1
Data 0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1
Data 0,0,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1
Data 0,0,1,1,7,1,0,0,0,0,0,0,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1
Data 0,0,0,0,0,0,0,0,0,0,2,2,2,4,4,2,2,0,0,0,2,2,2,2,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1
Data 0,0,0,0,0,0,0,0,0,2,2,4,2,2,2,2,2,0,0,0,2,2,2,2,0,0,0,0,3,0,0,0,0,0,0,1,1,1,1,1
Data 0,0,0,0,0,0,0,0,2,2,4,2,2,0,0,0,0,0,0,0,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0
Data 0,0,0,0,0,2,2,2,2,2,2,2,0,0,0,0,0,0,0,0,2,2,0,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,2,4,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,2,4,4,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,2,2,4,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,2,2,2,2,2,0,0,0,0,0,3,3,3,0,0,0
Data 0,0,0,0,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,4,2,2,2,2,0,0,0,0,0,0,3,3,0,0
Data 0,0,0,2,4,4,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,4,4,4,4,2,0,2,0,0,0,0,0,0,3,0,0
Data 0,0,0,2,4,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,4,4,4,4,2,2,2,0,0,0,0,0,0,0,0
Data 0,0,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,2,2,4,2,2,2,0,2,0,0,0,0,0,0,0,0
Data 0,2,2,2,2,8,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,2,2,2,2,0,2,2,2,0,0,0,0,0,0,0,0,0
Data 2,2,2,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0
Data 2,2,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0
Data 2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
Data 0,0,0,3,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,1,1
Data 0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,0,1,1,1,1,1
Data 0,0,0,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1

.level3
Data 3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3
Data 3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3
Data 3,3,3,3,3,3,0,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,3,3,3
Data 3,3,3,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,3,3,3,0,3,3,3,0,3,3,0,0,0,0,0,0,0,3,3,3
Data 3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,3,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,3,3,3
Data 3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,0,3,3,3
Data 3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,4,4,4,2,0,3,3,3
Data 3,8,0,0,0,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,0,3,3,3
Data 3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,3,3
Data 3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 0,0,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,3,3
Data 0,0,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,1,7,1,1,1,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,9,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,1,9,9,9,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0,0,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,3,3,0,0,0,0,0,3
Data 0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,0,0,0,0,0,0,0,3
Data 0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3
Data 0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,3,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 3,3,3,0,0,0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,3,3
Data 3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3

.level4
Data 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3
Data 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3
Data 3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3
Data 3,0,0,1,1,1,7,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3
Data 3,0,0,1,9,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 3,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,7,1,1,1,1,0,0,3
Data 3,0,0,1,0,0,0,0,0,0,0,9,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,9,1,0,0,3
Data 3,0,0,1,0,0,0,1,1,1,1,1,1,7,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,9,1,0,0,3
Data 3,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,3
Data 3,0,0,1,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,3
Data 3,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,7,1,1,1,1,0,0,3
Data 3,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 3,0,0,1,0,0,1,0,0,1,0,0,0,0,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3
Data 3,0,0,7,0,0,1,1,1,1,0,0,0,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3
Data 3,0,0,1,0,0,1,0,0,0,0,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3
Data 3,0,0,1,0,9,1,0,0,0,3,3,3,3,3,3,3,8,0,0,0,3,3,3,0,3,0,0,0,0,0,0,3,3,3,3,3,3,3,3
Data 3,0,0,1,1,1,1,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,3,3,8,3,3,3,3,3
Data 3,0,0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,3,3,3,3,3
Data 3,0,0,0,0,0,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0,0,3,3,3,3,3
Data 3,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,3,0,0,0,0,0,0,0,0,3,0,3,3
Data 3,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 3,3,0,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3
Data 3,3,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3
Data 3,3,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3
Data 3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3
Data 3,3,3,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0,2,2,2,2
Data 3,3,3,0,0,0,0,0,2,2,2,2,2,2,0,2,2,2,2,2,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2
Data 2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2

.level5
Data 3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0
Data 3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0
Data 3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0
Data 3,3,3,3,0,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,3,3,3,3,3,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0
Data 3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0
Data 3,3,3,3,3,3,0,3,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0
Data 3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,0,3,3,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,3,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,0,0,0,0,1,1,1,0,0,0,0,0,3,0,0,0,0,7,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,0,0,0,0,7,0,1,0,0,0,0,3,0,0,0,0,0,1,0,0,0,0,8,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,0,0,0,0,1,9,1,0,0,0,0,3,0,0,0,0,0,1,0,0,0,0,8,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,1,9,9,8,8,8,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,1,1,1,1,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0
Data 2,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 2,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 2,2,3,3,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 2,2,2,3,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,0
Data 2,2,2,3,3,3,0,2,2,2,2,0,2,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0
Data 2,2,2,3,3,2,0,2,2,2,2,2,2,2,2,2,2,2,2,2,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0
Data 2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,0,0,3,3,0,0,3,3,3,3,0,0,0,0,0,0,0,0
Data 2,2,4,4,4,4,4,4,2,2,2,2,2,2,4,4,4,2,2,2,2,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0
Data 2,0,2,4,4,4,4,2,4,4,4,4,4,4,4,4,4,4,4,4,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0
Data 2,2,4,4,4,4,4,4,4,4,2,2,4,4,4,4,4,4,4,4,4,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3
Data 2,2,4,4,4,4,4,4,4,2,2,2,2,2,4,4,4,4,4,4,4,4,4,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3
</textarea><br><br>~GF <br><br></td></tr></table><br><table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dan</td><td align="right"><font class=tiny>2016</font></td></tr></table></td></tr><tr ><td class="posttext"> i guess drawline is blitzmax command ? <br><br></td></tr></table><br><table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>2016</font></td></tr></table></td></tr><tr ><td class="posttext"> Thanks, Dan. I edited it.<br><br>If any of you don't like the way I code, you can shove it! =) That's the way it's going to stay! I like to turn my code into works of art! I'm not afraid to show it!<br><br>There's something wrong with the Level Editor. For some reason when you go and select your Tile then try to delete something, a hard-to-see black square also shows up on the bottom left of the screen somewhere within the other sprites until the mouse button is let go of.<br><br>There are a few weird collision glitches where the DARK BLUE water tiles have collision, &amp; when warping on some areas of the Map, I get stuck in a tree &amp; can't move... If the collision could be fixed, &amp; a way to detect that there's a tile blocking the map, I would be eternally greatful! That would be AWESOME!<br><br>Also, when moving North or South to the 2nd or 3rd map, the player jumps 10 tiles ahead when it should only be jumping one.<br><br>Thank You!<br><br>~GF <br><br></td></tr></table><br><table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>2016</font></td></tr></table></td></tr><tr ><td class="posttext"> PATCH - V.0.3 ( Beta ) :: <br><br>Small Fixes - Are as Follows : <br><br>1 ) Outlined the 'Information Panel' as opposed to using a black Rect so the user can more readily read the information at the top of the screen.<br><br>2 ) Added a timer-based-movement to the player as well as the program itself so it works on any Computer no matter what type of Graphics card.<br><br>3 ) Fixed the location of appearing on another Map once the border of a Map Teleports you to the next Map so the location is much closer to each 1st Tile when Teleporting.<br><br>2D_RPG.bb: <br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Graphics3D ( 800, 600, 0, 2 )

Global editmode = False
Global edittile 

Global keys = 0
Global gold = 0
Global totalgold = 0

; map variables
Global mw = 40
Global mh = 30
Global tw = 32
Global th = 32

Global numlevels = 5

Dim map ( numlevels, mw, mh ) 

; player variables
Global pw = ( tw - 5 ) 
Global ph = ( th - 5 ) 
Global px =  GraphicsWidth ( ) / 2 - tw / 2
Global py = GraphicsHeight ( ) / 2 - th / 2

; scrolling variables
Global mx
Global my
Global msx = 0
Global msy

; For the multi map
;
; this is a mdimensional array
; the player location on the multi map
; is mcx ( map cursor x ) 
; it starts at 1, 1, the center of the 
; multidimensional array
;
Global mcx = 1
Global mcy = 1

Dim ml ( 3, 3 ) 

;corner maps  - 1 non existant
ml ( 0, 0 ) =  -1
ml ( 2, 0 ) =  -1
ml ( 0, 2 ) =  -1
ml ( 2, 2 ) =  -1

; the maps assigned
ml ( 1, 0 ) = 1
ml ( 1, 1 ) = 0
ml ( 2, 1 ) = 2
ml ( 1, 2 ) = 3
ml ( 0, 1 ) = 4

Global timer = CreateTimer ( 60 )

Global ti = MilliSecs ( )

readlevels ( ) 

	makemaps ( ) 

	;.mainloop
	While Not KeyDown ( 1 ) 
	
		Cls
	
			;key e
			If KeyHit ( 18 ) Then editmode = 1 - editmode
	
			edit ( ) 
		
				If editmode = False
			
					For i = 0 To 4 ;speed of movement
			
						moveplayer ( )
			
							playeritemcollision ( )
				
							centermap ( )
			
						switchmap ( ) 
			
					Next
					
					drawmap ( ml ( mcx, mcy ), msx, msy ) 
		
						Color 51, 51, 255
						
						Rect 0, 0, GraphicsWidth ( ), 30, 0
						
					drawplayer ( )
	
					Color 0, 0, 0
	
						Text 1, 1, "Use cursors to move around"
				
							Text 1, 16, "cursor : " + mcx + ", " + mcy + " on map : " + ml ( mcx, mcy )
	
						Text 321, 1, "gold:" + gold + " of " + totalgold + "   keys:" + keys
			
					Text 321, 16, "Press e for edit mode"
			
					Color 240, 240, 150
			
						Text 0, 0, "Use cursors to move around"
				
							Text 0, 15, "cursor : " + mcx + ", " + mcy + " on map : " + ml ( mcx, mcy )
				
						Text 320, 0, "gold:" + gold + " of " + totalgold + "   keys:" + keys
			
					Text 320, 15, "Press e for edit mode"
			
				EndIf
	
			Flip 0
		
		WaitTimer timer
	
	Wend

End

Function drawmap ( level, xo, yo ) 

	For y = 0 To mh - 1

		For x = 0 To mw - 1

			a = map ( level, x, y ) 

			drawtile ( x, y, a, xo, yo ) 

		Next

	Next

End Function

Function edit ( ) 

	If editmode = True

		drawmap ( ml ( mcx, mcy ), msx, msy ) 
		
		Color 20, 20, 20		

		Rect 0, 0, GraphicsWidth ( ), 36

		For x = 0 To 10

			drawtile ( x, 0, x ) 

			If edittile = x

				Color 255, 0, 0

				Rect x * tw, y * th, 32, 32

			EndIf

			If RectsOverlap ( MouseX ( ), MouseY ( ), 1, 1, x * tw, 0, 32, 32 )

				Color 255, 255, 255

				Rect x * tw, 0, 32, 32

				Color 0, 0, 0

				Rect x * tw + 1, 1, 30, 30

				If MouseDown ( 1 ) = True Then edittile = x

			EndIf

		Next

		If RectsOverlap ( MouseX ( ), MouseY ( ), 1, 1, 0, 32, GraphicsWidth ( ), GraphicsHeight ( ) - 32 ) 

			x1 = ( MouseX ( ) - msx ) / tw

			y1 = ( MouseY ( ) - msy ) / th

			If MouseDown ( 1 ) = True

				map ( ml ( mcx, mcy ), x1, y1 ) = edittile

					updatemap x1, y1, edittile
				
				FlushMouse ( ) 

			EndIf

			Color 255, 255, 255

			Rect x1 * tw + msx, y1 * th + msy, 32, 32

			Color 0, 0, 0

			Rect x1 * tw + 1 + msx, y1 * th + 1 + msy, 30, 30

		EndIf

		If KeyDown ( 200 ) Then msy = msy + 3

			If KeyDown ( 208 ) Then msy = msy - 3
	
			If KeyDown ( 203 ) Then msx = msx + 3

		If KeyDown ( 205 ) Then msx = msx - 3

	EndIf

End Function

; here we check If the player is
; at a border And If he can go To another map
; And set the start positions
Function switchmap ( ) 

	; touches the Left side of the screen
	If px &lt; 5 And mcx &gt; 0 

		If ml ( mcx - 1, mcy ) &lt;&gt; -1

			mcx = mcx - 1

				px = 630 - pw
	
					msx =  - ( mw * tw - GraphicsWidth ( ) )
	
				If py &lt; 10 Then py = py + 10

			If py + ph &gt; GraphicsHeight ( ) - 10 Then py = py - 10

		EndIf		

	EndIf

		; Touches the Top part of the Screen
		If py &lt; 4 And mcy &gt; 0 
	
			If ml ( mcx, mcy - 1 ) &lt;&gt; -1
	
				mcy = mcy - 1
					
					py = ( ( GraphicsHeight ( ) - 10 ) - ph )

						msy =  - ( mh * th - GraphicsHeight ( ) ) 
								
							If px &lt; 10 Then px = 10

						If py &lt; 0 Then py = 0
	
					If px + pw &gt; GraphicsWidth ( ) - 10 Then px = px - 10
				
				If py + ph &gt; GraphicsHeight ( ) - 1 Then py = py - 1
	
			EndIf
	
		EndIf
	
		; Touches the Right side of the Screen
		If px + pw &gt; GraphicsWidth ( ) - 4 And mcx &lt; 2
	
			If ml ( mcx + 1, mcy ) &lt;&gt; -1
	
				mcx = mcx + 1
	
					px = 10
		
						msx = 0
		
					If py &lt; 10 Then py = 10
	
				If py + ph &gt; GraphicsHeight ( ) - 10 Then py = py - 10
	
			EndIf
	
		EndIf

	; Touches the bottom of the Screen
	If py + ph &gt; GraphicsHeight ( ) - 5 And mcy &lt; 2

		If ml ( mcx, mcy + 1 ) &lt;&gt; -1

			mcy = mcy + 1

				py = 10
	
					msy = 0
	
				If px &lt; 10 Then px = px + 10

			If px + pw &gt; GraphicsWidth ( ) - 10 Then px = px - 10

		EndIf

	EndIf

End Function

Function centermap ( ) 

	If px &lt; GraphicsWidth ( ) / 3 And Abs ( msx ) &gt; 0 Then msx = msx + 1 : px = px + 1

		If py &lt; GraphicsHeight ( ) / 3 And Abs ( msy ) &gt; 0 Then msy = msy + 1 : py = py + 1
	
		If px &gt; GraphicsWidth ( ) / 100 * 66
	
			If ( Abs ( msx ) + GraphicsWidth ( ) ) &lt; mw * tw Then msx = msx - 1 : px = px - 1
	
		EndIf

	If py &gt; GraphicsHeight ( ) / 100 * 66

		If ( Abs ( msy ) + GraphicsHeight ( ) ) &lt; mh * th Then msy = msy - 1 : py = py - 1

	EndIf

End Function

Function moveplayer ( ) 

	Local x = 0
	
		Local y = 0
		
			If MilliSecs ( ) &gt; ti - 100

				If KeyDown ( 200 ) Then y = y - 1
		
					If KeyDown ( 208 ) Then y = y + 1
			
					If KeyDown ( 203 ) Then x = x - 1
				
				If KeyDown ( 205 ) Then x = x + 1
				
				ti = MilliSecs ( )
						
			EndIf
					
			If px + x &lt; 0 Then x = 0
				
				If px + pw + x &gt; GraphicsWidth ( ) Then x = 0
			
				If py + y &lt; 0 Then y = 0
		
			If py + ph + y &gt; GraphicsHeight ( ) Then y = 0
	
		Local collide = playermapcollision ( ( px + Abs ( msx ) ) + x, py + Abs ( msy ) ) 
	
		If collide = 0
	
			px = px + x
	
		ElseIf collide = 2 And Rand ( 0, 100 ) &lt; 40
	
			px = px + x
	
		EndIf

	collide = playermapcollision ( px + Abs ( msx ), py + Abs ( msy ) + y ) 

	If collide = 0

		py = py + y

	ElseIf collide = 2 And Rand ( 0, 100 ) &lt; 40

		py = py + y

	EndIf

End Function

Function playermapcollision ( x1, y1 ) 

	Local cx = x1 / tw

		Local cy = y1 / th
	
			For y2 = cy - 1 To cy + 1
		
				For x2 = cx - 1 To cx + 1	
		
					If x2 &gt;= 0 And x2 &lt; mw And y2 &gt;= 0 And y2 &lt; mh
		
						mt = map ( ml ( mcx, mcy ), x2, y2 ) 
		
						; Is the Map around the Player a Block?
						If mt = 1 Or mt = 2 Or mt = 3 Or mt = 4 Or mt = 7
		
							If RectsOverlap ( x2 * tw, y2 * th, tw, th, x1, y1, pw, ph ) 
		
								; Here the Player is inside a Wall
		
									; A value 1 on the Map
		
								Return mt
		
							EndIf
		
						EndIf
		
					EndIf
		
				Next
		
			Next

		; No Collision Occured

	Return 0

End Function

Function playeritemcollision ( ) 

	Local cx = ( px + Abs ( msx ) ) / tw

	Local cy = ( py + Abs ( msy ) ) / th

	For y2 = cy - 1 To cy + 1

		For x2 = cx - 1 To cx + 1

			If x2 &gt;= 0 And x2 &lt; mw And y2 &gt;= 0 And y2 &lt; mh

				; Collision with Coin

					; Is the Map around the Player a 9 value?

				If map ( ml ( mcx, mcy ), x2, y2 ) = 9

					If RectsOverlap ( x2 * tw + 8, y2 * th + 8, tw - 16, th - 16, px + Abs ( msx ), py + Abs ( msy ), pw, ph ) 

						; Here the player touches a map item ( 9 ) 

							; We remove it from the map

						gold = gold + 1

							map ( ml ( mcx, mcy ), x2, y2 ) = 0

						updatemap ( x2, y2, 0 ) 

					EndIf

				EndIf
				
					; Collision with Key

						; Is the Map around the Player an 8 value?
	
					If map ( ml ( mcx, mcy ), x2, y2 ) = 8
	
						If RectsOverlap ( x2 * tw + 8, y2 * th + 8, tw - 16, th - 16, px + Abs ( msx ), py + Abs ( msy ), pw, ph )
	
							; Here the player touches a map item ( 9 ) 

								; We remove it from the map
	
									keys = keys + 1
	
								map ( ml ( mcx, mcy ), x2, y2 ) = 0
	
							updatemap ( x2, y2, 0 ) 
	
						EndIf
	
					EndIf
				
				; Collision with Door

					; Is the Map around the Player a 7 value?

				If map ( ml ( mcx, mcy ), x2, y2 ) = 7

					If RectsOverlap ( x2 * tw - 1, y2 * th - 1, tw + 2, th + 2, px + Abs ( msx ), py + Abs ( msy ), pw, ph )

				 		If keys &gt; 0

							; Here the Player touches a map item ( 9 ) 

								; We remove it from the map
	
									keys = keys - 1

								map ( ml ( mcx, mcy ), x2, y2 ) = 0

							updatemap ( x2, y2, 0 )
							
						Else
						
							keys = 0

						EndIf

					EndIf

				EndIf
	
			EndIf

		Next

	Next

End Function

Function updatemap ( x, y, t ) 

	drawtile ( x, y, t ) 

End Function

Function drawplayer ( ) 

	Color 0, 0, 255

	Oval px, py, pw, ph

End Function

Function makemaps ( ) 

	For i = 0 To numlevels - 1

		For y = 0 To mh - 1

			For x = 0 To mw - 1

				a = map ( i, x, y ) 

				drawtile ( x, y, a ) 

			Next

		Next

	Next

End Function

Function drawtile ( x, y, t, xo = 0, yo = 0 ) 

	Select t

		;Nothing
		Case 0

			Color 0, 0, 0

			Rect x * tw + xo, y * th + yo, tw, th

		;Wall

		Case 1

			Color 255, 255, 255

			Rect x * tw + xo, y * th + yo, tw, th

		;Water

		Case 2

			Color 30, 140, 255

			Rect x * tw + xo, y * th + yo, tw, th

		;Tree

		Case 3

			Color 0, 255, 0

				x1 = x * tw + xo
	
					y1 = y * th + yo
		
					Line x1 + tw / 2, y1, x1 + tw, y1 + th
	
				Line x1 + tw, y1 + th - 1, x1, y1 + th - 1

			Line x1, y1 + th, x1 + tw / 2, y1

		;Deep Water

		Case 4

			Color 30, 100, 245

			Rect x * tw + xo, y * th + yo, tw, th

		; Door

		Case 7

			Color 150, 150, 150

			Rect x * tw + xo, y * th + yo, tw, th

		; Key

		Case 8

			Color 180, 120, 00
	
				Oval x * tw + 2 + xo, y * th + 2 + yo, tw - 4, th - 4
		
				Color 255, 255, 255
	
			Text x * tw + ( tw / 3.0 ) + xo, y * th + ( th / 3.4 ) + yo, "K"

		; Gold

		Case 9

			Color 230, 200, 0
	
			Oval ( x * tw + 2 ) + xo, ( y * th + 2 ) + yo, tw - 4, th - 4

	End Select

End Function

Function readlevels ( ) 

	Print numlevels

	For i = 0 To numlevels - 1

		For y = 0 To mh - 1

			For x = 0 To mw - 1

				Read a

					map ( i, x, y ) = a

				If a = 9 Then totalgold = totalgold + 1

			Next

		Next

	Next

End Function

.level1
Data 0,0,0,0,0,0,0,0,0,0,0,0,2,2,4,2,2,2,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1
Data 0,0,0,0,0,0,0,2,2,2,2,2,4,4,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1
Data 0,0,0,0,0,0,2,4,4,4,4,4,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1
Data 0,0,0,0,0,2,4,4,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1
Data 0,0,0,2,2,4,4,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,8,0,1,1,1,1,1,1,1
Data 2,2,2,4,4,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,1,1,1,1,1,1,1
Data 4,4,4,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,1,0,1,1,1,1,1
Data 2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0,0,1,1,1,1,1
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,1,0,1,1,1
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,1,1,1,1
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,3,3,0,0,0,1,1,1,1
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0
Data 0,0,0,1,1,1,1,1,1,1,0,0,0,0,1,9,9,9,1,0,0,0,0,3,3,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0
Data 0,0,0,1,0,0,0,9,9,1,0,0,0,0,1,9,9,9,1,0,0,0,0,3,3,3,0,0,0,0,3,3,3,3,3,0,0,0,0,0
Data 0,0,0,1,0,0,0,0,0,1,0,0,0,0,1,0,0,0,1,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,1,0,0,0,0,0,1,0,0,0,0,1,0,0,0,1,0,0,0,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,1,0,0,0,0,0,1,0,0,1,1,1,1,1,7,1,0,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,1,0,0,0,0,0,7,0,0,7,0,0,0,0,0,1,0,0,0,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,0,0,0,0,0
Data 0,0,0,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,8,2,2,4,4,2,2,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,4,4,4,2,0,2,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,4,4,2,2,2,2,2,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,2,2,4,2,2,2,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,2,2,2,2,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,2,2,0,0,0,0,0,0,3,3,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3
Data 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3
Data 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3

.level2
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1
Data 0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1
Data 0,0,1,0,9,9,1,0,0,0,3,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1
Data 0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1
Data 0,0,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1
Data 0,0,1,1,7,1,0,0,0,0,0,0,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1
Data 0,0,0,0,0,0,0,0,0,0,2,2,2,4,4,2,2,0,0,0,2,2,2,2,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1
Data 0,0,0,0,0,0,0,0,0,2,2,4,2,2,2,2,2,0,0,0,2,2,2,2,0,0,0,0,3,0,0,0,0,0,0,1,1,1,1,1
Data 0,0,0,0,0,0,0,0,2,2,4,2,2,0,0,0,0,0,0,0,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0
Data 0,0,0,0,0,2,2,2,2,2,2,2,0,0,0,0,0,0,0,0,2,2,0,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,2,4,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,2,4,4,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,2,2,4,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,2,2,2,2,2,0,0,0,0,0,3,3,3,0,0,0
Data 0,0,0,0,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,4,2,2,2,2,0,0,0,0,0,0,3,3,0,0
Data 0,0,0,2,4,4,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,4,4,4,4,2,0,2,0,0,0,0,0,0,3,0,0
Data 0,0,0,2,4,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,4,4,4,4,2,2,2,0,0,0,0,0,0,0,0
Data 0,0,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,2,2,4,2,2,2,0,2,0,0,0,0,0,0,0,0
Data 0,2,2,2,2,8,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,2,2,2,2,0,2,2,2,0,0,0,0,0,0,0,0,0
Data 2,2,2,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0
Data 2,2,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0
Data 2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
Data 0,0,0,3,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,1,1
Data 0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,0,1,1,1,1,1
Data 0,0,0,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1

.level3
Data 3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3
Data 3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3
Data 3,3,3,3,3,3,0,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,3,3,3
Data 3,3,3,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,3,3,3,0,3,3,3,0,3,3,0,0,0,0,0,0,0,3,3,3
Data 3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,3,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,3,3,3
Data 3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,0,3,3,3
Data 3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,4,4,4,2,0,3,3,3
Data 3,8,0,0,0,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,0,3,3,3
Data 3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,3,3
Data 3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 0,0,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,3,3
Data 0,0,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,1,7,1,1,1,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,9,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,1,9,9,9,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0,0,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,3,3,0,0,0,0,0,3
Data 0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,0,0,0,0,0,0,0,3
Data 0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3
Data 0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,3,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 3,3,3,0,0,0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,3,3
Data 3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3

.level4
Data 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3
Data 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3
Data 3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3
Data 3,0,0,1,1,1,7,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3
Data 3,0,0,1,9,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 3,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,7,1,1,1,1,0,0,3
Data 3,0,0,1,0,0,0,0,0,0,0,9,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,9,1,0,0,3
Data 3,0,0,1,0,0,0,1,1,1,1,1,1,7,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,9,1,0,0,3
Data 3,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,3
Data 3,0,0,1,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,3
Data 3,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,7,1,1,1,1,0,0,3
Data 3,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 3,0,0,1,0,0,1,0,0,1,0,0,0,0,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3
Data 3,0,0,7,0,0,1,1,1,1,0,0,0,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3
Data 3,0,0,1,0,0,1,0,0,0,0,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3
Data 3,0,0,1,0,9,1,0,0,0,3,3,3,3,3,3,3,8,0,0,0,3,3,3,0,3,0,0,0,0,0,0,3,3,3,3,3,3,3,3
Data 3,0,0,1,1,1,1,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,3,3,8,3,3,3,3,3
Data 3,0,0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,3,3,3,3,3
Data 3,0,0,0,0,0,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0,0,3,3,3,3,3
Data 3,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,3,0,0,0,0,0,0,0,0,3,0,3,3
Data 3,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 3,3,0,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3
Data 3,3,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3
Data 3,3,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3
Data 3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3
Data 3,3,3,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0,2,2,2,2
Data 3,3,3,0,0,0,0,0,2,2,2,2,2,2,0,2,2,2,2,2,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2
Data 2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2

.level5
Data 3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0
Data 3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0
Data 3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0
Data 3,3,3,3,0,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,3,3,3,3,3,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0
Data 3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0
Data 3,3,3,3,3,3,0,3,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0
Data 3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,0,3,3,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,3,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,0,0,0,0,1,1,1,0,0,0,0,0,3,0,0,0,0,7,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,0,0,0,0,7,0,1,0,0,0,0,3,0,0,0,0,0,1,0,0,0,0,8,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,0,0,0,0,1,9,1,0,0,0,0,3,0,0,0,0,0,1,0,0,0,0,8,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,1,9,9,8,8,8,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,1,1,1,1,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0
Data 2,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 2,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 2,2,3,3,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 2,2,2,3,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,0
Data 2,2,2,3,3,3,0,2,2,2,2,0,2,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0
Data 2,2,2,3,3,2,0,2,2,2,2,2,2,2,2,2,2,2,2,2,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0
Data 2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,0,0,3,3,0,0,3,3,3,3,0,0,0,0,0,0,0,0
Data 2,2,4,4,4,4,4,4,2,2,2,2,2,2,4,4,4,2,2,2,2,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0
Data 2,0,2,4,4,4,4,2,4,4,4,4,4,4,4,4,4,4,4,4,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0
Data 2,2,4,4,4,4,4,4,4,4,2,2,4,4,4,4,4,4,4,4,4,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3
Data 2,2,4,4,4,4,4,4,4,2,2,2,2,2,4,4,4,4,4,4,4,4,4,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3
</textarea><br><br>~GF <br><br></td></tr></table><br><table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pakz</td><td align="right"><font class=tiny>2016</font></td></tr></table></td></tr><tr ><td class="posttext"> Cool! <br><br></td></tr></table><br><table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>2016</font></td></tr></table></td></tr><tr ><td class="posttext"> @Pakz :<br><br>There's something wrong with the Level Editor. For some reason when you go and select your Tile then try to delete something, a hard-to-see black square also shows up on the bottom left of the screen somewhere within the other sprites until the mouse button is let go of.<br><br>There are a few weird collision glitches where the DARK BLUE water tiles have collision, &amp; when warping on some areas of the Map, I get stuck in a tree &amp; can't move... If the collision could be fixed, &amp; a way to detect that there's a tile blocking the map, I would be eternally greatful! That would be AWESOME!<br><br>Also, when moving North or South to the 2nd or 3rd map, the player jumps 10 tiles ahead when it should only be jumping one.<br><br>And perhaps use of a HUGE spritesheet would be lovely too! That way we can start actually seeing a REAL game! =D<br><br>Thank You!<br><br>~GF <br><br></td></tr></table><br><table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pakz</td><td align="right"><font class=tiny>2016</font></td></tr></table></td></tr><tr ><td class="posttext"> The original source (top one) is ok so isnt it?<br><br>I checked the editor and it appears to work just fine.<br><br>(I noticed the b3d version not having the draw background images being created) <br><br></td></tr></table><br><table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>2016</font></td></tr></table></td></tr><tr ><td class="posttext"> No, here's an image depicting the Level Editor problem :: <br><br><img src="https://i.imgsafe.org/c0881a3.png"><br><br>~GF <br><br></td></tr></table><br><table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>2016</font></td></tr></table></td></tr><tr ><td class="posttext"> This is the code that does what is depicted in the above even though after reading it &amp; fixing it up a bit time after time, it functions nearly identical to the Blitzmax code. Which means the Blitzmax code is flawed. After 10 checks at least, I'm pretty sure I did everything right.<br><br>2D RPG {Patched}_V.0.3.bb: <br><br>{ SMALL EDIT } :: Fixed the Map Teleporting when Teleporting from the left of a Map to the right of a previous or next Map! Instead of 10 Tiles to the left, it only warps to 1 tile to the left. Which is correct!<br><br>Edit is below : <br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Graphics3D ( 800, 600, 0, 2 )

Global editmode = False
Global edittile 

Global keys = 0
Global gold = 0
Global totalgold = 0

; map variables
Global mw = 40
Global mh = 30
Global tw = 32
Global th = 32

Global numlevels = 5

Dim map ( numlevels, mw, mh ) 

; player variables
Global pw = ( tw - 5 ) 
Global ph = ( th - 5 ) 
Global px =  GraphicsWidth ( ) / 2 - tw / 2
Global py = GraphicsHeight ( ) / 2 - th / 2

; scrolling variables
Global mx
Global my
Global msx = 0
Global msy

; For the multi map
;
; this is a mdimensional array
; the player location on the multi map
; is mcx ( map cursor x ) 
; it starts at 1, 1, the center of the 
; multidimensional array
;
Global mcx = 1
Global mcy = 1

Dim ml ( 3, 3 ) 

;corner maps  - 1 non existant
ml ( 0, 0 ) =  -1
ml ( 2, 0 ) =  -1
ml ( 0, 2 ) =  -1
ml ( 2, 2 ) =  -1

; the maps assigned
ml ( 1, 0 ) = 1
ml ( 1, 1 ) = 0
ml ( 2, 1 ) = 2
ml ( 1, 2 ) = 3
ml ( 0, 1 ) = 4

Global timer = CreateTimer ( 60 )

Global ti = MilliSecs ( )

readlevels ( ) 

	makemaps ( ) 

	;.mainloop
	While Not KeyDown ( 1 ) 
	
		Cls
	
			;key e
			If KeyHit ( 18 ) Then editmode = 1 - editmode
			
			;key space

			If ( KeyHit ( 57 ) ) Then savelevels ( )

				edit ( ) 
		
				If editmode = False
			
					For i = 0 To 4 ;speed of movement
			
						moveplayer ( )
			
							playeritemcollision ( )
				
							centermap ( )
			
						switchmap ( ) 
			
					Next
					
					drawmap ( ml ( mcx, mcy ), msx, msy ) 
		
						Color 51, 51, 255
						
						Rect 0, 0, GraphicsWidth ( ), 30, 0
						
					drawplayer ( )
	
					Color 0, 0, 0
	
						Text 1, 1, "Use cursors to move around"
				
							Text 1, 16, "cursor : " + mcx + ", " + mcy + " on map : " + ml ( mcx, mcy )
	
						Text 321, 1, "gold:" + gold + " of " + totalgold + "   keys:" + keys
			
					Text 321, 16, "Press e for edit mode"
			
					Color 240, 240, 150
			
						Text 0, 0, "Use cursors to move around"
				
							Text 0, 15, "cursor : " + mcx + ", " + mcy + " on map : " + ml ( mcx, mcy )
				
						Text 320, 0, "gold:" + gold + " of " + totalgold + "   keys:" + keys
			
					Text 320, 15, "Press e for edit mode"
			
				EndIf
	
			Flip 0
		
		WaitTimer timer
	
	Wend

End

Function drawmap ( level, xo, yo ) 

	For y = 0 To mh - 1

		For x = 0 To mw - 1

			a = map ( level, x, y ) 

			drawtile ( x, y, a, xo, yo ) 

		Next

	Next

End Function

Function edit ( ) 

	If editmode = True

		drawmap ( ml ( mcx, mcy ), msx, msy ) 
		
		Color 20, 20, 20		

		Rect 0, 0, GraphicsWidth ( ), 36

		For x = 0 To 10

			drawtile ( x, 0, x ) 

			If edittile = x

				Color 255, 0, 0

				Rect x * tw, y * th, 32, 32

			EndIf

			If RectsOverlap ( MouseX ( ), MouseY ( ), 1, 1, x * tw, 0, 32, 32 )

				Color 255, 255, 255

				Rect x * tw, 0, 32, 32

				Color 0, 0, 0

				Rect x * tw + 1, 1, 30, 30

				If MouseDown ( 1 ) = True Then edittile = x

			EndIf

		Next

		If RectsOverlap ( MouseX ( ), MouseY ( ), 1, 1, 0, 32, GraphicsWidth ( ), GraphicsHeight ( ) - 32 ) 

			x1 = ( MouseX ( ) - msx ) / tw

			y1 = ( MouseY ( ) - msy ) / th

			If MouseDown ( 1 ) = True

				map ( ml ( mcx, mcy ), x1, y1 ) = edittile

					updatemap x1, y1, edittile
				
				FlushMouse ( ) 

			EndIf

			Color 255, 255, 255

			Rect x1 * tw + msx, y1 * th + msy, 32, 32

			Color 0, 0, 0

			Rect x1 * tw + 1 + msx, y1 * th + 1 + msy, 30, 30

		EndIf

		If KeyDown ( 200 ) Then msy = msy + 3

			If KeyDown ( 208 ) Then msy = msy - 3
	
			If KeyDown ( 203 ) Then msx = msx + 3

		If KeyDown ( 205 ) Then msx = msx - 3

	EndIf

End Function

; here we check If the player is
; at a border And If he can go To another map
; And set the start positions
Function switchmap ( ) 

	; Touches the Left side of the Screen
	If px &lt; 5 And mcx &gt; 0 

		If ml ( mcx - 1, mcy ) &lt;&gt; -1

			mcx = mcx - 1

				;px = 630 - pw
				
				px = ( ( GraphicsWidth ( ) - 10 ) - pw )
	
					msx =  - ( mw * tw - GraphicsWidth ( ) )
	
				If py &lt; 1 Then py = py + 1

			If py + ph &gt; GraphicsHeight ( ) - 10 Then py = py - 10

		EndIf		

	EndIf

		; Touches the Top part of the Screen
		If py &lt; 4 And mcy &gt; 0 
	
			If ml ( mcx, mcy - 1 ) &lt;&gt; -1
	
				mcy = mcy - 1
					
					py = ( ( GraphicsHeight ( ) - 10 ) - ph )

						msy =  - ( mh * th - GraphicsHeight ( ) ) 
								
							If px &lt; 10 Then px = 10

						If py &lt; 0 Then py = 0
	
					If px + pw &gt; GraphicsWidth ( ) - 10 Then px = px - 10
				
				If py + ph &gt; GraphicsHeight ( ) - 1 Then py = py - 1
	
			EndIf
	
		EndIf
	
		; Touches the Right side of the Screen
		If px + pw &gt; GraphicsWidth ( ) - 4 And mcx &lt; 2
	
			If ml ( mcx + 1, mcy ) &lt;&gt; -1
	
				mcx = mcx + 1
	
					px = 10
		
						msx = 0
		
					If py &lt; 10 Then py = 10
	
				If py + ph &gt; GraphicsHeight ( ) - 10 Then py = py - 10
	
			EndIf
	
		EndIf

	; Touches the bottom of the Screen
	If py + ph &gt; GraphicsHeight ( ) - 5 And mcy &lt; 2

		If ml ( mcx, mcy + 1 ) &lt;&gt; -1

			mcy = mcy + 1

				py = 10
	
					msy = 0
	
				If px &lt; 10 Then px = px + 10

			If px + pw &gt; GraphicsWidth ( ) - 10 Then px = px - 10

		EndIf

	EndIf

End Function

Function centermap ( ) 

	If px &lt; GraphicsWidth ( ) / 3 And Abs ( msx ) &gt; 0 Then msx = msx + 1 : px = px + 1

		If py &lt; GraphicsHeight ( ) / 3 And Abs ( msy ) &gt; 0 Then msy = msy + 1 : py = py + 1
	
		If px &gt; GraphicsWidth ( ) / 100 * 66
	
			If ( Abs ( msx ) + GraphicsWidth ( ) ) &lt; mw * tw Then msx = msx - 1 : px = px - 1
	
		EndIf

	If py &gt; GraphicsHeight ( ) / 100 * 66

		If ( Abs ( msy ) + GraphicsHeight ( ) ) &lt; mh * th Then msy = msy - 1 : py = py - 1

	EndIf

End Function

Function moveplayer ( ) 

	Local x = 0
	
		Local y = 0
		
			If MilliSecs ( ) &gt; ti - 100

				If KeyDown ( 200 ) Then y = y - 1
		
					If KeyDown ( 208 ) Then y = y + 1
			
					If KeyDown ( 203 ) Then x = x - 1
				
				If KeyDown ( 205 ) Then x = x + 1
				
				ti = MilliSecs ( )
						
			EndIf
					
			If px + x &lt; 0 Then x = 0
				
				If px + pw + x &gt; GraphicsWidth ( ) Then x = 0
			
				If py + y &lt; 0 Then y = 0
		
			If py + ph + y &gt; GraphicsHeight ( ) Then y = 0
	
		Local collide = playermapcollision ( ( px + Abs ( msx ) ) + x, py + Abs ( msy ) ) 
	
		If collide = 0
	
			px = px + x
	
		ElseIf collide = 2 And Rand ( 0, 100 ) &lt; 40
	
			px = px + x
	
		EndIf

	collide = playermapcollision ( px + Abs ( msx ), py + Abs ( msy ) + y ) 

	If collide = 0

		py = py + y

	ElseIf collide = 2 And Rand ( 0, 100 ) &lt; 40

		py = py + y

	EndIf

End Function

Function playermapcollision ( x1, y1 ) 

	Local cx = x1 / tw

		Local cy = y1 / th
	
			For y2 = cy - 1 To cy + 1
		
				For x2 = cx - 1 To cx + 1	
		
					If x2 &gt;= 0 And x2 &lt; mw And y2 &gt;= 0 And y2 &lt; mh
		
						mt = map ( ml ( mcx, mcy ), x2, y2 ) 
		
						; Is the Map around the Player a Block?
						If mt = 1 Or mt = 2 Or mt = 3 Or mt = 4 Or mt = 7
		
							If RectsOverlap ( x2 * tw, y2 * th, tw, th, x1, y1, pw, ph ) 
		
								; Here the Player is inside a Wall
		
									; A value 1 on the Map
		
								Return mt
		
							EndIf
		
						EndIf
		
					EndIf
		
				Next
		
			Next

		; No Collision Occured

	Return 0

End Function

Function playeritemcollision ( ) 

	Local cx = ( px + Abs ( msx ) ) / tw

	Local cy = ( py + Abs ( msy ) ) / th

	For y2 = cy - 1 To cy + 1

		For x2 = cx - 1 To cx + 1

			If x2 &gt;= 0 And x2 &lt; mw And y2 &gt;= 0 And y2 &lt; mh

				; Collision with Coin

					; Is the Map around the Player a 9 value?

				If map ( ml ( mcx, mcy ), x2, y2 ) = 9

					If RectsOverlap ( x2 * tw + 8, y2 * th + 8, tw - 16, th - 16, px + Abs ( msx ), py + Abs ( msy ), pw, ph ) 

						; Here the player touches a map item ( 9 ) 

							; We remove it from the map

						gold = gold + 1

							map ( ml ( mcx, mcy ), x2, y2 ) = 0

						updatemap ( x2, y2, 0 ) 

					EndIf

				EndIf
				
					; Collision with Key

						; Is the Map around the Player an 8 value?
	
					If map ( ml ( mcx, mcy ), x2, y2 ) = 8
	
						If RectsOverlap ( x2 * tw + 8, y2 * th + 8, tw - 16, th - 16, px + Abs ( msx ), py + Abs ( msy ), pw, ph )
	
							; Here the player touches a map item ( 9 ) 

								; We remove it from the map
	
									keys = keys + 1
	
								map ( ml ( mcx, mcy ), x2, y2 ) = 0
	
							updatemap ( x2, y2, 0 ) 
	
						EndIf
	
					EndIf
				
				; Collision with Door

					; Is the Map around the Player a 7 value?

				If map ( ml ( mcx, mcy ), x2, y2 ) = 7

					If RectsOverlap ( x2 * tw - 1, y2 * th - 1, tw + 2, th + 2, px + Abs ( msx ), py + Abs ( msy ), pw, ph )

				 		If keys &gt; 0

							; Here the Player touches a map item ( 9 ) 

								; We remove it from the map
	
									keys = keys - 1

								map ( ml ( mcx, mcy ), x2, y2 ) = 0

							updatemap ( x2, y2, 0 )
							
						Else
						
							keys = 0

						EndIf

					EndIf

				EndIf
	
			EndIf

		Next

	Next

End Function

Function updatemap ( x, y, t ) 

	drawtile ( x, y, t ) 

End Function

Function drawplayer ( ) 

	Color 0, 0, 255

	Oval px, py, pw, ph

End Function

Function makemaps ( ) 

	For i = 0 To numlevels - 1

		For y = 0 To mh - 1

			For x = 0 To mw - 1

				a = map ( i, x, y ) 

				drawtile ( x, y, a ) 

			Next

		Next

	Next

End Function

Function drawtile ( x, y, t, xo = 0, yo = 0 ) 

	Select t

		;Nothing
		Case 0

			Color 0, 0, 0

			Rect x * tw + xo, y * th + yo, tw, th

		;Wall

		Case 1

			Color 255, 255, 255

			Rect x * tw + xo, y * th + yo, tw, th

		;Water

		Case 2

			Color 30, 140, 255

			Rect x * tw + xo, y * th + yo, tw, th

		;Tree

		Case 3

			Color 0, 255, 0

				x1 = x * tw + xo
	
					y1 = y * th + yo
		
					Line x1 + tw / 2, y1, x1 + tw, y1 + th
	
				Line x1 + tw, y1 + th - 1, x1, y1 + th - 1

			Line x1, y1 + th, x1 + tw / 2, y1

		;Deep Water

		Case 4

			Color 30, 100, 245

			Rect x * tw + xo, y * th + yo, tw, th

		; Door

		Case 7

			Color 150, 150, 150

			Rect x * tw + xo, y * th + yo, tw, th

		; Key

		Case 8

			Color 180, 120, 00
	
				Oval x * tw + 2 + xo, y * th + 2 + yo, tw - 4, th - 4
		
				Color 255, 255, 255
	
			Text x * tw + ( tw / 3.0 ) + xo, y * th + ( th / 3.4 ) + yo, "K"

		; Gold

		Case 9

			Color 230, 200, 0
	
			Oval ( x * tw + 2 ) + xo, ( y * th + 2 ) + yo, tw - 4, th - 4

	End Select

End Function

Function readlevels ( ) 

	Print numlevels

	For i = 0 To numlevels - 1

		For y = 0 To mh - 1

			For x = 0 To mw - 1

				Read a

					map ( i, x, y ) = a

				If a = 9 Then totalgold = totalgold + 1

			Next

		Next

	Next

End Function

Function savelevels ( fi$ = "save.dat" ) 

	If FileType ( fi$ ) &lt;&gt; 0 Then DeleteFile ( fi$ )

		save_file = WriteFile ( fi$ )

			For i = 0 To numlevels - 1

				For y = 0 To mh - 1
		
					For x = 0 To mw - 1
		
						Read a
		
							map ( i, x, y ) = a
		
						WriteLine ( save_file, map ( i, x, y ) )
		
					Next
		
				Next
		
			Next
		
		CloseFile ( save_file )

	Return False

End Function

.level1
Data 0,0,0,0,0,0,0,0,0,0,0,0,2,2,4,2,2,2,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1
Data 0,0,0,0,0,0,0,2,2,2,2,2,4,4,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1
Data 0,0,0,0,0,0,2,4,4,4,4,4,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1
Data 0,0,0,0,0,2,4,4,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1
Data 0,0,0,2,2,4,4,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,8,0,1,1,1,1,1,1,1
Data 2,2,2,4,4,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,1,1,1,1,1,1,1
Data 4,4,4,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,1,0,1,1,1,1,1
Data 2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0,0,1,1,1,1,1
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,1,0,1,1,1
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,1,1,1,1
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,3,3,0,0,0,1,1,1,1
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0
Data 0,0,0,1,1,1,1,1,1,1,0,0,0,0,1,9,9,9,1,0,0,0,0,3,3,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0
Data 0,0,0,1,0,0,0,9,9,1,0,0,0,0,1,9,9,9,1,0,0,0,0,3,3,3,0,0,0,0,3,3,3,3,3,0,0,0,0,0
Data 0,0,0,1,0,0,0,0,0,1,0,0,0,0,1,0,0,0,1,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,1,0,0,0,0,0,1,0,0,0,0,1,0,0,0,1,0,0,0,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,1,0,0,0,0,0,1,0,0,1,1,1,1,1,7,1,0,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,1,0,0,0,0,0,7,0,0,7,0,0,0,0,0,1,0,0,0,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,0,0,0,0,0
Data 0,0,0,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,8,2,2,4,4,2,2,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,4,4,4,2,0,2,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,4,4,2,2,2,2,2,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,2,2,4,2,2,2,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,2,2,2,2,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,2,2,0,0,0,0,0,0,3,3,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3
Data 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3
Data 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3

.level2
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1
Data 0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1
Data 0,0,1,0,9,9,1,0,0,0,3,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1
Data 0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1
Data 0,0,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1
Data 0,0,1,1,7,1,0,0,0,0,0,0,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1
Data 0,0,0,0,0,0,0,0,0,0,2,2,2,4,4,2,2,0,0,0,2,2,2,2,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1
Data 0,0,0,0,0,0,0,0,0,2,2,4,2,2,2,2,2,0,0,0,2,2,2,2,0,0,0,0,3,0,0,0,0,0,0,1,1,1,1,1
Data 0,0,0,0,0,0,0,0,2,2,4,2,2,0,0,0,0,0,0,0,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0
Data 0,0,0,0,0,2,2,2,2,2,2,2,0,0,0,0,0,0,0,0,2,2,0,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,2,4,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,2,4,4,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,2,2,4,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,2,2,2,2,2,0,0,0,0,0,3,3,3,0,0,0
Data 0,0,0,0,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,4,2,2,2,2,0,0,0,0,0,0,3,3,0,0
Data 0,0,0,2,4,4,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,4,4,4,4,2,0,2,0,0,0,0,0,0,3,0,0
Data 0,0,0,2,4,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,4,4,4,4,2,2,2,0,0,0,0,0,0,0,0
Data 0,0,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,2,2,4,2,2,2,0,2,0,0,0,0,0,0,0,0
Data 0,2,2,2,2,8,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,2,2,2,2,0,2,2,2,0,0,0,0,0,0,0,0,0
Data 2,2,2,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0
Data 2,2,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0
Data 2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
Data 0,0,0,3,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,1,1
Data 0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,0,1,1,1,1,1
Data 0,0,0,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1

.level3
Data 3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3
Data 3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3
Data 3,3,3,3,3,3,0,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,3,3,3
Data 3,3,3,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,3,3,3,0,3,3,3,0,3,3,0,0,0,0,0,0,0,3,3,3
Data 3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,3,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,3,3,3
Data 3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,0,3,3,3
Data 3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,4,4,4,2,0,3,3,3
Data 3,8,0,0,0,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,0,3,3,3
Data 3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,3,3
Data 3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 0,0,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,3,3
Data 0,0,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,1,7,1,1,1,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,9,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,1,9,9,9,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0,0,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,3,3,0,0,0,0,0,3
Data 0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,0,0,0,0,0,0,0,3
Data 0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3
Data 0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,3,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 3,3,3,0,0,0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,3,3
Data 3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3

.level4
Data 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3
Data 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3
Data 3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3
Data 3,0,0,1,1,1,7,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3
Data 3,0,0,1,9,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 3,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,7,1,1,1,1,0,0,3
Data 3,0,0,1,0,0,0,0,0,0,0,9,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,9,1,0,0,3
Data 3,0,0,1,0,0,0,1,1,1,1,1,1,7,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,9,1,0,0,3
Data 3,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,3
Data 3,0,0,1,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,3
Data 3,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,7,1,1,1,1,0,0,3
Data 3,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 3,0,0,1,0,0,1,0,0,1,0,0,0,0,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3
Data 3,0,0,7,0,0,1,1,1,1,0,0,0,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3
Data 3,0,0,1,0,0,1,0,0,0,0,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3
Data 3,0,0,1,0,9,1,0,0,0,3,3,3,3,3,3,3,8,0,0,0,3,3,3,0,3,0,0,0,0,0,0,3,3,3,3,3,3,3,3
Data 3,0,0,1,1,1,1,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,3,3,8,3,3,3,3,3
Data 3,0,0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,3,3,3,3,3
Data 3,0,0,0,0,0,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0,0,3,3,3,3,3
Data 3,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,3,0,0,0,0,0,0,0,0,3,0,3,3
Data 3,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 3,3,0,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3
Data 3,3,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3
Data 3,3,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3
Data 3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3
Data 3,3,3,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0,2,2,2,2
Data 3,3,3,0,0,0,0,0,2,2,2,2,2,2,0,2,2,2,2,2,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2
Data 2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2

.level5
Data 3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0
Data 3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0
Data 3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0
Data 3,3,3,3,0,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,3,3,3,3,3,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0
Data 3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0
Data 3,3,3,3,3,3,0,3,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0
Data 3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,0,3,3,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,3,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,0,0,0,0,1,1,1,0,0,0,0,0,3,0,0,0,0,7,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,0,0,0,0,7,0,1,0,0,0,0,3,0,0,0,0,0,1,0,0,0,0,8,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,0,0,0,0,1,9,1,0,0,0,0,3,0,0,0,0,0,1,0,0,0,0,8,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,1,9,9,8,8,8,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,1,1,1,1,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0
Data 2,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 2,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 2,2,3,3,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 2,2,2,3,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,0
Data 2,2,2,3,3,3,0,2,2,2,2,0,2,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0
Data 2,2,2,3,3,2,0,2,2,2,2,2,2,2,2,2,2,2,2,2,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0
Data 2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,0,0,3,3,0,0,3,3,3,3,0,0,0,0,0,0,0,0
Data 2,2,4,4,4,4,4,4,2,2,2,2,2,2,4,4,4,2,2,2,2,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0
Data 2,0,2,4,4,4,4,2,4,4,4,4,4,4,4,4,4,4,4,4,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0
Data 2,2,4,4,4,4,4,4,4,4,2,2,4,4,4,4,4,4,4,4,4,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3
Data 2,2,4,4,4,4,4,4,4,2,2,2,2,2,4,4,4,4,4,4,4,4,4,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3
</textarea><br><br>Thank You!<br><br>~GF <br><br></td></tr></table><br><table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>2016</font></td></tr></table></td></tr><tr ><td class="posttext"> Since the forum had an Internal Server Error when I tried to update my above post, I'm going to have to post it here til' this issue is resolved :: <br><br>This is the code that does what is depicted in the above even though after reading it &amp; fixing it up a bit time after time, it functions nearly identical to the Blitzmax code. Which means the Blitzmax code is flawed. After 10 checks at least, I'm pretty sure I did everything right.<br><br>{ SMALL EDIT } :: Fixed the Map Teleporting when Teleporting from the left of a Map to the right of a previous or next Map! Instead of 10 Tiles to the left, it only warps to 1 tile to the left. Which is correct!<br><br>Also, that Red Tile should stand for Lava &amp; kill the Player / game over / restart the game. It is currently not usable. =/<br><br>Edit is below : <br><br>2D RPG {Patched}_V.0.3.bb:<br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Graphics3D ( 800, 600, 0, 2 )

Global editmode = False
Global edittile 

Global keys = 0
Global gold = 0
Global totalgold = 0

; map variables
Global mw = 40
Global mh = 30
Global tw = 32
Global th = 32

Global numlevels = 5

Dim map ( numlevels, mw, mh ) 

; player variables
Global pw = ( tw - 5 ) 
Global ph = ( th - 5 ) 
Global px =  GraphicsWidth ( ) / 2 - tw / 2
Global py = GraphicsHeight ( ) / 2 - th / 2

; scrolling variables
Global mx
Global my
Global msx = 0
Global msy

; For the multi map
;
; this is a mdimensional array
; the player location on the multi map
; is mcx ( map cursor x ) 
; it starts at 1, 1, the center of the 
; multidimensional array
;
Global mcx = 1
Global mcy = 1

Dim ml ( 3, 3 ) 

;corner maps  - 1 non existant
ml ( 0, 0 ) =  -1
ml ( 2, 0 ) =  -1
ml ( 0, 2 ) =  -1
ml ( 2, 2 ) =  -1

; the maps assigned
ml ( 1, 0 ) = 1
ml ( 1, 1 ) = 0
ml ( 2, 1 ) = 2
ml ( 1, 2 ) = 3
ml ( 0, 1 ) = 4

Global timer = CreateTimer ( 60 )

Global ti = MilliSecs ( )

readlevels ( ) 

	makemaps ( ) 

	;.mainloop
	While Not KeyDown ( 1 ) 
	
		Cls
	
			;key e
			If KeyHit ( 18 ) Then editmode = 1 - editmode
			
			;key space

			If ( KeyHit ( 57 ) ) Then savelevels ( )

				edit ( ) 
		
				If editmode = False
			
					For i = 0 To 4 ;speed of movement
			
						moveplayer ( )
			
							playeritemcollision ( )
				
							centermap ( )
			
						switchmap ( ) 
			
					Next
					
					drawmap ( ml ( mcx, mcy ), msx, msy ) 
		
						Color 51, 51, 255
						
						Rect 0, 0, GraphicsWidth ( ), 30, 0
						
					drawplayer ( )
	
					Color 0, 0, 0
	
						Text 1, 1, "Use cursors to move around"
				
							Text 1, 16, "cursor : " + mcx + ", " + mcy + " on map : " + ml ( mcx, mcy )
	
						Text 321, 1, "gold:" + gold + " of " + totalgold + "   keys:" + keys
			
					Text 321, 16, "Press e for edit mode"
			
					Color 240, 240, 150
			
						Text 0, 0, "Use cursors to move around"
				
							Text 0, 15, "cursor : " + mcx + ", " + mcy + " on map : " + ml ( mcx, mcy )
				
						Text 320, 0, "gold:" + gold + " of " + totalgold + "   keys:" + keys
			
					Text 320, 15, "Press e for edit mode"
			
				EndIf
	
			Flip 0
		
		WaitTimer timer
	
	Wend

End

Function drawmap ( level, xo, yo ) 

	For y = 0 To mh - 1

		For x = 0 To mw - 1

			a = map ( level, x, y ) 

			drawtile ( x, y, a, xo, yo ) 

		Next

	Next

End Function

Function edit ( ) 

	If editmode = True

		drawmap ( ml ( mcx, mcy ), msx, msy ) 
		
		Color 20, 20, 20		

		Rect 0, 0, GraphicsWidth ( ), 36

		For x = 0 To 10

			drawtile ( x, 0, x ) 

			If edittile = x

				Color 255, 0, 0

				Rect x * tw, y * th, 32, 32

			EndIf

			If RectsOverlap ( MouseX ( ), MouseY ( ), 1, 1, x * tw, 0, 32, 32 )

				Color 255, 255, 255

				Rect x * tw, 0, 32, 32

				Color 0, 0, 0

				Rect x * tw + 1, 1, 30, 30

				If MouseDown ( 1 ) = True Then edittile = x

			EndIf

		Next

		If RectsOverlap ( MouseX ( ), MouseY ( ), 1, 1, 0, 32, GraphicsWidth ( ), GraphicsHeight ( ) - 32 ) 

			x1 = ( MouseX ( ) - msx ) / tw

			y1 = ( MouseY ( ) - msy ) / th

			If MouseDown ( 1 ) = True

				map ( ml ( mcx, mcy ), x1, y1 ) = edittile

					updatemap x1, y1, edittile
				
				FlushMouse ( ) 

			EndIf

			Color 255, 255, 255

			Rect x1 * tw + msx, y1 * th + msy, 32, 32

			Color 0, 0, 0

			Rect x1 * tw + 1 + msx, y1 * th + 1 + msy, 30, 30

		EndIf

		If KeyDown ( 200 ) Then msy = msy + 3

			If KeyDown ( 208 ) Then msy = msy - 3
	
			If KeyDown ( 203 ) Then msx = msx + 3

		If KeyDown ( 205 ) Then msx = msx - 3

	EndIf

End Function

; here we check If the player is
; at a border And If he can go To another map
; And set the start positions
Function switchmap ( ) 

	; Touches the Left side of the Screen
	If px &lt; 5 And mcx &gt; 0 

		If ml ( mcx - 1, mcy ) &lt;&gt; -1

			mcx = mcx - 1

				;px = 630 - pw
				
				px = ( ( GraphicsWidth ( ) - 10 ) - pw )
	
					msx =  - ( mw * tw - GraphicsWidth ( ) )
	
				If py &lt; 1 Then py = py + 1

			If py + ph &gt; GraphicsHeight ( ) - 10 Then py = py - 10

		EndIf		

	EndIf

		; Touches the Top part of the Screen
		If py &lt; 4 And mcy &gt; 0 
	
			If ml ( mcx, mcy - 1 ) &lt;&gt; -1
	
				mcy = mcy - 1
					
					py = ( ( GraphicsHeight ( ) - 10 ) - ph )

						msy =  - ( mh * th - GraphicsHeight ( ) ) 
								
							If px &lt; 10 Then px = 10

						If py &lt; 0 Then py = 0
	
					If px + pw &gt; GraphicsWidth ( ) - 10 Then px = px - 10
				
				If py + ph &gt; GraphicsHeight ( ) - 1 Then py = py - 1
	
			EndIf
	
		EndIf
	
		; Touches the Right side of the Screen
		If px + pw &gt; GraphicsWidth ( ) - 4 And mcx &lt; 2
	
			If ml ( mcx + 1, mcy ) &lt;&gt; -1
	
				mcx = mcx + 1
	
					px = 10
		
						msx = 0
		
					If py &lt; 10 Then py = 10
	
				If py + ph &gt; GraphicsHeight ( ) - 10 Then py = py - 10
	
			EndIf
	
		EndIf

	; Touches the bottom of the Screen
	If py + ph &gt; GraphicsHeight ( ) - 5 And mcy &lt; 2

		If ml ( mcx, mcy + 1 ) &lt;&gt; -1

			mcy = mcy + 1

				py = 10
	
					msy = 0
	
				If px &lt; 10 Then px = px + 10

			If px + pw &gt; GraphicsWidth ( ) - 10 Then px = px - 10

		EndIf

	EndIf

End Function

Function centermap ( ) 

	If px &lt; GraphicsWidth ( ) / 3 And Abs ( msx ) &gt; 0 Then msx = msx + 1 : px = px + 1

		If py &lt; GraphicsHeight ( ) / 3 And Abs ( msy ) &gt; 0 Then msy = msy + 1 : py = py + 1
	
		If px &gt; GraphicsWidth ( ) / 100 * 66
	
			If ( Abs ( msx ) + GraphicsWidth ( ) ) &lt; mw * tw Then msx = msx - 1 : px = px - 1
	
		EndIf

	If py &gt; GraphicsHeight ( ) / 100 * 66

		If ( Abs ( msy ) + GraphicsHeight ( ) ) &lt; mh * th Then msy = msy - 1 : py = py - 1

	EndIf

End Function

Function moveplayer ( ) 

	Local x = 0
	
		Local y = 0
		
			If MilliSecs ( ) &gt; ti - 100

				If KeyDown ( 200 ) Then y = y - 1
		
					If KeyDown ( 208 ) Then y = y + 1
			
					If KeyDown ( 203 ) Then x = x - 1
				
				If KeyDown ( 205 ) Then x = x + 1
				
				ti = MilliSecs ( )
						
			EndIf
					
			If px + x &lt; 0 Then x = 0
				
				If px + pw + x &gt; GraphicsWidth ( ) Then x = 0
			
				If py + y &lt; 0 Then y = 0
		
			If py + ph + y &gt; GraphicsHeight ( ) Then y = 0
	
		Local collide = playermapcollision ( ( px + Abs ( msx ) ) + x, py + Abs ( msy ) ) 
	
		If collide = 0
	
			px = px + x
	
		ElseIf collide = 2 And Rand ( 0, 100 ) &lt; 40
	
			px = px + x
	
		EndIf

	collide = playermapcollision ( px + Abs ( msx ), py + Abs ( msy ) + y ) 

	If collide = 0

		py = py + y

	ElseIf collide = 2 And Rand ( 0, 100 ) &lt; 40

		py = py + y

	EndIf

End Function

Function playermapcollision ( x1, y1 ) 

	Local cx = x1 / tw

		Local cy = y1 / th
	
			For y2 = cy - 1 To cy + 1
		
				For x2 = cx - 1 To cx + 1	
		
					If x2 &gt;= 0 And x2 &lt; mw And y2 &gt;= 0 And y2 &lt; mh
		
						mt = map ( ml ( mcx, mcy ), x2, y2 ) 
		
						; Is the Map around the Player a Block?
						If mt = 1 Or mt = 2 Or mt = 3 Or mt = 4 Or mt = 7
		
							If RectsOverlap ( x2 * tw, y2 * th, tw, th, x1, y1, pw, ph ) 
		
								; Here the Player is inside a Wall
		
									; A value 1 on the Map
		
								Return mt
		
							EndIf
		
						EndIf
		
					EndIf
		
				Next
		
			Next

		; No Collision Occured

	Return 0

End Function

Function playeritemcollision ( ) 

	Local cx = ( px + Abs ( msx ) ) / tw

	Local cy = ( py + Abs ( msy ) ) / th

	For y2 = cy - 1 To cy + 1

		For x2 = cx - 1 To cx + 1

			If x2 &gt;= 0 And x2 &lt; mw And y2 &gt;= 0 And y2 &lt; mh

				; Collision with Coin

					; Is the Map around the Player a 9 value?

				If map ( ml ( mcx, mcy ), x2, y2 ) = 9

					If RectsOverlap ( x2 * tw + 8, y2 * th + 8, tw - 16, th - 16, px + Abs ( msx ), py + Abs ( msy ), pw, ph ) 

						; Here the player touches a map item ( 9 ) 

							; We remove it from the map

						gold = gold + 1

							map ( ml ( mcx, mcy ), x2, y2 ) = 0

						updatemap ( x2, y2, 0 ) 

					EndIf

				EndIf
				
					; Collision with Key

						; Is the Map around the Player an 8 value?
	
					If map ( ml ( mcx, mcy ), x2, y2 ) = 8
	
						If RectsOverlap ( x2 * tw + 8, y2 * th + 8, tw - 16, th - 16, px + Abs ( msx ), py + Abs ( msy ), pw, ph )
	
							; Here the player touches a map item ( 9 ) 

								; We remove it from the map
	
									keys = keys + 1
	
								map ( ml ( mcx, mcy ), x2, y2 ) = 0
	
							updatemap ( x2, y2, 0 ) 
	
						EndIf
	
					EndIf
				
				; Collision with Door

					; Is the Map around the Player a 7 value?

				If map ( ml ( mcx, mcy ), x2, y2 ) = 7

					If RectsOverlap ( x2 * tw - 1, y2 * th - 1, tw + 2, th + 2, px + Abs ( msx ), py + Abs ( msy ), pw, ph )

				 		If keys &gt; 0

							; Here the Player touches a map item ( 9 ) 

								; We remove it from the map
	
									keys = keys - 1

								map ( ml ( mcx, mcy ), x2, y2 ) = 0

							updatemap ( x2, y2, 0 )
							
						Else
						
							keys = 0

						EndIf

					EndIf

				EndIf
	
			EndIf

		Next

	Next

End Function

Function updatemap ( x, y, t ) 

	drawtile ( x, y, t ) 

End Function

Function drawplayer ( ) 

	Color 0, 0, 255

	Oval px, py, pw, ph

End Function

Function makemaps ( ) 

	For i = 0 To numlevels - 1

		For y = 0 To mh - 1

			For x = 0 To mw - 1

				a = map ( i, x, y ) 

				drawtile ( x, y, a ) 

			Next

		Next

	Next

End Function

Function drawtile ( x, y, t, xo = 0, yo = 0 ) 

	Select t

		;Nothing
		Case 0

			Color 0, 0, 0

			Rect x * tw + xo, y * th + yo, tw, th

		;Wall

		Case 1

			Color 255, 255, 255

			Rect x * tw + xo, y * th + yo, tw, th

		;Water

		Case 2

			Color 30, 140, 255

			Rect x * tw + xo, y * th + yo, tw, th

		;Tree

		Case 3

			Color 0, 255, 0

				x1 = x * tw + xo
	
					y1 = y * th + yo
		
					Line x1 + tw / 2, y1, x1 + tw, y1 + th
	
				Line x1 + tw, y1 + th - 1, x1, y1 + th - 1

			Line x1, y1 + th, x1 + tw / 2, y1

		;Deep Water

		Case 4

			Color 30, 100, 245

			Rect x * tw + xo, y * th + yo, tw, th

		; Door

		Case 7

			Color 150, 150, 150

			Rect x * tw + xo, y * th + yo, tw, th

		; Key

		Case 8

			Color 180, 120, 00
	
				Oval x * tw + 2 + xo, y * th + 2 + yo, tw - 4, th - 4
		
				Color 255, 255, 255
	
			Text x * tw + ( tw / 3.0 ) + xo, y * th + ( th / 3.4 ) + yo, "K"

		; Gold

		Case 9

			Color 230, 200, 0
	
			Oval ( x * tw + 2 ) + xo, ( y * th + 2 ) + yo, tw - 4, th - 4

	End Select

End Function

Function readlevels ( ) 

	Print numlevels

	For i = 0 To numlevels - 1

		For y = 0 To mh - 1

			For x = 0 To mw - 1

				Read a

					map ( i, x, y ) = a

				If a = 9 Then totalgold = totalgold + 1

			Next

		Next

	Next

End Function

Function savelevels ( fi$ = "save.dat" ) 

	If FileType ( fi$ ) &lt;&gt; 0 Then DeleteFile ( fi$ )

		save_file = WriteFile ( fi$ )

			For i = 0 To numlevels - 1

				For y = 0 To mh - 1
		
					For x = 0 To mw - 1
		
						Read a
		
							map ( i, x, y ) = a
		
						WriteLine ( save_file, map ( i, x, y ) )
		
					Next
		
				Next
		
			Next
		
		CloseFile ( save_file )

	Return False

End Function

.level1
Data 0,0,0,0,0,0,0,0,0,0,0,0,2,2,4,2,2,2,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1
Data 0,0,0,0,0,0,0,2,2,2,2,2,4,4,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1
Data 0,0,0,0,0,0,2,4,4,4,4,4,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1
Data 0,0,0,0,0,2,4,4,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1
Data 0,0,0,2,2,4,4,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,8,0,1,1,1,1,1,1,1
Data 2,2,2,4,4,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,1,1,1,1,1,1,1
Data 4,4,4,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,1,0,1,1,1,1,1
Data 2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0,0,1,1,1,1,1
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,1,0,1,1,1
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,1,1,1,1
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,3,3,0,0,0,1,1,1,1
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0
Data 0,0,0,1,1,1,1,1,1,1,0,0,0,0,1,9,9,9,1,0,0,0,0,3,3,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0
Data 0,0,0,1,0,0,0,9,9,1,0,0,0,0,1,9,9,9,1,0,0,0,0,3,3,3,0,0,0,0,3,3,3,3,3,0,0,0,0,0
Data 0,0,0,1,0,0,0,0,0,1,0,0,0,0,1,0,0,0,1,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,1,0,0,0,0,0,1,0,0,0,0,1,0,0,0,1,0,0,0,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,1,0,0,0,0,0,1,0,0,1,1,1,1,1,7,1,0,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,1,0,0,0,0,0,7,0,0,7,0,0,0,0,0,1,0,0,0,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,0,0,0,0,0
Data 0,0,0,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,8,2,2,4,4,2,2,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,4,4,4,2,0,2,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,4,4,2,2,2,2,2,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,2,2,4,2,2,2,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,2,2,2,2,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,2,2,0,0,0,0,0,0,3,3,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3
Data 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3
Data 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3

.level2
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1
Data 0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1
Data 0,0,1,0,9,9,1,0,0,0,3,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1
Data 0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1
Data 0,0,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1
Data 0,0,1,1,7,1,0,0,0,0,0,0,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1
Data 0,0,0,0,0,0,0,0,0,0,2,2,2,4,4,2,2,0,0,0,2,2,2,2,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1
Data 0,0,0,0,0,0,0,0,0,2,2,4,2,2,2,2,2,0,0,0,2,2,2,2,0,0,0,0,3,0,0,0,0,0,0,1,1,1,1,1
Data 0,0,0,0,0,0,0,0,2,2,4,2,2,0,0,0,0,0,0,0,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0
Data 0,0,0,0,0,2,2,2,2,2,2,2,0,0,0,0,0,0,0,0,2,2,0,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,2,4,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,2,4,4,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,2,2,4,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,2,2,2,2,2,0,0,0,0,0,3,3,3,0,0,0
Data 0,0,0,0,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,4,2,2,2,2,0,0,0,0,0,0,3,3,0,0
Data 0,0,0,2,4,4,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,4,4,4,4,2,0,2,0,0,0,0,0,0,3,0,0
Data 0,0,0,2,4,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,4,4,4,4,2,2,2,0,0,0,0,0,0,0,0
Data 0,0,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,2,2,4,2,2,2,0,2,0,0,0,0,0,0,0,0
Data 0,2,2,2,2,8,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,2,2,2,2,0,2,2,2,0,0,0,0,0,0,0,0,0
Data 2,2,2,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0
Data 2,2,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0
Data 2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
Data 0,0,0,3,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,1,1
Data 0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,0,1,1,1,1,1
Data 0,0,0,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1

.level3
Data 3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3
Data 3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3
Data 3,3,3,3,3,3,0,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,3,3,3
Data 3,3,3,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,3,3,3,0,3,3,3,0,3,3,0,0,0,0,0,0,0,3,3,3
Data 3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,3,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,3,3,3
Data 3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,0,3,3,3
Data 3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,4,4,4,2,0,3,3,3
Data 3,8,0,0,0,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,0,3,3,3
Data 3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,3,3
Data 3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 0,0,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,3,3
Data 0,0,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,1,7,1,1,1,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,9,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,1,9,9,9,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0,0,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,3,3,0,0,0,0,0,3
Data 0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,0,0,0,0,0,0,0,3
Data 0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3
Data 0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,3,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 3,3,3,0,0,0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,3,3
Data 3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3

.level4
Data 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3
Data 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3
Data 3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3
Data 3,0,0,1,1,1,7,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3
Data 3,0,0,1,9,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 3,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,7,1,1,1,1,0,0,3
Data 3,0,0,1,0,0,0,0,0,0,0,9,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,9,1,0,0,3
Data 3,0,0,1,0,0,0,1,1,1,1,1,1,7,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,9,1,0,0,3
Data 3,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,3
Data 3,0,0,1,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,3
Data 3,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,7,1,1,1,1,0,0,3
Data 3,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 3,0,0,1,0,0,1,0,0,1,0,0,0,0,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3
Data 3,0,0,7,0,0,1,1,1,1,0,0,0,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3
Data 3,0,0,1,0,0,1,0,0,0,0,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3
Data 3,0,0,1,0,9,1,0,0,0,3,3,3,3,3,3,3,8,0,0,0,3,3,3,0,3,0,0,0,0,0,0,3,3,3,3,3,3,3,3
Data 3,0,0,1,1,1,1,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,3,3,8,3,3,3,3,3
Data 3,0,0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,3,3,3,3,3
Data 3,0,0,0,0,0,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0,0,3,3,3,3,3
Data 3,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,3,0,0,0,0,0,0,0,0,3,0,3,3
Data 3,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 3,3,0,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3
Data 3,3,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3
Data 3,3,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3
Data 3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3
Data 3,3,3,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0,2,2,2,2
Data 3,3,3,0,0,0,0,0,2,2,2,2,2,2,0,2,2,2,2,2,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2
Data 2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2

.level5
Data 3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0
Data 3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0
Data 3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0
Data 3,3,3,3,0,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,3,3,3,3,3,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0
Data 3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0
Data 3,3,3,3,3,3,0,3,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0
Data 3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,0,3,3,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,3,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,0,0,0,0,1,1,1,0,0,0,0,0,3,0,0,0,0,7,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,0,0,0,0,7,0,1,0,0,0,0,3,0,0,0,0,0,1,0,0,0,0,8,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,0,0,0,0,1,9,1,0,0,0,0,3,0,0,0,0,0,1,0,0,0,0,8,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,1,9,9,8,8,8,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,1,1,1,1,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0
Data 2,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 2,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 2,2,3,3,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 2,2,2,3,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,0
Data 2,2,2,3,3,3,0,2,2,2,2,0,2,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0
Data 2,2,2,3,3,2,0,2,2,2,2,2,2,2,2,2,2,2,2,2,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0
Data 2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,0,0,3,3,0,0,3,3,3,3,0,0,0,0,0,0,0,0
Data 2,2,4,4,4,4,4,4,2,2,2,2,2,2,4,4,4,2,2,2,2,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0
Data 2,0,2,4,4,4,4,2,4,4,4,4,4,4,4,4,4,4,4,4,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0
Data 2,2,4,4,4,4,4,4,4,4,2,2,4,4,4,4,4,4,4,4,4,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3
Data 2,2,4,4,4,4,4,4,4,2,2,2,2,2,4,4,4,4,4,4,4,4,4,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3
</textarea><br><br>Thanks!<br><br>~GF <br><br></td></tr></table><br><table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>2016</font></td></tr></table></td></tr><tr ><td class="posttext"> Here's a bit of Inspiration for our little RPG. I'm going to assume it's Zelda style because that would be just AWESOME to have an Open Source Legend of Zelda : Oracle Of Seasons - like Gameboy Advance game here on Blitz3D! =D<br><br>The remix I found on Youtube &amp; converted to OGG: <br><br>Legend Of Zelda (8 Bit Remix).ogg : <br><br><a href="http://s000.tinyupload.com/download.php?file_id=84950797183698946747&amp;t=8495079718369894674786652" target="_blank">http://s000.tinyupload.com/download.php?file_id=84950797183698946747&amp;t=8495079718369894674786652</a><br><br>And the Source : <br><br>Legend_Of_Zelda_OOA_0.01_{Pre-Alpha}.bb: <br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Graphics3D ( 800, 600, 0, 2 )

Global editmode = False
Global edittile 

Global keys = 0
Global gold = 0
Global totalgold = 0

; map variables
Global mw = 40
Global mh = 30
Global tw = 32
Global th = 32

Global numlevels = 5

Dim map ( numlevels, mw, mh ) 

; player variables
Global pw = ( tw - 5 ) 
Global ph = ( th - 5 ) 
Global px =  GraphicsWidth ( ) / 2 - tw / 2
Global py = GraphicsHeight ( ) / 2 - th / 2

; scrolling variables
Global mx
Global my
Global msx = 0
Global msy

; For the multi map
;
; this is a mdimensional array
; the player location on the multi map
; is mcx ( map cursor x ) 
; it starts at 1, 1, the center of the 
; multidimensional array
;
Global mcx = 1
Global mcy = 1

Dim ml ( 3, 3 ) 

;corner maps  - 1 non existant
ml ( 0, 0 ) =  -1
ml ( 2, 0 ) =  -1
ml ( 0, 2 ) =  -1
ml ( 2, 2 ) =  -1

; the maps assigned
ml ( 1, 0 ) = 1
ml ( 1, 1 ) = 0
ml ( 2, 1 ) = 2
ml ( 1, 2 ) = 3
ml ( 0, 1 ) = 4

Global timer = CreateTimer ( 60 )

Global ti = MilliSecs ( )

Global music = LoadSound ( "Legend Of Zelda Theme (8 Bit Remix).ogg" )

LoopSound music

Global snd_chn = PlaySound ( music )

ChannelVolume snd_chn, 0.08

readlevels ( ) 

	makemaps ( ) 

	;.mainloop
	While Not KeyDown ( 1 ) 
	
		Cls
	
			;key e
			If KeyHit ( 18 ) Then editmode = 1 - editmode
			
			;key space

			If ( KeyHit ( 57 ) ) Then savelevels ( )

				edit ( ) 
		
				If editmode = False
			
					For i = 0 To 4 ;speed of movement
			
						moveplayer ( )
			
							playeritemcollision ( )
				
							centermap ( )
			
						switchmap ( ) 
			
					Next
					
					drawmap ( ml ( mcx, mcy ), msx, msy ) 
		
						Color 51, 51, 255
						
						Rect 0, 0, GraphicsWidth ( ), 30, 0
						
					drawplayer ( )
	
					Color 0, 0, 0
	
						Text 1, 1, "Use cursors to move around"
				
							Text 1, 16, "cursor : " + mcx + ", " + mcy + " on map : " + ml ( mcx, mcy )
	
						Text 321, 1, "gold:" + gold + " of " + totalgold + "   keys:" + keys
			
					Text 321, 16, "Press e for edit mode"
			
					Color 240, 240, 150
			
						Text 0, 0, "Use cursors to move around"
				
							Text 0, 15, "cursor : " + mcx + ", " + mcy + " on map : " + ml ( mcx, mcy )
				
						Text 320, 0, "gold:" + gold + " of " + totalgold + "   keys:" + keys
			
					Text 320, 15, "Press e for edit mode"
			
				EndIf
	
			Flip 0
		
		WaitTimer timer
	
	Wend
	
	FreeSound snd_chn

End

Function drawmap ( level, xo, yo ) 

	For y = 0 To mh - 1

		For x = 0 To mw - 1

			a = map ( level, x, y ) 

			drawtile ( x, y, a, xo, yo ) 

		Next

	Next

End Function

Function edit ( ) 

	If editmode = True

		drawmap ( ml ( mcx, mcy ), msx, msy ) 
		
		Color 20, 20, 20		

		Rect 0, 0, GraphicsWidth ( ), 36

		For x = 0 To 10

			drawtile ( x, 0, x ) 

			If edittile = x

				Color 255, 0, 0

				Rect x * tw, y * th, 32, 32

			EndIf

			If RectsOverlap ( MouseX ( ), MouseY ( ), 1, 1, x * tw, 0, 32, 32 )

				Color 255, 255, 255

				Rect x * tw, 0, 32, 32

				Color 0, 0, 0

				Rect x * tw + 1, 1, 30, 30

				If MouseDown ( 1 ) = True Then edittile = x

			EndIf

		Next

		If RectsOverlap ( MouseX ( ), MouseY ( ), 1, 1, 0, 32, GraphicsWidth ( ), GraphicsHeight ( ) - 32 ) 

			x1 = ( MouseX ( ) - msx ) / tw

			y1 = ( MouseY ( ) - msy ) / th

			If MouseDown ( 1 ) = True

				map ( ml ( mcx, mcy ), x1, y1 ) = edittile

					updatemap x1, y1, edittile
				
				FlushMouse ( ) 

			EndIf

			Color 255, 255, 255

			Rect x1 * tw + msx, y1 * th + msy, 32, 32

			Color 0, 0, 0

			Rect x1 * tw + 1 + msx, y1 * th + 1 + msy, 30, 30

		EndIf

		If KeyDown ( 200 ) Then msy = msy + 3

			If KeyDown ( 208 ) Then msy = msy - 3
	
			If KeyDown ( 203 ) Then msx = msx + 3

		If KeyDown ( 205 ) Then msx = msx - 3

	EndIf

End Function

; here we check If the player is
; at a border And If he can go To another map
; And set the start positions
Function switchmap ( ) 

	; Touches the Left side of the Screen
	If px &lt; 5 And mcx &gt; 0 

		If ml ( mcx - 1, mcy ) &lt;&gt; -1

			mcx = mcx - 1

				;px = 630 - pw
				
				px = ( ( GraphicsWidth ( ) - 10 ) - pw )
	
					msx =  - ( mw * tw - GraphicsWidth ( ) )
	
				If py &lt; 1 Then py = py + 1

			If py + ph &gt; GraphicsHeight ( ) - 10 Then py = py - 10

		EndIf		

	EndIf

		; Touches the Top part of the Screen
		If py &lt; 4 And mcy &gt; 0 
	
			If ml ( mcx, mcy - 1 ) &lt;&gt; -1
	
				mcy = mcy - 1
					
					py = ( ( GraphicsHeight ( ) - 10 ) - ph )

						msy =  - ( mh * th - GraphicsHeight ( ) ) 
								
							If px &lt; 10 Then px = 10

						If py &lt; 0 Then py = 0
	
					If px + pw &gt; GraphicsWidth ( ) - 10 Then px = px - 10
				
				If py + ph &gt; GraphicsHeight ( ) - 1 Then py = py - 1
	
			EndIf
	
		EndIf
	
		; Touches the Right side of the Screen
		If px + pw &gt; GraphicsWidth ( ) - 4 And mcx &lt; 2
	
			If ml ( mcx + 1, mcy ) &lt;&gt; -1
	
				mcx = mcx + 1
	
					px = 10
		
						msx = 0
		
					If py &lt; 10 Then py = 10
	
				If py + ph &gt; GraphicsHeight ( ) - 10 Then py = py - 10
	
			EndIf
	
		EndIf

	; Touches the bottom of the Screen
	If py + ph &gt; GraphicsHeight ( ) - 5 And mcy &lt; 2

		If ml ( mcx, mcy + 1 ) &lt;&gt; -1

			mcy = mcy + 1

				py = 10
	
					msy = 0
	
				If px &lt; 10 Then px = px + 10

			If px + pw &gt; GraphicsWidth ( ) - 10 Then px = px - 10

		EndIf

	EndIf

End Function

Function centermap ( ) 

	If px &lt; GraphicsWidth ( ) / 3 And Abs ( msx ) &gt; 0 Then msx = msx + 1 : px = px + 1

		If py &lt; GraphicsHeight ( ) / 3 And Abs ( msy ) &gt; 0 Then msy = msy + 1 : py = py + 1
	
		If px &gt; GraphicsWidth ( ) / 100 * 66
	
			If ( Abs ( msx ) + GraphicsWidth ( ) ) &lt; mw * tw Then msx = msx - 1 : px = px - 1
	
		EndIf

	If py &gt; GraphicsHeight ( ) / 100 * 66

		If ( Abs ( msy ) + GraphicsHeight ( ) ) &lt; mh * th Then msy = msy - 1 : py = py - 1

	EndIf

End Function

Function moveplayer ( ) 

	Local x = 0
	
		Local y = 0
		
			If MilliSecs ( ) &gt; ti - 100

				If KeyDown ( 200 ) Then y = y - 1
		
					If KeyDown ( 208 ) Then y = y + 1
			
					If KeyDown ( 203 ) Then x = x - 1
				
				If KeyDown ( 205 ) Then x = x + 1
				
				ti = MilliSecs ( )
						
			EndIf
					
			If px + x &lt; 0 Then x = 0
				
				If px + pw + x &gt; GraphicsWidth ( ) Then x = 0
			
				If py + y &lt; 0 Then y = 0
		
			If py + ph + y &gt; GraphicsHeight ( ) Then y = 0
	
		Local collide = playermapcollision ( ( px + Abs ( msx ) ) + x, py + Abs ( msy ) ) 
	
		If collide = 0
	
			px = px + x
	
		ElseIf collide = 2 And Rand ( 0, 100 ) &lt; 40
	
			px = px + x
	
		EndIf

	collide = playermapcollision ( px + Abs ( msx ), py + Abs ( msy ) + y ) 

	If collide = 0

		py = py + y

	ElseIf collide = 2 And Rand ( 0, 100 ) &lt; 40

		py = py + y

	EndIf

End Function

Function playermapcollision ( x1, y1 ) 

	Local cx = x1 / tw

		Local cy = y1 / th
	
			For y2 = cy - 1 To cy + 1
		
				For x2 = cx - 1 To cx + 1	
		
					If x2 &gt;= 0 And x2 &lt; mw And y2 &gt;= 0 And y2 &lt; mh
		
						mt = map ( ml ( mcx, mcy ), x2, y2 ) 
		
						; Is the Map around the Player a Block?
						If mt = 1 Or mt = 2 Or mt = 3 Or mt = 4 Or mt = 7
		
							If RectsOverlap ( x2 * tw, y2 * th, tw, th, x1, y1, pw, ph ) 
		
								; Here the Player is inside a Wall
		
									; A value 1 on the Map
		
								Return mt
		
							EndIf
		
						EndIf
		
					EndIf
		
				Next
		
			Next

		; No Collision Occured

	Return 0

End Function

Function playeritemcollision ( ) 

	Local cx = ( px + Abs ( msx ) ) / tw

	Local cy = ( py + Abs ( msy ) ) / th

	For y2 = cy - 1 To cy + 1

		For x2 = cx - 1 To cx + 1

			If x2 &gt;= 0 And x2 &lt; mw And y2 &gt;= 0 And y2 &lt; mh

				; Collision with Coin

					; Is the Map around the Player a 9 value?

				If map ( ml ( mcx, mcy ), x2, y2 ) = 9

					If RectsOverlap ( x2 * tw + 8, y2 * th + 8, tw - 16, th - 16, px + Abs ( msx ), py + Abs ( msy ), pw, ph ) 

						; Here the player touches a map item ( 9 ) 

							; We remove it from the map

						gold = gold + 1

							map ( ml ( mcx, mcy ), x2, y2 ) = 0

						updatemap ( x2, y2, 0 ) 

					EndIf

				EndIf
				
					; Collision with Key

						; Is the Map around the Player an 8 value?
	
					If map ( ml ( mcx, mcy ), x2, y2 ) = 8
	
						If RectsOverlap ( x2 * tw + 8, y2 * th + 8, tw - 16, th - 16, px + Abs ( msx ), py + Abs ( msy ), pw, ph )
	
							; Here the player touches a map item ( 9 ) 

								; We remove it from the map
	
									keys = keys + 1
	
								map ( ml ( mcx, mcy ), x2, y2 ) = 0
	
							updatemap ( x2, y2, 0 ) 
	
						EndIf
	
					EndIf
				
				; Collision with Door

					; Is the Map around the Player a 7 value?

				If map ( ml ( mcx, mcy ), x2, y2 ) = 7

					If RectsOverlap ( x2 * tw - 1, y2 * th - 1, tw + 2, th + 2, px + Abs ( msx ), py + Abs ( msy ), pw, ph )

				 		If keys &gt; 0

							; Here the Player touches a map item ( 9 ) 

								; We remove it from the map
	
									keys = keys - 1

								map ( ml ( mcx, mcy ), x2, y2 ) = 0

							updatemap ( x2, y2, 0 )
							
						Else
						
							keys = 0

						EndIf

					EndIf

				EndIf
	
			EndIf

		Next

	Next

End Function

Function updatemap ( x, y, t ) 

	drawtile ( x, y, t ) 

End Function

Function drawplayer ( ) 

	Color 0, 0, 255

	Oval px, py, pw, ph

End Function

Function makemaps ( ) 

	For i = 0 To numlevels - 1

		For y = 0 To mh - 1

			For x = 0 To mw - 1

				a = map ( i, x, y ) 

				drawtile ( x, y, a ) 

			Next

		Next

	Next

End Function

Function drawtile ( x, y, t, xo = 0, yo = 0 ) 

	Select t

		;Nothing
		Case 0

			Color 0, 0, 0

			Rect x * tw + xo, y * th + yo, tw, th

		;Wall

		Case 1

			Color 255, 255, 255

			Rect x * tw + xo, y * th + yo, tw, th

		;Water

		Case 2

			Color 30, 140, 255

			Rect x * tw + xo, y * th + yo, tw, th

		;Tree

		Case 3

			Color 0, 255, 0

				x1 = x * tw + xo
	
					y1 = y * th + yo
		
					Line x1 + tw / 2, y1, x1 + tw, y1 + th
	
				Line x1 + tw, y1 + th - 1, x1, y1 + th - 1

			Line x1, y1 + th, x1 + tw / 2, y1

		;Deep Water

		Case 4

			Color 30, 100, 245

			Rect x * tw + xo, y * th + yo, tw, th

		; Door

		Case 7

			Color 150, 150, 150

			Rect x * tw + xo, y * th + yo, tw, th

		; Key

		Case 8

			Color 180, 120, 00
	
				Oval x * tw + 2 + xo, y * th + 2 + yo, tw - 4, th - 4
		
				Color 255, 255, 255
	
			Text x * tw + ( tw / 3.0 ) + xo, y * th + ( th / 3.4 ) + yo, "K"

		; Gold

		Case 9

			Color 230, 200, 0
	
			Oval ( x * tw + 2 ) + xo, ( y * th + 2 ) + yo, tw - 4, th - 4

	End Select

End Function

Function readlevels ( ) 

	Print numlevels

	For i = 0 To numlevels - 1

		For y = 0 To mh - 1

			For x = 0 To mw - 1

				Read a

					map ( i, x, y ) = a

				If a = 9 Then totalgold = totalgold + 1

			Next

		Next

	Next

End Function

Function savelevels ( fi$ = "save.dat" ) 

	If FileType ( fi$ ) &lt;&gt; 0 Then DeleteFile ( fi$ )

		save_file = WriteFile ( fi$ )

			For i = 0 To numlevels - 1

				For y = 0 To mh - 1
		
					For x = 0 To mw - 1
		
						Read a
		
							map ( i, x, y ) = a
		
						WriteLine ( save_file, map ( i, x, y ) )
		
					Next
		
				Next
		
			Next
		
		CloseFile ( save_file )

	Return False

End Function

.level1
Data 0,0,0,0,0,0,0,0,0,0,0,0,2,2,4,2,2,2,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1
Data 0,0,0,0,0,0,0,2,2,2,2,2,4,4,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1
Data 0,0,0,0,0,0,2,4,4,4,4,4,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1
Data 0,0,0,0,0,2,4,4,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1
Data 0,0,0,2,2,4,4,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,8,0,1,1,1,1,1,1,1
Data 2,2,2,4,4,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,1,1,1,1,1,1,1
Data 4,4,4,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,1,0,1,1,1,1,1
Data 2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0,0,1,1,1,1,1
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,1,0,1,1,1
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,1,1,1,1
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,3,3,0,0,0,1,1,1,1
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0
Data 0,0,0,1,1,1,1,1,1,1,0,0,0,0,1,9,9,9,1,0,0,0,0,3,3,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0
Data 0,0,0,1,0,0,0,9,9,1,0,0,0,0,1,9,9,9,1,0,0,0,0,3,3,3,0,0,0,0,3,3,3,3,3,0,0,0,0,0
Data 0,0,0,1,0,0,0,0,0,1,0,0,0,0,1,0,0,0,1,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,1,0,0,0,0,0,1,0,0,0,0,1,0,0,0,1,0,0,0,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,1,0,0,0,0,0,1,0,0,1,1,1,1,1,7,1,0,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,1,0,0,0,0,0,7,0,0,7,0,0,0,0,0,1,0,0,0,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,0,0,0,0,0
Data 0,0,0,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,8,2,2,4,4,2,2,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,4,4,4,2,0,2,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,4,4,2,2,2,2,2,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,2,2,4,2,2,2,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,2,2,2,2,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,2,2,0,0,0,0,0,0,3,3,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3
Data 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3
Data 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3

.level2
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1
Data 0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1
Data 0,0,1,0,9,9,1,0,0,0,3,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1
Data 0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1
Data 0,0,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1
Data 0,0,1,1,7,1,0,0,0,0,0,0,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1
Data 0,0,0,0,0,0,0,0,0,0,2,2,2,4,4,2,2,0,0,0,2,2,2,2,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1
Data 0,0,0,0,0,0,0,0,0,2,2,4,2,2,2,2,2,0,0,0,2,2,2,2,0,0,0,0,3,0,0,0,0,0,0,1,1,1,1,1
Data 0,0,0,0,0,0,0,0,2,2,4,2,2,0,0,0,0,0,0,0,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0
Data 0,0,0,0,0,2,2,2,2,2,2,2,0,0,0,0,0,0,0,0,2,2,0,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,2,4,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,2,4,4,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,2,2,4,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,2,2,2,2,2,0,0,0,0,0,3,3,3,0,0,0
Data 0,0,0,0,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,4,2,2,2,2,0,0,0,0,0,0,3,3,0,0
Data 0,0,0,2,4,4,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,4,4,4,4,2,0,2,0,0,0,0,0,0,3,0,0
Data 0,0,0,2,4,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,4,4,4,4,2,2,2,0,0,0,0,0,0,0,0
Data 0,0,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,2,2,4,2,2,2,0,2,0,0,0,0,0,0,0,0
Data 0,2,2,2,2,8,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,2,2,2,2,0,2,2,2,0,0,0,0,0,0,0,0,0
Data 2,2,2,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0
Data 2,2,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0
Data 2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
Data 0,0,0,3,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,1,1
Data 0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,0,1,1,1,1,1
Data 0,0,0,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1

.level3
Data 3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3
Data 3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3
Data 3,3,3,3,3,3,0,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,3,3,3
Data 3,3,3,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,3,3,3,0,3,3,3,0,3,3,0,0,0,0,0,0,0,3,3,3
Data 3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,3,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,3,3,3
Data 3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,0,3,3,3
Data 3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,4,4,4,2,0,3,3,3
Data 3,8,0,0,0,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,0,3,3,3
Data 3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,3,3
Data 3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 0,0,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,3,3
Data 0,0,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,1,7,1,1,1,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,9,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,1,9,9,9,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0,0,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,3,3,0,0,0,0,0,3
Data 0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,0,0,0,0,0,0,0,3
Data 0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3
Data 0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,3,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 3,3,3,0,0,0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,3,3
Data 3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3

.level4
Data 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3
Data 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3
Data 3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3
Data 3,0,0,1,1,1,7,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3
Data 3,0,0,1,9,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 3,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,7,1,1,1,1,0,0,3
Data 3,0,0,1,0,0,0,0,0,0,0,9,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,9,1,0,0,3
Data 3,0,0,1,0,0,0,1,1,1,1,1,1,7,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,9,1,0,0,3
Data 3,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,3
Data 3,0,0,1,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,3
Data 3,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,7,1,1,1,1,0,0,3
Data 3,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 3,0,0,1,0,0,1,0,0,1,0,0,0,0,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3
Data 3,0,0,7,0,0,1,1,1,1,0,0,0,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3
Data 3,0,0,1,0,0,1,0,0,0,0,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3
Data 3,0,0,1,0,9,1,0,0,0,3,3,3,3,3,3,3,8,0,0,0,3,3,3,0,3,0,0,0,0,0,0,3,3,3,3,3,3,3,3
Data 3,0,0,1,1,1,1,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,3,3,8,3,3,3,3,3
Data 3,0,0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,3,3,3,3,3
Data 3,0,0,0,0,0,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0,0,3,3,3,3,3
Data 3,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,3,0,0,0,0,0,0,0,0,3,0,3,3
Data 3,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 3,3,0,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3
Data 3,3,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3
Data 3,3,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3
Data 3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3
Data 3,3,3,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0,2,2,2,2
Data 3,3,3,0,0,0,0,0,2,2,2,2,2,2,0,2,2,2,2,2,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2
Data 2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2

.level5
Data 3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0
Data 3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0
Data 3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0
Data 3,3,3,3,0,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,3,3,3,3,3,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0
Data 3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0
Data 3,3,3,3,3,3,0,3,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0
Data 3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,0,3,3,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,3,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,0,0,0,0,1,1,1,0,0,0,0,0,3,0,0,0,0,7,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,0,0,0,0,7,0,1,0,0,0,0,3,0,0,0,0,0,1,0,0,0,0,8,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,0,0,0,0,1,9,1,0,0,0,0,3,0,0,0,0,0,1,0,0,0,0,8,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,1,9,9,8,8,8,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,1,1,1,1,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0
Data 2,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 2,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 2,2,3,3,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 2,2,2,3,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,0
Data 2,2,2,3,3,3,0,2,2,2,2,0,2,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0
Data 2,2,2,3,3,2,0,2,2,2,2,2,2,2,2,2,2,2,2,2,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0
Data 2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,0,0,3,3,0,0,3,3,3,3,0,0,0,0,0,0,0,0
Data 2,2,4,4,4,4,4,4,2,2,2,2,2,2,4,4,4,2,2,2,2,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0
Data 2,0,2,4,4,4,4,2,4,4,4,4,4,4,4,4,4,4,4,4,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0
Data 2,2,4,4,4,4,4,4,4,4,2,2,4,4,4,4,4,4,4,4,4,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3
Data 2,2,4,4,4,4,4,4,4,2,2,2,2,2,4,4,4,4,4,4,4,4,4,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3
</textarea><br><br>Enjoy! ^_^<br><br>Thanks!<br><br>~GF <br><br></td></tr></table><br><table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Pakz</td><td align="right"><font class=tiny>2016</font></td></tr></table></td></tr><tr ><td class="posttext"> @guy<br><br>I tried the last version. It gets really slow when you get to the lower part of the screen. I have not found the cause yet. It is on a laptop so this might not be noticable on a fast desktop. Might have to do with the entire sfreen beeing redrawn.<br><br>Also in the save levels section you need to place a restore level1 line. Becourse there is a out of data error. <br><br></td></tr></table><br><table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>2016</font></td></tr></table></td></tr><tr ><td class="posttext"> @Pakz, here's a fix for the Save. It's working except it's crashing with out of data when I save on the 1st map, then go straight up to the 2nd map and try saving IT. I wanna be able to save to ALL level files on the fly, all at once.<br><br>Code :: <br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Graphics3D ( 800, 600, 0, 2 )

Global editmode = False
Global edittile 

Global keys = 0
Global gold = 0
Global totalgold = 0

; map variables
Global mw = 40
Global mh = 30
Global tw = 32
Global th = 32

Global numlevels = 5

Dim map ( numlevels, mw, mh ) 

; player variables
Global pw = ( tw - 5 ) 
Global ph = ( th - 5 ) 
Global px =  GraphicsWidth ( ) / 2 - tw / 2
Global py = GraphicsHeight ( ) / 2 - th / 2

; scrolling variables
Global mx
Global my
Global msx = 0
Global msy

; For the multi map
;
; this is a mdimensional array
; the player location on the multi map
; is mcx ( map cursor x ) 
; it starts at 1, 1, the center of the 
; multidimensional array
;
Global mcx = 1
Global mcy = 1

Dim ml ( 3, 3 ) 

;corner maps  - 1 non existant
ml ( 0, 0 ) =  -1
ml ( 2, 0 ) =  -1
ml ( 0, 2 ) =  -1
ml ( 2, 2 ) =  -1

; the maps assigned
ml ( 1, 0 ) = 1
ml ( 1, 1 ) = 0
ml ( 2, 1 ) = 2
ml ( 1, 2 ) = 3
ml ( 0, 1 ) = 4

Global timer = CreateTimer ( 60 )

Global ti = MilliSecs ( )

Global music = LoadSound ( "Legend Of Zelda Theme (8 Bit Remix).ogg" )

LoopSound music

Global snd_chn = PlaySound ( music )

ChannelVolume snd_chn, 0.08

readlevels ( ) 

	makemaps ( ) 

	;.mainloop
	While Not KeyDown ( 1 ) 
	
		Cls
	
			;key e
			If KeyHit ( 18 ) Then editmode = 1 - editmode
			
			;key space

			If ( KeyHit ( 57 ) ) Then savelevels ( "level" + "_" + Str$ ( ml ( mcx, mcy ) + 1 ) + ".dat", ml ( mcx, mcy ) + 1 )

				edit ( ) 
		
				If editmode = False
			
					For i = 0 To 4 ;speed of movement
			
						moveplayer ( )
			
							playeritemcollision ( )
				
							centermap ( )
			
						switchmap ( ) 
			
					Next
					
					drawmap ( ml ( mcx, mcy ), msx, msy ) 
		
						Color 51, 51, 255
						
						Rect 0, 0, GraphicsWidth ( ), 30, 0
						
					drawplayer ( )
	
					Color 0, 0, 0
	
						Text 1, 1, "Use cursors to move around"
				
							Text 1, 16, "cursor : " + mcx + ", " + mcy + " on map : " + ml ( mcx, mcy )
	
						Text 321, 1, "gold:" + gold + " of " + totalgold + "   keys:" + keys
			
					Text 321, 16, "Press e for edit mode"
			
					Color 240, 240, 150
			
						Text 0, 0, "Use cursors to move around"
				
							Text 0, 15, "cursor : " + mcx + ", " + mcy + " on map : " + ml ( mcx, mcy )
				
						Text 320, 0, "gold:" + gold + " of " + totalgold + "   keys:" + keys
			
					Text 320, 15, "Press e for edit mode"
			
				EndIf
	
			Flip 0
		
		WaitTimer timer
	
	Wend
	
	FreeSound music

End

Function drawmap ( level, xo, yo ) 

	For y = 0 To mh - 1

		For x = 0 To mw - 1

			a = map ( level, x, y ) 

			drawtile ( x, y, a, xo, yo ) 

		Next

	Next

End Function

Function edit ( ) 

	If editmode = True

		drawmap ( ml ( mcx, mcy ), msx, msy ) 
		
		Color 20, 20, 20		

		Rect 0, 0, GraphicsWidth ( ), 36

		For x = 0 To 10

			drawtile ( x, 0, x ) 

			If edittile = x

				Color 255, 0, 0

				Rect x * tw, y * th, 32, 32

			EndIf

			If RectsOverlap ( MouseX ( ), MouseY ( ), 1, 1, x * tw, 0, 32, 32 )

				Color 255, 255, 255

				Rect x * tw, 0, 32, 32

				Color 0, 0, 0

				Rect x * tw + 1, 1, 30, 30

				If MouseDown ( 1 ) = True Then edittile = x

			EndIf

		Next

		If RectsOverlap ( MouseX ( ), MouseY ( ), 1, 1, 0, 32, GraphicsWidth ( ), GraphicsHeight ( ) - 32 ) 

			x1 = ( MouseX ( ) - msx ) / tw

			y1 = ( MouseY ( ) - msy ) / th

			If MouseDown ( 1 ) = True

				map ( ml ( mcx, mcy ), x1, y1 ) = edittile

					updatemap x1, y1, edittile
				
				FlushMouse ( ) 

			EndIf

			Color 255, 255, 255

			Rect x1 * tw + msx, y1 * th + msy, 32, 32

			Color 0, 0, 0

			Rect x1 * tw + 1 + msx, y1 * th + 1 + msy, 30, 30

		EndIf

		If KeyDown ( 200 ) Then msy = msy + 3

			If KeyDown ( 208 ) Then msy = msy - 3
	
			If KeyDown ( 203 ) Then msx = msx + 3

		If KeyDown ( 205 ) Then msx = msx - 3

	EndIf

End Function

; here we check If the player is
; at a border And If he can go To another map
; And set the start positions
Function switchmap ( ) 

	; Touches the Left side of the Screen
	If px &lt; 5 And mcx &gt; 0 

		If ml ( mcx - 1, mcy ) &lt;&gt; -1

			mcx = mcx - 1

				;px = 630 - pw
				
				px = ( ( GraphicsWidth ( ) - 10 ) - pw )
	
					msx =  - ( mw * tw - GraphicsWidth ( ) )
	
				If py &lt; 1 Then py = py + 1

			If py + ph &gt; GraphicsHeight ( ) - 10 Then py = py - 10

		EndIf		

	EndIf

		; Touches the Top part of the Screen
		If py &lt; 4 And mcy &gt; 0 
	
			If ml ( mcx, mcy - 1 ) &lt;&gt; -1
	
				mcy = mcy - 1
					
					py = ( ( GraphicsHeight ( ) - 10 ) - ph )

						msy =  - ( mh * th - GraphicsHeight ( ) ) 
								
							If px &lt; 10 Then px = 10

						If py &lt; 0 Then py = 0
	
					If px + pw &gt; GraphicsWidth ( ) - 10 Then px = px - 10
				
				If py + ph &gt; GraphicsHeight ( ) - 1 Then py = py - 1
	
			EndIf
	
		EndIf
	
		; Touches the Right side of the Screen
		If px + pw &gt; GraphicsWidth ( ) - 4 And mcx &lt; 2
	
			If ml ( mcx + 1, mcy ) &lt;&gt; -1
	
				mcx = mcx + 1
	
					px = 10
		
						msx = 0
		
					If py &lt; 10 Then py = 10
	
				If py + ph &gt; GraphicsHeight ( ) - 10 Then py = py - 10
	
			EndIf
	
		EndIf

	; Touches the bottom of the Screen
	If py + ph &gt; GraphicsHeight ( ) - 5 And mcy &lt; 2

		If ml ( mcx, mcy + 1 ) &lt;&gt; -1

			mcy = mcy + 1

				py = 10
	
					msy = 0
	
				If px &lt; 10 Then px = px + 10

			If px + pw &gt; GraphicsWidth ( ) - 10 Then px = px - 10

		EndIf

	EndIf

End Function

Function centermap ( ) 

	If px &lt; GraphicsWidth ( ) / 3 And Abs ( msx ) &gt; 0 Then msx = msx + 1 : px = px + 1

		If py &lt; GraphicsHeight ( ) / 3 And Abs ( msy ) &gt; 0 Then msy = msy + 1 : py = py + 1
	
		If px &gt; GraphicsWidth ( ) / 100 * 66
	
			If ( Abs ( msx ) + GraphicsWidth ( ) ) &lt; mw * tw Then msx = msx - 1 : px = px - 1
	
		EndIf

	If py &gt; GraphicsHeight ( ) / 100 * 66

		If ( Abs ( msy ) + GraphicsHeight ( ) ) &lt; mh * th Then msy = msy - 1 : py = py - 1

	EndIf

End Function

Function moveplayer ( ) 

	Local x = 0
	
		Local y = 0
		
			If MilliSecs ( ) &gt; ti - 100

				If KeyDown ( 200 ) Then y = y - 1
		
					If KeyDown ( 208 ) Then y = y + 1
			
					If KeyDown ( 203 ) Then x = x - 1
				
				If KeyDown ( 205 ) Then x = x + 1
				
				ti = MilliSecs ( )
						
			EndIf
					
			If px + x &lt; 0 Then x = 0
				
				If px + pw + x &gt; GraphicsWidth ( ) Then x = 0
			
				If py + y &lt; 0 Then y = 0
		
			If py + ph + y &gt; GraphicsHeight ( ) Then y = 0
	
		Local collide = playermapcollision ( ( px + Abs ( msx ) ) + x, py + Abs ( msy ) ) 
	
		If collide = 0
	
			px = px + x
	
		ElseIf collide = 2 And Rand ( 0, 100 ) &lt; 40
	
			px = px + x
	
		EndIf

	collide = playermapcollision ( px + Abs ( msx ), py + Abs ( msy ) + y ) 

	If collide = 0

		py = py + y

	ElseIf collide = 2 And Rand ( 0, 100 ) &lt; 40

		py = py + y

	EndIf

End Function

Function playermapcollision ( x1, y1 ) 

	Local cx = x1 / tw

		Local cy = y1 / th
	
			For y2 = cy - 1 To cy + 1
		
				For x2 = cx - 1 To cx + 1	
		
					If x2 &gt;= 0 And x2 &lt; mw And y2 &gt;= 0 And y2 &lt; mh
		
						mt = map ( ml ( mcx, mcy ), x2, y2 ) 
		
						; Is the Map around the Player a Block?
						If mt = 1 Or mt = 2 Or mt = 3 Or mt = 4 Or mt = 7
		
							If RectsOverlap ( x2 * tw, y2 * th, tw, th, x1, y1, pw, ph ) 
		
								; Here the Player is inside a Wall
		
									; A value 1 on the Map
		
								Return mt
		
							EndIf
		
						EndIf
		
					EndIf
		
				Next
		
			Next

		; No Collision Occured

	Return 0

End Function

Function playeritemcollision ( ) 

	Local cx = ( px + Abs ( msx ) ) / tw

	Local cy = ( py + Abs ( msy ) ) / th

	For y2 = cy - 1 To cy + 1

		For x2 = cx - 1 To cx + 1

			If x2 &gt;= 0 And x2 &lt; mw And y2 &gt;= 0 And y2 &lt; mh

				; Collision with Coin

					; Is the Map around the Player a 9 value?

				If map ( ml ( mcx, mcy ), x2, y2 ) = 9

					If RectsOverlap ( x2 * tw + 8, y2 * th + 8, tw - 16, th - 16, px + Abs ( msx ), py + Abs ( msy ), pw, ph ) 

						; Here the player touches a map item ( 9 ) 

							; We remove it from the map

						gold = gold + 1

							map ( ml ( mcx, mcy ), x2, y2 ) = 0

						updatemap ( x2, y2, 0 ) 

					EndIf

				EndIf
				
					; Collision with Key

						; Is the Map around the Player an 8 value?
	
					If map ( ml ( mcx, mcy ), x2, y2 ) = 8
	
						If RectsOverlap ( x2 * tw + 8, y2 * th + 8, tw - 16, th - 16, px + Abs ( msx ), py + Abs ( msy ), pw, ph )
	
							; Here the player touches a map item ( 9 ) 

								; We remove it from the map
	
									keys = keys + 1
	
								map ( ml ( mcx, mcy ), x2, y2 ) = 0
	
							updatemap ( x2, y2, 0 ) 
	
						EndIf
	
					EndIf
				
				; Collision with Door

					; Is the Map around the Player a 7 value?

				If map ( ml ( mcx, mcy ), x2, y2 ) = 7

					If RectsOverlap ( x2 * tw - 1, y2 * th - 1, tw + 2, th + 2, px + Abs ( msx ), py + Abs ( msy ), pw, ph )

				 		If keys &gt; 0

							; Here the Player touches a map item ( 9 ) 

								; We remove it from the map
	
									keys = keys - 1

								map ( ml ( mcx, mcy ), x2, y2 ) = 0

							updatemap ( x2, y2, 0 )
							
						Else
						
							keys = 0

						EndIf

					EndIf

				EndIf
	
			EndIf

		Next

	Next

End Function

Function updatemap ( x, y, t ) 

	drawtile ( x, y, t ) 

End Function

Function drawplayer ( ) 

	Color 0, 0, 255

	Oval px, py, pw, ph

End Function

Function makemaps ( ) 

	For i = 0 To numlevels - 1

		For y = 0 To mh - 1

			For x = 0 To mw - 1

				a = map ( i, x, y ) 

				drawtile ( x, y, a ) 

			Next

		Next

	Next

End Function

Function drawtile ( x, y, t, xo = 0, yo = 0 ) 

	Select t

		;Nothing
		Case 0

			Color 0, 0, 0

			Rect x * tw + xo, y * th + yo, tw, th

		;Wall

		Case 1

			Color 255, 255, 255

			Rect x * tw + xo, y * th + yo, tw, th

		;Water

		Case 2

			Color 30, 140, 255

			Rect x * tw + xo, y * th + yo, tw, th

		;Tree

		Case 3

			Color 0, 255, 0

				x1 = x * tw + xo
	
					y1 = y * th + yo
		
					Line x1 + tw / 2, y1, x1 + tw, y1 + th
	
				Line x1 + tw, y1 + th - 1, x1, y1 + th - 1

			Line x1, y1 + th, x1 + tw / 2, y1

		;Deep Water

		Case 4

			Color 30, 100, 245

			Rect x * tw + xo, y * th + yo, tw, th

		; Door

		Case 7

			Color 150, 150, 150

			Rect x * tw + xo, y * th + yo, tw, th

		; Key

		Case 8

			Color 180, 120, 00
	
				Oval x * tw + 2 + xo, y * th + 2 + yo, tw - 4, th - 4
		
				Color 255, 255, 255
	
			Text x * tw + ( tw / 3.0 ) + xo, y * th + ( th / 3.4 ) + yo, "K"

		; Gold

		Case 9

			Color 230, 200, 0
	
			Oval ( x * tw + 2 ) + xo, ( y * th + 2 ) + yo, tw - 4, th - 4

	End Select

End Function

Function readlevels ( ) 

	Print numlevels

	For i = 0 To numlevels - 1

		For y = 0 To mh - 1

			For x = 0 To mw - 1

				Read a

					map ( i, x, y ) = a

				If a = 9 Then totalgold = totalgold + 1

			Next

		Next

	Next

End Function

Function savelevels ( fi$ = "save.dat", whichlevel = 1 ) 

	If FileType ( fi$ ) &lt;&gt; 0 Then DeleteFile ( fi$ )

		save_file = WriteFile ( fi$ )

			If whichlevel &lt; 1 Then whichlevel = 1
			
				If whichlevel &gt; 5 Then whichlevel = 5

					If whichlevel = 1 Then Restore level1

						If whichlevel = 2 Then Restore level2
	
					If whichlevel = 3 Then Restore level3
	
				If whichlevel = 4 Then Restore level4

			If whichlevel = 5 Then Restore level5

			For i = 0 To numlevels - 1

				For y = 0 To mh - 1
		
					For x = 0 To mw - 1
					
						Read a
			
							map ( i, x, y ) = a
				
						WriteLine ( save_file, map ( i, x, y ) + 1 )
		
					Next
		
				Next
		
			Next
		
		CloseFile ( save_file )

	Return False

End Function

.level1
Data 0,0,0,0,0,0,0,0,0,0,0,0,2,2,4,2,2,2,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1
Data 0,0,0,0,0,0,0,2,2,2,2,2,4,4,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1
Data 0,0,0,0,0,0,2,4,4,4,4,4,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1
Data 0,0,0,0,0,2,4,4,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1
Data 0,0,0,2,2,4,4,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,8,0,1,1,1,1,1,1,1
Data 2,2,2,4,4,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,1,1,1,1,1,1,1
Data 4,4,4,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,1,0,1,1,1,1,1
Data 2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0,0,1,1,1,1,1
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,1,0,1,1,1
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,1,1,1,1
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,3,3,0,0,0,1,1,1,1
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0
Data 0,0,0,1,1,1,1,1,1,1,0,0,0,0,1,9,9,9,1,0,0,0,0,3,3,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0
Data 0,0,0,1,0,0,0,9,9,1,0,0,0,0,1,9,9,9,1,0,0,0,0,3,3,3,0,0,0,0,3,3,3,3,3,0,0,0,0,0
Data 0,0,0,1,0,0,0,0,0,1,0,0,0,0,1,0,0,0,1,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,1,0,0,0,0,0,1,0,0,0,0,1,0,0,0,1,0,0,0,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,1,0,0,0,0,0,1,0,0,1,1,1,1,1,7,1,0,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,1,0,0,0,0,0,7,0,0,7,0,0,0,0,0,1,0,0,0,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,0,0,0,0,0
Data 0,0,0,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,8,2,2,4,4,2,2,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,4,4,4,2,0,2,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,4,4,2,2,2,2,2,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,2,2,4,2,2,2,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,2,2,2,2,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,2,2,0,0,0,0,0,0,3,3,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3
Data 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3
Data 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3

.level2
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1
Data 0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1
Data 0,0,1,0,9,9,1,0,0,0,3,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1
Data 0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1
Data 0,0,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1
Data 0,0,1,1,7,1,0,0,0,0,0,0,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1
Data 0,0,0,0,0,0,0,0,0,0,2,2,2,4,4,2,2,0,0,0,2,2,2,2,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1
Data 0,0,0,0,0,0,0,0,0,2,2,4,2,2,2,2,2,0,0,0,2,2,2,2,0,0,0,0,3,0,0,0,0,0,0,1,1,1,1,1
Data 0,0,0,0,0,0,0,0,2,2,4,2,2,0,0,0,0,0,0,0,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0
Data 0,0,0,0,0,2,2,2,2,2,2,2,0,0,0,0,0,0,0,0,2,2,0,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,2,4,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,2,4,4,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,2,2,4,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,2,2,2,2,2,0,0,0,0,0,3,3,3,0,0,0
Data 0,0,0,0,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,4,2,2,2,2,0,0,0,0,0,0,3,3,0,0
Data 0,0,0,2,4,4,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,4,4,4,4,2,0,2,0,0,0,0,0,0,3,0,0
Data 0,0,0,2,4,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,4,4,4,4,2,2,2,0,0,0,0,0,0,0,0
Data 0,0,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,2,2,4,2,2,2,0,2,0,0,0,0,0,0,0,0
Data 0,2,2,2,2,8,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,2,2,2,2,0,2,2,2,0,0,0,0,0,0,0,0,0
Data 2,2,2,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0
Data 2,2,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0
Data 2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
Data 0,0,0,3,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,1,1
Data 0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,0,1,1,1,1,1
Data 0,0,0,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1

.level3
Data 3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3
Data 3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3
Data 3,3,3,3,3,3,0,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,3,3,3
Data 3,3,3,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,3,3,3,0,3,3,3,0,3,3,0,0,0,0,0,0,0,3,3,3
Data 3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,3,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,3,3,3
Data 3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,0,3,3,3
Data 3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,4,4,4,2,0,3,3,3
Data 3,8,0,0,0,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,0,3,3,3
Data 3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,3,3
Data 3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 0,0,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,3,3
Data 0,0,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,1,7,1,1,1,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,9,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,1,9,9,9,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0,0,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,3,3,0,0,0,0,0,3
Data 0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,0,0,0,0,0,0,0,3
Data 0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3
Data 0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,3,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 3,3,3,0,0,0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,3,3
Data 3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3

.level4
Data 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3
Data 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3
Data 3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3
Data 3,0,0,1,1,1,7,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3
Data 3,0,0,1,9,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 3,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,7,1,1,1,1,0,0,3
Data 3,0,0,1,0,0,0,0,0,0,0,9,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,9,1,0,0,3
Data 3,0,0,1,0,0,0,1,1,1,1,1,1,7,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,9,1,0,0,3
Data 3,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,3
Data 3,0,0,1,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,3
Data 3,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,7,1,1,1,1,0,0,3
Data 3,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 3,0,0,1,0,0,1,0,0,1,0,0,0,0,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3
Data 3,0,0,7,0,0,1,1,1,1,0,0,0,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3
Data 3,0,0,1,0,0,1,0,0,0,0,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3
Data 3,0,0,1,0,9,1,0,0,0,3,3,3,3,3,3,3,8,0,0,0,3,3,3,0,3,0,0,0,0,0,0,3,3,3,3,3,3,3,3
Data 3,0,0,1,1,1,1,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,3,3,8,3,3,3,3,3
Data 3,0,0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,3,3,3,3,3
Data 3,0,0,0,0,0,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0,0,3,3,3,3,3
Data 3,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,3,0,0,0,0,0,0,0,0,3,0,3,3
Data 3,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 3,3,0,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3
Data 3,3,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3
Data 3,3,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3
Data 3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3
Data 3,3,3,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0,2,2,2,2
Data 3,3,3,0,0,0,0,0,2,2,2,2,2,2,0,2,2,2,2,2,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2
Data 2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2

.level5
Data 3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0
Data 3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0
Data 3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0
Data 3,3,3,3,0,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,3,3,3,3,3,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0
Data 3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0
Data 3,3,3,3,3,3,0,3,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0
Data 3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,0,3,3,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,3,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,0,0,0,0,1,1,1,0,0,0,0,0,3,0,0,0,0,7,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,0,0,0,0,7,0,1,0,0,0,0,3,0,0,0,0,0,1,0,0,0,0,8,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,0,0,0,0,1,9,1,0,0,0,0,3,0,0,0,0,0,1,0,0,0,0,8,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,1,9,9,8,8,8,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,1,1,1,1,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0
Data 2,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 2,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 2,2,3,3,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 2,2,2,3,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,0
Data 2,2,2,3,3,3,0,2,2,2,2,0,2,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0
Data 2,2,2,3,3,2,0,2,2,2,2,2,2,2,2,2,2,2,2,2,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0
Data 2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,0,0,3,3,0,0,3,3,3,3,0,0,0,0,0,0,0,0
Data 2,2,4,4,4,4,4,4,2,2,2,2,2,2,4,4,4,2,2,2,2,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0
Data 2,0,2,4,4,4,4,2,4,4,4,4,4,4,4,4,4,4,4,4,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0
Data 2,2,4,4,4,4,4,4,4,4,2,2,4,4,4,4,4,4,4,4,4,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3
Data 2,2,4,4,4,4,4,4,4,2,2,2,2,2,4,4,4,4,4,4,4,4,4,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3
</textarea><br><br>Thanks!<br><br>~GF <br><br></td></tr></table><br><table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>2016</font></td></tr></table></td></tr><tr ><td class="posttext"> What is wrong with this Save code, &amp; why can't I get the left door on map 1 open like the other 2 doors on the right on map 1?<br><br>Link to needed OGG Media : <br><br>Zelda_ Link's Awakening Overworld Music (SNES Remix).ogg : <br><br>https://mega.nz/#!6t8B3TAI!-wVdHvtEOVQXOxgmXEdTwdLnJnQD_q_f7AptbrKc1JI<br><br>Oracle_Get_Rupee.ogg : <br><br>https://mega.nz/#!Cp1wwIjI!A6Y9IgvudkuEP8_xC4eQ28QSA_fii2LLDmGOvpT6eqo<br><br>Oracle_Get_Item.ogg : <br><br>https://mega.nz/#!K1kV1Yia!0ZWZ4Pa162_1EyirhlTEeLJvGSIPAytsY-xUN6yaBQk<br><br>Oracle_Chest.ogg : <br><br>https://mega.nz/#!nwdRSCbI!2F8kLuMqmojCD8UG-uL_xQhT3h_X4s_xOPi5PDm8tio<br><br>------------------------------------------------------------<br><br>Legend_Of_Zelda_OOA_0.1_{Beta}.bb : <br><br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">
Const MAX_PLAYERS = 99

	Type master
	
		Field id
		
			Field pivot
			
				Field xpos
				
					Field ypos
			
					Field xrot
		
				Field yrot
		
			Field player.player
		
		Field map.map
	
	End Type
	
		Type player
		
			Field hp
		
				Field mp
			
				Field max_hp
		
			Field max_mp
		
		End Type
	
	Type map
		
		Field id
	
	End Type

Global master.player [ MAX_PLAYERS ]

Graphics3D ( 800, 600, 0, 2 )

Global editmode = False
Global edittile 

Global keys = 1000
Global gold = 1000
Global totalgold = 10000

Global player_moving
Global map_moving
Global walk_through_walls

; map variables
Global mw = 40
Global mh = 30
Global tw = 32
Global th = 32

Global numlevels = 5

; player variables
Global pw = ( tw - 5 ) 
Global ph = ( th - 5 ) 
Global px =  GraphicsWidth ( ) / 2 - tw / 2
Global py = GraphicsHeight ( ) / 2 - th / 2

; scrolling variables
Global mx
Global my
Global msx = 0
Global msy

; For the multi map
;
; this is a mdimensional array
; the player location on the multi map
; is mcx ( map cursor x ) 
; it starts at 1, 1, the center of the 
; multidimensional array
;
Global mcx = 1
Global mcy = 1

Dim map ( numlevels, mw, mh ) 

Dim ml ( 4, 4 ) 

;corner maps  - 1 non existant
ml ( 0, 0 ) =  -1
ml ( 2, 0 ) =  -1
ml ( 0, 2 ) =  -1
ml ( 2, 2 ) =  -1

; the maps assigned
ml ( 1, 0 ) = 1 ;1
ml ( 1, 1 ) = 0 ;0
ml ( 2, 1 ) = 2 ;2
ml ( 1, 2 ) = 3 ;3
ml ( 0, 1 ) = 4 ;4

Global timer = CreateTimer ( 60 )

Global ti = MilliSecs ( )

Global music = LoadSound ( "Zelda_ Link's Awakening Overworld Music (SNES Remix).ogg" )

LoopSound music

Global snd_chn = PlaySound ( music )

ChannelVolume snd_chn, 0.2618

Global rupee = LoadSound ( "Oracle_Get_Rupee.ogg" )

Global reg_item = LoadSound ( "Oracle_Get_Item.ogg" )

Global dc_open = LoadSound ( "Oracle_Chest.ogg" )

Global rupee_snd

Global reg_item_snd

Global dc_snd

readlevels ( ) 

	makemaps ( ) 

	;.mainloop
	While Not KeyDown ( 1 ) 
	
		Cls

			;key e
			If KeyHit ( 18 ) Then editmode = 1 - editmode

				;*** NOT WORKING RIGHT!!! ***
	
					;If ( KeyHit ( 42 ) Or KeyHit ( 54 ) ) Then walk_through_walls = 1 - walk_through_walls
		
						Save ( )
	
					;Teleport_to_Map ( ml ( mcx, mcy ) )

				edit ( ) 
		
				If editmode = False
			
					;For i = 0 To 4 ;speed of movement
			
						moveplayer ( 3 )
			
							playeritemcollision ( )
				
							centermap ( 3 )
			
						switchmap ( ) 
			
					;Next
					
						drawmap ( ml ( mcx, mcy ), msx, msy ) 
			
							Color 51, 51, 255
							
							Rect 0, 0, GraphicsWidth ( ), 30, 0
							
						drawplayer ( )
		
						Color 0, 0, 0
		
							Text 1, 1, "Use cursors to move around"
					
								Text 1, 16, "cursor : " + mcx + ", " + mcy + " on map : " + ( ml ( mcx, mcy ) + 1 )
		
							Text 321, 1, "gold:" + gold + " of " + totalgold + "   keys:" + keys
				
						Text 321, 16, "Press e for edit mode"
			
					Color 240, 240, 150
			
						Text 0, 0, "Use cursors to move around"
				
							Text 0, 15, "cursor : " + mcx + ", " + mcy + " on map : " + ( ml ( mcx, mcy ) + 1 )
				
							Text 320, 0, "gold:" + gold + " of " + totalgold + "   keys:" + keys
			
						Text 320, 15, "Press e for edit mode"
					
					Text 640 - StringWidth ( "walk_through_walls: " + walk_through_walls ) / 2, 15, "walk_through_walls: " + walk_through_walls
			
				EndIf
	
			Flip 0
		
;		WaitTimer timer
	
	Wend
	
		FreeSound music
	
	FreeSound rupee

End

Function drawmap ( level, xo, yo ) 

	For y = 0 To mh - 1

		For x = 0 To mw - 1

			a = map ( level, x, y ) 

			drawtile ( x, y, a, xo, yo ) 

		Next

	Next

End Function

Function edit ( ) 

	If editmode = True
	
		StopChannel ( snd_chn )

			drawmap ( ml ( mcx, mcy ), msx, msy ) 
			
				Color 20, 20, 20		
		
					Rect 0, 0, GraphicsWidth ( ), 36
		
				For x = 0 To 10
		
					drawtile ( x, 0, x ) 
		
					If edittile = x
		
						Color 255, 0, 0
		
						Rect x * tw, y * th, 32, 32
		
					EndIf
		
					If RectsOverlap ( MouseX ( ), MouseY ( ), 1, 1, x * tw, 0, 32, 32 )
		
						Color 255, 255, 255
		
						Rect x * tw, 0, 32, 32
		
						Color 0, 0, 0
		
						Rect x * tw + 1, 1, 30, 30
		
						If MouseDown ( 1 ) = True Then edittile = x
		
					EndIf
		
				Next
	
				If RectsOverlap ( MouseX ( ), MouseY ( ), 1, 1, 0, 32, GraphicsWidth ( ), GraphicsHeight ( ) - 32 ) 
		
					x1 = ( MouseX ( ) - msx ) / tw
		
					y1 = ( MouseY ( ) - msy ) / th
		
					If MouseDown ( 1 ) = True
		
						map ( ml ( mcx, mcy ), x1, y1 ) = edittile
		
							updatemap x1, y1, edittile
						
						FlushMouse ( )
		
					EndIf
		
					Color 255, 255, 255
		
					Rect x1 * tw + msx, y1 * th + msy, 32, 32
		
					Color 0, 0, 0
		
					Rect x1 * tw + 1 + msx, y1 * th + 1 + msy, 30, 30
		
				EndIf
	
			If KeyDown ( 200 ) Then msy = msy + pspd : player_moving = False : map_moving = True
	
				If KeyDown ( 208 ) Then msy = msy - pspd : player_moving = False : map_moving = True
		
					If KeyDown ( 203 ) Then msx = msx + pspd : player_moving = False : map_moving = True
	
				If KeyDown ( 205 ) Then msx = msx - pspd : player_moving = False : map_moving = True

			snd_chn = PlaySound ( music )

		ChannelVolume snd_chn, 0.2618

	EndIf

End Function

; here we check If the player is
; at a border And If he can go To another map
; And set the start positions
Function switchmap ( ) 

	Teleport_Up ( )
	
		Teleport_Down ( )
	
		Teleport_Left ( )

	Teleport_Right ( )

End Function

Function centermap ( pspd = 3 ) 

;	If MilliSecs ( ) &gt; ti - 100

		If px &lt; GraphicsWidth ( ) / 3 And Abs ( msx ) &gt; 0 Then msx = msx + pspd : px = px + pspd
	
			If py &lt; GraphicsHeight ( ) / 3 And Abs ( msy ) &gt; 0 Then msy = msy + pspd : py = py + pspd
		
			If px &gt; GraphicsWidth ( ) / 100 * 66
		
				If ( Abs ( msx ) + GraphicsWidth ( ) ) &lt; mw * tw Then msx = msx - pspd : px = px - pspd
		
			EndIf
	
		If py &gt; GraphicsHeight ( ) / 100 * 66
	
			If ( Abs ( msy ) + GraphicsHeight ( ) ) &lt; mh * th Then msy = msy - pspd : py = py - pspd
	
		EndIf
		
		;ti = MilliSecs ( )
		
;	EndIf

End Function

Function moveplayer ( pspd = 3 ) 

	Local x = 0
	
		Local y = 0
		
			If Not ( KeyDown ( 29 ) Or KeyDown ( 157 ) )
	
				If MilliSecs ( ) &gt; ti - 100
	
					If KeyDown ( 200 ) Then y = y - pspd : player_moving = True : map_moving = False : FlushKeys ( )
				
						If KeyDown ( 208 ) Then y = y + pspd : player_moving = True : map_moving = False : FlushKeys ( )
					
						If KeyDown ( 203 ) Then x = x - pspd : player_moving = True : map_moving = False : FlushKeys ( )
						
					If KeyDown ( 205 ) Then x = x + pspd : player_moving = True : map_moving = False : FlushKeys ( )
						
				EndIf
					
				ti = MilliSecs ( )
							
			EndIf
			
			If ( walk_through_walls = 1 )
	
				If MilliSecs ( ) &gt; ti - 100
	
					If KeyDown ( 200 ) Then y = y - pspd : player_moving = True : map_moving = False
				
						If KeyDown ( 208 ) Then y = y + pspd : player_moving = True : map_moving = False
					
						If KeyDown ( 203 ) Then x = x - pspd : player_moving = True : map_moving = False
						
					If KeyDown ( 205 ) Then x = x + pspd : player_moving = True : map_moving = False
						
				EndIf
					
				ti = MilliSecs ( )
				
			EndIf
			
		If px + x &lt; 0 Then x = 0
						
			If px + pw + x &gt; GraphicsWidth ( ) Then x = 0
					
				If py + y &lt; 0 Then y = 0
				
					If py + ph + y &gt; GraphicsHeight ( ) Then y = 0
			
				If walk_through_walls = 0
	
					collide = playermapcollision ( ( px + Abs ( msx ) ) + x, py + Abs ( msy ) ) 
				
					If walk_through_walls = 0
				
						If collide = 0
									
							px = px + x
									
						ElseIf collide = 2 And Rand ( 0, 100 ) &lt; 40
									
							px = px + x
									
						EndIf
						
					Else
					
						collide = 0
						
					EndIf
					
				EndIf
				
			If walk_through_walls = 0
		
				collide = playermapcollision ( px + Abs ( msx ), py + Abs ( msy ) + y ) 
				
			
			Else
			
				collide = 0
			
			EndIf
		
		If collide = 0
			
			py = py + y
			
		ElseIf collide = 2 And Rand ( 0, 100 ) &lt; 40
			
			py = py + y
						
		EndIf
		
	Return False

End Function

;Function playermapcollision ( x1, y1 ) 

;	Local cx = x1 / tw
		
;		Local cy = y1 / th
			
;			For y2 = cy - 1 To cy + 1
					
;				For x2 = cx - 1 To cx + 1	
						
;					If x2 &gt;= 0 And x2 &lt; mw And y2 &gt;= 0 And y2 &lt; mh
							
;						mt = map ( ml ( mcx, mcy ), x2, y2 ) 
								
;							; Is the Map around the Player a Block?
					
;							If mt = 1 Or mt = 3 Or mt = 4 Or mt = 7
									
;								If RectsOverlap ( x2 * tw, y2 * th, tw, th, x1, y1, pw, ph ) 
										
									; Here the Player is inside a Wall
											
									; A value 1 on the Map
										
;								Return True
									
;							EndIf
								
;						EndIf
							
;					EndIf
						
;				Next
					
;			Next
	
		; No Collision Occured

;	Return 0

;End Function


Function playermapcollision ( x1, y1 )

	Local cx = x1 / tw

		Local cy = y1 / th
	
			For y2 = cy - 1 To cy + 1
		
				For x2 = cx - 1 To cx + 1	
			
					If x2 &gt;= 0 And x2 &lt;= mw And y2 &gt;= 0 And y2 &lt;= mh
			
						mt = map ( ml ( mcx, mcy ), x2, y2 )

							; Is the map around the player a block
				
						If mt = 1 Or mt = 3 Or mt = 7
				
							If RectsOverlap ( x2 * tw, y2 * th, tw, th, x1, y1, pw, ph )

								DebugLog mt
					
									; Here the player is inside a wall

									; a value 1 on the map
					
								Return mt
					
							EndIf
				
						EndIf
			
					EndIf
			
				Next
		
			Next

		; no collision occured

	Return False

End Function

Function playeritemcollision ( ) 

	Local cx = ( px + Abs ( msx ) ) / tw

	Local cy = ( py + Abs ( msy ) ) / th

	For y2 = cy - 1 To cy + 1

		For x2 = cx - 1 To cx + 1

			If x2 &gt;= 0 And x2 &lt; mw And y2 &gt;= 0 And y2 &lt; mh
			
				mt = map ( ml ( mcx, mcy ), x2, y2 )

				; Collision with rupee

					; Is the Map around the Player a 9 value?

				If mt = 9

					If RectsOverlap ( x2 * tw + 8, y2 * th + 8, tw - 16, th - 16, px + Abs ( msx ), py + Abs ( msy ), pw, ph ) 

						; Here the player touches a map item ( 9 ) 

							; We remove it from the map

								gold = gold + 1
							
								rupee_snd = PlaySound ( rupee )

							map ( ml ( mcx, mcy ), x2, y2 ) = 0

						updatemap ( x2, y2, 0 ) 

					EndIf

				EndIf
				
					; Collision with Key

						; Is the Map around the Player an 8 value?
	
					If mt = 8
	
						If RectsOverlap ( x2 * tw + 8, y2 * th + 8, tw - 16, th - 16, px + Abs ( msx ), py + Abs ( msy ), pw, ph )
	
							; Here the player touches a map item ( 9 ) 

								; We remove it from the map
	
									keys = keys + 1

									reg_item_snd = PlaySound ( reg_item )
	
								map ( ml ( mcx, mcy ), x2, y2 ) = 0
	
							updatemap ( x2, y2, 0 ) 
	
						EndIf
	
					EndIf
				
				; Collision with Door

					; Is the Map around the Player a 7 value?

				If mt = 7
				

					dcoll_x1pos = ( x2 * tw - 1 )

					dcoll_y1pos = ( y2 * th - 1 )

					dcoll_x1wth = ( tw + 2 )

					dcoll_y1hgt = ( th + 2 )

					
					dcoll_x2pos = ( px + Abs ( msx ) )
					
					dcoll_y2pos = ( py + Abs ( msy ) )
					
					dcoll_x2wth = ( pw )

					dcoll_y2hgt = ( ph )

					;If RectsOverlap ( x2 * tw - 1, y2 * th - 1, tw + 2, th + 2, px + Abs ( msx ), py + Abs ( msy ), pw, ph )

					If RectsOverlap ( dcoll_x1pos, dcoll_y1pos, dcoll_x1wth, dcoll_y1hgt, dcoll_x2pos, dcoll_y2pos, dcoll_x2wth, dcoll_y2hgt )

				 		If keys &gt; 0

							; Here the Player touches a map item ( 9 ) 

								; We remove it from the map
	
									keys = keys - 1
									
									dc_snd = PlaySound ( dc_open )

								map ( ml ( mcx, mcy ), x2, y2 ) = 0

							updatemap ( x2, y2, 0 )

						EndIf

					EndIf

				EndIf
	
			EndIf

		Next

	Next

End Function

Function updatemap ( x, y, t ) 

	drawtile ( x, y, t ) 

End Function

Function drawplayer ( ) 

	Color 0, 0, 255

	Oval px, py, pw, ph

End Function

Function makemaps ( ) 

	For i = 0 To numlevels - 1

		For y = 0 To mh - 1

			For x = 0 To mw - 1

				a = map ( i, x, y ) 

				drawtile ( x, y, a ) 

			Next

		Next

	Next

End Function

Function drawtile ( x, y, t, xo = 0, yo = 0 ) 

	Select t

		;Nothing
		Case 0

			Color 0, 0, 0

			Rect x * tw + xo, y * th + yo, tw, th

		;Wall

		Case 1

			Color 255, 255, 255

			Rect x * tw + xo, y * th + yo, tw, th

		;Water

		Case 2

			Color 30, 140, 255

			Rect x * tw + xo, y * th + yo, tw, th

		;Tree

		Case 3

			Color 0, 255, 0

				x1 = x * tw + xo
	
					y1 = y * th + yo
		
					Line x1 + tw / 2, y1, x1 + tw, y1 + th
	
				Line x1 + tw, y1 + th - 1, x1, y1 + th - 1

			Line x1, y1 + th, x1 + tw / 2, y1

		;Deep Water

		Case 4

			Color 30, 100, 245

			Rect x * tw + xo, y * th + yo, tw, th

		; Door

		Case 7

			Color 150, 150, 150

			Rect x * tw + xo, y * th + yo, tw, th

		; Key

		Case 8

			Color 180, 120, 00
	
				Oval x * tw + 2 + xo, y * th + 2 + yo, tw - 4, th - 4
		
				Color 255, 255, 255
	
			Text x * tw + ( tw / 3.0 ) + xo, y * th + ( th / 3.4 ) + yo, "K"

		; Gold

		Case 9

			Color 230, 200, 0
	
			Oval ( x * tw + 2 ) + xo, ( y * th + 2 ) + yo, tw - 4, th - 4

	End Select

End Function

Function readlevels ( ) 

	Print numlevels

	For i = 0 To numlevels - 1

		For y = 0 To mh - 1

			For x = 0 To mw - 1

				Read a

					map ( i, x, y ) = a

				If a = 9 Then totalgold = totalgold + 1

			Next

		Next

	Next

End Function

Function savelevels ( fi$ = "save.dat", whichlevel = 1 ) 

	If FileType ( fi$ ) &lt;&gt; 0 Then DeleteFile ( fi$ )

		save_file = WriteFile ( fi$ )
		
			DebugLog "whichlevel : " + whichlevel

			If whichlevel &lt; 1 Then whichlevel = 1
			
				If whichlevel &gt; ( numlevels - 1 ) Then whichlevel = ( numlevels - 1 )

					If whichlevel = 1 Then Restore level1

						If whichlevel = 2 Then Restore level2
	
					If whichlevel = 3 Then Restore level3
	
				If whichlevel = 4 Then Restore level4

			If whichlevel = 5 Then Restore level5

			For i = 0 To numlevels - 1

				For y = 0 To mh - 1
		
					For x = 0 To mw - 1
					
						Read a
			
							map ( i, x, y ) = a
							
							DebugLog map ( i, x, y )
			
						WriteLine ( save_file, map ( i, x, y ) )
		
					Next
		
				Next
		
			Next
		
		CloseFile ( save_file )

	Return False

End Function

Function Teleport_to_Map ( whichmap = 1 )

	If Not player_moving
	
		If Not KeyDown ( 42 ) Or KeyDown ( 54 )

			If ( KeyDown ( 29 ) Or KeyDown ( 157 ) )
			
				If mt &lt;&gt; 2
			
					If ( KeyHit ( 32 ) Or KeyHit ( 205 ) )
				
						ml ( mcx, mcy ) = ml ( mcx, mcy ) + 1
			
						If ml ( mcx, mcy ) &gt; ( numlevels - 1 ) Then ml ( mcx, mcy ) = 0
	
					EndIf
					
					If ( KeyHit ( 30 ) Or KeyHit ( 203 ) )
						
						ml ( mcx, mcy ) = ml ( mcx, mcy ) - 1
									
						If ml ( mcx, mcy ) &lt; 0 Then ml ( mcx, mcy ) = ( numlevels - 1 )
							
					EndIf
					
				EndIf
					
				FlushKeys ( )
				
			EndIf
			
		EndIf
	
	EndIf

End Function

Function Player_XPos ( )

	Return px

End Function

Function Player_YPos ( )

	Return py

End Function

Function Player_Size_X ( )

	Return pw

End Function

Function Player_Size_Y ( )

	Return ph

End Function

Function Teleport_Up ( )

	; Touches the Top part of the Screen
	If py &lt; 4 And mcy &gt; 0 
	
		If ml ( mcx, mcy - 1 ) &lt;&gt; -1
	
			mcy = mcy - 1
					
				py = ( ( GraphicsHeight ( ) - 10 ) - ph )

			msy =  - ( mh * th - GraphicsHeight ( ) ) 

		EndIf
	
	EndIf

End Function

Function Teleport_Down ( )

	; Touches the bottom of the Screen
	If py + ph &gt; GraphicsHeight ( ) - 5 And mcy &lt; 2

		If ml ( mcx, mcy + 1 ) &lt;&gt; -1

			mcy = mcy + 1

				py = 10
	
			msy = 0

		EndIf

	EndIf

End Function

Function Teleport_Left ( )

	; Touches the Left side of the Screen
	If px &lt; 4 And mcx &gt; 0

		If ml ( mcx - 1, mcy ) &lt;&gt; -1

			mcx = mcx - 1
				
				px = ( ( GraphicsWidth ( ) - 10 ) - pw )
	
			msx =  - ( mw * tw - GraphicsWidth ( ) )
			
		EndIf		

	EndIf

End Function

Function Teleport_Right ( )

	; Touches the Right side of the Screen
	If px + pw &gt; GraphicsWidth ( ) - 4 And mcx &lt; 2

		If ml ( mcx + 1, mcy ) &lt;&gt; -1
	
			mcx = mcx + 1
	
				px = 10
		
			msx = 0

		EndIf
	
	EndIf

End Function

Function Save ( )

	;key space

		If ( KeyHit ( 57 ) )
			
			If ( FileType ( "level" + "_" + Str$ ( ml ( mcx, mcy ) + 1 ) + ".dat" ) ) = 0
				
				savelevels ( "level" + "_" + Str$ ( ml ( mcx, mcy ) + 1 ) + ".dat", ml ( mcx, mcy ) )

			ElseIf ( FileType ( "level" + "_" + Str$ ( ml ( mcx, mcy ) + 1 ) + ".dat" ) = 1 )
				
				api_MessageBox ( 0, "FILE IS ALREADY SAVED!", "WARNING!", 0 )
					
			Else
				
				api_MessageBox ( 0, "AN UNKNOWN ERROR OCCURED!", "ERROR!", 0 )
					
			EndIf
				
		EndIf
		
	Return False

End Function

.level1
Data 0,0,0,0,0,0,0,0,0,0,0,0,2,2,4,2,2,2,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1
Data 0,0,0,0,0,0,0,2,2,2,2,2,4,4,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1
Data 0,0,0,0,0,0,2,4,4,4,4,4,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1
Data 0,0,0,0,0,2,4,4,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1
Data 0,0,0,2,2,4,4,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,8,0,1,1,1,1,1,1,1
Data 2,2,2,4,4,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,1,1,1,1,1,1,1
Data 4,4,4,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,1,0,1,1,1,1,1
Data 2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0,0,1,1,1,1,1
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,1,0,1,1,1
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,1,1,1,1
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,3,3,0,0,0,1,1,1,1
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0
Data 0,0,0,1,1,1,1,1,1,1,0,0,0,0,1,9,9,9,1,0,0,0,0,3,3,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0
Data 0,0,0,1,0,0,0,9,9,1,0,0,0,0,1,9,9,9,1,0,0,0,0,3,3,3,0,0,0,0,3,3,3,3,3,0,0,0,0,0
Data 0,0,0,1,0,0,0,0,0,1,0,0,0,0,1,0,0,0,1,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,1,0,0,0,0,0,1,0,0,0,0,1,0,0,0,1,0,0,0,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,1,0,0,0,0,0,1,0,0,1,1,1,1,1,7,1,0,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,1,0,0,0,0,0,7,0,0,7,0,0,0,0,0,1,0,0,0,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,0,0,0,0,0
Data 0,0,0,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,8,2,2,4,4,2,2,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,4,4,4,2,0,2,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,4,4,2,2,2,2,2,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,2,2,4,2,2,2,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,2,2,2,2,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,2,2,0,0,0,0,0,0,3,3,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3
Data 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3
Data 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3

.level2
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1
Data 0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1
Data 0,0,1,0,9,9,1,0,0,0,3,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1
Data 0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1
Data 0,0,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1
Data 0,0,1,1,7,1,0,0,0,0,0,0,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1
Data 0,0,0,0,0,0,0,0,0,0,2,2,2,4,4,2,2,0,0,0,2,2,2,2,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1
Data 0,0,0,0,0,0,0,0,0,2,2,4,2,2,2,2,2,0,0,0,2,2,2,2,0,0,0,0,3,0,0,0,0,0,0,1,1,1,1,1
Data 0,0,0,0,0,0,0,0,2,2,4,2,2,0,0,0,0,0,0,0,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0
Data 0,0,0,0,0,2,2,2,2,2,2,2,0,0,0,0,0,0,0,0,2,2,0,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,2,4,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,2,4,4,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,2,2,4,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,2,2,2,2,2,0,0,0,0,0,3,3,3,0,0,0
Data 0,0,0,0,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,4,2,2,2,2,0,0,0,0,0,0,3,3,0,0
Data 0,0,0,2,4,4,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,4,4,4,4,2,0,2,0,0,0,0,0,0,3,0,0
Data 0,0,0,2,4,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,4,4,4,4,2,2,2,0,0,0,0,0,0,0,0
Data 0,0,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,2,2,4,2,2,2,0,2,0,0,0,0,0,0,0,0
Data 0,2,2,2,2,8,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,2,2,2,2,0,2,2,2,0,0,0,0,0,0,0,0,0
Data 2,2,2,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0
Data 2,2,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0
Data 2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
Data 0,0,0,3,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,1,1
Data 0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,0,1,1,1,1,1
Data 0,0,0,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1

.level3
Data 3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3
Data 3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3
Data 3,3,3,3,3,3,0,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,3,3,3
Data 3,3,3,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,3,3,3,0,3,3,3,0,3,3,0,0,0,0,0,0,0,3,3,3
Data 3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,3,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,3,3,3
Data 3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,0,3,3,3
Data 3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,4,4,4,2,0,3,3,3
Data 3,8,0,0,0,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,0,3,3,3
Data 3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,3,3
Data 3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 0,0,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,3,3
Data 0,0,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,1,7,1,1,1,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,9,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,1,9,9,9,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0,0,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,3,3,0,0,0,0,0,3
Data 0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,0,0,0,0,0,0,0,3
Data 0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3
Data 0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,3,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 3,3,3,0,0,0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,3,3
Data 3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3

.level4
Data 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3
Data 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3
Data 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3
Data 3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3
Data 3,0,0,1,1,1,7,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3
Data 3,0,0,1,9,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 3,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,7,1,1,1,1,0,0,3
Data 3,0,0,1,0,0,0,0,0,0,0,9,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,9,1,0,0,3
Data 3,0,0,1,0,0,0,1,1,1,1,1,1,7,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,9,1,0,0,3
Data 3,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,3
Data 3,0,0,1,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,3
Data 3,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,7,1,1,1,1,0,0,3
Data 3,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 3,0,0,1,0,0,1,0,0,1,0,0,0,0,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3
Data 3,0,0,7,0,0,1,1,1,1,0,0,0,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3
Data 3,0,0,1,0,0,1,0,0,0,0,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3
Data 3,0,0,1,0,9,1,0,0,0,3,3,3,3,3,3,3,8,0,0,0,3,3,3,0,3,0,0,0,0,0,0,3,3,3,3,3,3,3,3
Data 3,0,0,1,1,1,1,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,3,3,8,3,3,3,3,3
Data 3,0,0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,3,3,3,3,3
Data 3,0,0,0,0,0,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0,0,3,3,3,3,3
Data 3,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,3,0,0,0,0,0,0,0,0,3,0,3,3
Data 3,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,3,3
Data 3,3,0,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3
Data 3,3,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3
Data 3,3,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3
Data 3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3
Data 3,3,3,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0,2,2,2,2
Data 3,3,3,0,0,0,0,0,2,2,2,2,2,2,0,2,2,2,2,2,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2
Data 2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2

.level5
Data 3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0
Data 3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0
Data 3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0
Data 3,3,3,3,0,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,3,3,3,3,3,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0
Data 3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0
Data 3,3,3,3,3,3,0,3,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0
Data 3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,0,3,3,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,3,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,0,0,0,0,1,1,1,0,0,0,0,0,3,0,0,0,0,7,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,0,0,0,0,7,0,1,0,0,0,0,3,0,0,0,0,0,1,0,0,0,0,8,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,0,0,0,0,1,9,1,0,0,0,0,3,0,0,0,0,0,1,0,0,0,0,8,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,1,9,9,8,8,8,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,1,1,1,1,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0
Data 2,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 2,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 2,2,3,3,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
Data 2,2,2,3,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,0
Data 2,2,2,3,3,3,0,2,2,2,2,0,2,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0
Data 2,2,2,3,3,2,0,2,2,2,2,2,2,2,2,2,2,2,2,2,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0
Data 2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,0,0,3,3,0,0,3,3,3,3,0,0,0,0,0,0,0,0
Data 2,2,4,4,4,4,4,4,2,2,2,2,2,2,4,4,4,2,2,2,2,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0
Data 2,0,2,4,4,4,4,2,4,4,4,4,4,4,4,4,4,4,4,4,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0
Data 2,2,4,4,4,4,4,4,4,4,2,2,4,4,4,4,4,4,4,4,4,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3
Data 2,2,4,4,4,4,4,4,4,2,2,2,2,2,4,4,4,4,4,4,4,4,4,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3
</textarea><br><br>Thanks!<br><br>~GF <br><br></td></tr></table><br><table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamStrange</td><td align="right"><font class=tiny>2016</font></td></tr></table></td></tr><tr ><td class="posttext"> @Guy i'm on blitzmax, so my versions will be in that. <br>Yep there are errors in the base edit code because of removing the bitmap draw code and going to drawing the entire map. that will also cause slowdown as you are drawing the entire map and not cheering for bounds.<br><br>ok. I'll fix my version and post <br><br></td></tr></table><br><table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>2016</font></td></tr></table></td></tr><tr ><td class="posttext"> Sounds good! =) <br><br></td></tr></table><br><table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamStrange</td><td align="right"><font class=tiny>2016</font></td></tr></table></td></tr><tr ><td class="posttext"> ok, this is still in progress. there is no map overview, loading saving not yet completed.<br><br>There is a lot of extra drawing code - for all the new tile types (about 23). it works the same as before though.<br><br>a lot of the internal code has been removed/changed to make it work correctly - proper error checking, etc<br><br>added wall ignore mode - this is not the same as yours @Guy<br><br>there is no sound - this is not needed for this<br><br>the last graphic tile is a boulder - sort of desert pink/grey. it is a special case so there is some strange checking code just for it. basically you can push a boulder. if you push it into a hole - it fills it, if you push it into water, it drops into it.<br><br><img src="https://vjointeractive.files.wordpress.com/2016/05/screen-shot-2016-05-10-at-14-59-54.png"><br><br>ok, all for now. here's the BlitzMax code :<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">

strict

'window setup
global windowWidth:int = 640
global windowHeight:int = 480

Graphics windowWidth, windowHeight


const MAP_NONE = 0
const MAP_WALL = 1
const MAP_WATER = 2
const MAP_TREE = 3
const MAP_DEEPWATER = 4
const MAP_ROCK = 5
const MAP_ROAD = 6
const MAP_DOOR = 7
const MAP_KEY = 8
const MAP_GOLD = 9
const MAP_GRASS = 10
const MAP_STONE = 11
const MAP_BRIDGE = 12
const MAP_BRIDGEV = 13
const MAP_ROOF = 14
const MAP_DARKGRASS = 15
const MAP_TREE2 = 16
const MAP_FENCE = 17
const MAP_LADDER = 18
const MAP_CLIFF = 19
const MAP_FLOWERS = 20
const MAP_HOLE = 21
const MAP_GRAVE = 22
const MAP_WATERFALL = 23
const MAP_SWORD = 24
const MAP_SHIELD = 25
const MAP_HEART = 26
const MAP_BOULDER = 27
const MAP_WATERBOULDER = 28



Global editmode:int = False
Global edittile:int 

Global keys:int = 0
global totalKeys:int = 0
Global gold:int = 0
global totalgold:int = 0


' map variables
Global mapWidth:int = 40
Global mapHeight:int = 30
Global tileWidth:int = 32
Global tileHeight:int = 32
global displayWidth:int = windowWidth / tileWidth
global displayHeight:int = windowHeight / tileHeight

global xLevelMax:int = 5
global yLevelMax:int = 3
global totalLevels:int = xLevelMax * yLevelMax

Global numlevels:int = 5

global map:int[totalLevels, mapWidth, mapHeight]

' player variables
Global pw = (tileWidth-5)
Global ph = (tileHeight-5)
Global px = GraphicsWidth()/2- tileWidth/2
Global py = GraphicsHeight()/2-tileHeight/2

' scrolling variables
Global mx
Global my
Global msx = 0
Global msy
'temporary vars for editing
Global tempmx
Global tempmy
Global tempmsx = 0
Global tempmsy

global ignoreWalls:int = false

' for the multi map
'
' this is a mdimensional array
' the player location on the multi map
' is mcx (map cursor x)
' it starts at 1,1, the center of the 
' multidimensional array
'
Global mcx=1
Global mcy=1

global ml:int[xLevelMax, yLevelMax]




setblend alphablend

readlevels()
'makemaps()

'.mainloop
While KeyDown(1) = False and not(AppTerminate())
	Cls	
	If KeyHit(KEY_W) then
		ignoreWalls = not(ignoreWalls)
	end if
	
	If KeyHit(KEY_E) then
		If editmode = True Then
			editmode = False
			mx = tempmx
			my = tempmy
			msx = tempmsx
			msy = tempmsy
		Else
			editmode = True
			tempmx = mx
			tempmy = my
			tempmsx = msx
			tempmsy = msy
		end if
	EndIf
	
	edit
	
	If editmode = False
		local i:int
		For i=0 To 4 'speed of movement
			moveplayer
			centermap
			switchmap()
		Next
		
		drawmap(ml[mcx,mcy], msx,msy)
		
		setalpha 0.2
		setcolor 0,0,0
		drawrect 0,0,640,30
		setalpha 1
		
		drawplayer()
		
		setColor 0,0,0
		drawText "Use cursors to move around",1,1
		drawText "cursor : " + mcx +","+mcy+" on map : "+ml[mcx,mcy], 1,16
		drawText "gold:"+gold+" of "+totalgold+"   keys:"+keys+" of "+totalkeys+"    w: ignore walls", 241,1
		drawText "e: edit mode    m: map overview", 241,16
		setColor 240,240,150
		drawText "Use cursors to move around",0,0
		drawText "cursor : " + mcx +","+mcy+" on map : "+ml[mcx,mcy], 0,15
		drawText "gold:"+gold+" of "+totalgold+"   keys:"+keys+" of "+totalkeys+"    w: ignore walls", 240,0
		drawText "e: edit mode    m: map overview", 240,15
	End If
	
	delay 10
	Flip
Wend

saveLevels()
End


function saveLevels()
	local file:TStream = writefile("default.map")

	if not file then
		print "failed to create default.map file" 
	else
		writeline file,"hello world"

		closestream file
	end if
end function



Function readlevels()
	local file:TStream
	file = openfile("default.map")
	if not file then
		print "could not open file default.map"
		local i:int
		local x:int
		local y:int
		local tile:int
		
		'read inbuilt map data
		print numlevels
		For i=0 To numlevels-1
			For y=0 To mapHeight-1
				For x=0 To mapWidth-1
					Readdata tile
					map[i, x,y] = tile
					if tile = MAP_GOLD then totalgold :+ 1
					if tile = MAP_KEY then totalkeys :+ 1
				Next
			Next
		Next

		'null all level data
		For y=0 To yLevelMax-1
			For x=0 To xLevelMax-1
				ml[x, y] = -1
			next
		next

		'create new level data
		'corner maps -1 non existant
		ml[0,0]=-1
		ml[2,0]=-1
		ml[0,2]=-1
		ml[2,2]=-1
		' the maps assigned
		ml[1,0]=1
		ml[1,1]=0
		ml[1,2]=3
		ml[2,1]=2
		ml[0,1]=4

	else
		print "opening file"

'		while not eof(file)
'			print readline(file)
'		wend
		closestream file
	end if

End Function


Function drawmap(level:int, xo:int, yo:int)
	local xs:int = -xo/mapWidth
	local ys:int = (-yo/mapHeight)-1
	if ys &lt; 0 then ys = 0
	if xs &lt; 0 then xs = 0

	local xe:int = xs+displayWidth + 4
	local ye:int = ys+displayHeight + 1
	
	if xe =&gt; mapWidth then xe = mapWidth-1
	if ye =&gt; mapHeight then ye = mapHeight-1
	
	local x:int
	local y:int	
	
	For y = ys To ye
		For x = xs To xe
			drawtile(x,y, map[level,x,y], xo,yo)
		Next
	Next
End Function



Function drawplayer()
	if ignoreWalls then 
		setColor 200,130,10
		drawOval px,py,pw,ph
		setcolor 250,250,250
		drawtext "ignore", px, py
	else
		setColor 230,230,100
		drawOval px,py,pw,ph
	end if
End Function


'triangle must be clockwise. or it won't draw
Function DrawTriangle(x1:Float,y1:Float, x2:Float,y2:Float, x3:Float,y3:Float, r1:Float, g1:Float, b1:Float, alpha:float)
'	glDisable(GL_TEXTURE_2D)
	
	glColor4f(r1, g1, b1, alpha)

	glBegin(GL_TRIANGLES)
	
		glVertex2f(x1,y1)
		glVertex2f(x2,y2)
		glVertex2f(x3,y3)

	glEnd()

'	glEnable(GL_TEXTURE_2D)
End Function


function drawFlower(x:int, y:int)
		setcolor 255,255,200
		drawline x,y+1,x+2, y+1
		drawline x+1,y,x+1, y+2
		
		setColor 150,100,0
		plot x+1, y+1
end function


function drawScreenTile(tile:int, x1:int, y1:int, Width:int, Height:int)
	local x4:int = x1 + Width-1
	local y4:int = y1 + Height-1
	
	local drawWater:int = false
	
	Select tile
		Case MAP_NONE 'base grass
			setColor 60,100,0
			drawRect x1,y1,Width,Height

			drawWater = true
			
		case MAP_SWORD	
			setColor 60,100,0
			drawRect x1,y1,Width,Height
			
			local x2:int = x1 + (width * 0.5)
			local h2:int = Height - 10
			local y2:int = y1+h2
			
			setcolor 160,160,160
			drawline x2,y1, x2,y1+h2
			setcolor 150,150,150
			drawline x2-1,y1+2, x2-1,y1+h2
			drawline x2-2,y1+6, x2-2,y1+h2
			setcolor 130,130,130
			drawline x2+1,y1+2, x2+1,y1+h2
			drawline x2+2,y1+6, x2+2,y1+h2

			setcolor 90,40,00
			drawrect x2-2,y2+4, 5,4

			setcolor 190,130,50
			drawrect x2-6,y2, 13,4

			setcolor 150,70,20
			drawoval x2-2,y2+6, 4,4
			
		case MAP_SHIELD
			setColor 60,100,0
			drawRect x1,y1,Width,Height

			setcolor 150,150,150

		case MAP_HEART
			setColor 60,100,0
			drawRect x1,y1,Width,Height

		Case MAP_GRAVE
			setColor 60,100,0
			drawRect x1,y1,Width,Height
			
			setcolor 150,150,150
			drawoval x1+5, y1+2, 15,10

			setcolor 130,130,130
			drawoval x1+5, y1+4, 15,10
			drawrect x1+5, y1+8, 15,6
			setcolor 120,120,120
			drawrect x1+5, y1+10, 15,6

			setColor 114,42,10
			drawrect x1+7, y1+16, 12,16
			setColor 104,32,0
			drawrect x1+13, y1+16, 6,16
						
		Case MAP_HOLE
			setColor 60,100,0
			drawRect x1,y1,Width,Height

			setColor 60,150,0
			drawoval x1, y1+4, Width, Height*0.6
			setColor 114,42,10
			drawoval x1, y1+5, Width, Height*0.6
			setColor 50,30,10
			drawoval x1, y1+8, Width, Height*0.6
			setColor 0,0,0
			drawoval x1, y1+12, Width, Height*0.4
			

		Case MAP_FLOWERS
			setColor 60,100,0
			drawRect x1,y1,Width,Height
			
			setcolor 200,150,120
			drawFlower(x1+3, y1+3)
			drawFlower(x1+8, y4-15)
			drawFlower(x1+12, y1+20)
			drawFlower(x4-12, y4-17)

		Case MAP_STONE
			setColor 101,93,94
			drawRect x1,y1,tileWidth,tileHeight

			setColor 90,83,84
			drawWater = true

		Case MAP_ROOF
			setColor 160,13,20
			drawRect x1,y1,tileWidth,tileHeight

			local xx:int
			local yy:int

			setColor 160,43,60
			drawrect x1,y1,tileWidth, 2

			setColor 100,0,0
			drawrect x1,y4-2,tileWidth,2

			setColor 140,0,0
			for yy = y1 to y4 step 4
				drawline x1, yy, x4, yy
			next
			
			setColor 80,50,20
			for xx = x1 to x4 step 6
				drawline xx,y1, xx, y4
			next
			

		Case MAP_BRIDGE
			setColor 120,51,20
			drawRect x1,y1,tileWidth,tileHeight

			local x2:int = x1 + (tileWidth*0.3)
			local x3:int = x1 + (tileWidth*0.7)
			local y3:int = y1 + (tileHeight-2)
			local xx:int

			setColor 80,50,20
			for xx = x1 to x4 step 6
				drawline xx,y1, xx, y4
			next
			
			setColor 30,100,245
			drawline x1,y1, x2,y1
			drawline x3,y1, x4,y1
			drawline x2,y4, x3,y4

			setColor 00,50,200
			drawline x1,y4, x2,y4
			drawline x3,y4, x4,y4
			drawline x2,y3, x3,y3

		Case MAP_BRIDGEV
			setColor 120,51,20
			drawRect x1,y1,tileWidth,tileHeight

			local yy:int

			setColor 80,50,20
			for yy = y1 to y4 step 6
				drawline x1,yy, x4,yy
			next
			
		Case MAP_DARKGRASS
			setColor 40,80,0
			drawRect x1,y1,tileWidth,tileHeight

			setColor 60,100,0
			drawWater = true
			
		Case MAP_FENCE
			setColor 60,100,0
			drawRect x1,y1,tileWidth,tileHeight
			
			local y2:int = y1+(tileHeight* 0.25)
			local y3:int = y1+(tileHeight* 0.5)
			local y5:int = y1+(tileHeight* 0.75)
			
			setcolor 180,180,180
			drawRect x1,y2,tileWidth,4
			drawRect x1,y3,tileWidth,4
			drawRect x1,y5,tileWidth,4
			setcolor 210,210,210
			drawLine x1,y2, x4,y2
			drawLine x1,y3, x4,y3
			drawLine x1,y5, x4,y5

			local x2:int = x1+(tileWidth* 0.23)
			local x3:int = x1+(tileWidth* 0.68)

			setcolor 150,150,150
			drawRect x2+4,y1+2,1,tileHeight-4
			drawRect x3+4,y1+2,1,tileHeight-4
			setcolor 170,170,170
			drawRect x2,y1+2,4,tileHeight-4
			drawRect x3,y1+2,4,tileHeight-4
			setcolor 210,210,210
			drawRect x2,y1+2,5,2
			drawRect x3,y1+2,5,2
			
		Case MAP_LADDER
			setColor 114,42,10
			drawRect x1,y1,tileWidth,tileHeight

			local x2:int = x1+(tileWidth* 0.23)
			local x3:int = x1+(tileWidth* 0.68)
			local y2:int = y1+1

			setColor 104,42,10
			drawRect x3,y1,10,tileHeight

			setColor 124,42,10
			drawRect x2,y1,5,tileHeight

			setColor 60,100,0
			drawLine x2,y1,x3,y1
			drawLine x1,y4,x2,y4
			drawLine x3,y4,x4,y4
			setColor 60,150,0
			drawLine x1,y1,x2,y1
			drawLine x3,y1,x4,y1
			drawLine x2,y2,x3,y2
			
			setcolor 200,200,150
			drawrect x2+2, y1, 2, tileHeight
			drawrect x3-2, y1, 2, tileHeight
			
			local yy:int
			for yy = y1+3 to y4 step 5
				drawrect x2, yy, 16, 2
			next
			
		Case MAP_CLIFF
			setColor 114,42,10
			drawRect x1,y1,tileWidth,tileHeight

			local x2:int = x1+(tileWidth* 0.23)
			local x3:int = x1+(tileWidth* 0.68)
			local y2:int = y1+1

			setColor 104,42,10
			drawRect x3,y1,10,tileHeight

			setColor 124,42,10
			drawRect x2,y1,5,tileHeight

			setColor 60,100,0
			drawLine x2,y1,x3,y1
			drawLine x1,y4,x2,y4
			drawLine x3,y4,x4,y4
			setColor 60,150,0
			drawLine x1,y1,x2,y1
			drawLine x3,y1,x4,y1
			drawLine x2,y2,x3,y2
			
		Case MAP_TREE2
			setColor 60,100,0
			drawRect x1,y1,tileWidth,tileHeight

			local x2:int = x1 + (tileWidth * 0.3)
			local x5:int = x1 + (tileWidth * 0.7)
			local x3:int = x1 + (tileWidth * 0.5)
			local y3:int = y1 - (tileHeight * 0.5)
			local y5:int = y4 - 6
			
			setColor 90,51,20
			drawRect x3-3,y5,6,6

			setColor 30,100,30
			drawOval x1, y1-20, tileWidth, tileHeight+13

			setColor 40,130,30
			drawOval x1, y1-20, tileWidth-7, tileHeight+13

			setColor 50,150,30
			drawOval x1+(tilewidth*0.1), y1-15, tileWidth*0.4, tileHeight
			
		Case MAP_TREE'tree
			setColor 60,100,0
			drawRect x1,y1,tileWidth,tileHeight

			local x2:int = x1 + (tileWidth * 0.3)
			local x5:int = x1 + (tileWidth * 0.7)
			local x3:int = x1 + (tileWidth * 0.5)
			local y3:int = y1 - (tileHeight * 0.5)
			local y5:int = y4 - 3

			drawTriangle(x1,y5, x3,y3, x4,y5, 0,0.5,0,1)
			drawTriangle(x1,y5, x3,y3, x2,y5, 0.1,0.6,0.1,1)
			drawTriangle(x5,y5, x3,y3, x4,y5, 0,0.4,0,1)

			setColor 90,51,20
			drawRect x3-3,y5,6,3
			
			setColor 0,50,0
			drawline x1,y5, x4, y5
			drawline x1,y5, x3, y3 
			drawline x4,y5, x3, y3 

		Case MAP_GRASS
			setColor 60,100,0
			drawRect x1,y1,tileWidth,tileHeight

			setColor 0,150,0
			local xx:int
			local yy:int
			for yy = y1 to y4 step 8
				for xx = x1 to x4 step 4
					drawline xx,yy, xx, yy-5
				next
			next 
			
		Case MAP_WALL
			setColor 140,140,140
			drawRect x1,y1,tileWidth,tileHeight

			setColor 100,100,100
			local x2:int = x1 + (tileWidth * 0.3)
			local x3:int = x1 + (tileWidth * 0.7)
			local y2:int = y1 + (tileHeight * 0.5)
			drawline x1,y1, x4,y1
			drawline x1,y2, x4,y2

			drawline x2,y1, x2,y2
			drawline x3,y2, x3,y4
			
		Case MAP_ROAD
			setColor 176,146,73
			drawRect x1,y1,tileWidth,tileHeight

			setColor 156,126,63
			drawWater = true
			
		Case MAP_WATER'water
			setColor 30,100,245
			drawRect x1,y1,tileWidth,tileHeight
			
			setColor 70,150,245
			drawWater = true

		Case MAP_WATERBOULDER
			setColor 30,100,245
			drawRect x1,y1,tileWidth,tileHeight
			
			setalpha 0.2
			setcolor 50,50,50
			drawoval x1,y1,width,height-2
			setalpha 1
			y1 :+ 5
			height :- 5

			setColor 140,80,60
			drawOval x1+2, y1, Width-6, Height-7

			setColor 170,100,70
			drawOval x1+2, y1, Width-10, Height-7
			
			setColor 70,150,245
			drawWater = true

		Case MAP_WATERFALL
			setColor 0,50,150
			drawRect x1,y1,tileWidth,tileHeight
			setColor 0,00,100
			drawRect x1,y4-5,tileWidth,5

			local x2:int = x1+(tileWidth* 0.23)
			local x3:int = x1+(tileWidth* 0.68)
			local y2:int = y1+1

			setColor 0,50,220
			drawRect x3,y1,10,tileHeight

			setColor 0,50,180
			drawRect x2,y1,5,tileHeight

			setColor 0,0,150
			drawLine x2,y1,x3,y1
			drawLine x1,y4,x2,y4
			drawLine x3,y4,x4,y4
			setColor 100,150,200
			drawLine x1,y1,x2,y1
			drawLine x3,y1,x4,y1
			drawLine x2,y2,x3,y2

			setColor 100,150,200
			drawLine x1+10,y1,x1+10,y1+10
			drawLine x1+6,y1,x1+6,y1+3
			drawLine x1+20,y1,x1+20,y1+5
			drawLine x1+26,y1,x1+26,y1+3
			drawLine x1+15,y1+10,x1+15,y1+20

			setColor 0,50,150
			drawLine x1+8,y4,x1+8,y4-10
			drawLine x1+17,y4,x1+17,y4-3
			drawLine x1+23,y4,x1+23,y4-5

'			setColor 50,130,215
'			drawWater = true

		Case MAP_DEEPWATER'deepwater
			setColor 00,50,200
			drawRect x1,y1,tileWidth,tileHeight

			setColor 50,130,215
			drawWater = true

		Case MAP_DOOR ' door
			setColor 120,50,20
			drawRect x1,y1,tileWidth,tileHeight
			
			setColor 100,60,30
			local xx:int
			local yy:int
			for xx = x1 to x4 step 4
				drawline xx,y1, xx, y4
			next

			setColor 210,120,70
			drawRect x1,y1,tileWidth,5

			setColor 100,60,30
			drawFrame(x1,y1,tileWidth-1,tileHeight-1)
			drawLine x1,y1+5,x4,y1+5

		Case MAP_KEY' key
			setColor 60,100,0
			drawRect x1,y1,tileWidth,tileHeight

			setColor 180,150,50
			drawrect x1,y1+15,tileWidth, 5
			drawrect x4-4,y1+15, 4,10
			setColor 140,110,30
			drawrect x1,y1+19,tileWidth, 1
			setColor 200,170,50
			drawrect x1,y1+16,tileWidth, 1

			setColor 140,110,30
			drawOval x1,y1+12,tileWidth*0.3, tileHeight*0.5
			setColor 200,170,50
			drawOval x1,y1+10,tileWidth*0.3, tileHeight*0.5

			setColor 60,100,0
			drawOval x1+3,y1+15,tileWidth*0.12, tileHeight*0.25
			
		Case MAP_ROCK
			setColor 60,100,0
			drawRect x1,y1,Width,Height
			
			setColor 50,50,50
			drawOval x1, y4-4, Width-4, 4

			drawOval x1, y1, Width-4, Height-4

			setColor 70,70,70
			drawOval x1, y1, Width-8, Height-4

			setColor 80,80,80
			drawOval x1, y1, Width*0.5, Height-10

		Case MAP_BOULDER
			setColor 60,100,0
			drawRect x1,y1,Width,Height
			
			setColor 50,80,50
			drawOval x1, y4-4, Width-4, 4
			
			y1 :+ 5
			height :- 5

			setColor 140,80,60
			drawOval x1, y1, Width-4, Height-4

			setColor 170,100,70
			drawOval x1, y1, Width-8, Height-4

			setColor 190,120,90
			drawOval x1+3, y1+2, Width*0.5, Height-12

		Case MAP_GOLD ' gold
			setColor 60,100,0
			drawRect x1,y1,Width,Height

			setColor 140,100,30
			drawOval x1, y4-10, Width*0.5, Height*0.3
			drawOval x1+15, y4-10, Width*0.5, Height*0.3
			setColor 230,200,0
			drawOval x1, y4-13, Width*0.5, Height*0.3
			drawOval x1+15, y4-13, Width*0.5, Height*0.3
			
			setColor 140,100,30
			drawOval x1+7, y4-17, Width*0.5, Height*0.3
			setColor 230,200,0
			drawOval x1+7, y4-20, Width*0.5, Height*0.3
	End Select
	
	if drawWater then
			local y2:int = y1 + (Height * 0.1)
			local x2:int = x1 + (Width * 0.3)
			drawline x1,y2,x2,y2
			y2 = y1 + (Height * 0.3)
			x2 = x1 + (Width * 0.4)
			local x3:int = x1 + (Width * 0.6)
			drawline x2,y2,x3,y2
			y2 = y1 + (Height * 0.6)
			x2 = x1 + (Width * 0.7)
			x3 = x1 + (Width * 0.9)
			drawline x2,y2,x3,y2
			y2 = y1 + (Height * 0.8)
			x2 = x1 + (Width * 0.2)
			x3 = x1 + (Width * 0.6)
			drawline x2,y2,x3,y2
	end if
end function

Function drawtile(x,y,t, xo:int = 0, yo:int = 0)
	local x1:int = (x*tileWidth) + xo
	local y1:int = (y*tileHeight) + yo

	drawScreenTile(t, x1, y1, tileWidth, tileHeight)
End Function



function rectsOverlap:int(x1,y1,w1,h1, x2,y2,w2,h2)
	w1 :+ x1
	h1 :+ y1
	w2 :+ x2
	h2 :+ y2
	
	if w1 &lt; x2 then return false
	if x1 &gt; w2 then return false

	if h1 &lt; y2 then return false
	if y1 &gt; h2 then return false
	
	return true
end function



function drawFrame(x:int, y:int, width:int, height:int)
	drawline x,y, x+width,y
	drawline x+width,y, x+width,y+height
	drawline x+width,y+height, x, y+height
	drawline x,y+height, x,y
end function



Function edit()
	If editmode = false then return

	local x:int
	local x1:int
	local width:int = windowWidth / 27

	drawmap(ml[mcx,mcy], msx,msy)

	'draw black bg
	setColor 20,20,20		
	drawRect 0,0,GraphicsWidth(),36
	
	setColor 240,240,150
	drawText "Select tile from above",5,tileHeight+10

	For x = 0 To totalLevels
		x1 = (x*Width)
		drawFrame(x1,tileHeight+35, Width,tileHeight) 
	next		
	
	For x = 0 To 29
		x1 = (x*Width)

		drawScreenTile(x, x1, 0, Width, tileHeight)

		'drawtile(x,0,x)
		
		If RectsOverlap(MouseX(),MouseY(),1,1,x* Width,0,32,32)
			setColor 128+sin(millisecs())*128,0,0
			drawFrame x* Width,0,width-1,31

			If MouseDown(1) = True
				edittile = x
			End If
		End If
		
		If edittile = x
			setColor 255,0,0
			drawFrame(x* Width,0,width-1,31)
			drawRect x* Width,32,width,8
		End If
	Next
	
	'draw the map cursor
	If RectsOverlap(MouseX(),MouseY(),1,1,0,32,GraphicsWidth(),GraphicsHeight()-32)
		local x1:int = (MouseX()-msx)/tileWidth
		local y1:int = (MouseY()-msy)/tileHeight
		
		If MouseDown(1) = True then
			if x1 &gt; -1 and y1 &gt; -1 then
				map[ml[mcx,mcy], x1,y1] = edittile
			end if
		End If
		
		drawtile(x1,y1,edittile, msx, msy)
		
		setColor 255,0,0
		drawFrame x1* tileWidth +msx,y1* tileHeight +msy,31,31
		drawFrame x1* tileWidth +msx-1,y1* tileHeight +msy-1,33,33
	End If

	setalpha (sin(millisecs()*0.4)*0.5)+0.75
	drawplayer()
	setalpha 1

	If KeyDown(KEY_RIGHT) ' right
		msx = msx-3
	EndIf
	If KeyDown(KEY_LEFT)'left		
		msx = msx+3
	End If
	If KeyDown(KEY_UP)'up
		msy = msy+3
	End If
	If KeyDown(KEY_DOWN)'down
		msy = msy-3
	End If

End Function


' here we check if the player is
' at a border and if he can go to another map
' and set the start positions
Function switchmap()

	' touches the top part of the screen
	If py &lt; 5 And mcy&gt;0 
		If ml[mcx,mcy-1] &lt;&gt; -1
			mcy = mcy-1
			py = windowHeight-tileHeight-5
			msy=-(mapHeight*tileHeight-GraphicsHeight())
		End If
	End If

	' touches the left side of the screen
	If px&lt;5 And mcx&gt;0 
		If ml[mcx-1,mcy] &lt;&gt;-1
			mcx = mcx - 1
			px = windowWidth-5-pw			
			msx = -(mapWidth*tileWidth - GraphicsWidth())
		End If		
	End If

	' touches the right side of the screen
	If px+pw&gt;GraphicsWidth()-4 And mcx&lt;2
		If ml[mcx+1,mcy] &lt;&gt; -1
			mcx=mcx+1
			px = 5
			msx=0
		End If
	End If

	' touches the bottom of the screen
	If py+ph&gt;GraphicsHeight()-5 And mcy&lt;2
		If ml[mcx,mcy+1] &lt;&gt;-1
			mcy=mcy+1
			py = 5
			msy=0
		End If
	End If
End Function




Function centermap()
	If px&lt;GraphicsWidth()/3 And Abs(msx)&gt;0 Then
		msx=msx+1
		px=px+1
	end if
	If py&lt;GraphicsHeight()/3 And Abs(msy)&gt;0 Then
		msy=msy+1
		py=py+1
	end if
	If px&gt;GraphicsWidth()/100*66
		If (Abs(msx)+GraphicsWidth()) &lt; mapWidth*tileWidth then
			msx=msx-1
			px=px-1
		End If
	End If
	If py&gt;GraphicsHeight()/100*66
		If (Abs(msy)+GraphicsHeight()) &lt; mapHeight*tileHeight then
			msy=msy-1
			py=py-1
		End If
	End If	
End Function



Function moveplayer()
	Local x:int = 0
	Local y:int = 0
	If KeyDown(KEY_UP) ' up
		y = -1
	End If
	If KeyDown(KEY_RIGHT) ' right
		x = 1
	End If
	If KeyDown(KEY_DOWN) ' down
		y = 1
	End If
	If KeyDown(KEY_LEFT) ' left
		x = -1
	End If
	
	If px+x &lt; 0 Then x = 0
	If px+pw+x &gt; GraphicsWidth() Then x = 0
	If py+y &lt; 0 Then y = 0
	If py+ph+y &gt; GraphicsHeight() Then y = 0
	
	local nx:int
	local ny:int
	local collide:int
	
	if x &lt;&gt; 0 then
		nx = (px + Abs(msx)) + x
		ny = (py + Abs(msy))
		collide = playermapcollision(nx, ny, x,0)
		if collide = MAP_NONE then
			px = px+x
		else if collide = MAP_WATER and rand(0,100) &lt; 40 then
			px = px+x
		End If
	end if
	
	if y &lt;&gt; 0 then
		nx = (px + Abs(msx))
		ny = (py + Abs(msy)) + y
		collide = playermapcollision(nx, ny, 0,y)
		if collide = MAP_NONE then
			py = py+y
		else if collide = MAP_WATER and rand(0,100) &lt; 40 then
			py = py+y
		End If
	end if

End Function



function getTileHit:int(mapTile:int)
	if mapTile = MAP_WALL or mapTile = MAP_DEEPWATER or mapTile = MAP_TREE or mapTile = MAP_ROCK or mapTile = MAP_WATERFALL or..
		 mapTile = MAP_ROOF or mapTile = MAP_TREE2 or mapTile = MAP_FENCE or mapTile = MAP_CLIFF then
			if ignoreWalls then
				return MAP_NONE
			else
				return MAP_WALL
			end if
	end if
	if mapTile = MAP_WATER or mapTile = MAP_GRASS or mapTile = MAP_LADDER then return MAP_WATER

	if mapTile = MAP_BOULDER then return MAP_BOULDER
	if mapTile = MAP_WATERBOULDER then return MAP_WATERBOULDER
	
	return MAP_NONE
end function

function checkBoulder:int(cx:int, cy:int, x:int, y:int)
	local static:int = false
	
	local mapHit:int = getTileHit(map[ml[mcx,mcy], cx,cy])
	local nextHit:int = getTileHit(map[ml[mcx,mcy], cx+x,cy+y])

	if mapHit = MAP_BOULDER then
		
		if map[ml[mcx,mcy], cx+x,cy+y] = MAP_HOLE then
			map[ml[mcx,mcy], cx+x,cy+y] = MAP_FLOWERS
		else if map[ml[mcx,mcy], cx+x,cy+y] = MAP_WATER then
			map[ml[mcx,mcy], cx+x,cy+y] = MAP_WATERBOULDER
		else if map[ml[mcx,mcy], cx+x,cy+y] = MAP_WATERBOULDER then
			return true
		else
			map[ml[mcx,mcy], cx+x,cy+y] = MAP_BOULDER
		end if
		map[ml[mcx,mcy], cx,cy] = MAP_NONE

		if nextHit &lt;&gt; MAP_NONE then
			return true
		end if
	end if
	
	return static
end function
 
function positionCollide:int(x:int, y:int, xdir:int,ydir:int)
	Local cx:int = x/tileWidth
	Local cy:int = y/tileHeight
	if cx &gt;= mapWidth or cy &gt;= mapHeight then return 

	local mapTile:int = map[ml[mcx,mcy], cx,cy]
	local mapHit:int = getTileHit(mapTile)

	'deal with pushing a boulder - we also check if it has hit something or changed here too
	if mapHit = MAP_BOULDER then
		local static:int = true
		if xdir &lt; 0 then
			if cx &gt; 0 then
				static = checkBoulder(cx, cy, -1, 0)
			end if
		else if xdir &gt; 0 then
			if cx &lt; mapWidth-2 then
				static = checkBoulder(cx, cy, 1, 0)
			end if
		end if

		if ydir &lt; 0 then
			if cy &gt; 0 then
				static = checkBoulder(cx, cy, 0, -1)
			end if
		else if ydir &gt; 0 then
			if cy &lt; mapHeight-2 then
				static = checkBoulder(cx, cy, 0, 1)
			end if
		end if

		if static then
			return MAP_WALL
		else		 
			return MAP_NONE
		end if
		
	else if mapHit &lt;&gt; MAP_NONE then
		return mapHit
	end if

	If mapTile = MAP_GOLD then
		gold :+ 1
		map[ml[mcx,mcy], cx,cy] = MAP_NONE
	else if mapTile = MAP_DOOR then
		If keys &gt; 0 then
			keys :- 1
			map[ml[mcx,mcy], cx,cy] = MAP_NONE
		else
			return MAP_WALL	
		End If
	else if mapTile = MAP_KEY then
		keys :+ 1
		totalkeys :- 1
		map[ml[mcx,mcy], cx,cy] = MAP_NONE
	end if
	
	' no collision occured
	Return MAP_NONE
end function
	
	
Function playermapcollision(x:int, y:int, xd:int, yd:int)
	local c1:int = positionCollide(x, y, xd,yd)
	local c2:int = positionCollide(x+26, y, xd,yd)
	local c3:int = positionCollide(x+26, y+26, xd,yd)
	local c4:int = positionCollide(x, y+26, xd,yd)

	if c1 = MAP_WALL or c2 = MAP_WALL or c3 = MAP_WALL or c4 = MAP_WALL then return MAP_WALL
	if c1 = MAP_WATER or c2 = MAP_WATER or c3 = MAP_WATER or c4 = MAP_WATER then return MAP_WATER
	
	return MAP_NONE
End Function



'map 0
defdata 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,2,2,4,2,2,2,0,0,0,0,3,3
defdata 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,2,2,2,2,0,0,0,0,0,0,3,3
defdata 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,2,2,0,0,0,0,0,0,3,3,3,3
defdata 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3
defdata 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3
defdata 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3
defdata 0,0,0,0,0,0,0,0,0,0,0,0,2,2,4,2,2,2,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1
defdata 0,0,0,0,0,0,0,2,2,2,2,2,4,4,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1
defdata 0,0,0,0,0,0,2,4,4,4,4,4,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1
defdata 0,0,0,0,0,2,4,4,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1
defdata 0,0,0,2,2,4,4,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,8,0,1,1,1,1,1,1,1
defdata 2,2,2,4,4,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,1,1,1,1,1,1,1
defdata 4,4,4,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,1,0,1,1,1,1,1
defdata 2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0,0,1,1,1,1,1
defdata 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,1,0,1,1,1
defdata 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,1,1,1,0
defdata 0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,3,3,0,0,0,1,1,0,0
defdata 0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0
defdata 0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0
defdata 0,0,0,0,0,1,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0
defdata 0,0,0,1,1,1,1,1,1,1,0,0,0,0,1,9,9,9,1,0,0,0,0,3,3,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0
defdata 0,0,0,1,0,0,0,9,9,1,0,0,0,0,1,9,9,9,1,0,0,0,0,3,3,3,0,0,0,0,3,3,3,3,3,0,0,0,0,0
defdata 0,0,0,1,0,0,0,0,0,1,0,0,0,0,1,0,0,0,1,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0
defdata 0,0,0,1,0,0,0,0,0,1,0,0,0,0,1,0,0,0,1,0,0,0,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0
defdata 0,0,0,1,0,0,0,0,0,1,0,0,1,1,1,1,1,7,1,0,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0
defdata 0,0,0,1,0,0,0,0,0,7,0,0,7,0,0,0,0,0,1,0,0,0,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0
defdata 0,0,0,1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,0,0,0,0,0
defdata 0,0,0,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,8,2,2,4,4,2,2,0,0,0,0
defdata 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,4,4,4,2,0,2,0,0,0,0
defdata 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,4,4,2,2,2,2,2,0,0,0,0
'map 1
defdata 3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1
defdata 3,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1
defdata 3,3,1,0,9,9,1,0,0,0,3,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1
defdata 3,3,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1
defdata 3,0,1,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1
defdata 3,0,1,1,7,1,0,0,0,0,0,0,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1
defdata 0,0,0,0,0,0,0,0,0,0,2,2,2,4,4,2,2,0,0,0,2,2,2,2,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1
defdata 0,1,0,0,0,0,0,0,0,2,2,4,2,2,2,2,2,0,0,0,2,2,2,2,0,0,0,0,3,0,0,0,0,0,0,1,1,1,1,1
defdata 1,1,1,0,0,0,0,0,2,2,4,2,2,0,0,0,0,0,0,0,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0
defdata 0,1,0,0,0,2,2,2,2,2,2,2,0,0,0,0,0,0,0,0,2,2,0,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0
defdata 0,0,0,0,0,2,4,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0
defdata 0,1,0,0,0,2,4,4,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0
defdata 1,1,1,0,0,2,2,4,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,2,2,2,2,2,0,0,0,0,0,3,3,3,0,0,0
defdata 0,1,0,0,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,4,2,2,2,2,0,0,0,0,0,0,3,3,0,0
defdata 0,0,0,2,4,4,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,4,4,4,4,2,0,2,0,0,0,0,0,0,3,0,0
defdata 0,0,0,2,4,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,4,4,4,4,2,2,2,0,0,0,0,0,0,0,0
defdata 0,0,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,2,2,4,2,2,2,0,2,0,0,0,0,0,0,0,0
defdata 0,2,2,2,2,8,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,2,2,2,2,0,2,2,2,0,0,0,0,0,0,0,0,0
defdata 2,2,2,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0
defdata 2,2,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
defdata 2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0
defdata 2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
defdata 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
defdata 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
defdata 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1
defdata 0,0,0,3,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,1,1
defdata 0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,0,1,1,1,1,1
defdata 0,0,0,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1
defdata 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1
defdata 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1
'map 2
defdata 3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3
defdata 3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3
defdata 3,3,3,3,3,3,0,0,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,3,3,3
defdata 3,3,3,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,3,3,3,0,3,3,3,0,3,3,0,0,0,0,0,0,0,3,3,3
defdata 3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,3,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,3,3,3
defdata 3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,0,3,3,3
defdata 3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,4,4,4,2,0,3,3,3
defdata 3,8,0,0,0,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,0,3,3,3
defdata 3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,3,3
defdata 3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
defdata 3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
defdata 1,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,3,3
defdata 1,1,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,3,3
defdata 1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,3,3
defdata 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,3,3
defdata 0,0,1,0,0,0,0,0,0,0,0,0,0,1,7,1,1,1,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,3,3
defdata 0,0,1,1,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
defdata 0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,9,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
defdata 0,0,0,0,0,0,0,0,0,0,0,0,0,1,9,9,9,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
defdata 0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
defdata 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0,0,3
defdata 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,3
defdata 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,3,3,0,0,0,0,0,3
defdata 0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,0,0,0,0,0,0,0,3
defdata 0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3
defdata 0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,3,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
defdata 3,3,3,0,0,0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
defdata 3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
defdata 3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3,3,3
defdata 3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3
'.level4
defdata 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3
defdata 1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3
defdata 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3
defdata 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3,3
defdata 3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3
defdata 3,0,0,1,1,1,7,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3
defdata 3,0,0,1,9,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
defdata 3,0,0,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,7,1,1,1,1,0,0,3
defdata 3,0,0,1,0,0,0,0,0,0,0,9,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,9,1,0,0,3
defdata 3,0,0,1,0,0,0,1,1,1,1,1,1,7,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,9,1,0,0,3
defdata 3,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,3
defdata 3,0,0,1,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,3
defdata 3,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,7,1,1,1,1,0,0,3
defdata 3,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3
defdata 3,0,0,1,0,0,1,0,0,1,0,0,0,0,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3
defdata 3,0,0,7,0,0,1,1,1,1,0,0,0,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3
defdata 3,0,0,1,0,0,1,0,0,0,0,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,3
defdata 3,0,0,1,0,9,1,0,0,0,3,3,3,3,3,3,3,8,0,0,0,3,3,3,0,3,0,0,0,0,0,0,3,3,3,3,3,3,3,3
defdata 3,0,0,1,1,1,1,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,3,3,8,3,3,3,3,3
defdata 3,0,0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,3,3,3,3,3
defdata 3,0,0,0,0,0,0,0,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0,0,3,3,3,3,3
defdata 3,0,0,0,0,0,0,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,3,0,0,0,0,0,0,0,0,3,0,3,3
defdata 3,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,3,3
defdata 3,3,0,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3
defdata 3,3,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3
defdata 3,3,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3
defdata 3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,2,2,2,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3
defdata 3,3,3,0,0,0,0,0,0,0,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0,2,2,2,2
defdata 3,3,3,0,0,0,0,0,2,2,2,2,2,2,0,2,2,2,2,2,0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2
defdata 2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2
'.level5
defdata 3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0
defdata 3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0
defdata 3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
defdata 3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0
defdata 3,3,3,3,0,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
defdata 3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
defdata 3,3,3,3,3,3,3,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0
defdata 3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0
defdata 3,3,3,3,3,3,0,3,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0
defdata 3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
defdata 3,3,0,3,3,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
defdata 3,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,3,0,0,0,0,0,0,0,0,0,0,0,0
defdata 3,3,0,0,0,0,1,1,1,0,0,0,0,0,3,0,0,0,0,7,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
defdata 3,3,0,0,0,0,7,0,1,0,0,0,0,3,0,0,0,0,0,1,0,0,0,0,8,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
defdata 3,3,0,0,0,0,1,9,1,0,0,0,0,3,0,0,0,0,0,1,0,0,0,0,8,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
defdata 3,3,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,1,9,9,8,8,8,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
defdata 3,3,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,1,1,1,1,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0
defdata 3,3,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
defdata 3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0
defdata 2,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
defdata 2,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
defdata 2,2,3,3,0,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0
defdata 2,2,2,3,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0,0
defdata 2,2,2,3,3,3,0,2,2,2,2,0,2,0,0,0,0,0,0,0,0,0,0,0,0,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0
defdata 2,2,2,3,3,2,0,2,2,2,2,2,2,2,2,2,2,2,2,2,0,0,0,0,0,0,0,3,3,3,0,0,0,0,0,0,0,0,0,0
defdata 2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,0,0,3,3,0,0,3,3,3,3,0,0,0,0,0,0,0,0
defdata 2,2,4,4,4,4,4,4,2,2,2,2,2,2,4,4,4,2,2,2,2,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0
defdata 2,0,2,4,4,4,4,2,4,4,4,4,4,4,4,4,4,4,4,4,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,0,0,0,0,0
defdata 2,2,4,4,4,4,4,4,4,4,2,2,4,4,4,4,4,4,4,4,4,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3
defeat 2,2,4,4,4,4,4,4,4,2,2,2,2,2,4,4,4,4,4,4,4,4,4,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3
</textarea> <br><br></td></tr></table><br><table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Dan</td><td align="right"><font class=tiny>2016</font></td></tr></table></td></tr><tr ><td class="posttext"> Adam, why is the last defdata in your code written as defeat ? <br><br></td></tr></table><br><table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >Guy Fawkes</td><td align="right"><font class=tiny>2016</font></td></tr></table></td></tr><tr ><td class="posttext"> This is INCREDIBLE, Adam! =) While I work on the translation for B3D, would you mind adding a sprite sheet loader so we can start decorating up the landscape? =)<br><br>Thanks a ton guys! Look forward to seeing more updates! =) I'll keep you posted on my end as well! =)<br><br>~GF <br><br></td></tr></table><br><table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamStrange</td><td align="right"><font class=tiny>2016</font></td></tr></table></td></tr><tr ><td class="posttext"> the defeat is really interesting as my source has got it as defdata. it might be the autocorrect as I copy it over - i'll keep an eye out for it :) <br><br></td></tr></table><br><table width=100% cellspacing=0 cellpadding=0><tr ><td class="posthead"><table width=100% cellspacing=0 cellpadding=0><tr ><td >AdamStrange</td><td align="right"><font class=tiny>2016</font></td></tr></table></td></tr><tr ><td class="posttext"> ok, the code is too big, so i'm going to split it into 2<br><br>part 1:<br><textarea class=codebox name="code" wrap=OFF readonly="true" rows="15" cols="80">

strict

'window setup
global windowWidth:int = 640
global windowHeight:int = 480

Graphics windowWidth, windowHeight


const MAP_NONE = 0
const MAP_WALL = 1
const MAP_WATER = 2
const MAP_TREE = 3
const MAP_DEEPWATER = 4
const MAP_ROCK = 5
const MAP_ROAD = 6
const MAP_DOOR = 7
const MAP_KEY = 8
const MAP_GOLD = 9
const MAP_GRASS = 10
const MAP_STONE = 11
const MAP_BRIDGE = 12
const MAP_BRIDGEV = 13
const MAP_ROOF = 14
const MAP_DARKGRASS = 15
const MAP_TREE2 = 16
const MAP_FENCE = 17
const MAP_LADDER = 18
const MAP_CLIFF = 19
const MAP_FLOWERS = 20
const MAP_HOLE = 21
const MAP_GRAVE = 22
const MAP_WATERFALL = 23
const MAP_SWORD = 24
const MAP_SHIELD = 25
const MAP_HEART = 26
const MAP_BOULDER = 27
const MAP_WATERBOULDER = 28



Global editmode:int = False
Global edittile:int 

Global mapEditmode:int = False

Global keys:int = 0
global totalKeys:int = 0
Global gold:int = 0
global totalgold:int = 0


' map variables
Global mapWidth:int = 40
Global mapHeight:int = 30
Global tileWidth:int = 32
Global tileHeight:int = 32
global displayWidth:int = windowWidth / tileWidth
global displayHeight:int = windowHeight / tileHeight

global xLevelMax:int = 5
global yLevelMax:int = 5
global totalLevels:int = xLevelMax * yLevelMax

print "totalLevels="+totalLevels

Global numlevels:int = 5

global map:int[totalLevels, mapWidth, mapHeight]

' player variables
Global pw = (tileWidth-5)
Global ph = (tileHeight-5)
Global px = GraphicsWidth()/2- tileWidth/2
Global py = GraphicsHeight()/2-tileHeight/2

' scrolling variables
Global mx
Global my
Global msx = 0
Global msy
'temporary vars for editing
Global tempmx
Global tempmy
Global tempmsx
Global tempmsy
Global tempmcx
Global tempmcy

global ignoreWalls:int = false

' for the multi map
'
' this is a mdimensional array
' the player location on the multi map
' is mcx (map cursor x)
' it starts at 1,1, the center of the 
' multidimensional array
'
Global mcx=1
Global mcy=1

global ml:int[xLevelMax, yLevelMax]




setblend alphablend

readlevels()
'makemaps()

'.mainloop
While KeyDown(1) = False and not(AppTerminate())
	Cls	
	If KeyHit(KEY_W) then
		ignoreWalls = not(ignoreWalls)
	end if
	
	if keyhit(KEY_M) then
		mapEditMode = not(mapEditMode)
		if not(mapEditMode) then saveLevels()
	end if
	
	If KeyHit(KEY_E) then
		If editmode = True Then
			editmode = False
			saveLevels()
			mx = tempmx
			my = tempmy
			msx = tempmsx
			msy = tempmsy
			mcx = tempmcx
			mcy = tempmcy
		Else
			editmode = True
			tempmx = mx
			tempmy = my
			tempmsx = msx
			tempmsy = msy
			tempmcx = mcx
			tempmcy = mcy
		end if
	EndIf
	
	edit()
	mapEdit()
	
	If editmode = False and mapEditMode = false
		local i:int
		For i=0 To 4 'speed of movement
			moveplayer
			centermap
			switchmap()
		Next
		
		drawmap(ml[mcx,mcy], msx,msy)
		
		setalpha 0.2
		setcolor 0,0,0
		drawrect 0,0,640,30
		setalpha 1
		
		drawplayer()
		
		setColor 0,0,0
		drawText "Use cursors to move around",1,1
		drawText "cursor : " + mcx +","+mcy+" on map : "+chr(ml[mcx,mcy]+65), 1,16
		drawText "gold:"+gold+" of "+totalgold+"   keys:"+keys+" of "+totalkeys+"    w: ignore walls", 241,1
		drawText "e: edit mode    m: map overview", 241,16
		setColor 240,240,150
		drawText "Use cursors to move around",0,0
		drawText "cursor : " + mcx +","+mcy+" on map : "+chr(ml[mcx,mcy]+65), 0,15
		drawText "gold:"+gold+" of "+totalgold+"   keys:"+keys+" of "+totalkeys+"    w: ignore walls", 240,0
		drawText "e: edit mode    m: map overview", 240,15
	End If
	
	delay 10
	Flip
Wend

saveLevels()
End


function saveLevels()
	local file:TStream = writefile("default.map")

	if not file then
		print "failed to create default.map file" 
	else
		local x:int
		local y:int
		local x1:int
		local y1:int
		
		for y = 0 to yLevelMax-1
			for x = 0 to xLevelMax-1
				writebyte file, ml[x,y] &amp; 255
				
				For y1 = 0 To mapHeight-1
					For x1 = 0 To mapWidth-1
						writebyte file, map[ml[x,y], x1,y1] &amp; 255
					Next
				Next
				
			next
		next
		closestream file
	end if
end function



Function readlevels()
	local file:TStream
	file = openfile("default.map")
	if file then
		print "opening file"

		local x:int
		local y:int
		local x1:int
		local y1:int
		
		for y = 0 to yLevelMax-1
			for x = 0 to xLevelMax-1
				ml[x, y] = readbyte(file)
				
				For y1 = 0 To mapHeight-1
					For x1 = 0 To mapWidth-1
						map[ml[x,y], x1,y1] = readbyte(file)
					Next
				Next
				
			next
		next
		closestream file

	else
		print "could not open file default.map"
		local i:int
		local x:int
		local y:int
		local tile:int
		
		'read inbuilt map data
		print numlevels
		For i=0 To numlevels-1
			For y=0 To mapHeight-1
				For x=0 To mapWidth-1
					Readdata tile
					map[i, x,y] = tile
					if tile = MAP_GOLD then totalgold :+ 1
					if tile = MAP_KEY then totalkeys :+ 1
				Next
			Next
		Next

		'null all level data
		For y=0 To yLevelMax-1
			For x=0 To xLevelMax-1
				ml[x, y] = -1
			next
		next

		'create new level data
		'corner maps -1 non existant
		ml[0,0]=-1
		ml[2,0]=-1
		ml[0,2]=-1
		ml[2,2]=-1
		' the maps assigned
		ml[1,0]=1
		ml[1,1]=0
		ml[1,2]=3
		ml[2,1]=2
		ml[0,1]=4
	end if

End Function


Function drawmap(level:int, xo:int, yo:int)
	local xs:int = -xo/mapWidth
	local ys:int = (-yo/mapHeight)-1
	if ys &lt; 0 then ys = 0
	if xs &lt; 0 then xs = 0

	local xe:int = xs+displayWidth + 4
	local ye:int = ys+displayHeight + 1
	
	if xe =&gt; mapWidth then xe = mapWidth-1
	if ye =&gt; mapHeight then ye = mapHeight-1
	
	local x:int
	local y:int	
	
	For y = ys To ye
		For x = xs To xe
			drawtile(x,y, map[level,x,y], xo,yo)
		Next
	Next
End Function



Function drawplayer()
	if ignoreWalls then 
		setColor 200,130,10
		drawOval px,py,pw,ph
		setcolor 250,250,250
		drawtext "ignore", px, py
	else
		setColor 230,230,100
		drawOval px,py,pw,ph
	end if
End Function


'triangle must be clockwise. or it won't draw
Function DrawTriangle(x1:Float,y1:Float, x2:Float,y2:Float, x3:Float,y3:Float, r1:Float, g1:Float, b1:Float, alpha:float)
'	glDisable(GL_TEXTURE_2D)
	
	glColor4f(r1, g1, b1, alpha)

	glBegin(GL_TRIANGLES)
	
		glVertex2f(x1,y1)
		glVertex2f(x2,y2)
		glVertex2f(x3,y3)

	glEnd()

'	glEnable(GL_TEXTURE_2D)
End Function


function drawFlower(x:int, y:int)
		setcolor 255,255,200
		drawline x,y+1,x+2, y+1
		drawline x+1,y,x+1, y+2
		
		setColor 150,100,0
		plot x+1, y+1
end function


function drawScreenTile(tile:int, x1:int, y1:int, Width:int, Height:int)
	local x4:int = x1 + Width-1
	local y4:int = y1 + Height-1
	
	local drawWater:int = false
	
	Select tile
		Case MAP_NONE 'base grass
			setColor 60,100,0
			drawRect x1,y1,Width,Height

			drawWater = true
			
		case MAP_SWORD	
			setColor 60,100,0
			drawRect x1,y1,Width,Height
			
			local x2:int = x1 + (width * 0.5)
			local h2:int = Height - 10
			local y2:int = y1+h2
			
			setcolor 160,160,160
			drawline x2,y1, x2,y1+h2
			setcolor 150,150,150
			drawline x2-1,y1+2, x2-1,y1+h2
			drawline x2-2,y1+6, x2-2,y1+h2
			setcolor 130,130,130
			drawline x2+1,y1+2, x2+1,y1+h2
			drawline x2+2,y1+6, x2+2,y1+h2

			setcolor 90,40,00
			drawrect x2-2,y2+4, 5,4

			setcolor 190,130,50
			drawrect x2-6,y2, 13,4

			setcolor 150,70,20
			drawoval x2-2,y2+6, 4,4
			
		case MAP_SHIELD
			setColor 60,100,0
			drawRect x1,y1,Width,Height

			setcolor 150,150,150

		case MAP_HEART
			setColor 60,100,0
			drawRect x1,y1,Width,Height

		Case MAP_GRAVE
			setColor 60,100,0
			drawRect x1,y1,Width,Height
			
			setcolor 150,150,150
			drawoval x1+5, y1+2, 15,10

			setcolor 130,130,130
			drawoval x1+5, y1+4, 15,10
			drawrect x1+5, y1+8, 15,6
			setcolor 120,120,120
			drawrect x1+5, y1+10, 15,6

			setColor 114,42,10
			drawrect x1+7, y1+16, 12,16
			setColor 104,32,0
			drawrect x1+13, y1+16, 6,16
						
		Case MAP_HOLE
			setColor 60,100,0
			drawRect x1,y1,Width,Height

			setColor 60,150,0
			drawoval x1, y1+4, Width, Height*0.6
			setColor 114,42,10
			drawoval x1, y1+5, Width, Height*0.6
			setColor 50,30,10
			drawoval x1, y1+8, Width, Height*0.6
			setColor 0,0,0
			drawoval x1, y1+12, Width, Height*0.4
			

		Case MAP_FLOWERS
			setColor 60,100,0
			drawRect x1,y1,Width,Height
			
			setcolor 200,150,120
			drawFlower(x1+3, y1+3)
			drawFlower(x1+8, y4-15)
			drawFlower(x1+12, y1+20)
			drawFlower(x4-12, y4-17)

		Case MAP_STONE
			setColor 101,93,94
			drawRect x1,y1,tileWidth,tileHeight

			setColor 90,83,84
			drawWater = true

		Case MAP_ROOF
			setColor 160,13,20
			drawRect x1,y1,tileWidth,tileHeight

			local xx:int
			local yy:int

			setColor 160,43,60
			drawrect x1,y1,tileWidth, 2

			setColor 100,0,0
			drawrect x1,y4-2,tileWidth,2

			setColor 140,0,0
			for yy = y1 to y4 step 4
				drawline x1, yy, x4, yy
			next
			
			setColor 80,50,20
			for xx = x1 to x4 step 6
				drawline xx,y1, xx, y4
			next
			

		Case MAP_BRIDGE
			setColor 120,51,20
			drawRect x1,y1,tileWidth,tileHeight

			local x2:int = x1 + (tileWidth*0.3)
			local x3:int = x1 + (tileWidth*0.7)
			local y3:int = y1 + (tileHeight-2)
			local xx:int

			setColor 80,50,20
			for xx = x1 to x4 step 6
				drawline xx,y1, xx, y4
			next
			
			setColor 30,100,245
			drawline x1,y1, x2,y1
			drawline x3,y1, x4,y1
			drawline x2,y4, x3,y4

			setColor 00,50,200
			drawline x1,y4, x2,y4
			drawline x3,y4, x4,y4
			drawline x2,y3, x3,y3

		Case MAP_BRIDGEV
			setColor 120,51,20
			drawRect x1,y1,tileWidth,tileHeight

			local yy:int

			setColor 80,50,20
			for yy = y1 to y4 step 6
				drawline x1,yy, x4,yy
			next
			
		Case MAP_DARKGRASS
			setColor 40,80,0
			drawRect x1,y1,tileWidth,tileHeight

			setColor 60,100,0
			drawWater = true
			
		Case MAP_FENCE
			setColor 60,100,0
			drawRect x1,y1,tileWidth,tileHeight
			
			local y2:int = y1+(tileHeight* 0.25)
			local y3:int = y1+(tileHeight* 0.5)
			local y5:int = y1+(tileHeight* 0.75)
			
			setcolor 180,180,180
			drawRect x1,y2,tileWidth,4
			drawRect x1,y3,tileWidth,4
			drawRect x1,y5,tileWidth,4
			setcolor 210,210,210
			drawLine x1,y2, x4,y2
			drawLine x1,y3, x4,y3
			drawLine x1,y5, x4,y5

			local x2:int = x1+(tileWidth* 0.23)
			local x3:int = x1+(tileWidth* 0.68)

			setcolor 150,150,150
			drawRect x2+4,y1+2,1,tileHeight-4
			drawRect x3+4,y1+2,1,tileHeight-4
			setcolor 170,170,170
			drawRect x2,y1+2,4,tileHeight-4
			drawRect x3,y1+2,4,tileHeight-4
			setcolor 210,210,210
			drawRect x2,y1+2,5,2
			drawRect x3,y1+2,5,2
			
		Case MAP_LADDER
			setColor 114,42,10
			drawRect x1,y1,tileWidth,tileHeight

			local x2:int = x1+(tileWidth* 0.23)
			local x3:int = x1+(tileWidth* 0.68)
			local y2:int = y1+1

			setColor 104,42,10
			drawRect x3,y1,10,tileHeight

			setColor 124,42,10
			drawRect x2,y1,5,tileHeight

			setColor 60,100,0
			drawLine x2,y1,x3,y1
			drawLine x1,y4,x2,y4
			drawLine x3,y4,x4,y4
			setColor 60,150,0
			drawLine x1,y1,x2,y1
			drawLine x3,y1,x4,y1
			drawLine x2,y2,x3,y2
			
			setcolor 200,200,150
			drawrect x2+2, y1, 2, tileHeight
			drawrect x3-2, y1, 2, tileHeight
			
			local yy:int
			for yy = y1+3 to y4 step 5
				drawrect x2, yy, 16, 2
			next
			
		Case MAP_CLIFF
			setColor 114,42,10
			drawRect x1,y1,tileWidth,tileHeight

			local x2:int = x1+(tileWidth* 0.23)
			local x3:int = x1+(tileWidth* 0.68)
			local y2:int = y1+1

			setColor 104,42,10
			drawRect x3,y1,10,tileHeight

			setColor 124,42,10
			drawRect x2,y1,5,tileHeight

			setColor 60,100,0
			drawLine x2,y1,x3,y1
			drawLine x1,y4,x2,y4
			drawLine x3,y4,x4,y4
			setColor 60,150,0
			drawLine x1,y1,x2,y1
			drawLine x3,y1,x4,y1
			drawLine x2,y2,x3,y2
			
		Case MAP_TREE2
			setColor 60,100,0
			drawRect x1,y1,tileWidth,tileHeight

			local x2:int = x1 + (tileWidth * 0.3)
			local x5:int = x1 + (tileWidth * 0.7)
			local x3:int = x1 + (tileWidth * 0.5)
			local y3:int = y1 - (tileHeight * 0.5)
			local y5:int = y4 - 6
			
			setColor 90,51,20
			drawRect x3-3,y5,6,6

			setColor 30,100,30
			drawOval x1, y1-20, tileWidth, tileHeight+13

			setColor 40,130,30
			drawOval x1, y1-20, tileWidth-7, tileHeight+13

			setColor 50,150,30
			drawOval x1+(tilewidth*0.1), y1-15, tileWidth*0.4, tileHeight
			
		Case MAP_TREE'tree
			setColor 60,100,0
			drawRect x1,y1,tileWidth,tileHeight

			local x2:int = x1 + (tileWidth * 0.3)
			local x5:int = x1 + (tileWidth * 0.7)
			local x3:int = x1 + (tileWidth * 0.5)
			local y3:int = y1 - (tileHeight * 0.5)
			local y5:int = y4 - 3

			drawTriangle(x1,y5, x3,y3, x4,y5, 0,0.5,0,1)
			drawTriangle(x1,y5, x3,y3, x2,y5, 0.1,0.6,0.1,1)
			drawTriangle(x5,y5, x3,y3, x4,y5, 0,0.4,0,1)

			setColor 90,51,20
			drawRect x3-3,y5,6,3
			
			setColor 0,50,0
			drawline x1,y5, x4, y5
			drawline x1,y5, x3, y3 
			drawline x4,y5, x3, y3 

		Case MAP_GRASS
			setColor 60,100,0
			drawRect x1,y1,tileWidth,tileHeight

			setColor 0,150,0
			local xx:int
			local yy:int
			for yy = y1 to y4 step 8
				for xx = x1 to x4 step 4
					drawline xx,yy, xx, yy-5
				next
			next 
			
		Case MAP_WALL
			setColor 140,140,140
			drawRect x1,y1,tileWidth,tileHeight

			setColor 100,100,100
			local x2:int = x1 + (tileWidth * 0.3)
			local x3:int = x1 + (tileWidth * 0.7)
			local y2:int = y1 + (tileHeight * 0.5)
			drawline x1,y1, x4,y1
			drawline x1,y2, x4,y2

			drawline x2,y1, x2,y2
			drawline x3,y2, x3,y4
			
		Case MAP_ROAD
			setColor 176,146,73
			drawRect x1,y1,tileWidth,tileHeight

			setColor 156,126,63
			drawWater = true
			
		Case MAP_WATER'water
			setColor 30,100,245
			drawRect x1,y1,tileWidth,tileHeight
			
			setColor 70,150,245
			drawWater = true

		Case MAP_WATERBOULDER
			setColor 30,100,245
			drawRect x1,y1,tileWidth,tileHeight
			
			setalpha 0.2
			setcolor 50,50,50
			drawoval x1,y1,width,height-2
			setalpha 1
			y1 :+ 5
			height :- 5

			setColor 140,80,60
			drawOval x1+2, y1, Width-6, Height-7

			setColor 170,100,70
			drawOval x1+2, y1, Width-10, Height-7
			
			setColor 70,150,245
			drawWater = true

		Case MAP_WATERFALL
			setColor 0,50,150
			drawRect x1,y1,tileWidth,tileHeight
			setColor 0,00,100
			drawRect x1,y4-5,tileWidth,5

			local x2:int = x1+(tileWidth* 0.23)
			local x3:int = x1+(tileWidth* 0.68)
			local y2:int = y1+1

			setColor 0,50,220
			drawRect x3,y1,10,tileHeight

			setColor 0,50,180
			drawRect x2,y1,5,tileHeight

			setColor 0,0,150
			drawLine x2,y1,x3,y1
			drawLine x1,y4,x2,y4
			drawLine x3,y4,x4,y4
			setColor 100,150,200
			drawLine x1,y1,x2,y1
			drawLine x3,y1,x4,y1
			drawLine x2,y2,x3,y2

			setColor 100,150,200
			drawLine x1+10,y1,x1+10,y1+10
			drawLine x1+6,y1,x1+6,y1+3
			drawLine x1+20,y1,x1+20,y1+5
			drawLine x1+26,y1,x1+26,y1+3
			drawLine x1+15,y1+10,x1+15,y1+20

			setColor 0,50,150
			drawLine x1+8,y4,x1+8,y4-10
			drawLine x1+17,y4,x1+17,y4-3
			drawLine x1+23,y4,x1+23,y4-5

'			setColor 50,130,215
'			drawWater = true

		Case MAP_DEEPWATER'deepwater
			setColor 00,50,200
			drawRect x1,y1,tileWidth,tileHeight

			setColor 50,130,215
			drawWater = true

		Case MAP_DOOR ' door
			setColor 120,50,20
			drawRect x1,y1,tileWidth,tileHeight
			
			setColor 100,60,30
			local xx:int
			local yy:int
			for xx = x1 to x4 step 4
				drawline xx,y1, xx, y4
			next

			setColor 210,120,70
			drawRect x1,y1,tileWidth,5

			setColor 100,60,30
			drawFrame(x1,y1,tileWidth-1,tileHeight-1)
			drawLine x1,y1+5,x4,y1+5

		Case MAP_KEY' key
			setColor 60,100,0
			drawRect x1,y1,tileWidth,tileHeight

			setColor 180,150,50
			drawrect x1,y1+15,tileWidth, 5
			drawrect x4-4,y1+15, 4,10
			setColor 140,110,30
			drawrect x1,y1+19,tileWidth, 1
			setColor 200,170,50
			drawrect x1,y1+16,tileWidth, 1

			setColor 140,110,30
			drawOval x1,y1+12,tileWidth*0.3, tileHeight*0.5
			setColor 200,170,50
			drawOval x1,y1+10,tileWidth*0.3, tileHeight*0.5

			setColor 60,100,0
			drawOval x1+3,y1+15,tileWidth*0.12, tileHeight*0.25
			
		Case MAP_ROCK
			setColor 60,100,0
			drawRect x1,y1,Width,Height
			
			setColor 50,50,50
			drawOval x1, y4-4, Width-4, 4

			drawOval x1, y1, Width-4, Height-4

			setColor 70,70,70
			drawOval x1, y1, Width-8, Height-4

			setColor 80,80,80
			drawOval x1, y1, Width*0.5, Height-10

		Case MAP_BOULDER
			setColor 60,100,0
			drawRect x1,y1,Width,Height
			
			setColor 50,80,50
			drawOval x1, y4-4, Width-4, 4
			
			y1 :+ 5
			height :- 5

			setColor 140,80,60
			drawOval x1, y1, Width-4, Height-4

			setColor 170,100,70
			drawOval x1, y1, Width-8, Height-4

			setColor 190,120,90
			drawOval x1+3, y1+2, Width*0.5, Height-12

		Case MAP_GOLD ' gold
			setColor 60,100,0
			drawRect x1,y1,Width,Height

			setColor 140,100,30
			drawOval x1, y4-10, Width*0.5, Height*0.3
			drawOval x1+15, y4-10, Width*0.5, Height*0.3
			setColor 230,200,0
			drawOval x1, y4-13, Width*0.5, Height*0.3
			drawOval x1+15, y4-13, Width*0.5, Height*0.3
			
			setColor 140,100,30
			drawOval x1+7, y4-17, Width*0.5, Height*0.3
			setColor 230,200,0
			drawOval x1+7, y4-20, Width*0.5, Height*0.3
	End Select
	
	if drawWater then
			local y2:int = y1 + (Height * 0.1)
			local x2:int = x1 + (Width * 0.3)
			drawline x1,y2,x2,y2
			y2 = y1 + (Height * 0.3)
			x2 = x1 + (Width * 0.4)
			local x3:int = x1 + (Width * 0.6)
			drawline x2,y2,x3,y2
			y2 = y1 + (Height * 0.6)
			x2 = x1 + (Width * 0.7)
			x3 = x1 + (Width * 0.9)
			drawline x2,y2,x3,y2
			y2 = y1 + (Height * 0.8)
			x2 = x1 + (Width * 0.2)
			x3 = x1 + (Width * 0.6)
			drawline x2,y2,x3,y2
	end if
end function

Function drawtile(x,y,t, xo:int = 0, yo:int = 0)
	local x1:int = (x*tileWidth) + xo
	local y1:int = (y*tileHeight) + yo

	drawScreenTile(t, x1, y1, tileWidth, tileHeight)
End Function



function rectsOverlap:int(x1,y1,w1,h1, x2,y2,w2,h2)
	w1 :+ x1
	h1 :+ y1
	w2 :+ x2
	h2 :+ y2
	
	if w1 &lt; x2 then return false
	if x1 &gt; w2 then return false

	if h1 &lt; y2 then return false
	if y1 &gt; h2 then return false
	
	return true
end function



function drawFrame(x:int, y:int, width:int, height:int)
	drawline x,y, x+width,y
	drawline x+width,y, x+width,y+height
	drawline x+width,y+height, x, y+height
	drawline x,y+height, x,y
end function
</textarea> <br><br></td></tr></table><br><a href="codearcs.php" >Code Archives Forum</a><table width=100% cellspacing=0 cellpadding=0><tr ><td align="right"><a href="http://monkeycoder.co.nz" target="_blank"><img src="/img/monkey2.svg" ></a> <a href="https://github.com/blitz-research" target="_blank"><img src="/img/github.svg" ></a> <a href="https://discord.gg/qJccbSp" target="_blank"><img src="/img/discord.svg" ></a></td></tr></table><br></div><br><table width="100%"><tr><td></body></html lang="en">
